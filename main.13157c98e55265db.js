(self.webpackChunkgenesis_test=self.webpackChunkgenesis_test||[]).push([[179],{954:(la,Js,ls)=>{"use strict";function Be(n){return"function"==typeof n}function us(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const he=us(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function J(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class O{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(Be(r))try{r()}catch(s){t=s instanceof he?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{W(s)}catch(o){t=null!=t?t:[],o instanceof he?t=[...t,...o.errors]:t.push(o)}}if(t)throw new he(t)}}add(t){var e;if(t&&t!==this)if(this.closed)W(t);else{if(t instanceof O){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&J(e,t)}remove(t){const{_finalizers:e}=this;e&&J(e,t),t instanceof O&&t._removeParent(this)}}O.EMPTY=(()=>{const n=new O;return n.closed=!0,n})();const z=O.EMPTY;function B(n){return n instanceof O||n&&"closed"in n&&Be(n.remove)&&Be(n.add)&&Be(n.unsubscribe)}function W(n){Be(n)?n():n.unsubscribe()}const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Y={setTimeout(n,t,...e){const{delegate:r}=Y;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Y;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function U(n){Y.setTimeout(()=>{const{onUnhandledError:t}=V;if(!t)throw n;t(n)})}function F(){}const L=D("C",void 0,void 0);function D(n,t,e){return{kind:n,value:t,error:e}}let x=null;function w(n){if(V.useDeprecatedSynchronousErrorHandling){const t=!x;if(t&&(x={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=x;if(x=null,e)throw r}}else n()}class g extends O{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,B(t)&&t.add(this)):this.destination=E}static create(t,e,r){return new C(t,e,r)}next(t){this.isStopped?A(function P(n){return D("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?A(function R(n){return D("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?A(L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const m=Function.prototype.bind;function h(n,t){return m.call(n,t)}class b{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){f(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){f(r)}else f(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){f(e)}}}class C extends g{constructor(t,e,r){let i;if(super(),Be(t)||!t)i={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=r?r:void 0};else{let s;this&&V.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&h(t.next,s),error:t.error&&h(t.error,s),complete:t.complete&&h(t.complete,s)}):i=t}this.destination=new b(i)}}function f(n){V.useDeprecatedSynchronousErrorHandling?function y(n){V.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=n)}(n):U(n)}function A(n,t){const{onStoppedNotification:e}=V;e&&Y.setTimeout(()=>e(n,t))}const E={closed:!0,next:F,error:function _(n){throw n},complete:F},T="function"==typeof Symbol&&Symbol.observable||"@@observable";function c(n){return n}let p=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){const s=function k(n){return n&&n instanceof g||function S(n){return n&&Be(n.next)&&Be(n.error)&&Be(n.complete)}(n)&&B(n)}(e)?e:new C(e,r,i);return w(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=M(r))((i,s)=>{const o=new C({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[T](){return this}pipe(...e){return function u(n){return 0===n.length?c:1===n.length?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}(e)(this)}toPromise(e){return new(e=M(e))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=t=>new n(t),n})();function M(n){var t;return null!==(t=null!=n?n:V.Promise)&&void 0!==t?t:Promise}const j=us(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let N=(()=>{class n extends p{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new G(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new j}next(e){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:s}=this;return r||i?z:(this.currentObservers=null,s.push(e),new O(()=>{this.currentObservers=null,J(s,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:s}=this;r?e.error(i):s&&e.complete()}asObservable(){const e=new p;return e.source=this,e}}return n.create=(t,e)=>new G(t,e),n})();class G extends N{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:z}}function K(n){return Be(null==n?void 0:n.lift)}function $(n){return t=>{if(K(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(n,t,e,r,i){return new te(n,t,e,r,i)}class te extends g{constructor(t,e,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function q(n,t){return $((e,r)=>{let i=0;e.subscribe(Z(r,s=>{r.next(n.call(t,s,i++))}))})}function Et(n){return this instanceof Et?(this.v=n,this):new Et(n)}function Dn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(n,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(X){r[X]&&(i[X]=function(Q){return new Promise(function(ee,ie){s.push([X,Q,ee,ie])>1||a(X,Q)})})}function a(X,Q){try{!function l(X){X.value instanceof Et?Promise.resolve(X.value.v).then(v,I):H(s[0][2],X)}(r[X](Q))}catch(ee){H(s[0][3],ee)}}function v(X){a("next",X)}function I(X){a("throw",X)}function H(X,Q){X(Q),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Zn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function dt(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(v){s({value:v,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Wn=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function kt(n){return Be(null==n?void 0:n.then)}function Tn(n){return Be(n[T])}function zn(n){return Symbol.asyncIterator&&Be(null==n?void 0:n[Symbol.asyncIterator])}function cs(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _i=function yi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ua(n){return Be(null==n?void 0:n[_i])}function ds(n){return Dn(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:i}=yield Et(e.read());if(i)return yield Et(void 0);yield yield Et(r)}}finally{e.releaseLock()}})}function kl(n){return Be(null==n?void 0:n.getReader)}function cn(n){if(n instanceof p)return n;if(null!=n){if(Tn(n))return function Td(n){return new p(t=>{const e=n[T]();if(Be(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Wn(n))return function Fl(n){return new p(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(kt(n))return function ca(n){return new p(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,U)})}(n);if(zn(n))return da(n);if(ua(n))return function Jn(n){return new p(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(kl(n))return function Nl(n){return da(ds(n))}(n)}throw cs(n)}function da(n){return new p(t=>{(function Sd(n,t){var e,r,i,s;return function lt(n,t,e,r){return new(e||(e=Promise))(function(s,o){function a(I){try{v(r.next(I))}catch(H){o(H)}}function l(I){try{v(r.throw(I))}catch(H){o(H)}}function v(I){I.done?s(I.value):function i(s){return s instanceof e?s:new e(function(o){o(s)})}(I.value).then(a,l)}v((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Zn(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function kr(n,t,e,r=0,i=!1){const s=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Kt(n,t,e=1/0){return Be(t)?Kt((r,i)=>q((s,o)=>t(r,s,i,o))(cn(n(r,i))),e):("number"==typeof t&&(e=t),$((r,i)=>function wd(n,t,e,r,i,s,o,a){const l=[];let v=0,I=0,H=!1;const X=()=>{H&&!l.length&&!v&&t.complete()},Q=ie=>v<r?ee(ie):l.push(ie),ee=ie=>{s&&t.next(ie),v++;let le=!1;cn(e(ie,I++)).subscribe(Z(t,de=>{null==i||i(de),s?Q(de):t.next(de)},()=>{le=!0},void 0,()=>{if(le)try{for(v--;l.length&&v<r;){const de=l.shift();o?kr(t,o,()=>ee(de)):ee(de)}X()}catch(de){t.error(de)}}))};return n.subscribe(Z(t,Q,()=>{H=!0,X()})),()=>{null==a||a()}}(r,i,n,e)))}function fs(n=1/0){return Kt(c,n)}const er=new p(n=>n.complete());function Bl(n){return n&&Be(n.schedule)}function xd(n){return n[n.length-1]}function Im(n){return Be(xd(n))?n.pop():void 0}function fa(n){return Bl(xd(n))?n.pop():void 0}function Rm(n,t=0){return $((e,r)=>{e.subscribe(Z(r,i=>kr(r,n,()=>r.next(i),t),()=>kr(r,n,()=>r.complete(),t),i=>kr(r,n,()=>r.error(i),t)))})}function Om(n,t=0){return $((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Pm(n,t){if(!n)throw new Error("Iterable cannot be null");return new p(e=>{kr(e,t,()=>{const r=n[Symbol.asyncIterator]();kr(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function gn(n,t){return t?function qw(n,t){if(null!=n){if(Tn(n))return function $w(n,t){return cn(n).pipe(Om(t),Rm(t))}(n,t);if(Wn(n))return function Xw(n,t){return new p(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(kt(n))return function Yw(n,t){return cn(n).pipe(Om(t),Rm(t))}(n,t);if(zn(n))return Pm(n,t);if(ua(n))return function Qw(n,t){return new p(e=>{let r;return kr(e,t,()=>{r=n[_i](),kr(e,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void e.error(o)}s?e.complete():e.next(i)},0,!0)}),()=>Be(null==r?void 0:r.return)&&r.return()})}(n,t);if(kl(n))return function Zw(n,t){return Pm(ds(n),t)}(n,t)}throw cs(n)}(n,t):cn(n)}function eo(...n){const t=fa(n),e=function zw(n,t){return"number"==typeof xd(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?cn(r[0]):fs(e)(gn(r,t)):er}function Lm(n={}){const{connector:t=(()=>new N),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,v=0,I=!1,H=!1;const X=()=>{null==a||a.unsubscribe(),a=void 0},Q=()=>{X(),o=l=void 0,I=H=!1},ee=()=>{const ie=o;Q(),null==ie||ie.unsubscribe()};return $((ie,le)=>{v++,!H&&!I&&X();const de=l=null!=l?l:t();le.add(()=>{v--,0===v&&!H&&!I&&(a=Id(ee,i))}),de.subscribe(le),!o&&v>0&&(o=new C({next:oe=>de.next(oe),error:oe=>{H=!0,X(),a=Id(Q,e,oe),de.error(oe)},complete:()=>{I=!0,X(),a=Id(Q,r),de.complete()}}),cn(ie).subscribe(o))})(s)}}function Id(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new C({next:()=>{r.unsubscribe(),n()}});return t(...e).subscribe(r)}function Ct(n){for(let t in n)if(n[t]===Ct)return t;throw Error("Could not find renamed property on target object.")}function Rd(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function vt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(vt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Od(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Jw=Ct({__forward_ref__:Ct});function It(n){return n.__forward_ref__=It,n.toString=function(){return vt(this())},n}function ze(n){return km(n)?n():n}function km(n){return"function"==typeof n&&n.hasOwnProperty(Jw)&&n.__forward_ref__===It}class Me extends Error{constructor(t,e){super(function Pd(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function Ve(n){return"string"==typeof n?n:null==n?"":String(n)}function mn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ve(n)}function Ul(n,t){const e=t?` in ${t}`:"";throw new Me(-201,`No provider for ${mn(n)} found${e}`)}function nr(n,t){null==n&&function yt(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function be(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ld(n){return Fm(n,Vl)||Fm(n,Bm)}function Fm(n,t){return n.hasOwnProperty(t)?n[t]:null}function Nm(n){return n&&(n.hasOwnProperty(kd)||n.hasOwnProperty(oA))?n[kd]:null}const Vl=Ct({\u0275prov:Ct}),kd=Ct({\u0275inj:Ct}),Bm=Ct({ngInjectableDef:Ct}),oA=Ct({ngInjectorDef:Ct});var Ue=(()=>((Ue=Ue||{})[Ue.Default=0]="Default",Ue[Ue.Host=1]="Host",Ue[Ue.Self=2]="Self",Ue[Ue.SkipSelf=4]="SkipSelf",Ue[Ue.Optional=8]="Optional",Ue))();let Fd;function Ui(n){const t=Fd;return Fd=n,t}function Um(n,t,e){const r=Ld(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Ue.Optional?null:void 0!==t?t:void Ul(vt(n),"Injector")}function Vi(n){return{toString:n}.toString()}var Fr=(()=>((Fr=Fr||{})[Fr.OnPush=0]="OnPush",Fr[Fr.Default=1]="Default",Fr))(),Nr=(()=>{return(n=Nr||(Nr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Nr;var n})();const lA="undefined"!=typeof globalThis&&globalThis,uA="undefined"!=typeof window&&window,cA="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt=lA||"undefined"!=typeof global&&global||uA||cA,to={},Tt=[],Hl=Ct({\u0275cmp:Ct}),Nd=Ct({\u0275dir:Ct}),Bd=Ct({\u0275pipe:Ct}),Vm=Ct({\u0275mod:Ct}),bi=Ct({\u0275fac:Ct}),ha=Ct({__NG_ELEMENT_ID__:Ct});let dA=0;function Ft(n){return Vi(()=>{const e={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Fr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Tt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Nr.Emulated,id:"c",styles:n.styles||Tt,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=dA++,r.inputs=Km(n.inputs,e),r.outputs=Km(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Hm):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(jm):null,r})}function Hm(n){return vn(n)||function Hi(n){return n[Nd]||null}(n)}function jm(n){return function hs(n){return n[Bd]||null}(n)}const Gm={};function ot(n){return Vi(()=>{const t={type:n.type,bootstrap:n.bootstrap||Tt,declarations:n.declarations||Tt,imports:n.imports||Tt,exports:n.exports||Tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Gm[n.id]=n.type),t})}function Km(n,t){if(null==n)return to;const e={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),e[i]=r,t&&(t[i]=s)}return e}const Oe=Ft;function $n(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function vn(n){return n[Hl]||null}function yr(n,t){const e=n[Vm]||null;if(!e&&!0===t)throw new Error(`Type ${vt(n)} does not have '\u0275mod' property.`);return e}function qr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ur(n){return Array.isArray(n)&&!0===n[1]}function Hd(n){return 0!=(8&n.flags)}function Wl(n){return 2==(2&n.flags)}function zl(n){return 1==(1&n.flags)}function Vr(n){return null!==n.template}function vA(n){return 0!=(512&n[2])}function vs(n,t){return n.hasOwnProperty(bi)?n[bi]:null}class EA{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Yn(){return zm}function zm(n){return n.type.prototype.ngOnChanges&&(n.setInput=DA),bA}function bA(){const n=Ym(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===to)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function DA(n,t,e,r){const i=Ym(n)||function CA(n,t){return n[$m]=t}(n,{previous:to,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[e],l=o[a];s[a]=new EA(l&&l.currentValue,t,o===to),n[r]=t}Yn.ngInherit=!0;const $m="__ngSimpleChanges__";function Ym(n){return n[$m]||null}let zd;function zt(n){return!!n.listen}const Xm={createRenderer:(n,t)=>function $d(){return void 0!==zd?zd:"undefined"!=typeof document?document:void 0}()};function qt(n){for(;Array.isArray(n);)n=n[0];return n}function $l(n,t){return qt(t[n])}function ir(n,t){return qt(t[n.index])}function Yd(n,t){return n.data[t]}function oo(n,t){return n[t]}function sr(n,t){const e=t[n];return qr(e)?e:e[0]}function Qm(n){return 4==(4&n[2])}function Xd(n){return 128==(128&n[2])}function ji(n,t){return null==t?null:n[t]}function Zm(n){n[18]=0}function Qd(n,t){n[5]+=t;let e=n,r=n[3];for(;null!==r&&(1===t&&1===e[5]||-1===t&&0===e[5]);)r[5]+=t,e=r,r=r[3]}const He={lFrame:ov(null),bindingsEnabled:!0};function Jm(){return He.bindingsEnabled}function pe(){return He.lFrame.lView}function ut(){return He.lFrame.tView}function Hr(n){return He.lFrame.contextLView=n,n[8]}function rn(){let n=ev();for(;null!==n&&64===n.type;)n=n.parent;return n}function ev(){return He.lFrame.currentTNode}function Jr(n,t){const e=He.lFrame;e.currentTNode=n,e.isParent=t}function Zd(){return He.lFrame.isParent}function qd(){He.lFrame.isParent=!1}function On(){const n=He.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function ao(){return He.lFrame.bindingIndex++}function Ci(n){const t=He.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function VA(n,t){const e=He.lFrame;e.bindingIndex=e.bindingRootIndex=n,Jd(t)}function Jd(n){He.lFrame.currentDirectiveIndex=n}function ef(n){const t=He.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function rv(){return He.lFrame.currentQueryIndex}function tf(n){He.lFrame.currentQueryIndex=n}function jA(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function iv(n,t,e){if(e&Ue.SkipSelf){let i=t,s=n;for(;!(i=i.parent,null!==i||e&Ue.Host||(i=jA(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;t=i,n=s}const r=He.lFrame=sv();return r.currentTNode=t,r.lView=n,!0}function Xl(n){const t=sv(),e=n[1];He.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function sv(){const n=He.lFrame,t=null===n?null:n.child;return null===t?ov(n):t}function ov(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function av(){const n=He.lFrame;return He.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const lv=av;function Ql(){const n=av();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pn(){return He.lFrame.selectedIndex}function Gi(n){He.lFrame.selectedIndex=n}function Ut(){const n=He.lFrame;return Yd(n.tView,n.selectedIndex)}function Ti(){He.lFrame.currentNamespace="svg"}function nf(){!function zA(){He.lFrame.currentNamespace=null}()}function Zl(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:v,ngOnDestroy:I}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-e,o),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),v&&((n.viewHooks||(n.viewHooks=[])).push(e,v),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,v)),null!=I&&(n.destroyHooks||(n.destroyHooks=[])).push(e,I)}}function ql(n,t,e){uv(n,t,3,e)}function Jl(n,t,e,r){(3&n[2])===e&&uv(n,t,e,r)}function rf(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function uv(n,t,e,r){const s=null!=r?r:-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(XA(n,e,t,l),n[18]=(4294901760&n[18])+l+2),l++}function XA(n,t,e,r){const i=e[r]<0,s=e[r+1],a=n[i?-e[r]:e[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ya{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function eu(n,t,e){const r=zt(n);let i=0;for(;i<e.length;){const s=e[i];if("number"==typeof s){if(0!==s)break;i++;const o=e[i++],a=e[i++],l=e[i++];r?n.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=e[++i];af(o)?r&&n.setProperty(t,o,a):r?n.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function cv(n){return 3===n||4===n||6===n}function af(n){return 64===n.charCodeAt(0)}function tu(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?e=i:0===e||dv(n,e,i,null,-1===e||2===e?t[++r]:null)}}return n}function dv(n,t,e,r,i){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function fv(n){return-1!==n}function lo(n){return 32767&n}function uo(n,t){let e=function eM(n){return n>>16}(n),r=t;for(;e>0;)r=r[15],e--;return r}let lf=!0;function nu(n){const t=lf;return lf=n,t}let tM=0;function Ea(n,t){const e=cf(n,t);if(-1!==e)return e;const r=t[1];r.firstCreatePass&&(n.injectorIndex=t.length,uf(r.data,n),uf(t,null),uf(r.blueprint,null));const i=ru(n,t),s=n.injectorIndex;if(fv(i)){const o=lo(i),a=uo(i,t),l=a[1].data;for(let v=0;v<8;v++)t[s+v]=a[o+v]|l[o+v]}return t[s+8]=i,s}function uf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function cf(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function ru(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(e++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return-1}function iu(n,t,e){!function nM(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(ha)&&(r=e[ha]),null==r&&(r=e[ha]=tM++);const i=255&r;t.data[n+(i>>5)]|=1<<i}(n,t,e)}function gv(n,t,e){if(e&Ue.Optional)return n;Ul(t,"NodeInjector")}function mv(n,t,e,r){if(e&Ue.Optional&&void 0===r&&(r=null),0==(e&(Ue.Self|Ue.Host))){const i=n[9],s=Ui(void 0);try{return i?i.get(t,r,e&Ue.Optional):Um(t,r,e&Ue.Optional)}finally{Ui(s)}}return gv(r,t,e)}function vv(n,t,e,r=Ue.Default,i){if(null!==n){const s=function oM(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(ha)?n[ha]:void 0;return"number"==typeof t?t>=0?255&t:iM:t}(e);if("function"==typeof s){if(!iv(t,n,r))return r&Ue.Host?gv(i,e,r):mv(t,e,r,i);try{const o=s(r);if(null!=o||r&Ue.Optional)return o;Ul(e)}finally{lv()}}else if("number"==typeof s){let o=null,a=cf(n,t),l=-1,v=r&Ue.Host?t[16][6]:null;for((-1===a||r&Ue.SkipSelf)&&(l=-1===a?ru(n,t):t[a+8],-1!==l&&Ev(r,!1)?(o=t[1],a=lo(l),t=uo(l,t)):a=-1);-1!==a;){const I=t[1];if(_v(s,a,I.data)){const H=sM(a,t,e,o,r,v);if(H!==yv)return H}l=t[a+8],-1!==l&&Ev(r,t[1].data[a+8]===v)&&_v(s,a,t)?(o=I,a=lo(l),t=uo(l,t)):a=-1}}}return mv(t,e,r,i)}const yv={};function iM(){return new co(rn(),pe())}function sM(n,t,e,r,i,s){const o=t[1],a=o.data[n+8],I=su(a,o,e,null==r?Wl(a)&&lf:r!=o&&0!=(3&a.type),i&Ue.Host&&s===a);return null!==I?ba(t,o,I,a):yv}function su(n,t,e,r,i){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,I=s>>20,X=i?a+I:n.directiveEnd;for(let Q=r?a:a+I;Q<X;Q++){const ee=o[Q];if(Q<l&&e===ee||Q>=l&&ee.type===e)return Q}if(i){const Q=o[l];if(Q&&Vr(Q)&&Q.type===e)return l}return null}function ba(n,t,e,r){let i=n[e];const s=t.data;if(function QA(n){return n instanceof ya}(i)){const o=i;o.resolving&&function eA(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Me(-200,`Circular dependency in DI detected for ${n}${e}`)}(mn(s[e]));const a=nu(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ui(o.injectImpl):null;iv(n,r,Ue.Default);try{i=n[e]=o.factory(void 0,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&function YA(n,t,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=zm(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o)}i&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,i),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s))}(e,s[e],t)}finally{null!==l&&Ui(l),nu(a),o.resolving=!1,lv()}}return i}function _v(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function Ev(n,t){return!(n&Ue.Self||n&Ue.Host&&t)}class co{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return vv(this._tNode,this._lView,t,r,e)}}function df(n){return km(n)?()=>{const t=df(ze(n));return t&&t()}:vs(n)}function ys(n){return function rM(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let i=0;for(;i<r;){const s=e[i];if(cv(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof e[i];)i++;else{if(s===t)return e[i+1];i+=2}}}return null}(rn(),n)}const ho="__parameters__";function go(n,t,e){return Vi(()=>{const r=function ff(n){return function(...e){if(n){const r=n(...e);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,v,I){const H=l.hasOwnProperty(ho)?l[ho]:Object.defineProperty(l,ho,{value:[]})[ho];for(;H.length<=I;)H.push(null);return(H[I]=H[I]||[]).push(o),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class De{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=be({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const lM=new De("AnalyzeForEntryComponents");function br(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let r=n[e];Array.isArray(r)?(t===n&&(t=n.slice(0,e)),br(r,t)):t!==n&&t.push(r)}return t}function ei(n,t){n.forEach(e=>Array.isArray(e)?ei(e,t):t(e))}function Dv(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function ou(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Ta(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function or(n,t,e){let r=mo(n,t);return r>=0?n[1|r]=e:(r=~r,function dM(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(1===i)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;)n[i]=n[i-2],i--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function pf(n,t){const e=mo(n,t);if(e>=0)return n[1|e]}function mo(n,t){return function Sv(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<e];if(t===o)return s<<e;o>t?i=s:r=s+1}return~(i<<e)}(n,t,1)}const Sa={},mf="__NG_DI_FLAG__",lu="ngTempTokenPath",yM=/\n/gm,Av="__source",EM=Ct({provide:String,useValue:Ct});let wa;function Mv(n){const t=wa;return wa=n,t}function bM(n,t=Ue.Default){if(void 0===wa)throw new Me(203,"");return null===wa?Um(n,void 0,t):wa.get(n,t&Ue.Optional?null:void 0,t)}function ae(n,t=Ue.Default){return(function aA(){return Fd}()||bM)(ze(n),t)}const uu=ae;function vf(n){const t=[];for(let e=0;e<n.length;e++){const r=ze(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Me(900,"");let i,s=Ue.Default;for(let o=0;o<r.length;o++){const a=r[o],l=DM(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(ae(i,s))}else t.push(ae(r))}return t}function Aa(n,t){return n[mf]=t,n.prototype[mf]=t,n}function DM(n){return n[mf]}const cu=Aa(go("Inject",n=>({token:n})),-1),Dr=Aa(go("Optional"),8),_s=Aa(go("SkipSelf"),4);var ar=(()=>((ar=ar||{})[ar.Important=1]="Important",ar[ar.DashCase=2]="DashCase",ar))();const Fv="__ngContext__";function wn(n,t){n[Fv]=t}function Ef(n){const t=function xa(n){return n[Fv]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function Df(n,t){return undefined(n,t)}function Ia(n){const t=n[3];return Ur(t)?t[3]:t}function Cf(n){return Gv(n[13])}function Tf(n){return Gv(n[4])}function Gv(n){for(;null!==n&&!Ur(n);)n=n[4];return n}function yo(n,t,e,r,i){if(null!=r){let s,o=!1;Ur(r)?s=r:qr(r)&&(o=!0,r=r[0]);const a=qt(r);0===n&&null!==e?null==i?Xv(t,e,a):Es(t,e,a,i||null,!0):1===n&&null!==e?Es(t,e,a,i||null,!0):2===n?function Rf(n,t,e){const r=fu(n,t);r&&function JM(n,t,e,r){zt(n)?n.removeChild(t,e,r):t.removeChild(e)}(n,r,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function nx(n,t,e,r,i){const s=e[7];s!==qt(e)&&yo(t,n,r,s,i);for(let a=10;a<e.length;a++){const l=e[a];Ra(l[1],l,n,t,r,s)}}(t,n,s,e,i)}}function wf(n,t,e){if(zt(n))return n.createElement(t,e);{const r=null!==e?function AA(n){const t=n.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(e):null;return null===r?n.createElement(t):n.createElementNS(r,t)}}function Wv(n,t){const e=n[9],r=e.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Qd(i,-1)),e.splice(r,1)}function Af(n,t){if(n.length<=10)return;const e=10+t,r=n[e];if(r){const i=r[17];null!==i&&i!==n&&Wv(i,r),t>0&&(n[e-1][4]=r[4]);const s=ou(n,10+t);!function WM(n,t){Ra(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function zv(n,t){if(!(256&t[2])){const e=t[11];zt(e)&&e.destroyNode&&Ra(n,t,e,3,null,null),function YM(n){let t=n[13];if(!t)return Mf(n[1],n);for(;t;){let e=null;if(qr(t))e=t[13];else{const r=t[10];r&&(e=r)}if(!e){for(;t&&!t[4]&&t!==n;)qr(t)&&Mf(t[1],t),t=t[3];null===t&&(t=n),qr(t)&&Mf(t[1],t),e=t&&t[4]}t=e}}(t)}}function Mf(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function qM(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const i=t[e[r]];if(!(i instanceof ya)){const s=e[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,t),function ZM(n,t){const e=n.cleanup,r=t[7];let i=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],a="function"==typeof o?o(t):qt(t[o]),l=r[i=e[s+2]],v=e[s+3];"boolean"==typeof v?a.removeEventListener(e[s],l,v):v>=0?r[i=v]():r[i=-v].unsubscribe(),s+=2}else{const o=r[i=e[s+1]];e[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();t[7]=null}}(n,t),1===t[1].type&&zt(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Ur(t[3])){e!==t[3]&&Wv(e,t);const r=t[19];null!==r&&r.detachView(n)}}}function $v(n,t,e){return function Yv(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Nr.None||i===Nr.Emulated)return null}return ir(r,e)}(n,t.parent,e)}function Es(n,t,e,r,i){zt(n)?n.insertBefore(t,e,r,i):t.insertBefore(e,r,i)}function Xv(n,t,e){zt(n)?n.appendChild(t,e):t.appendChild(e)}function Qv(n,t,e,r,i){null!==r?Es(n,t,e,r,i):Xv(n,t,e)}function fu(n,t){return zt(n)?n.parentNode(t):t.parentNode}function Zv(n,t,e){return Jv(n,t,e)}let gu,Jv=function qv(n,t,e){return 40&n.type?ir(n,e):null};function hu(n,t,e,r){const i=$v(n,r,t),s=t[11],a=Zv(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(e))for(let l=0;l<e.length;l++)Qv(s,i,e[l],a,!1);else Qv(s,i,e,a,!1)}function pu(n,t){if(null!==t){const e=t.type;if(3&e)return ir(t,n);if(4&e)return If(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return pu(n,r);{const i=n[t.index];return Ur(i)?If(-1,i):qt(i)}}if(32&e)return Df(t,n)()||qt(n[t.index]);{const r=ty(n,t);return null!==r?Array.isArray(r)?r[0]:pu(Ia(n[16]),r):pu(n,t.next)}}return null}function ty(n,t){return null!==t?n[16][6].projection[t.projection]:null}function If(n,t){const e=10+n+1;if(e<t.length){const r=t[e],i=r[1].firstChild;if(null!==i)return pu(r,i)}return t[7]}function Of(n,t,e,r,i,s,o){for(;null!=e;){const a=r[e.index],l=e.type;if(o&&0===t&&(a&&wn(qt(a),r),e.flags|=4),64!=(64&e.flags))if(8&l)Of(n,t,e.child,r,i,s,!1),yo(t,n,i,a,s);else if(32&l){const v=Df(e,r);let I;for(;I=v();)yo(t,n,i,I,s);yo(t,n,i,a,s)}else 16&l?ny(n,t,r,e,i,s):yo(t,n,i,a,s);e=o?e.projectionNext:e.next}}function Ra(n,t,e,r,i,s){Of(e,r,n.firstChild,t,i,s,!1)}function ny(n,t,e,r,i,s){const o=e[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let v=0;v<l.length;v++)yo(t,n,i,l[v],s);else Of(n,t,l,o[3],i,s,!0)}function ry(n,t,e){zt(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function Pf(n,t,e){zt(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function bs(n){var t;return(null===(t=function Lf(){if(void 0===gu&&(gu=null,bt.trustedTypes))try{gu=bt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return gu}())||void 0===t?void 0:t.createHTML(n))||n}class Ds{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ax extends Ds{getTypeName(){return"HTML"}}class lx extends Ds{getTypeName(){return"Style"}}class ux extends Ds{getTypeName(){return"Script"}}class cx extends Ds{getTypeName(){return"URL"}}class dx extends Ds{getTypeName(){return"ResourceURL"}}function lr(n){return n instanceof Ds?n.changingThisBreaksApplicationSecurity:n}function ti(n,t){const e=ay(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function ay(n){return n instanceof Ds&&n.getTypeName()||null}class vx{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(bs(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class yx{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const r=this.inertDocument.createElement("body");e.appendChild(r)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=bs(t),e;const r=this.inertDocument.createElement("body");return r.innerHTML=bs(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const o=e.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let r=t.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const Ex=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bx=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oa(n){return(n=String(n)).match(Ex)||n.match(bx)?n:"unsafe:"+n}function ni(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Pa(...n){const t={};for(const e of n)for(const r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}const cy=ni("area,br,col,hr,img,wbr"),dy=ni("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fy=ni("rp,rt"),Ff=Pa(cy,Pa(dy,ni("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pa(fy,ni("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pa(fy,dy)),Nf=ni("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bf=ni("srcset"),hy=Pa(Nf,Bf,ni("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ni("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Dx=ni("script,style,template");class Cx{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Ff.hasOwnProperty(e))return this.sanitizedSomething=!0,!Dx.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=t.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!hy.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Nf[a]&&(l=Oa(l)),Bf[a]&&(n=l,l=(n=String(n)).split(",").map(t=>Oa(t.trim())).join(", ")),this.buf.push(" ",o,'="',py(l),'"')}var n;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Ff.hasOwnProperty(e)&&!cy.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(py(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Tx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sx=/([^\#-~ |!])/g;function py(n){return n.replace(/&/g,"&amp;").replace(Tx,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Sx,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vu;function gy(n,t){let e=null;try{vu=vu||function ly(n){const t=new yx(n);return function _x(){try{return!!(new window.DOMParser).parseFromString(bs(""),"text/html")}catch(n){return!1}}()?new vx(t):t}(n);let r=t?String(t):"";e=vu.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=e.innerHTML,e=vu.getInertBodyElement(r)}while(r!==s);return bs((new Cx).sanitizeChildren(Uf(e)||e))}finally{if(e){const r=Uf(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Uf(n){return"content"in n&&function wx(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ht=(()=>((ht=ht||{})[ht.NONE=0]="NONE",ht[ht.HTML=1]="HTML",ht[ht.STYLE=2]="STYLE",ht[ht.SCRIPT=3]="SCRIPT",ht[ht.URL=4]="URL",ht[ht.RESOURCE_URL=5]="RESOURCE_URL",ht))();function Cs(n){const t=function La(){const n=pe();return n&&n[12]}();return t?t.sanitize(ht.URL,n)||"":ti(n,"URL")?lr(n):Oa(Ve(n))}function Hf(n){return n.ngOriginalError}function Nx(n,...t){n.error(...t)}class Wi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),r=function Fx(n){return n&&n.ngErrorLogger||Nx}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Hf(t);for(;e&&Hf(e);)e=Hf(e);return e||null}}const Kx=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(bt))();function vy(n){return n.ownerDocument.defaultView}function ri(n){return n instanceof Function?n():n}function _y(n,t,e){let r=n.length;for(;;){const i=n.indexOf(t,e);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}e=i+1}}const Ey="ng-template";function $x(n,t,e){let r=0;for(;r<n.length;){let i=n[r++];if(e&&"class"===i){if(i=n[r],-1!==_y(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function by(n){return 4===n.type&&n.value!==Ey}function Yx(n,t,e){return t===(4!==n.type||e?n.value:Ey)}function Xx(n,t,e){let r=4;const i=n.attrs||[],s=function qx(n){for(let t=0;t<n.length;t++)if(cv(n[t]))return t;return n.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Yx(n,l,e)||""===l&&1===t.length){if(jr(r))return!1;o=!0}}else{const v=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!$x(n.attrs,v,e)){if(jr(r))return!1;o=!0}continue}const H=Qx(8&r?"class":l,i,by(n),e);if(-1===H){if(jr(r))return!1;o=!0;continue}if(""!==v){let X;X=H>s?"":i[H+1].toLowerCase();const Q=8&r?X:null;if(Q&&-1!==_y(Q,v,0)||2&r&&v!==X){if(jr(r))return!1;o=!0}}}}else{if(!o&&!jr(r)&&!jr(l))return!1;if(o&&jr(l))continue;o=!1,r=l|1&r}}return jr(r)||o}function jr(n){return 0==(1&n)}function Qx(n,t,e,r){if(null===t)return-1;let i=0;if(r||!e){let s=!1;for(;i<t.length;){const o=t[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Jx(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function Dy(n,t,e=!1){for(let r=0;r<t.length;r++)if(Xx(n,t[r],e))return!0;return!1}function eI(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Cy(n,t){return n?":not("+t.trim()+")":t}function tI(n){let t=n[0],e=1,r=2,i="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&r){const a=n[++e];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!jr(o)&&(t+=Cy(s,i),i=""),r=o,s=s||!jr(r);e++}return""!==i&&(t+=Cy(s,i)),t}const je={};function Ce(n){Ty(ut(),pe(),Pn()+n,!1)}function Ty(n,t,e,r){if(!r)if(3==(3&t[2])){const s=n.preOrderCheckHooks;null!==s&&ql(t,s,e)}else{const s=n.preOrderHooks;null!==s&&Jl(t,s,0,e)}Gi(e)}function yu(n,t){return n<<17|t<<2}function Gr(n){return n>>17&32767}function jf(n){return 2|n}function Si(n){return(131068&n)>>2}function Gf(n,t){return-131069&n|t<<2}function Kf(n){return 1|n}function ky(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r],s=e[r+1];if(-1!==s){const o=n.data[s];tf(i),o.contentQueries(2,t[s],s)}}}function ka(n,t,e,r,i,s,o,a,l,v){const I=t.blueprint.slice();return I[0]=i,I[2]=140|r,Zm(I),I[3]=I[15]=n,I[8]=e,I[10]=o||n&&n[10],I[11]=a||n&&n[11],I[12]=l||n&&n[12]||null,I[9]=v||n&&n[9]||null,I[6]=s,I[16]=2==t.type?n[16]:I,I}function Eo(n,t,e,r,i){let s=n.data[t];if(null===s)s=function Jf(n,t,e,r,i){const s=ev(),o=Zd(),l=n.data[t]=function _I(n,t,e,r,i,s){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,t,e,r,i),function UA(){return He.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=r,s.attrs=i;const o=function va(){const n=He.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Jr(s,!0),s}function bo(n,t,e,r){if(0===e)return-1;const i=t.length;for(let s=0;s<e;s++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Fa(n,t,e){Xl(t);try{const r=n.viewQuery;null!==r&&lh(1,r,e);const i=n.template;null!==i&&Fy(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ky(n,t),n.staticViewQueries&&lh(2,n.viewQuery,e);const s=n.components;null!==s&&function mI(n,t){for(let e=0;e<t.length;e++)NI(n,t[e])}(t,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[2]&=-5,Ql()}}function Do(n,t,e,r){const i=t[2];if(256!=(256&i)){Xl(t);try{Zm(t),function tv(n){return He.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&Fy(n,t,e,2,r);const o=3==(3&i);if(o){const v=n.preOrderCheckHooks;null!==v&&ql(t,v,null)}else{const v=n.preOrderHooks;null!==v&&Jl(t,v,0,null),rf(t,0)}if(function kI(n){for(let t=Cf(n);null!==t;t=Tf(t)){if(!t[2])continue;const e=t[9];for(let r=0;r<e.length;r++){const i=e[r],s=i[3];0==(1024&i[2])&&Qd(s,1),i[2]|=1024}}}(t),function LI(n){for(let t=Cf(n);null!==t;t=Tf(t))for(let e=10;e<t.length;e++){const r=t[e],i=r[1];Xd(r)&&Do(i,r,i.template,r[8])}}(t),null!==n.contentQueries&&ky(n,t),o){const v=n.contentCheckHooks;null!==v&&ql(t,v)}else{const v=n.contentHooks;null!==v&&Jl(t,v,1),rf(t,1)}!function pI(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const i=e[r];if(i<0)Gi(~i);else{const s=i,o=e[++r],a=e[++r];VA(o,s),a(2,t[s])}}}finally{Gi(-1)}}(n,t);const a=n.components;null!==a&&function gI(n,t){for(let e=0;e<t.length;e++)FI(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&lh(2,l,r),o){const v=n.viewCheckHooks;null!==v&&ql(t,v)}else{const v=n.viewHooks;null!==v&&Jl(t,v,2),rf(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[2]&=-73,1024&t[2]&&(t[2]&=-1025,Qd(t[3],-1))}finally{Ql()}}}function vI(n,t,e,r){const i=t[10],o=Qm(t);try{!o&&i.begin&&i.begin(),o&&Fa(n,t,r),Do(n,t,e,r)}finally{!o&&i.end&&i.end()}}function Fy(n,t,e,r,i){const s=Pn(),o=2&r;try{Gi(-1),o&&t.length>20&&Ty(n,t,20,!1),e(r,i)}finally{Gi(s)}}function Ny(n,t,e){if(Hd(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function eh(n,t,e){!Jm()||(function wI(n,t,e,r){const i=e.directiveStart,s=e.directiveEnd;n.firstCreatePass||Ea(e,t),wn(r,t);const o=e.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],v=Vr(l);v&&RI(t,e,l);const I=ba(t,n,a,e);wn(I,t),null!==o&&OI(0,a-i,I,l,0,o),v&&(sr(e.index,t)[8]=I)}}(n,t,e,ir(e,t)),128==(128&e.flags)&&function AI(n,t,e){const r=e.directiveStart,i=e.directiveEnd,o=e.index,a=function HA(){return He.lFrame.currentDirectiveIndex}();try{Gi(o);for(let l=r;l<i;l++){const v=n.data[l],I=t[l];Jd(l),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&Wy(v,I)}}finally{Gi(-1),Jd(a)}}(n,t,e))}function th(n,t,e=ir){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?e(t,n):n[o];n[i++]=a}}}function By(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=bu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function bu(n,t,e,r,i,s,o,a,l,v){const I=20+r,H=I+i,X=function yI(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:je);return e}(I,H),Q="function"==typeof v?v():v;return X[1]={type:n,blueprint:X,template:e,queries:null,viewQuery:a,declTNode:t,data:X.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:Q,incompleteFirstPass:!1}}function Hy(n,t,e,r){const i=Zy(t);null===e?i.push(r):(i.push(e),n.firstCreatePass&&qy(n).push(r,i.length-1))}function jy(n,t,e){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(e=null===e?{}:e).hasOwnProperty(r)?e[r].push(t,i):e[r]=[t,i]}return e}function ur(n,t,e,r,i,s,o,a){const l=ir(t,e);let I,v=t.inputs;!a&&null!=v&&(I=v[r])?(t_(n,e,I,r,i),Wl(t)&&function DI(n,t){const e=sr(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(r=function bI(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,t.value||"",r):i,zt(s)?s.setProperty(l,r,i):af(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function nh(n,t,e,r){let i=!1;if(Jm()){const s=function MI(n,t,e){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Dy(e,o.selectors,!1)&&(i||(i=[]),iu(Ea(e,t),n,o.type),Vr(o)?(zy(n,e),i.unshift(o)):i.push(o))}return i}(n,t,e),o=null===r?null:{"":-1};if(null!==s){i=!0,$y(e,n.data.length,s.length);for(let I=0;I<s.length;I++){const H=s[I];H.providersResolver&&H.providersResolver(H)}let a=!1,l=!1,v=bo(n,t,s.length,null);for(let I=0;I<s.length;I++){const H=s[I];e.mergedAttrs=tu(e.mergedAttrs,H.hostAttrs),Yy(n,e,t,v,H),II(v,H,o),null!==H.contentQueries&&(e.flags|=8),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(e.flags|=128);const X=H.type.prototype;!a&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!l&&(X.ngOnChanges||X.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),l=!0),v++}!function EI(n,t){const r=t.directiveEnd,i=n.data,s=t.attrs,o=[];let a=null,l=null;for(let v=t.directiveStart;v<r;v++){const I=i[v],H=I.inputs,X=null===s||by(t)?null:PI(H,s);o.push(X),a=jy(H,v,a),l=jy(I.outputs,v,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(n,e)}o&&function xI(n,t,e){if(t){const r=n.localNames=[];for(let i=0;i<t.length;i+=2){const s=e[t[i+1]];if(null==s)throw new Me(-301,!1);r.push(t[i],s)}}}(e,r,o)}return e.mergedAttrs=tu(e.mergedAttrs,e.attrs),i}function Ky(n,t,e,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~t.index;(function SI(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function Wy(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function zy(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function II(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Vr(t)&&(e[""]=n)}}function $y(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Yy(n,t,e,r,i){n.data[r]=i;const s=i.factory||(i.factory=vs(i.type)),o=new ya(s,Vr(i),null);n.blueprint[r]=o,e[r]=o,Ky(n,t,0,r,bo(n,e,i.hostVars,je),i)}function RI(n,t,e){const r=ir(t,n),i=By(e),s=n[10],o=Du(n,ka(n,i,null,e.onPush?64:16,r,t,s,s.createRenderer(r,e),null,null));n[t.index]=o}function ii(n,t,e,r,i,s){const o=ir(n,t);!function rh(n,t,e,r,i,s,o){if(null==s)zt(n)?n.removeAttribute(t,i,e):t.removeAttribute(i);else{const a=null==o?Ve(s):o(s,r||"",i);zt(n)?n.setAttribute(t,i,a,e):e?t.setAttributeNS(e,i,a):t.setAttribute(i,a)}}(t[11],o,s,n.value,e,r,i)}function OI(n,t,e,r,i,s){const o=s[t];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const v=o[l++],I=o[l++],H=o[l++];null!==a?r.setInput(e,H,v,I):e[I]=H}}}function PI(n,t){let e=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===e&&(e=[]),e.push(i,n[i],t[r+1])),r+=2}else r+=2;else r+=4}return e}function Xy(n,t,e,r){return new Array(n,!0,!1,t,null,0,r,e,null,null)}function FI(n,t){const e=sr(t,n);if(Xd(e)){const r=e[1];80&e[2]?Do(r,e,r.template,e[8]):e[5]>0&&ih(e)}}function ih(n){for(let r=Cf(n);null!==r;r=Tf(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Do(o,s,o.template,s[8])}else s[5]>0&&ih(s)}const e=n[1].components;if(null!==e)for(let r=0;r<e.length;r++){const i=sr(e[r],n);Xd(i)&&i[5]>0&&ih(i)}}function NI(n,t){const e=sr(t,n),r=e[1];(function BI(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Fa(r,e,e[8])}function Du(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function sh(n){for(;n;){n[2]|=64;const t=Ia(n);if(vA(n)&&!t)return n;n=t}return null}function Qy(n){!function oh(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],r=Ef(e),i=r[1];vI(i,r,i.template,e)}}(n[8])}function lh(n,t,e){tf(0),t(n,e)}const VI=(()=>Promise.resolve(null))();function Zy(n){return n[7]||(n[7]=[])}function qy(n){return n.cleanup||(n.cleanup=[])}function Jy(n,t,e){return(null===n||Vr(n))&&(e=function IA(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function e_(n,t){const e=n[9],r=e?e.get(Wi,null):null;r&&r.handleError(t)}function t_(n,t,e,r,i){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],v=n.data[o];null!==v.setInput?v.setInput(l,i,r,a):l[a]=i}}function wi(n,t,e){const r=$l(t,n);!function Kv(n,t,e){zt(n)?n.setValue(t,e):t.textContent=e}(n[11],r,e)}function Cu(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=Od(i,a):2==s&&(r=Od(r,a+": "+t[++o]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}const uh=new De("INJECTOR",-1);class n_{get(t,e=Sa){if(e===Sa){const r=new Error(`NullInjectorError: No provider for ${vt(t)}!`);throw r.name="NullInjectorError",r}return e}}const ch=new De("Set Injector scope."),Na={},GI={};let dh;function r_(){return void 0===dh&&(dh=new n_),dh}function i_(n,t=null,e=null,r){const i=s_(n,t,e,r);return i._resolveInjectorDefTypes(),i}function s_(n,t=null,e=null,r){return new KI(n,e,t||r_(),r)}class KI{constructor(t,e,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&ei(e,a=>this.processProvider(a,t,e)),ei([t],a=>this.processInjectorType(a,[],s)),this.records.set(uh,Co(void 0,this));const o=this.records.get(ch);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof t?null:vt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Sa,r=Ue.Default){this.assertNotDestroyed();const i=Mv(this),s=Ui(void 0);try{if(!(r&Ue.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function qI(n){return"function"==typeof n||"object"==typeof n&&n instanceof De}(t)&&Ld(t);a=l&&this.injectableDefInScope(l)?Co(fh(t),Na):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&Ue.Self?r_():this.parent).get(t,e=r&Ue.Optional&&e===Sa?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[lu]=o[lu]||[]).unshift(vt(t)),i)throw o;return function CM(n,t,e,r){const i=n[lu];throw t[Av]&&i.unshift(t[Av]),n.message=function TM(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=vt(t);if(Array.isArray(t))i=t.map(vt).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):vt(a)))}i=`{${s.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(yM,"\n  ")}`}("\n"+n.message,i,e,r),n.ngTokenPath=i,n[lu]=null,n}(o,t,"R3InjectorError",this.source)}throw o}finally{Ui(s),Mv(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,i)=>t.push(vt(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(t,e,r){if(!(t=ze(t)))return!1;let i=Nm(t);const s=null==i&&t.ngModule||void 0,o=void 0===s?t:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=Nm(s)),null==i)return!1;if(null!=i.imports&&!a){let I;r.push(o);try{ei(i.imports,H=>{this.processInjectorType(H,e,r)&&(void 0===I&&(I=[]),I.push(H))})}finally{}if(void 0!==I)for(let H=0;H<I.length;H++){const{ngModule:X,providers:Q}=I[H];ei(Q,ee=>this.processProvider(ee,X,Q||Tt))}}this.injectorDefTypes.add(o);const l=vs(o)||(()=>new o);this.records.set(o,Co(l,Na));const v=i.providers;if(null!=v&&!a){const I=t;ei(v,H=>this.processProvider(H,I,v))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,r){let i=To(t=ze(t))?t:ze(t&&t.provide);const s=function zI(n,t,e){return a_(n)?Co(void 0,n.useValue):Co(o_(n),Na)}(t);if(To(t)||!0!==t.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Co(void 0,Na,!0),o.factory=()=>vf(o.multi),this.records.set(i,o)),i=t,o.multi.push(t)}this.records.set(i,s)}hydrate(t,e){return e.value===Na&&(e.value=GI,e.value=e.factory()),"object"==typeof e.value&&e.value&&function ZI(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ze(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function fh(n){const t=Ld(n),e=null!==t?t.factory:vs(n);if(null!==e)return e;if(n instanceof De)throw new Me(204,!1);if(n instanceof Function)return function WI(n){const t=n.length;if(t>0)throw Ta(t,"?"),new Me(204,!1);const e=function iA(n){const t=n&&(n[Vl]||n[Bm]);if(t){const e=function sA(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Me(204,!1)}function o_(n,t,e){let r;if(To(n)){const i=ze(n);return vs(i)||fh(i)}if(a_(n))r=()=>ze(n.useValue);else if(function YI(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...vf(n.deps||[]));else if(function $I(n){return!(!n||!n.useExisting)}(n))r=()=>ae(ze(n.useExisting));else{const i=ze(n&&(n.useClass||n.provide));if(!function QI(n){return!!n.deps}(n))return vs(i)||fh(i);r=()=>new i(...vf(n.deps))}return r}function Co(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function a_(n){return null!==n&&"object"==typeof n&&EM in n}function To(n){return"function"==typeof n}let $t=(()=>{class n{static create(e,r){var i;if(Array.isArray(e))return i_({name:""},r,e,"");{const s=null!==(i=e.name)&&void 0!==i?i:"";return i_({name:s},e.parent,e.providers,s)}}}return n.THROW_IF_NOT_FOUND=Sa,n.NULL=new n_,n.\u0275prov=be({token:n,providedIn:"any",factory:()=>ae(uh)}),n.__NG_ELEMENT_ID__=-1,n})();function oR(n,t){Zl(Ef(n)[1],rn())}function Ke(n){let t=function __(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let i;if(Vr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Me(903,"");i=t.\u0275dir}if(i){if(e){r.push(i);const o=n;o.inputs=gh(n.inputs),o.declaredInputs=gh(n.declaredInputs),o.outputs=gh(n.outputs);const a=i.hostBindings;a&&cR(n,a);const l=i.viewQuery,v=i.contentQueries;if(l&&lR(n,l),v&&uR(n,v),Rd(n.inputs,i.inputs),Rd(n.declaredInputs,i.declaredInputs),Rd(n.outputs,i.outputs),Vr(i)&&i.data.animation){const I=n.data;I.animation=(I.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ke&&(e=!1)}}t=Object.getPrototypeOf(t)}!function aR(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=tu(i.hostAttrs,e=tu(e,i.hostAttrs))}}(r)}function gh(n){return n===to?{}:n===Tt?[]:n}function lR(n,t){const e=n.viewQuery;n.viewQuery=e?(r,i)=>{t(r,i),e(r,i)}:t}function uR(n,t){const e=n.contentQueries;n.contentQueries=e?(r,i,s)=>{t(r,i,s),e(r,i,s)}:t}function cR(n,t){const e=n.hostBindings;n.hostBindings=e?(r,i)=>{t(r,i),e(r,i)}:t}let Tu=null;function So(){if(!Tu){const n=bt.Symbol;if(n&&n.iterator)Tu=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Tu=r)}}}return Tu}function Ba(n){return!!mh(n)&&(Array.isArray(n)||!(n instanceof Map)&&So()in n)}function mh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function si(n,t,e){return n[t]=e}function An(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function mt(n,t,e,r){const i=pe();return An(i,ao(),t)&&(ut(),ii(Ut(),i,n,t,e,r)),mt}function Ao(n,t,e,r){return An(n,ao(),e)?t+Ve(e)+r:je}function Ye(n,t,e,r,i,s,o,a){const l=pe(),v=ut(),I=n+20,H=v.firstCreatePass?function vR(n,t,e,r,i,s,o,a,l){const v=t.consts,I=Eo(t,n,4,o||null,ji(v,a));nh(t,e,I,ji(v,l)),Zl(t,I);const H=I.tViews=bu(2,I,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v);return null!==t.queries&&(t.queries.template(t,I),H.queries=t.queries.embeddedTView(I)),I}(I,v,l,t,e,r,i,s,o):v.data[I];Jr(H,!1);const X=l[11].createComment("");hu(v,l,X,H),wn(X,l),Du(l,l[I]=Xy(X,l,X,H)),zl(H)&&eh(v,l,H),null!=o&&th(l,H,a)}function wu(n){return oo(function BA(){return He.lFrame.contextLView}(),20+n)}function re(n,t=Ue.Default){const e=pe();return null===e?ae(n,t):vv(rn(),e,ze(n),t)}function Fo(){throw new Error("invalid")}function Ae(n,t,e){const r=pe();return An(r,ao(),t)&&ur(ut(),Ut(),r,n,t,r[11],e,!1),Ae}function bh(n,t,e,r,i){const o=i?"class":"style";t_(n,e,t.inputs[o],o,r)}function me(n,t,e,r){const i=pe(),s=ut(),o=20+n,a=i[11],l=i[o]=wf(a,t,function $A(){return He.lFrame.currentNamespace}()),v=s.firstCreatePass?function BR(n,t,e,r,i,s,o){const a=t.consts,v=Eo(t,n,2,i,ji(a,s));return nh(t,e,v,ji(a,o)),null!==v.attrs&&Cu(v,v.attrs,!1),null!==v.mergedAttrs&&Cu(v,v.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,v),v}(o,s,i,0,t,e,r):s.data[o];Jr(v,!0);const I=v.mergedAttrs;null!==I&&eu(a,l,I);const H=v.classes;null!==H&&Pf(a,l,H);const X=v.styles;return null!==X&&ry(a,l,X),64!=(64&v.flags)&&hu(s,i,l,v),0===function PA(){return He.lFrame.elementDepthCount}()&&wn(l,i),function LA(){He.lFrame.elementDepthCount++}(),zl(v)&&(eh(s,i,v),Ny(s,v,i)),null!==r&&th(i,v),me}function _e(){let n=rn();Zd()?qd():(n=n.parent,Jr(n,!1));const t=n;!function kA(){He.lFrame.elementDepthCount--}();const e=ut();return e.firstCreatePass&&(Zl(e,n),Hd(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function qA(n){return 0!=(16&n.flags)}(t)&&bh(e,t,pe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function JA(n){return 0!=(32&n.flags)}(t)&&bh(e,t,pe(),t.stylesWithoutHost,!1),_e}function Dt(n,t,e,r){return me(n,t,e,r),_e(),Dt}function Va(n,t,e){const r=pe(),i=ut(),s=n+20,o=i.firstCreatePass?function UR(n,t,e,r,i){const s=t.consts,o=ji(s,r),a=Eo(t,n,8,"ng-container",o);return null!==o&&Cu(a,o,!0),nh(t,e,a,ji(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,e):i.data[s];Jr(o,!0);const a=r[s]=r[11].createComment("");return hu(i,r,a,o),wn(a,r),zl(o)&&(eh(i,r,o),Ny(i,o,r)),null!=e&&th(r,o),Va}function Ha(){let n=rn();const t=ut();return Zd()?qd():(n=n.parent,Jr(n,!1)),t.firstCreatePass&&(Zl(t,n),Hd(n)&&t.queries.elementEnd(n)),Ha}function oi(){return pe()}function ja(n){return!!n&&"function"==typeof n.then}function V_(n){return!!n&&"function"==typeof n.subscribe}const Dh=V_;function pt(n,t,e,r){const i=pe(),s=ut(),o=rn();return H_(s,i,i[11],o,n,t,!!e,r),pt}function Ch(n,t){const e=rn(),r=pe(),i=ut();return H_(i,r,Jy(ef(i.data),e,r),e,n,t,!1),Ch}function H_(n,t,e,r,i,s,o,a){const l=zl(r),I=n.firstCreatePass&&qy(n),H=t[8],X=Zy(t);let Q=!0;if(3&r.type||a){const le=ir(r,t),de=a?a(le):le,oe=X.length,ge=a?Ie=>a(qt(Ie[r.index])):r.index;if(zt(e)){let Ie=null;if(!a&&l&&(Ie=function VR(n,t,e,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===e&&i[s+1]===r){const a=t[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,i,r.index)),null!==Ie)(Ie.__ngLastListenerFn__||Ie).__ngNextListenerFn__=s,Ie.__ngLastListenerFn__=s,Q=!1;else{s=Th(r,t,H,s,!1);const Xe=e.listen(de,i,s);X.push(s,Xe),I&&I.push(i,ge,oe,oe+1)}}else s=Th(r,t,H,s,!0),de.addEventListener(i,s,o),X.push(s),I&&I.push(i,ge,oe,o)}else s=Th(r,t,H,s,!1);const ee=r.outputs;let ie;if(Q&&null!==ee&&(ie=ee[i])){const le=ie.length;if(le)for(let de=0;de<le;de+=2){const Bt=t[ie[de]][ie[de+1]].subscribe(s),jt=X.length;X.push(s,Bt),I&&I.push(i,r.index,jt,-(jt+1))}}}function j_(n,t,e,r){try{return!1!==e(r)}catch(i){return e_(n,i),!1}}function Th(n,t,e,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?sr(n.index,t):t;0==(32&t[2])&&sh(a);let l=j_(t,0,r,o),v=s.__ngNextListenerFn__;for(;v;)l=j_(t,0,v,o)&&l,v=v.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function at(n=1){return function GA(n){return(He.lFrame.contextLView=function KA(n,t){for(;n>0;)t=t[15],n--;return t}(n,He.lFrame.contextLView))[8]}(n)}function HR(n,t){let e=null;const r=function Zx(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?Dy(n,s,!0):eI(r,s))return i}else e=i}return e}function ai(n){const t=pe()[16][6];if(!t.projection){const r=t.projection=Ta(n?n.length:1,null),i=r.slice();let s=t.child;for(;null!==s;){const o=n?HR(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function Qt(n,t=0,e){const r=pe(),i=ut(),s=Eo(i,20+n,16,null,e||null);null===s.projection&&(s.projection=t),qd(),64!=(64&s.flags)&&function tx(n,t,e){ny(t[11],0,t,e,$v(n,e,t),Zv(e.parent||t[6],e,t))}(i,r,s)}function q_(n,t,e,r,i){const s=n[e+1],o=null===t;let a=r?Gr(s):Si(s),l=!1;for(;0!==a&&(!1===l||o);){const I=n[a+1];KR(n[a],t)&&(l=!0,n[a+1]=r?Kf(I):jf(I)),a=r?Gr(I):Si(I)}l&&(n[e+1]=r?jf(s):Kf(s))}function KR(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&mo(n,t)>=0}const on={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function J_(n){return n.substring(on.key,on.keyEnd)}function e0(n,t){const e=on.textEnd;return e===t?-1:(t=on.keyEnd=function YR(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,on.key=t,e),No(n,t,e))}function No(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Yi(n,t,e){return Wr(n,t,e,!1),Yi}function fn(n,t){return Wr(n,t,null,!0),fn}function ui(n,t){for(let e=function zR(n){return function n0(n){on.key=0,on.keyEnd=0,on.value=0,on.valueEnd=0,on.textEnd=n.length}(n),e0(n,No(n,0,on.textEnd))}(t);e>=0;e=e0(t,e))or(n,J_(t),!0)}function Wr(n,t,e,r){const i=pe(),s=ut(),o=Ci(2);s.firstUpdatePass&&a0(s,n,o,r),t!==je&&An(i,o,t)&&u0(s,s.data[Pn()],i,i[11],n,i[o+1]=function sO(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=vt(lr(n)))),n}(t,e),r,o)}function o0(n,t){return t>=n.expandoStartIndex}function a0(n,t,e,r){const i=n.data;if(null===i[e+1]){const s=i[Pn()],o=o0(n,e);d0(s,r)&&null===t&&!o&&(t=!1),t=function JR(n,t,e,r){const i=ef(n);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(e=Ga(e=wh(null,n,t,e,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==i)if(e=wh(i,n,t,e,r),null===s){let l=function eO(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Si(r))return n[Gr(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=wh(null,n,t,l[1],r),l=Ga(l,t.attrs,r),function tO(n,t,e,r){n[Gr(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else s=function nO(n,t,e){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Ga(r,n[s].hostAttrs,e);return Ga(r,t.attrs,e)}(n,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),e}(i,s,t,r),function jR(n,t,e,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Gr(o),l=Si(o);n[r]=e;let I,v=!1;if(Array.isArray(e)){const H=e;I=H[1],(null===I||mo(H,I)>0)&&(v=!0)}else I=e;if(i)if(0!==l){const X=Gr(n[a+1]);n[r+1]=yu(X,a),0!==X&&(n[X+1]=Gf(n[X+1],r)),n[a+1]=function iI(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=yu(a,0),0!==a&&(n[a+1]=Gf(n[a+1],r)),a=r;else n[r+1]=yu(l,0),0===a?a=r:n[l+1]=Gf(n[l+1],r),l=r;v&&(n[r+1]=jf(n[r+1])),q_(n,I,r,!0),q_(n,I,r,!1),function GR(n,t,e,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&mo(s,t)>=0&&(e[r+1]=Kf(e[r+1]))}(t,I,n,r,s),o=yu(a,l),s?t.classBindings=o:t.styleBindings=o}(i,s,t,e,o,r)}}function wh(n,t,e,r,i){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],r=Ga(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Ga(n,t,e){const r=e?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),or(n,o,!!e||t[++s]))}return void 0===n?null:n}function u0(n,t,e,r,i,s,o,a){if(!(3&t.type))return;const l=n.data,v=l[a+1];Mu(function Ay(n){return 1==(1&n)}(v)?c0(l,t,e,i,Si(v),o):void 0)||(Mu(s)||function wy(n){return 2==(2&n)}(v)&&(s=c0(l,null,e,i,a,o)),function rx(n,t,e,r,i){const s=zt(n);if(t)i?s?n.addClass(e,r):e.classList.add(r):s?n.removeClass(e,r):e.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:ar.DashCase;if(null==i)s?n.removeStyle(e,r,o):e.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=ar.Important),s?n.setStyle(e,r,i,o):e.style.setProperty(r,i,a?"important":"")}}}(r,o,$l(Pn(),e),i,s))}function c0(n,t,e,r,i,s){const o=null===t;let a;for(;i>0;){const l=n[i],v=Array.isArray(l),I=v?l[1]:l,H=null===I;let X=e[i+1];X===je&&(X=H?Tt:void 0);let Q=H?pf(X,r):I===r?X:void 0;if(v&&!Mu(Q)&&(Q=pf(l,r)),Mu(Q)&&(a=Q,o))return a;const ee=n[i+1];i=o?Gr(ee):Si(ee)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=pf(l,r))}return a}function Mu(n){return void 0!==n}function d0(n,t){return 0!=(n.flags&(t?16:32))}function We(n,t=""){const e=pe(),r=ut(),i=n+20,s=r.firstCreatePass?Eo(r,i,1,t,null):r.data[i],o=e[i]=function Sf(n,t){return zt(n)?n.createText(t):n.createTextNode(t)}(e[11],t);hu(r,e,o,s),Jr(s,!1)}function Tr(n){return kn("",n,""),Tr}function kn(n,t,e){const r=pe(),i=Ao(r,n,t,e);return i!==je&&wi(r,Pn(),i),kn}function E0(n,t,e){!function zr(n,t,e,r){const i=ut(),s=Ci(2);i.firstUpdatePass&&a0(i,null,s,r);const o=pe();if(e!==je&&An(o,s,e)){const a=i.data[Pn()];if(d0(a,r)&&!o0(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Od(l,e||"")),bh(i,a,o,e,r)}else!function iO(n,t,e,r,i,s,o,a){i===je&&(i=Tt);let l=0,v=0,I=0<i.length?i[0]:null,H=0<s.length?s[0]:null;for(;null!==I||null!==H;){const X=l<i.length?i[l+1]:void 0,Q=v<s.length?s[v+1]:void 0;let ie,ee=null;I===H?(l+=2,v+=2,X!==Q&&(ee=H,ie=Q)):null===H||null!==I&&I<H?(l+=2,ee=I):(v+=2,ee=H,ie=Q),null!==ee&&u0(n,t,e,r,ee,ie,o,a),I=l<i.length?i[l]:null,H=v<s.length?s[v]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function rO(n,t,e){if(null==e||""===e)return Tt;const r=[],i=lr(e);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(n,t,e),r,s)}}(or,ui,Ao(pe(),n,t,e),!0)}function Ah(n,t,e){const r=pe();return An(r,ao(),t)&&ur(ut(),Ut(),r,n,t,r[11],e,!0),Ah}function Mh(n,t,e){const r=pe();if(An(r,ao(),t)){const s=ut(),o=Ut();ur(s,o,r,n,t,Jy(ef(s.data),o,r),e,!0)}return Mh}const xu="en-US";let O0=xu;function Rh(n,t,e,r,i){if(n=ze(n),Array.isArray(n))for(let s=0;s<n.length;s++)Rh(n[s],t,e,r,i);else{const s=ut(),o=pe();let a=To(n)?n:ze(n.provide),l=o_(n);const v=rn(),I=1048575&v.providerIndexes,H=v.directiveStart,X=v.providerIndexes>>20;if(To(n)||!n.multi){const Q=new ya(l,i,re),ee=Ph(a,t,i?I:I+X,H);-1===ee?(iu(Ea(v,o),s,a),Oh(s,n,t.length),t.push(a),v.directiveStart++,v.directiveEnd++,i&&(v.providerIndexes+=1048576),e.push(Q),o.push(Q)):(e[ee]=Q,o[ee]=Q)}else{const Q=Ph(a,t,I+X,H),ee=Ph(a,t,I,I+X),ie=Q>=0&&e[Q],le=ee>=0&&e[ee];if(i&&!le||!i&&!ie){iu(Ea(v,o),s,a);const de=function CP(n,t,e,r,i){const s=new ya(n,e,re);return s.multi=[],s.index=t,s.componentProviders=0,nE(s,i,r&&!e),s}(i?DP:bP,e.length,i,r,l);!i&&le&&(e[ee].providerFactory=de),Oh(s,n,t.length,0),t.push(a),v.directiveStart++,v.directiveEnd++,i&&(v.providerIndexes+=1048576),e.push(de),o.push(de)}else Oh(s,n,Q>-1?Q:ee,nE(e[i?ee:Q],l,!i&&r));!i&&r&&le&&e[ee].componentProviders++}}}function Oh(n,t,e,r){const i=To(t),s=function XI(n){return!!n.useClass}(t);if(i||s){const l=(s?ze(t.useClass):t).prototype.ngOnDestroy;if(l){const v=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){const I=v.indexOf(e);-1===I?v.push(e,[r,l]):v[I+1].push(r,l)}else v.push(e,l)}}}function nE(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Ph(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function bP(n,t,e,r){return Lh(this.multi,[])}function DP(n,t,e,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ba(e,e[1],this.providerFactory.index,r);s=a.slice(0,o),Lh(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Lh(i,s);return s}function Lh(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function St(n,t=[]){return e=>{e.providersResolver=(r,i)=>function EP(n,t,e){const r=ut();if(r.firstCreatePass){const i=Vr(n);Rh(e,r.data,r.blueprint,i,!0),Rh(t,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,t)}}class rE{}class wP{resolveComponentFactory(t){throw function SP(n){const t=Error(`No component factory found for ${vt(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let ws=(()=>{class n{}return n.NULL=new wP,n})();function AP(){return Vo(rn(),pe())}function Vo(n,t){return new _t(ir(n,t))}let _t=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=AP,n})();function MP(n){return n instanceof _t?n.nativeElement:n}class Ya{}let Ai=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function IP(){const n=pe(),e=sr(rn().index,n);return function xP(n){return n[11]}(qr(e)?e:n)}(),n})(),RP=(()=>{class n{}return n.\u0275prov=be({token:n,providedIn:"root",factory:()=>null}),n})();class As{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const OP=new As("13.3.12"),kh={};function Lu(n,t,e,r,i=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&r.push(qt(s)),Ur(s))for(let a=10;a<s.length;a++){const l=s[a],v=l[1].firstChild;null!==v&&Lu(l[1],l,v,r)}const o=e.type;if(8&o)Lu(n,t,e.child,r);else if(32&o){const a=Df(e,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=ty(t,e);if(Array.isArray(a))r.push(...a);else{const l=Ia(t[16]);Lu(l[1],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}class Xa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Lu(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ur(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(Af(t,r),ou(e,r))}this._attachedToViewContainer=!1}zv(this._lView[1],this._lView)}onDestroy(t){Hy(this._lView[1],this._lView,null,t)}markForCheck(){sh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function ah(n,t,e){const r=t[10];r.begin&&r.begin();try{Do(n,t,n.template,e)}catch(i){throw e_(t,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $M(n,t){Ra(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=t}}class PP extends Xa{constructor(t){super(t),this._view=t}detectChanges(){Qy(this._view)}checkNoChanges(){}get context(){return null}}class sE extends ws{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=vn(t);return new Fh(e,this.ngModule)}}function oE(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class Fh extends rE{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function nI(n){return n.map(tI).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return oE(this.componentDef.inputs)}get outputs(){return oE(this.componentDef.outputs)}create(t,e,r,i){const s=(i=i||this.ngModule)?function kP(n,t){return{get:(e,r,i)=>{const s=n.get(e,kh,i);return s!==kh||r===kh?s:t.get(e,r,i)}}}(t,i.injector):t,o=s.get(Ya,Xm),a=s.get(RP,null),l=o.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",I=r?function Vy(n,t,e){if(zt(n))return n.selectRootElement(t,e===Nr.ShadowDom);let r="string"==typeof t?n.querySelector(t):t;return r.textContent="",r}(l,r,this.componentDef.encapsulation):wf(o.createRenderer(null,this.componentDef),v,function LP(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),H=this.componentDef.onPush?576:528,X=function y_(n,t){return{components:[],scheduler:n||Kx,clean:VI,playerHandler:t||null,flags:0}}(),Q=bu(0,null,null,1,0,null,null,null,null,null),ee=ka(null,Q,X,H,null,null,o,l,a,s);let ie,le;Xl(ee);try{const de=function m_(n,t,e,r,i,s){const o=e[1];e[20]=n;const l=Eo(o,20,2,"#host",null),v=l.mergedAttrs=t.hostAttrs;null!==v&&(Cu(l,v,!0),null!==n&&(eu(i,n,v),null!==l.classes&&Pf(i,n,l.classes),null!==l.styles&&ry(i,n,l.styles)));const I=r.createRenderer(n,t),H=ka(e,By(t),null,t.onPush?64:16,e[20],l,r,I,s||null,null);return o.firstCreatePass&&(iu(Ea(l,e),o,t.type),zy(o,l),$y(l,e.length,1)),Du(e,H),e[20]=H}(I,this.componentDef,ee,o,l);if(I)if(r)eu(l,I,["ng-version",OP.full]);else{const{attrs:oe,classes:ge}=function rI(n){const t=[],e=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&t.push(s,n[++r]):8===i&&e.push(s);else{if(!jr(i))break;i=s}r++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);oe&&eu(l,I,oe),ge&&ge.length>0&&Pf(l,I,ge.join(" "))}if(le=Yd(Q,20),void 0!==e){const oe=le.projection=[];for(let ge=0;ge<this.ngContentSelectors.length;ge++){const Ie=e[ge];oe.push(null!=Ie?Array.from(Ie):null)}}ie=function v_(n,t,e,r,i){const s=e[1],o=function TI(n,t,e){const r=rn();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Yy(n,r,t,bo(n,t,1,null),e));const i=ba(t,n,r.directiveStart,r);wn(i,t);const s=ir(r,t);return s&&wn(s,t),i}(s,e,t);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,t)),t.contentQueries){const l=rn();t.contentQueries(1,o,l.directiveStart)}const a=rn();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Gi(a.index),Ky(e[1],a,0,a.directiveStart,a.directiveEnd,t),Wy(t,o)),o}(de,this.componentDef,ee,X,[oR]),Fa(Q,ee,null)}finally{Ql()}return new NP(this.componentType,ie,Vo(le,ee),ee,le)}}class NP extends class TP{}{constructor(t,e,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new PP(i),this.componentType=t}get injector(){return new co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Mi{}class aE{}const Ho=new Map;class cE extends Mi{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new sE(this);const r=yr(t);this._bootstrapComponents=ri(r.bootstrap),this._r3Injector=s_(t,e,[{provide:Mi,useValue:this},{provide:ws,useValue:this.componentFactoryResolver}],vt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=$t.THROW_IF_NOT_FOUND,r=Ue.Default){return t===$t||t===Mi||t===uh?this:this._r3Injector.get(t,e,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Nh extends aE{constructor(t){super(),this.moduleType=t,null!==yr(t)&&function UP(n){const t=new Set;!function e(r){const i=yr(r,!0),s=i.id;null!==s&&(function lE(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${vt(t)} vs ${vt(t.name)}`)}(s,Ho.get(s),r),Ho.set(s,r));const o=ri(i.imports);for(const a of o)t.has(a)||(t.add(a),e(a))}(n)}(t)}create(t){return new cE(this.moduleType,t)}}function hE(n,t,e,r,i,s){const o=t+e;return An(n,o,i)?si(n,o+1,s?r.call(s,i):r(i)):function Qa(n,t){const e=n[t];return e===je?void 0:e}(n,o+1)}function Bh(n){return t=>{setTimeout(n,void 0,t)}}const nt=class JP extends N{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){var i,s,o;let a=t,l=e||(()=>null),v=r;if(t&&"object"==typeof t){const H=t;a=null===(i=H.next)||void 0===i?void 0:i.bind(H),l=null===(s=H.error)||void 0===s?void 0:s.bind(H),v=null===(o=H.complete)||void 0===o?void 0:o.bind(H)}this.__isAsync&&(l=Bh(l),a&&(a=Bh(a)),v&&(v=Bh(v)));const I=super.subscribe({next:a,error:l,complete:v});return t instanceof O&&t.add(I),I}};function eL(){return this._results[So()]()}class qa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=So(),r=qa.prototype;r[e]||(r[e]=eL)}get changes(){return this._changes||(this._changes=new nt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const i=br(t);(this._changesDetected=!function uM(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=t[r];if(e&&(i=e(i),s=e(s)),s!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $r=(()=>{class n{}return n.__NG_ELEMENT_ID__=rL,n})();const tL=$r,nL=class extends tL{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t){const e=this._declarationTContainer.tViews,r=ka(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(e)),Fa(e,r,t),new Xa(r)}};function rL(){return ku(rn(),pe())}function ku(n,t){return 4&n.type?new nL(t,n,Vo(n,t)):null}let Xn=(()=>{class n{}return n.__NG_ELEMENT_ID__=iL,n})();function iL(){return DE(rn(),pe())}const sL=Xn,EE=class extends sL{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Vo(this._hostTNode,this._hostLView)}get injector(){return new co(this._hostTNode,this._hostLView)}get parentInjector(){const t=ru(this._hostTNode,this._hostLView);if(fv(t)){const e=uo(t,this._hostLView),r=lo(t);return new co(e[1].data[r+8],e)}return new co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=bE(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,r){const i=t.createEmbeddedView(e||{});return this.insert(i,r),i}createComponent(t,e,r,i,s){const o=t&&!function Ca(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const H=e||{};a=H.index,r=H.injector,i=H.projectableNodes,s=H.ngModuleRef}const l=o?t:new Fh(vn(t)),v=r||this.parentInjector;if(!s&&null==l.ngModule){const X=(o?v:this.parentInjector).get(Mi,null);X&&(s=X)}const I=l.create(v,i,void 0,s);return this.insert(I.hostView,a),I}insert(t,e){const r=t._lView,i=r[1];if(function OA(n){return Ur(n[3])}(r)){const I=this.indexOf(t);if(-1!==I)this.detach(I);else{const H=r[3],X=new EE(H,H[6],H[3]);X.detach(X.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function XM(n,t,e,r){const i=10+r,s=e.length;r>0&&(e[i-1][4]=t),r<s-10?(t[4]=e[i],Dv(e,10+r,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function QM(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=128}(i,r,o,s);const a=If(s,o),l=r[11],v=fu(l,o[7]);return null!==v&&function zM(n,t,e,r,i,s){r[0]=i,r[6]=t,Ra(n,r,e,1,i,s)}(i,o[6],l,r,v,a),t.attachToViewContainerRef(),Dv(Uh(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=bE(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Af(this._lContainer,e);r&&(ou(Uh(this._lContainer),e),zv(r[1],r))}detach(t){const e=this._adjustIndex(t,-1),r=Af(this._lContainer,e);return r&&null!=ou(Uh(this._lContainer),e)?new Xa(r):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function bE(n){return n[8]}function Uh(n){return n[8]||(n[8]=[])}function DE(n,t){let e;const r=t[n.index];if(Ur(r))e=r;else{let i;if(8&n.type)i=qt(r);else{const s=t[11];i=s.createComment("");const o=ir(n,t);Es(s,fu(s,o),i,function ex(n,t){return zt(n)?n.nextSibling(t):t.nextSibling}(s,o),!1)}t[n.index]=e=Xy(r,t,i,n),Du(t,e)}return new EE(e,n,t)}class Vh{constructor(t){this.queryList=t,this.matches=null}clone(){return new Vh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hh{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let s=0;s<r;s++){const o=e.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Hh(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==AE(t,e).matches&&this.queries[e].setDirty()}}class CE{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class jh{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,null!==e?e.push(s):e=[s])}return null!==e?new jh(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Gh{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Gh(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(t,e,lL(e,s)),this.matchTNodeWithReadOption(t,e,su(e,t,s,!1,!1))}else r===$r?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,su(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===_t||i===Xn||i===$r&&4&e.type)this.addMatch(e.index,-2);else{const s=su(e,t,i,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function lL(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function cL(n,t,e,r){return-1===e?function uL(n,t){return 11&n.type?Vo(n,t):4&n.type?ku(n,t):null}(t,n):-2===e?function dL(n,t,e){return e===_t?Vo(t,n):e===$r?ku(t,n):e===Xn?DE(t,n):void 0}(n,t,r):ba(n,n[1],e,t)}function TE(n,t,e,r){const i=t[19].queries[r];if(null===i.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const v=o[l];a.push(v<0?null:cL(t,s[v],o[l+1],e.metadata.read))}i.matches=a}return i.matches}function Kh(n,t,e,r){const i=n.queries.getByIndex(e),s=i.matches;if(null!==s){const o=TE(n,t,i,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const v=s[a+1],I=t[-l];for(let H=10;H<I.length;H++){const X=I[H];X[17]===X[3]&&Kh(X[1],X,v,r)}if(null!==I[9]){const H=I[9];for(let X=0;X<H.length;X++){const Q=H[X];Kh(Q[1],Q,v,r)}}}}}return r}function wt(n){const t=pe(),e=ut(),r=rv();tf(r+1);const i=AE(e,r);if(n.dirty&&Qm(t)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Kh(e,t,r,[]):TE(e,t,i,r);n.reset(s,MP),n.notifyOnChanges()}return!0}return!1}function Sr(n,t,e){const r=ut();r.firstCreatePass&&(wE(r,new CE(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),SE(r,pe(),t)}function Mn(n,t,e,r){const i=ut();if(i.firstCreatePass){const s=rn();wE(i,new CE(t,e,r),s.index),function hL(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(i,n),2==(2&e)&&(i.staticContentQueries=!0)}SE(i,pe(),e)}function At(){return function fL(n,t){return n[19].queries[t].queryList}(pe(),rv())}function SE(n,t,e){const r=new qa(4==(4&e));Hy(n,t,r,r.destroy),null===t[19]&&(t[19]=new Hh),t[19].queries.push(new Vh(r))}function wE(n,t,e){null===n.queries&&(n.queries=new jh),n.queries.track(new Gh(t,e))}function AE(n,t){return n.queries.getByIndex(t)}function Bu(...n){}const Qh=new De("Application Initializer");let Zh=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Bu,this.reject=Bu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(ja(s))e.push(s);else if(Dh(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(ae(Qh,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const el=new De("AppId",{providedIn:"root",factory:function KE(){return`${qh()}${qh()}${qh()}`}});function qh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WE=new De("Platform Initializer"),Uu=new De("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zE=new De("appBootstrapListener");let RL=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const xi=new De("LocaleId",{providedIn:"root",factory:()=>uu(xi,Ue.Optional|Ue.SkipSelf)||function OL(){return"undefined"!=typeof $localize&&$localize.locale||xu}()});class LL{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let $E=(()=>{class n{compileModuleSync(e){return new Nh(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),s=ri(yr(e).declarations).reduce((o,a)=>{const l=vn(a);return l&&o.push(new Fh(l)),o},[]);return new LL(r,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FL=(()=>Promise.resolve(0))();function Jh(n){"undefined"==typeof Zone?FL.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class rt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function NL(){let n=bt.requestAnimationFrame,t=bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function VL(n){const t=()=>{!function UL(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(bt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,tp(n),n.isCheckStableRunning=!0,ep(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),tp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,s,o,a)=>{try{return YE(n),e.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),XE(n)}},onInvoke:(e,r,i,s,o,a,l)=>{try{return YE(n),e.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),XE(n)}},onHasTask:(e,r,i,s)=>{e.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,tp(n),ep(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,r,i,s)=>(e.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,BL,Bu,Bu);try{return s.runTask(o,e,r)}finally{s.cancelTask(o)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const BL={};function ep(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function YE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XE(n){n._nesting--,ep(n)}class HL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}}let np=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rt.assertNotInAngularZone(),Jh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jh(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,r,i){return[]}}return n.\u0275fac=function(e){return new(e||n)(ae(rt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),jL=(()=>{class n{constructor(){this._applications=new Map,rp.addToWindow(this)}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return rp.findTestabilityInTree(this,e,r)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class GL{addToWindow(t){}findTestabilityInTree(t,e,r){return null}}let rp=new GL,Ms=null;const QE=new De("AllowMultipleToken"),ZE=new De("PlatformOnDestroy");class qE{constructor(t,e){this.name=t,this.token=e}}function JE(n,t,e=[]){const r=`Platform: ${t}`,i=new De(r);return(s=[])=>{let o=ip();if(!o||o.injector.get(QE,!1)){const a=[...e,...s,{provide:i,useValue:!0}];n?n(a):function $L(n){if(Ms&&!Ms.get(QE,!1))throw new Me(400,"");Ms=n;const t=n.get(eb),e=n.get(WE,null);e&&e.forEach(r=>r())}(function XL(n=[],t){return $t.create({name:t,providers:[{provide:ch,useValue:"platform"},{provide:ZE,useValue:()=>Ms=null},...n]})}(a,r))}return function YL(n){const t=ip();if(!t)throw new Me(401,"");return t}()}}function ip(){var n;return null!==(n=null==Ms?void 0:Ms.get(eb))&&void 0!==n?n:null}let eb=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const a=function QL(n,t){let e;return e="noop"===n?new HL:("zone.js"===n?void 0:n)||new rt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:rt,useValue:a}];return a.run(()=>{const v=$t.create({providers:l,parent:this.injector,name:e.moduleType.name}),I=e.create(v),H=I.injector.get(Wi,null);if(!H)throw new Me(402,"");return a.runOutsideAngular(()=>{const X=a.onError.subscribe({next:Q=>{H.handleError(Q)}});I.onDestroy(()=>{sp(this._modules,I),X.unsubscribe()})}),function ZL(n,t,e){try{const r=e();return ja(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(H,a,()=>{const X=I.injector.get(Zh);return X.runInitializers(),X.donePromise.then(()=>(function xO(n){nr(n,"Expected localeId to be defined"),"string"==typeof n&&(O0=n.toLowerCase().replace(/_/g,"-"))}(I.injector.get(xi,xu)||xu),this._moduleDoBootstrap(I),I))})})}bootstrapModule(e,r=[]){const i=tb({},r);return function WL(n,t,e){const r=new Nh(e);return Promise.resolve(r)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(e){const r=e.injector.get(Vu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new Me(403,"");e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(ZE,null);null==e||e(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(ae($t))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function tb(n,t){return Array.isArray(t)?t.reduce(tb,n):Object.assign(Object.assign({},n),t)}let Vu=(()=>{class n{constructor(e,r,i,s){this._zone=e,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new p(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new p(l=>{let v;this._zone.runOutsideAngular(()=>{v=this._zone.onStable.subscribe(()=>{rt.assertNotInAngularZone(),Jh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{rt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{v.unsubscribe(),I.unsubscribe()}});this.isStable=eo(o,a.pipe(Lm()))}bootstrap(e,r){if(!this._initStatus.done)throw new Me(405,"");let i;i=e instanceof rE?e:this._injector.get(ws).resolveComponentFactory(e),this.componentTypes.push(i.componentType);const s=function zL(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Mi),a=i.create($t.NULL,[],r||i.selector,s),l=a.location.nativeElement,v=a.injector.get(np,null),I=v&&a.injector.get(jL);return v&&I&&I.registerApplication(l,v),a.onDestroy(()=>{this.detachView(a.hostView),sp(this.components,a),I&&I.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;sp(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(zE,[]).concat(this._bootstrapListeners).forEach(i=>i(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(ae(rt),ae($t),ae(Wi),ae(Zh))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sp(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let rb=!0,wr=(()=>{class n{}return n.__NG_ELEMENT_ID__=ek,n})();function ek(n){return function tk(n,t,e){if(Wl(n)&&!e){const r=sr(n.index,t);return new Xa(r,r)}return 47&n.type?new Xa(t[16],t):null}(rn(),pe(),16==(16&n))}class lb{constructor(){}supports(t){return Ba(t)}create(t){return new ak(t)}}const ok=(n,t)=>t;class ak{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ok}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,s=null;for(;e||r;){const o=!r||e&&e.currentIndex<cb(r,i,s)?e:r,a=cb(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{s||(s=[]);const v=a-i,I=l-i;if(v!=I){for(let X=0;X<v;X++){const Q=X<s.length?s[X]:s[X]=0,ee=Q+X;I<=ee&&ee<v&&(s[X]=Q+1)}s[o.previousIndex]=I-v}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ba(t))throw new Me(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),r=!0),e=e._next}else i=0,function mR(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[So()]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,a,o,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,i)):t=this._addAfter(new lk(e,r),s,i),t}_verifyReinsertion(t,e,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class lk{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uk{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class ub{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new uk,this.map.set(e,r)),r.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(n,t,e){const r=n.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}class db{constructor(){}supports(t){return t instanceof Map||mh(t)}create(){return new ck}}class ck{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||mh(t)))throw new Me(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,e);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new dk(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class dk{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fb(){return new Gu([new lb])}let Gu=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||fb()),deps:[[n,new _s,new Dr]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new Me(901,"")}}return n.\u0275prov=be({token:n,providedIn:"root",factory:fb}),n})();function hb(){return new tl([new db])}let tl=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||hb()),deps:[[n,new _s,new Dr]]}}find(e){const r=this.factories.find(s=>s.supports(e));if(r)return r;throw new Me(901,"")}}return n.\u0275prov=be({token:n,providedIn:"root",factory:hb}),n})();const pk=JE(null,"core",[]);let gk=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(ae(Vu))},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({}),n})(),Ku=null;function ci(){return Ku}const Qe=new De("DocumentToken");let Is=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:function(){return function _k(){return ae(pb)}()},providedIn:"platform"}),n})();const Ek=new De("Location Initialized");let pb=(()=>{class n extends Is{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ci().getBaseHref(this._doc)}onPopState(e){const r=ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){gb()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){gb()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe))},n.\u0275prov=be({token:n,factory:function(){return function bk(){return new pb(ae(Qe))}()},providedIn:"platform"}),n})();function gb(){return!!window.history.pushState}function cp(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function mb(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ii(n){return n&&"?"!==n[0]?"?"+n:n}let Go=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:function(){return function Dk(n){const t=ae(Qe).location;return new vb(ae(Is),t&&t.origin||"")}()},providedIn:"root"}),n})();const dp=new De("appBaseHref");let vb=(()=>{class n extends Go{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return cp(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Ii(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,s){const o=this.prepareExternalUrl(i+Ii(s));this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){const o=this.prepareExternalUrl(i+Ii(s));this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(ae(Is),ae(dp,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Ck=(()=>{class n extends Go{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=cp(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+Ii(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+Ii(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(ae(Is),ae(dp,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Wu=(()=>{class n{constructor(e,r){this._subject=new nt,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=mb(yb(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Ii(r))}normalize(e){return n.stripTrailingSlash(function Sk(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,yb(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ii(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ii(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=Ii,n.joinWithSlash=cp,n.stripTrailingSlash=mb,n.\u0275fac=function(e){return new(e||n)(ae(Go),ae(Is))},n.\u0275prov=be({token:n,factory:function(){return function Tk(){return new Wu(ae(Go),ae(Is))}()},providedIn:"root"}),n})();function yb(n){return n.replace(/\/index.html$/,"")}function Ab(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,s]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}let bp=(()=>{class n{constructor(e,r,i,s){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ba(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${vt(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(re(Gu),re(tl),re(_t),re(Ai))},n.\u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class uF{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tc=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new uF(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Mb(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{Mb(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(re(Xn),re($r),re(Gu))},n.\u0275dir=Oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Mb(n,t){n.context.$implicit=t.item}let Rs=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new cF,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){xb("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){xb("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(re(Xn),re($r))},n.\u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cF{constructor(){this.$implicit=null,this.ngIf=null}}function xb(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${vt(t)}'.`)}class Dp{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ko=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Oe({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),nc=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new Dp(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(re(Xn),re($r),re(Ko,9))},n.\u0275dir=Oe({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Ib=(()=>{class n{constructor(e,r,i){i._addDefault(new Dp(e,r))}}return n.\u0275fac=function(e){return new(e||n)(re(Xn),re($r),re(Ko,9))},n.\u0275dir=Oe({type:n,selectors:[["","ngSwitchDefault",""]]}),n})();class pF{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class gF{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}onDestroy(t){}}const mF=new gF,vF=new pF;let Ob=(()=>{class n{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(ja(e))return mF;if(V_(e))return vF;throw function Xr(n,t){return new Me(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(re(wr,16))},n.\u0275pipe=$n({name:"async",type:n,pure:!1}),n})(),Xi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({}),n})();const Lb="browser";let BF=(()=>{class n{}return n.\u0275prov=be({token:n,providedIn:"root",factory:()=>new UF(ae(Qe),window)}),n})();class UF{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function VF(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=kb(this.window.history)||kb(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function kb(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Fb{}class Sp extends class HF extends class yk{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function vk(n){Ku||(Ku=n)}(new Sp)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function jF(){return il=il||document.querySelector("base"),il?il.getAttribute("href"):null}();return null==e?null:function GF(n){rc=rc||document.createElement("a"),rc.setAttribute("href",n);const t=rc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){il=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ab(document.cookie,t)}}let rc,il=null;const Nb=new De("TRANSITION_ID"),WF=[{provide:Qh,useFactory:function KF(n,t,e){return()=>{e.get(Zh).donePromise.then(()=>{const r=ci(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Nb,Qe,$t],multi:!0}];class wp{static init(){!function KL(n){rp=n}(new wp)}addToWindow(t){bt.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},bt.getAllAngularTestabilities=()=>t.getAllTestabilities(),bt.getAllAngularRootElements=()=>t.getAllRootElements(),bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(r=>{const i=bt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?ci().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let zF=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const ic=new De("EventManagerPlugins");let sc=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(ae(ic),ae(rt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class Bb{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=ci().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Ub=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),sl=(()=>{class n extends Ub{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(Vb),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Vb))}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function Vb(n){ci().remove(n)}const Ap={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mp=/%COMP%/g;function oc(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?oc(n,i,e):(i=i.replace(Mp,n),e.push(i))}return e}function Gb(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ac=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new xp(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case Nr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case Nr.ShadowDom:return new JF(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=oc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(ae(sc),ae(sl),ae(el))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class xp{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ap[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const s=Ap[i];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Ap[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(ar.DashCase|ar.Important)?t.style.setProperty(e,r,i&ar.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&ar.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Gb(r)):this.eventManager.addEventListener(t,e,Gb(r))}}class qF extends xp{constructor(t,e,r,i){super(t),this.component=r;const s=oc(i+"-"+r.id,r.styles,[]);e.addStyles(s),this.contentAttr=function XF(n){return"_ngcontent-%COMP%".replace(Mp,n)}(i+"-"+r.id),this.hostAttr=function QF(n){return"_nghost-%COMP%".replace(Mp,n)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class JF extends xp{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=oc(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let e1=(()=>{class n extends Bb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const Wb=["alt","control","meta","shift"],n1={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},r1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s1=(()=>{class n extends Bb{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ci().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(Wb.forEach(l=>{const v=r.indexOf(l);v>-1&&(r.splice(v,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(e){let r="",i=function o1(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&zb.hasOwnProperty(t)&&(t=zb[t]))}return n1[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Wb.forEach(s=>{s!=i&&r1[s](e)&&(r+=s+".")}),r+=i,r}static eventCallback(e,r,i){return s=>{n.getEventFullKey(s)===e&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const c1=JE(pk,"browser",[{provide:Uu,useValue:Lb},{provide:WE,useValue:function a1(){Sp.makeCurrent(),wp.init()},multi:!0},{provide:Qe,useFactory:function u1(){return function MA(n){zd=n}(document),document},deps:[]}]),d1=[{provide:ch,useValue:"root"},{provide:Wi,useFactory:function l1(){return new Wi},deps:[]},{provide:ic,useClass:e1,multi:!0,deps:[Qe,rt,Uu]},{provide:ic,useClass:s1,multi:!0,deps:[Qe]},{provide:ac,useClass:ac,deps:[sc,sl,el]},{provide:Ya,useExisting:ac},{provide:Ub,useExisting:sl},{provide:sl,useClass:sl,deps:[Qe]},{provide:np,useClass:np,deps:[rt]},{provide:sc,useClass:sc,deps:[ic,rt]},{provide:Fb,useClass:zF,deps:[]}];let $b=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:el,useValue:e.appId},{provide:Nb,useExisting:el},WF]}}}return n.\u0275fac=function(e){return new(e||n)(ae(n,12))},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:d1,imports:[Xi,gk]}),n})();"undefined"!=typeof window&&window;let Rp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:function(e){let r=null;return r=e?new(e||n):ae(Qb),r},providedIn:"root"}),n})(),Qb=(()=>{class n extends Rp{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case ht.NONE:return r;case ht.HTML:return ti(r,"HTML")?lr(r):gy(this._doc,String(r)).toString();case ht.STYLE:return ti(r,"Style")?lr(r):r;case ht.SCRIPT:if(ti(r,"Script"))return lr(r);throw new Error("unsafe value used in a script context");case ht.URL:return ay(r),ti(r,"URL")?lr(r):Oa(String(r));case ht.RESOURCE_URL:if(ti(r,"ResourceURL"))return lr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function fx(n){return new ax(n)}(e)}bypassSecurityTrustStyle(e){return function hx(n){return new lx(n)}(e)}bypassSecurityTrustScript(e){return function px(n){return new ux(n)}(e)}bypassSecurityTrustUrl(e){return function gx(n){return new cx(n)}(e)}bypassSecurityTrustResourceUrl(e){return function mx(n){return new dx(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe))},n.\u0275prov=be({token:n,factory:function(e){let r=null;return r=e?new e:function b1(n){return new Qb(n.get(Qe))}(ae($t)),r},providedIn:"root"}),n})();function Fe(...n){return gn(n,fa(n))}function Wo(n,t){return Be(t)?Kt(n,t,1):Kt(n,1)}function xr(n,t){return $((e,r)=>{let i=0;e.subscribe(Z(r,s=>n.call(t,s,i++)&&r.next(s)))})}class Zb{}class qb{}class Qr{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),s=i.toLowerCase(),o=e.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Qr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Qr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class D1{encodeKey(t){return Jb(t)}encodeValue(t){return Jb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const T1=/%(\d[a-f0-9])/gi,S1={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Jb(n){return encodeURIComponent(n).replace(T1,(t,e)=>{var r;return null!==(r=S1[e])&&void 0!==r?r:t})}function eD(n){return`${n}`}class Zi{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new D1,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function C1(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,s)),t.decodeValue(i.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Zi({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(eD(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(eD(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class w1{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function tD(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function nD(n){return"undefined"!=typeof Blob&&n instanceof Blob}function rD(n){return"undefined"!=typeof FormData&&n instanceof FormData}class ol{constructor(t,e,r,i){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function A1(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qr),this.context||(this.context=new w1),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Zi,this.urlWithParams=e}serializeBody(){return null===this.body?null:tD(this.body)||nD(this.body)||rD(this.body)||function M1(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Zi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rD(this.body)?null:nD(this.body)?this.body.type||null:tD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,s=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let v=t.headers||this.headers,I=t.params||this.params;const H=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(v=Object.keys(t.setHeaders).reduce((X,Q)=>X.set(Q,t.setHeaders[Q]),v)),t.setParams&&(I=Object.keys(t.setParams).reduce((X,Q)=>X.set(Q,t.setParams[Q]),I)),new ol(r,i,o,{params:I,headers:v,context:H,reportProgress:l,responseType:s,withCredentials:a})}}var tn=(()=>((tn=tn||{})[tn.Sent=0]="Sent",tn[tn.UploadProgress=1]="UploadProgress",tn[tn.ResponseHeader=2]="ResponseHeader",tn[tn.DownloadProgress=3]="DownloadProgress",tn[tn.Response=4]="Response",tn[tn.User=5]="User",tn))();class Op{constructor(t,e=200,r="OK"){this.headers=t.headers||new Qr,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Pp extends Op{constructor(t={}){super(t),this.type=tn.ResponseHeader}clone(t={}){return new Pp({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class lc extends Op{constructor(t={}){super(t),this.type=tn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new lc({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class iD extends Op{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Lp(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let al=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let s;if(e instanceof ol)s=e;else{let l,v;l=i.headers instanceof Qr?i.headers:new Qr(i.headers),i.params&&(v=i.params instanceof Zi?i.params:new Zi({fromObject:i.params})),s=new ol(e,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Fe(s).pipe(Wo(l=>this.handler.handle(l)));if(e instanceof ol||"events"===i.observe)return o;const a=o.pipe(xr(l=>l instanceof lc));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(q(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(q(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(q(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(q(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Zi).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Lp(i,r))}post(e,r,i={}){return this.request("POST",e,Lp(i,r))}put(e,r,i={}){return this.request("PUT",e,Lp(i,r))}}return n.\u0275fac=function(e){return new(e||n)(ae(Zb))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class sD{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const oD=new De("HTTP_INTERCEPTORS");let x1=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const I1=/^\)\]\}',?\n/;let aD=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new p(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((Q,ee)=>i.setRequestHeader(Q,ee.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Q=e.detectContentTypeHeader();null!==Q&&i.setRequestHeader("Content-Type",Q)}if(e.responseType){const Q=e.responseType.toLowerCase();i.responseType="json"!==Q?Q:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const Q=i.statusText||"OK",ee=new Qr(i.getAllResponseHeaders()),ie=function R1(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return o=new Pp({headers:ee,status:i.status,statusText:Q,url:ie}),o},l=()=>{let{headers:Q,status:ee,statusText:ie,url:le}=a(),de=null;204!==ee&&(de=void 0===i.response?i.responseText:i.response),0===ee&&(ee=de?200:0);let oe=ee>=200&&ee<300;if("json"===e.responseType&&"string"==typeof de){const ge=de;de=de.replace(I1,"");try{de=""!==de?JSON.parse(de):null}catch(Ie){de=ge,oe&&(oe=!1,de={error:Ie,text:de})}}oe?(r.next(new lc({body:de,headers:Q,status:ee,statusText:ie,url:le||void 0})),r.complete()):r.error(new iD({error:de,headers:Q,status:ee,statusText:ie,url:le||void 0}))},v=Q=>{const{url:ee}=a(),ie=new iD({error:Q,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ee||void 0});r.error(ie)};let I=!1;const H=Q=>{I||(r.next(a()),I=!0);let ee={type:tn.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(ee.total=Q.total),"text"===e.responseType&&!!i.responseText&&(ee.partialText=i.responseText),r.next(ee)},X=Q=>{let ee={type:tn.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(ee.total=Q.total),r.next(ee)};return i.addEventListener("load",l),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),e.reportProgress&&(i.addEventListener("progress",H),null!==s&&i.upload&&i.upload.addEventListener("progress",X)),i.send(s),r.next({type:tn.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",l),i.removeEventListener("timeout",v),e.reportProgress&&(i.removeEventListener("progress",H),null!==s&&i.upload&&i.upload.removeEventListener("progress",X)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(ae(Fb))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const kp=new De("XSRF_COOKIE_NAME"),Fp=new De("XSRF_HEADER_NAME");class lD{}let O1=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ab(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe),ae(Uu),ae(kp))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Np=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(ae(lD),ae(Fp))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),P1=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(oD,[]);this.chain=r.reduceRight((i,s)=>new sD(i,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(ae(qb),ae($t))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),L1=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Np,useClass:x1}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:kp,useValue:e.cookieName}:[],e.headerName?{provide:Fp,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[Np,{provide:oD,useExisting:Np,multi:!0},{provide:lD,useClass:O1},{provide:kp,useValue:"XSRF-TOKEN"},{provide:Fp,useValue:"X-XSRF-TOKEN"}]}),n})(),k1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[al,{provide:Zb,useClass:P1},aD,{provide:qb,useExisting:aD}],imports:[[L1.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();class uD{}const Oi="*";function ll(n,t){return{type:7,name:n,definitions:t,options:{}}}function Os(n,t=null){return{type:4,styles:t,timings:n}}function cD(n,t=null){return{type:2,steps:n,options:t}}function _n(n){return{type:6,styles:n,offset:null}}function qi(n,t,e){return{type:0,name:n,styles:t,options:e}}function Ji(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function B1(n=null){return{type:9,options:n}}function U1(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function dD(n){Promise.resolve(null).then(n)}class ul{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dD(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class fD{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const s=this.players.length;0==s?dD(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const it=!1;function hD(n){return new Me(3e3,it)}function _N(){return"undefined"!=typeof window&&void 0!==window.document}function Up(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function es(n){switch(n.length){case 0:return new ul;case 1:return n[0];default:return new fD(n)}}function pD(n,t,e,r,i={},s={}){const o=[],a=[];let l=-1,v=null;if(r.forEach(I=>{const H=I.offset,X=H==l,Q=X&&v||{};Object.keys(I).forEach(ee=>{let ie=ee,le=I[ee];if("offset"!==ee)switch(ie=t.normalizePropertyName(ie,o),le){case"!":le=i[ee];break;case Oi:le=s[ee];break;default:le=t.normalizeStyleValue(ee,ie,le,o)}Q[ie]=le}),X||a.push(Q),v=Q,l=H}),o.length)throw function lN(n){return new Me(3502,it)}();return a}function Vp(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&Hp(e,"start",n)));break;case"done":n.onDone(()=>r(e&&Hp(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&Hp(e,"destroy",n)))}}function Hp(n,t,e){const r=e.totalTime,s=jp(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function jp(n,t,e,r,i="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function cr(n,t,e){let r;return n instanceof Map?(r=n.get(t),r||n.set(t,r=e)):(r=n[t],r||(r=n[t]=e)),r}function gD(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Gp=(n,t)=>!1,mD=(n,t,e)=>[],vD=null;function Kp(n){const t=n.parentNode||n.host;return t===vD?null:t}(Up()||"undefined"!=typeof Element)&&(_N()?(vD=(()=>document.documentElement)(),Gp=(n,t)=>{for(;t;){if(t===n)return!0;t=Kp(t)}return!1}):Gp=(n,t)=>n.contains(t),mD=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let Ps=null,yD=!1;function _D(n){Ps||(Ps=function bN(){return"undefined"!=typeof document?document.body:null}()||{},yD=!!Ps.style&&"WebkitAppearance"in Ps.style);let t=!0;return Ps.style&&!function EN(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Ps.style,!t&&yD&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ps.style)),t}const ED=Gp,bD=mD;let DD=(()=>{class n{validateStyleProperty(e){return _D(e)}matchesElement(e,r){return!1}containsElement(e,r){return ED(e,r)}getParentElement(e){return Kp(e)}query(e,r,i){return bD(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,s,o,a=[],l){return new ul(i,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Wp=(()=>{class n{}return n.NOOP=new DD,n})();const zp="ng-enter",cc="ng-leave",dc="ng-trigger",fc=".ng-trigger",TD="ng-animating",$p=".ng-animating";function Ls(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Yp(parseFloat(t[1]),t[2])}function Yp(n,t){return"s"===t?1e3*n:n}function hc(n,t,e){return n.hasOwnProperty("duration")?n:function TN(n,t,e){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(hD()),{duration:0,delay:0,easing:""};i=Yp(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Yp(parseFloat(l),a[4]));const v=a[5];v&&(o=v)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(function V1(){return new Me(3100,it)}()),a=!0),s<0&&(t.push(function H1(){return new Me(3101,it)}()),a=!0),a&&t.splice(l,0,hD())}return{duration:i,delay:s,easing:o}}(n,t,e)}function zo(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function ts(n,t,e={}){if(t)for(let r in n)e[r]=n[r];else zo(n,e);return e}function wD(n,t,e){return e?t+":"+e+";":""}function AD(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=wD(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=wD(0,AN(e),n.style[e]));n.setAttribute("style",t)}function di(n,t,e){n.style&&(Object.keys(t).forEach(r=>{const i=Qp(r);e&&!e.hasOwnProperty(r)&&(e[r]=n.style[i]),n.style[i]=t[r]}),Up()&&AD(n))}function ks(n,t){n.style&&(Object.keys(t).forEach(e=>{const r=Qp(e);n.style[r]=""}),Up()&&AD(n))}function cl(n){return Array.isArray(n)?1==n.length?n[0]:cD(n):n}const Xp=new RegExp("{{\\s*(.+?)\\s*}}","g");function MD(n){let t=[];if("string"==typeof n){let e;for(;e=Xp.exec(n);)t.push(e[1]);Xp.lastIndex=0}return t}function pc(n,t,e){const r=n.toString(),i=r.replace(Xp,(s,o)=>{let a=t[o];return t.hasOwnProperty(o)||(e.push(function G1(n){return new Me(3003,it)}()),a=""),a.toString()});return i==r?n:i}function gc(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const wN=/-+([a-z0-9])/g;function Qp(n){return n.replace(wN,(...t)=>t[1].toUpperCase())}function AN(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dr(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function K1(n){return new Me(3004,it)}()}}function xD(n,t){return window.getComputedStyle(n)[t]}function PN(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function LN(n,t,e){if(":"==n[0]){const l=function kN(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function iN(n){return new Me(3016,it)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function rN(n){return new Me(3015,it)}()),t;const i=r[1],s=r[2],o=r[3];t.push(ID(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&t.push(ID(o,i))}(r,e,t)):e.push(n),e}const _c=new Set(["true","1"]),Ec=new Set(["false","0"]);function ID(n,t){const e=_c.has(n)||Ec.has(n),r=_c.has(t)||Ec.has(t);return(i,s)=>{let o="*"==n||n==i,a="*"==t||t==s;return!o&&e&&"boolean"==typeof i&&(o=i?_c.has(n):Ec.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?_c.has(t):Ec.has(t)),o&&a}}const FN=new RegExp("s*:selfs*,?","g");function Zp(n,t,e,r){return new NN(n).build(t,e,r)}class NN{constructor(t){this._driver=t}build(t,e,r){const i=new VN(e);this._resetContextStyleTimingState(i);const s=dr(this,cl(t),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function z1(){return new Me(3006,it)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,v=l.name;v.toString().split(/\s*,\s*/).forEach(I=>{l.name=I,s.push(this.visitState(l,e))}),l.name=v}else if(1==a.type){const l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,o.push(l)}else e.errors.push(function $1(){return new Me(3007,it)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{if(bc(a)){const l=a;Object.keys(l).forEach(v=>{MD(l[v]).forEach(I=>{o.hasOwnProperty(I)||s.add(I)})})}}),s.size&&(gc(s.values()),e.errors.push(function Y1(n,t){return new Me(3008,it)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=dr(this,cl(t.animation),e);return{type:1,matchers:PN(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Fs(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>dr(this,r,e)),options:Fs(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const s=t.steps.map(o=>{e.currentTime=r;const a=dr(this,o,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:s,options:Fs(t.options)}}visitAnimate(t,e){const r=function jN(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return qp(hc(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=qp(0,0,"");return s.dynamic=!0,s.strValue=e,s}const i=hc(e,t);return qp(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,s=t.styles?t.styles:_n({});if(5==s.type)i=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const v={};r.easing&&(v.easing=r.easing),o=_n(v)}e.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==Oi?r.push(o):e.errors.push(function X1(n){return new Me(3002,it)}()):r.push(o)}):r.push(t.styles);let i=!1,s=null;return r.forEach(o=>{if(bc(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!i)for(let v in a)if(a[v].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,s=e.currentTime;r&&s>0&&(s-=r.duration+r.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void e.unsupportedCSSPropertiesFound.add(a);const l=e.collectedStyles[e.currentQuerySelector],v=l[a];let I=!0;v&&(s!=i&&s>=v.startTime&&i<=v.endTime&&(e.errors.push(function Q1(n,t,e,r,i){return new Me(3010,it)}()),I=!1),s=v.startTime),I&&(l[a]={startTime:s,endTime:i}),e.options&&function SN(n,t,e){const r=t.params||{},i=MD(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||e.push(function j1(n){return new Me(3001,it)}())})}(o[a],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Z1(){return new Me(3011,it)}()),r;let s=0;const o=[];let a=!1,l=!1,v=0;const I=t.steps.map(de=>{const oe=this._makeStyleAst(de,e);let ge=null!=oe.offset?oe.offset:function HN(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(bc(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(bc(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(oe.styles),Ie=0;return null!=ge&&(s++,Ie=oe.offset=ge),l=l||Ie<0||Ie>1,a=a||Ie<v,v=Ie,o.push(Ie),oe});l&&e.errors.push(function q1(){return new Me(3012,it)}()),a&&e.errors.push(function J1(){return new Me(3200,it)}());const H=t.steps.length;let X=0;s>0&&s<H?e.errors.push(function eN(){return new Me(3202,it)}()):0==s&&(X=1/(H-1));const Q=H-1,ee=e.currentTime,ie=e.currentAnimateTimings,le=ie.duration;return I.forEach((de,oe)=>{const ge=X>0?oe==Q?1:X*oe:o[oe],Ie=ge*le;e.currentTime=ee+ie.delay+Ie,ie.duration=Ie,this._validateStyleAst(de,e),de.offset=ge,r.styles.push(de)}),r}visitReference(t,e){return{type:8,animation:dr(this,cl(t.animation),e),options:Fs(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Fs(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Fs(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function BN(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(FN,"")),n=n.replace(/@\*/g,fc).replace(/@\w+/g,e=>fc+"-"+e.substr(1)).replace(/:animating/g,$p),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+s:s,cr(e.collectedStyles,e.currentQuerySelector,{});const a=dr(this,cl(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Fs(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function tN(){return new Me(3013,it)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:hc(t.timings,e.errors,!0);return{type:12,animation:dr(this,cl(t.animation),e),timings:r,options:null}}}class VN{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bc(n){return!Array.isArray(n)&&"object"==typeof n}function Fs(n){return n?(n=zo(n)).params&&(n.params=function UN(n){return n?zo(n):null}(n.params)):n={},n}function qp(n,t,e){return{duration:n,delay:t,easing:e}}function Jp(n,t,e,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Dc{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const WN=new RegExp(":enter","g"),$N=new RegExp(":leave","g");function eg(n,t,e,r,i,s={},o={},a,l,v=[]){return(new YN).buildKeyframes(n,t,e,r,i,s,o,a,l,v)}class YN{buildKeyframes(t,e,r,i,s,o,a,l,v,I=[]){v=v||new Dc;const H=new tg(t,e,v,i,s,I,[]);H.options=l,H.currentTimeline.setStyles([o],null,H.errors,l),dr(this,r,H);const X=H.timelines.filter(Q=>Q.containsAnimation());if(Object.keys(a).length){let Q;for(let ee=X.length-1;ee>=0;ee--){const ie=X[ee];if(ie.element===e){Q=ie;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([a],null,H.errors,l)}return X.length?X.map(Q=>Q.buildKeyframes()):[Jp(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let s=e.currentTimeline.currentTime;const o=null!=r.duration?Ls(r.duration):null,a=null!=r.delay?Ls(r.delay):null;return 0!==o&&t.forEach(l=>{const v=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,v.duration+v.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),dr(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const s=t.options;if(s&&(s.params||s.delay)&&(i=e.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Cc);const o=Ls(s.delay);i.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>dr(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Ls(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),dr(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return hc(e.params?pc(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(r.duration),this.visitStyle(s,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(s):r.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,s=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+s),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},s=i.delay?Ls(i.delay):0;s&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Cc);let o=r;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((v,I)=>{e.currentQueryIndex=I;const H=e.createSubContext(t.options,v);s&&H.delayNextStep(s),v===e.element&&(l=H.currentTimeline),dr(this,t.animation,H),H.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,H.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const I=e.currentTimeline;l&&I.delayNextStep(l);const H=I.currentTime;dr(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-H+(i.startTime-r.currentTimeline.startTime)}}const Cc={};class tg{constructor(t,e,r,i,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Cc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Tc(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=Ls(r.duration)),null!=r.delay&&(i.delay=Ls(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=pc(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,s=new tg(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Cc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},s=new XN(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,s,o){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(WN,"."+this._enterClassName)).replace($N,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),a.push(...v)}return!s&&0==a.length&&o.push(function nN(n){return new Me(3014,it)}()),a}}class Tc{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Tc(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Oi,this._currentKeyframe[e]=Oi}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&(this._previousKeyframe.easing=e);const s=i&&i.params||{},o=function QN(n,t){const e={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(t),r.forEach(s=>{e[s]=Oi})):ts(i,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=pc(o[a],s,r);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Oi),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],i=t._styleSummary[e];(!r||i.time>r.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const v=ts(a,!0);Object.keys(v).forEach(I=>{const H=v[I];"!"==H?t.add(I):H==Oi&&e.add(I)}),r||(v.offset=l/this.duration),i.push(v)});const s=t.size?gc(t.values()):[],o=e.size?gc(e.values()):[];if(r){const a=i[0],l=zo(a);a.offset=0,l.offset=1,i=[a,l]}return Jp(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class XN extends Tc{constructor(t,e,r,i,s,o,a=!1){super(t,e,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=r+e,a=e/o,l=ts(t[0],!1);l.offset=0,s.push(l);const v=ts(t[0],!1);v.offset=PD(a),s.push(v);const I=t.length-1;for(let H=1;H<=I;H++){let X=ts(t[H],!1);X.offset=PD((e+X.offset*r)/o),s.push(X)}r=o,e=0,i="",t=s}return Jp(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function PD(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class ng{}class ZN extends ng{normalizePropertyName(t,e){return Qp(t)}normalizeStyleValue(t,e,r,i){let s="";const o=r.toString().trim();if(qN[e]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function W1(n,t){return new Me(3005,it)}())}return o+s}}const qN=(()=>function JN(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function LD(n,t,e,r,i,s,o,a,l,v,I,H,X){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:v,postStyleProps:I,totalTime:H,errors:X}}const rg={};class kD{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function eB(n,t,e,r,i){return n.some(s=>s(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){const i=this._stateStyles["*"],s=this._stateStyles[t],o=i?i.buildStyles(e,r):{};return s?s.buildStyles(e,r):o}build(t,e,r,i,s,o,a,l,v,I){const H=[],X=this.ast.options&&this.ast.options.params||rg,ee=this.buildStyles(r,a&&a.params||rg,H),ie=l&&l.params||rg,le=this.buildStyles(i,ie,H),de=new Set,oe=new Map,ge=new Map,Ie="void"===i,Xe={params:Object.assign(Object.assign({},X),ie)},Bt=I?[]:eg(t,e,this.ast.animation,s,o,ee,le,Xe,v,H);let jt=0;if(Bt.forEach(pr=>{jt=Math.max(pr.duration+pr.delay,jt)}),H.length)return LD(e,this._triggerName,r,i,Ie,ee,le,[],[],oe,ge,jt,H);Bt.forEach(pr=>{const gr=pr.element,sa=cr(oe,gr,{});pr.preStyleProps.forEach(Zr=>sa[Zr]=!0);const Bi=cr(ge,gr,{});pr.postStyleProps.forEach(Zr=>Bi[Zr]=!0),gr!==e&&de.add(gr)});const hr=gc(de.values());return LD(e,this._triggerName,r,i,Ie,ee,le,Bt,hr,oe,ge,jt)}}class tB{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},i=zo(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!=o&&(i[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=pc(l,i,e));const v=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,v,l,e),r[v]=l})}}),r}}class rB{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(i=>{this.states[i.name]=new tB(i.style,i.options&&i.options.params||{},r)}),FD(this.states,"true","1"),FD(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new kD(t,i,this.states))}),this.fallbackTransition=function iB(n,t,e){return new kD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(o=>o.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function FD(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const sB=new Dc;class oB{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],s=Zp(this._driver,e,r,[]);if(r.length)throw function uN(n){return new Me(3503,it)}();this._animations[t]=s}_buildPlayer(t,e,r){const i=t.element,s=pD(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],s=this._animations[t];let o;const a=new Map;if(s?(o=eg(this._driver,e,s,zp,cc,{},{},r,sB,i),o.forEach(I=>{const H=cr(a,I.element,{});I.postStyleProps.forEach(X=>H[X]=null)})):(i.push(function cN(){return new Me(3300,it)}()),o=[]),i.length)throw function dN(n){return new Me(3504,it)}();a.forEach((I,H)=>{Object.keys(I).forEach(X=>{I[X]=this._driver.computeStyle(H,X,Oi)})});const v=es(o.map(I=>{const H=a.get(I.element);return this._buildPlayer(I,{},H)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function fN(n){return new Me(3301,it)}();return e}listen(t,e,r,i){const s=jp(e,"","","");return Vp(this._getPlayer(t),r,s,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const s=this._getPlayer(t);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const ND="ng-animate-queued",ig="ng-animate-disabled",dB=[],BD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ir="__ng_removed";class sg{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function mB(n){return null!=n?n:null}(r?t.value:t),r){const s=zo(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const dl="void",og=new sg(dl);class hB{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Rr(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.hasOwnProperty(e))throw function hN(n,t){return new Me(3302,it)}();if(null==r||0==r.length)throw function pN(n){return new Me(3303,it)}();if(!function vB(n){return"start"==n||"done"==n}(r))throw function gN(n,t){return new Me(3400,it)}();const s=cr(this._elementListeners,t,[]),o={name:e,phase:r,callback:i};s.push(o);const a=cr(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Rr(t,dc),Rr(t,dc+"-"+e),a[e]=og),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function mN(n){return new Me(3401,it)}();return e}trigger(t,e,r,i=!0){const s=this._getTrigger(e),o=new ag(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Rr(t,dc),Rr(t,dc+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const v=new sg(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&v.absorbOptions(l.options),a[e]=v,l||(l=og),v.value!==dl&&l.value===v.value){if(!function EB(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const s=e[i];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,v.params)){const ie=[],le=s.matchStyles(l.value,l.params,ie),de=s.matchStyles(v.value,v.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{ks(t,le),di(t,de)})}return}const X=cr(this._engine.playersByElement,t,[]);X.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==e&&ie.queued&&ie.destroy()});let Q=s.matchTransition(l.value,v.value,t,v.params),ee=!1;if(!Q){if(!i)return;Q=s.fallbackTransition,ee=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:Q,fromState:l,toState:v,player:o,isFallbackTransition:ee}),ee||(Rr(t,ND),o.onStart(()=>{$o(t,ND)})),o.onDone(()=>{let ie=this.players.indexOf(o);ie>=0&&this.players.splice(ie,1);const le=this._engine.playersByElement.get(t);if(le){let de=le.indexOf(o);de>=0&&le.splice(de,1)}}),this.players.push(o),X.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,fc,!0);r.forEach(i=>{if(i[Ir])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const v=this.trigger(t,l,dl,i);v&&a.push(v)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),r&&es(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers[o].fallbackTransition,v=r[o]||og,I=new sg(dl),H=new ag(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:v,toState:I,player:H,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(t):[];if(s&&s.length)i=!0;else{let o=t;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ir];(!s||s===BD)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Rr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=jp(s,r.triggerName,r.fromState.value,r.toState.value);l._data=t,Vp(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class pB{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new hB(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement,s=r.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(e);for(;a;){const l=i.get(a);if(l){const v=r.indexOf(l);r.splice(v+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(r[a].hostElement,e)){r.splice(a+1,0,t),o=!0;break}o||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&e.add(a)}}}return e}trigger(t,e,r,i){if(Sc(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!Sc(e))return;const s=e[Ir];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Rr(t,ig)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),$o(t,ig))}removeNode(t,e,r,i){if(Sc(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,s){this.collectedLeaveElements.push(e),e[Ir]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,r,i,s){return Sc(e)?this._fetchNamespace(t).listen(e,r,i,s):()=>{}}_buildInstruction(t,e,r,i,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,fc,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,$p,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return es(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const r=t[Ir];if(r&&r.setForRemoval){if(t[Ir]=BD,r.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,r.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(ig))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Rr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?es(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function vN(n){return new Me(3402,it)}()}_flushAnimations(t,e){const r=new Dc,i=[],s=new Map,o=[],a=new Map,l=new Map,v=new Map,I=new Set;this.disabledNodes.forEach(xe=>{I.add(xe);const Pe=this.driver.query(xe,".ng-animate-queued",!0);for(let Ne=0;Ne<Pe.length;Ne++)I.add(Pe[Ne])});const H=this.bodyNode,X=Array.from(this.statesByElement.keys()),Q=HD(X,this.collectedEnterElements),ee=new Map;let ie=0;Q.forEach((xe,Pe)=>{const Ne=zp+ie++;ee.set(Pe,Ne),xe.forEach(ct=>Rr(ct,Ne))});const le=[],de=new Set,oe=new Set;for(let xe=0;xe<this.collectedLeaveElements.length;xe++){const Pe=this.collectedLeaveElements[xe],Ne=Pe[Ir];Ne&&Ne.setForRemoval&&(le.push(Pe),de.add(Pe),Ne.hasAnimation?this.driver.query(Pe,".ng-star-inserted",!0).forEach(ct=>de.add(ct)):oe.add(Pe))}const ge=new Map,Ie=HD(X,Array.from(de));Ie.forEach((xe,Pe)=>{const Ne=cc+ie++;ge.set(Pe,Ne),xe.forEach(ct=>Rr(ct,Ne))}),t.push(()=>{Q.forEach((xe,Pe)=>{const Ne=ee.get(Pe);xe.forEach(ct=>$o(ct,Ne))}),Ie.forEach((xe,Pe)=>{const Ne=ge.get(Pe);xe.forEach(ct=>$o(ct,Ne))}),le.forEach(xe=>{this.processLeaveNode(xe)})});const Xe=[],Bt=[];for(let xe=this._namespaceList.length-1;xe>=0;xe--)this._namespaceList[xe].drainQueuedTransitions(e).forEach(Ne=>{const ct=Ne.player,hn=Ne.element;if(Xe.push(ct),this.collectedEnterElements.length){const Hn=hn[Ir];if(Hn&&Hn.setForMove){if(Hn.previousTriggersValues&&Hn.previousTriggersValues.has(Ne.triggerName)){const Zs=Hn.previousTriggersValues.get(Ne.triggerName),as=this.statesByElement.get(Ne.element);as&&as[Ne.triggerName]&&(as[Ne.triggerName].value=Zs)}return void ct.destroy()}}const vi=!H||!this.driver.containsElement(H,hn),mr=ge.get(hn),os=ee.get(hn),Gt=this._buildInstruction(Ne,r,os,mr,vi);if(Gt.errors&&Gt.errors.length)return void Bt.push(Gt);if(vi)return ct.onStart(()=>ks(hn,Gt.fromStyles)),ct.onDestroy(()=>di(hn,Gt.toStyles)),void i.push(ct);if(Ne.isFallbackTransition)return ct.onStart(()=>ks(hn,Gt.fromStyles)),ct.onDestroy(()=>di(hn,Gt.toStyles)),void i.push(ct);const Ww=[];Gt.timelines.forEach(Hn=>{Hn.stretchStartingKeyframe=!0,this.disabledNodes.has(Hn.element)||Ww.push(Hn)}),Gt.timelines=Ww,r.append(hn,Gt.timelines),o.push({instruction:Gt,player:ct,element:hn}),Gt.queriedElements.forEach(Hn=>cr(a,Hn,[]).push(ct)),Gt.preStyleProps.forEach((Hn,Zs)=>{const as=Object.keys(Hn);if(as.length){let qs=l.get(Zs);qs||l.set(Zs,qs=new Set),as.forEach(xm=>qs.add(xm))}}),Gt.postStyleProps.forEach((Hn,Zs)=>{const as=Object.keys(Hn);let qs=v.get(Zs);qs||v.set(Zs,qs=new Set),as.forEach(xm=>qs.add(xm))})});if(Bt.length){const xe=[];Bt.forEach(Pe=>{xe.push(function yN(n,t){return new Me(3505,it)}())}),Xe.forEach(Pe=>Pe.destroy()),this.reportError(xe)}const jt=new Map,hr=new Map;o.forEach(xe=>{const Pe=xe.element;r.has(Pe)&&(hr.set(Pe,Pe),this._beforeAnimationBuild(xe.player.namespaceId,xe.instruction,jt))}),i.forEach(xe=>{const Pe=xe.element;this._getPreviousPlayers(Pe,!1,xe.namespaceId,xe.triggerName,null).forEach(ct=>{cr(jt,Pe,[]).push(ct),ct.destroy()})});const pr=le.filter(xe=>GD(xe,l,v)),gr=new Map;VD(gr,this.driver,oe,v,Oi).forEach(xe=>{GD(xe,l,v)&&pr.push(xe)});const Bi=new Map;Q.forEach((xe,Pe)=>{VD(Bi,this.driver,new Set(xe),l,"!")}),pr.forEach(xe=>{const Pe=gr.get(xe),Ne=Bi.get(xe);gr.set(xe,Object.assign(Object.assign({},Pe),Ne))});const Zr=[],oa=[],aa={};o.forEach(xe=>{const{element:Pe,player:Ne,instruction:ct}=xe;if(r.has(Pe)){if(I.has(Pe))return Ne.onDestroy(()=>di(Pe,ct.toStyles)),Ne.disabled=!0,Ne.overrideTotalTime(ct.totalTime),void i.push(Ne);let hn=aa;if(hr.size>1){let mr=Pe;const os=[];for(;mr=mr.parentNode;){const Gt=hr.get(mr);if(Gt){hn=Gt;break}os.push(mr)}os.forEach(Gt=>hr.set(Gt,hn))}const vi=this._buildAnimation(Ne.namespaceId,ct,jt,s,Bi,gr);if(Ne.setRealPlayer(vi),hn===aa)Zr.push(Ne);else{const mr=this.playersByElement.get(hn);mr&&mr.length&&(Ne.parentPlayer=es(mr)),i.push(Ne)}}else ks(Pe,ct.fromStyles),Ne.onDestroy(()=>di(Pe,ct.toStyles)),oa.push(Ne),I.has(Pe)&&i.push(Ne)}),oa.forEach(xe=>{const Pe=s.get(xe.element);if(Pe&&Pe.length){const Ne=es(Pe);xe.setRealPlayer(Ne)}}),i.forEach(xe=>{xe.parentPlayer?xe.syncPlayerEvents(xe.parentPlayer):xe.destroy()});for(let xe=0;xe<le.length;xe++){const Pe=le[xe],Ne=Pe[Ir];if($o(Pe,cc),Ne&&Ne.hasAnimation)continue;let ct=[];if(a.size){let vi=a.get(Pe);vi&&vi.length&&ct.push(...vi);let mr=this.driver.query(Pe,$p,!0);for(let os=0;os<mr.length;os++){let Gt=a.get(mr[os]);Gt&&Gt.length&&ct.push(...Gt)}}const hn=ct.filter(vi=>!vi.destroyed);hn.length?yB(this,Pe,hn):this.processLeaveNode(Pe)}return le.length=0,Zr.forEach(xe=>{this.players.push(xe),xe.onDone(()=>{xe.destroy();const Pe=this.players.indexOf(xe);this.players.splice(Pe,1)}),xe.play()}),Zr}elementContainsData(t,e){let r=!1;const i=e[Ir];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==dl;a.forEach(v=>{v.queued||!l&&v.triggerName!=i||o.push(v)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(t,e,r){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const v=l.element,I=v!==s,H=cr(r,v,[]);this._getPreviousPlayers(v,I,o,a,e.toState).forEach(Q=>{const ee=Q.getRealPlayer();ee.beforeDestroy&&ee.beforeDestroy(),Q.destroy(),H.push(Q)})}ks(s,e.fromStyles)}_buildAnimation(t,e,r,i,s,o){const a=e.triggerName,l=e.element,v=[],I=new Set,H=new Set,X=e.timelines.map(ee=>{const ie=ee.element;I.add(ie);const le=ie[Ir];if(le&&le.removedBeforeQueried)return new ul(ee.duration,ee.delay);const de=ie!==l,oe=function _B(n){const t=[];return jD(n,t),t}((r.get(ie)||dB).map(jt=>jt.getRealPlayer())).filter(jt=>!!jt.element&&jt.element===ie),ge=s.get(ie),Ie=o.get(ie),Xe=pD(0,this._normalizer,0,ee.keyframes,ge,Ie),Bt=this._buildPlayer(ee,Xe,oe);if(ee.subTimeline&&i&&H.add(ie),de){const jt=new ag(t,a,ie);jt.setRealPlayer(Bt),v.push(jt)}return Bt});v.forEach(ee=>{cr(this.playersByQueriedElement,ee.element,[]).push(ee),ee.onDone(()=>function gB(n,t,e){let r;if(n instanceof Map){if(r=n.get(t),r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}}else if(r=n[t],r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&delete n[t]}return r}(this.playersByQueriedElement,ee.element,ee))}),I.forEach(ee=>Rr(ee,TD));const Q=es(X);return Q.onDestroy(()=>{I.forEach(ee=>$o(ee,TD)),di(l,e.toStyles)}),H.forEach(ee=>{cr(i,ee,[]).push(Q)}),Q}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new ul(t.duration,t.delay)}}class ag{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new ul,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>Vp(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){cr(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Sc(n){return n&&1===n.nodeType}function UD(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function VD(n,t,e,r,i){const s=[];e.forEach(l=>s.push(UD(l)));const o=[];r.forEach((l,v)=>{const I={};l.forEach(H=>{const X=I[H]=t.computeStyle(v,H,i);(!X||0==X.length)&&(v[Ir]=fB,o.push(v))}),n.set(v,I)});let a=0;return e.forEach(l=>UD(l,s[a++])),o}function HD(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const i=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const v=a.parentNode;return l=e.has(v)?v:i.has(v)?1:o(v),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Rr(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function $o(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function yB(n,t,e){es(e).onDone(()=>n.processLeaveNode(t))}function jD(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof fD?jD(r.players,t):t.push(r)}}function GD(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(s=>i.add(s)):t.set(n,r),e.delete(n),!0}class wc{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new pB(t,e,r),this._timelineEngine=new oB(t,e,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(t,e,r,i,s){const o=t+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],I=Zp(this._driver,s,l,[]);if(l.length)throw function aN(n,t){return new Me(3404,it)}();a=function nB(n,t,e){return new rB(n,t,e)}(i,I,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[s,o]=gD(r);this._timelineEngine.command(s,e,o,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,s){if("@"==r.charAt(0)){const[o,a]=gD(r);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,r,i,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let DB=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&di(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(di(this._element,this._initialStyles),this._endStyles&&(di(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ks(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ks(this._element,this._endStyles),this._endStyles=null),di(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function lg(n){let t=null;const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=e[r];CB(i)&&(t=t||{},t[i]=n[i])}return t}function CB(n){return"display"===n||"position"===n}class KD{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(r=>{"offset"!=r&&(t[r]=this._finished?e[r]:xD(this.element,r))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class TB{validateStyleProperty(t){return _D(t)}matchesElement(t,e){return!1}containsElement(t,e){return ED(t,e)}getParentElement(t){return Kp(t)}query(t,e,r){return bD(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const v={},I=o.filter(X=>X instanceof KD);(function MN(n,t){return 0===n||0===t})(r,i)&&I.forEach(X=>{let Q=X.currentSnapshot;Object.keys(Q).forEach(ee=>v[ee]=Q[ee])}),e=function xN(n,t,e){const r=Object.keys(e);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=e[a]}),o.length)for(var i=1;i<t.length;i++){let a=t[i];o.forEach(function(l){a[l]=xD(n,l)})}}return t}(t,e=e.map(X=>ts(X,!1)),v);const H=function bB(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=lg(t[0]),t.length>1&&(r=lg(t[t.length-1]))):t&&(e=lg(t)),e||r?new DB(n,e,r):null}(t,e);return new KD(t,e,l,H)}}let SB=(()=>{class n extends uD{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Nr.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?cD(e):e;return WD(this._renderer,null,r,"register",[i]),new wB(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(ae(Ya),ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class wB extends class F1{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new AB(this._id,t,e||{},this._renderer)}}class AB{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return WD(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function WD(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const zD="@.disabled";let MB=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,r){const s=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(s);return I||(I=new $D("",s,this.engine),this._rendererCache.set(s,I)),I}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=I=>{Array.isArray(I)?I.forEach(l):this.engine.registerTrigger(o,a,e,I.name,I)};return r.data.animation.forEach(l),new xB(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(ae(Ya),ae(wc),ae(rt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class $D{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>e.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==zD?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class xB extends $D{constructor(t,e,r,i){super(e,r,i),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==zD?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function IB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function RB(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,e,r)}}let OB=(()=>{class n extends wc{constructor(e,r,i){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe),ae(Wp),ae(ng))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const fi=new De("AnimationModuleType"),YD=[{provide:uD,useClass:SB},{provide:ng,useFactory:function PB(){return new ZN}},{provide:wc,useClass:OB},{provide:Ya,useFactory:function LB(n,t,e){return new MB(n,t,e)},deps:[ac,wc,rt]}],XD=[{provide:Wp,useFactory:()=>new TB},{provide:fi,useValue:"BrowserAnimations"},...YD],kB=[{provide:Wp,useClass:DD},{provide:fi,useValue:"NoopAnimations"},...YD];let FB=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?kB:XD}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:XD,imports:[$b]}),n})();class Or extends N{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:NB}=Array,{getPrototypeOf:BB,prototype:UB,keys:VB}=Object;function QD(n){if(1===n.length){const t=n[0];if(NB(t))return{args:t,keys:null};if(function HB(n){return n&&"object"==typeof n&&BB(n)===UB}(t)){const e=VB(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:jB}=Array;function ug(n){return q(t=>function GB(n,t){return jB(t)?n(...t):n(t)}(n,t))}function ZD(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function qD(...n){const t=fa(n),e=Im(n),{args:r,keys:i}=QD(n);if(0===r.length)return gn([],t);const s=new p(function KB(n,t,e=c){return r=>{JD(t,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)JD(t,()=>{const v=gn(n[l],t);let I=!1;v.subscribe(Z(r,H=>{s[l]=H,I||(I=!0,a--),a||r.next(e(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,t,i?o=>ZD(i,o):c));return e?s.pipe(ug(e)):s}function JD(n,t,e){n?kr(e,n,t):t()}function fl(n,t){const e=Be(n)?n:()=>n,r=i=>i.error(e());return new p(t?i=>t.schedule(r,0,i):r)}const Mc=us(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function xc(...n){return function WB(){return fs(1)}()(gn(n,fa(n)))}function cg(n){return new p(t=>{cn(n()).subscribe(t)})}function eC(){return $((n,t)=>{let e=null;n._refCount++;const r=Z(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,s=e;e=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class zB extends p{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,K(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new O;const e=this.getSubject();t.add(this.source.subscribe(Z(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=O.EMPTY)}return t}refCount(){return eC()(this)}}function Pi(n,t){return $((e,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();e.subscribe(Z(r,l=>{null==i||i.unsubscribe();let v=0;const I=s++;cn(n(l,I)).subscribe(i=Z(r,H=>r.next(t?t(l,H,I,v++):H),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Pr(n){return n<=0?()=>er:$((t,e)=>{let r=0;t.subscribe(Z(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Ns(...n){const t=fa(n);return $((e,r)=>{(t?xc(n,e,t):xc(n,e)).subscribe(r)})}function $B(n,t,e,r,i){return(s,o)=>{let a=e,l=t,v=0;s.subscribe(Z(o,I=>{const H=v++;l=a?n(l,I,H):(a=!0,I),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function tC(n,t){return $($B(n,t,arguments.length>=2,!0))}function Li(n){return $((t,e)=>{let s,r=null,i=!1;r=t.subscribe(Z(e,void 0,void 0,o=>{s=cn(n(o,Li(n)(t))),r?(r.unsubscribe(),r=null,s.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(e))})}function dg(n){return n<=0?()=>er:$((t,e)=>{let r=[];t.subscribe(Z(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function nC(n=YB){return $((t,e)=>{let r=!1;t.subscribe(Z(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function YB(){return new Mc}function rC(n){return $((t,e)=>{let r=!1;t.subscribe(Z(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Yo(n,t){const e=arguments.length>=2;return r=>r.pipe(n?xr((i,s)=>n(i,s,r)):c,Pr(1),e?rC(t):nC(()=>new Mc))}function En(n,t,e){const r=Be(n)||t||e?{next:n,error:t,complete:e}:n;return r?$((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Z(s,l=>{var v;null===(v=r.next)||void 0===v||v.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var v;a=!1,null===(v=r.error)||void 0===v||v.call(r,l),s.error(l)},()=>{var l,v;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):c}function iC(n){return $((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class ki{constructor(t,e){this.id=t,this.url=e}}class fg extends ki{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hl extends ki{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sC extends ki{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class QB extends ki{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZB extends ki{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qB extends ki{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JB extends ki{constructor(t,e,r,i,s){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eU extends ki{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tU extends ki{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oC{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aC{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nU{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rU{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iU{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sU{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lC{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Je="primary";class oU{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Xo(n){return new oU(n)}const uC="ngNavigationCancelingError";function hg(n){const t=Error("NavigationCancelingError: "+n);return t[uC]=!0,t}function lU(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hi(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!cC(n[i],t[i]))return!1;return!0}function cC(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,s)=>r[s]===i)}return n===t}function dC(n){return Array.prototype.concat.apply([],n)}function fC(n){return n.length>0?n[n.length-1]:null}function bn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function pi(n){return Dh(n)?n:ja(n)?gn(Promise.resolve(n)):Fe(n)}const dU={exact:function gC(n,t,e){if(!Us(n.segments,t.segments)||!Ic(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!gC(n.children[r],t.children[r],e))return!1;return!0},subset:mC},hC={exact:function fU(n,t){return hi(n,t)},subset:function hU(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>cC(n[e],t[e]))},ignored:()=>!0};function pC(n,t,e){return dU[e.paths](n.root,t.root,e.matrixParams)&&hC[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function mC(n,t,e){return vC(n,t,t.segments,e)}function vC(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Us(i,e)||t.hasChildren()||!Ic(i,e,r))}if(n.segments.length===e.length){if(!Us(n.segments,e)||!Ic(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!mC(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Us(n.segments,i)&&Ic(n.segments,i,r)&&n.children[Je])&&vC(n.children[Je],t,s,r)}}function Ic(n,t,e){return t.every((r,i)=>hC[e](n[i].parameters,r.parameters))}class Bs{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xo(this.queryParams)),this._queryParamMap}toString(){return mU.serialize(this)}}class st{constructor(t,e){this.segments=t,this.children=e,this.parent=null,bn(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rc(this)}}class pl{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Xo(this.parameters)),this._parameterMap}toString(){return DC(this)}}function Us(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class yC{}class _C{parse(t){const e=new SU(t);return new Bs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${gl(t.root,!0)}`,r=function _U(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Oc(e)}=${Oc(i)}`).join("&"):`${Oc(e)}=${Oc(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function vU(n){return encodeURI(n)}(t.fragment)}`:""}`}}const mU=new _C;function Rc(n){return n.segments.map(t=>DC(t)).join("/")}function gl(n,t){if(!n.hasChildren())return Rc(n);if(t){const e=n.children[Je]?gl(n.children[Je],!1):"",r=[];return bn(n.children,(i,s)=>{s!==Je&&r.push(`${s}:${gl(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function gU(n,t){let e=[];return bn(n.children,(r,i)=>{i===Je&&(e=e.concat(t(r,i)))}),bn(n.children,(r,i)=>{i!==Je&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Je?[gl(n.children[Je],!1)]:[`${i}:${gl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Je]?`${Rc(n)}/${e[0]}`:`${Rc(n)}/(${e.join("//")})`}}function EC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oc(n){return EC(n).replace(/%3B/gi,";")}function pg(n){return EC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pc(n){return decodeURIComponent(n)}function bC(n){return Pc(n.replace(/\+/g,"%20"))}function DC(n){return`${pg(n.path)}${function yU(n){return Object.keys(n).map(t=>`;${pg(t)}=${pg(n[t])}`).join("")}(n.parameters)}`}const EU=/^[^\/()?;=#]+/;function Lc(n){const t=n.match(EU);return t?t[0]:""}const bU=/^[^=?&#]+/,CU=/^[^&#]+/;class SU{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Je]=new st(t,e)),r}parseSegment(){const t=Lc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new pl(Pc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Lc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Lc(this.remaining);i&&(r=i,this.capture(r))}t[Pc(e)]=Pc(r)}parseQueryParam(t){const e=function DU(n){const t=n.match(bU);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=function TU(n){const t=n.match(CU);return t?t[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=bC(e),s=bC(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Je);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Je]:new st([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class CC{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=gg(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=gg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=mg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return mg(t,this._root).map(e=>e.value)}}function gg(n,t){if(n===t.value)return t;for(const e of t.children){const r=gg(n,e);if(r)return r}return null}function mg(n,t){if(n===t.value)return[t];for(const e of t.children){const r=mg(n,e);if(r.length)return r.unshift(t),r}return[]}class Fi{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Qo(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class TC extends CC{constructor(t,e){super(t),this.snapshot=e,vg(this,t)}toString(){return this.snapshot.toString()}}function SC(n,t){const e=function wU(n,t){const o=new kc([],{},{},"",{},Je,t,null,n.root,-1,{});return new AC("",new Fi(o,[]))}(n,t),r=new Or([new pl("",{})]),i=new Or({}),s=new Or({}),o=new Or({}),a=new Or(""),l=new Vs(r,i,o,a,s,Je,t,e.root);return l.snapshot=e.root,new TC(new Fi(l,[]),e)}class Vs{constructor(t,e,r,i,s,o,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(q(t=>Xo(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(q(t=>Xo(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wC(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],s=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function AU(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class kc{constructor(t,e,r,i,s,o,a,l,v,I,H){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=v,this._lastPathIndex=I,this._resolve=H}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AC extends CC{constructor(t,e){super(e),this.url=t,vg(this,e)}toString(){return MC(this._root)}}function vg(n,t){t.value._routerState=n,t.children.forEach(e=>vg(n,e))}function MC(n){const t=n.children.length>0?` { ${n.children.map(MC).join(", ")} } `:"";return`${n.value}${t}`}function yg(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,hi(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),hi(t.params,e.params)||n.params.next(e.params),function uU(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!hi(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),hi(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _g(n,t){const e=hi(n.params,t.params)&&function pU(n,t){return Us(n,t)&&n.every((e,r)=>hi(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||_g(n.parent,t.parent))}function ml(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function xU(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ml(n,r,i);return ml(n,r)})}(n,t,e);return new Fi(r,i)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>ml(n,a)),o}}const r=function IU(n){return new Vs(new Or(n.url),new Or(n.params),new Or(n.queryParams),new Or(n.fragment),new Or(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(s=>ml(n,s));return new Fi(r,i)}}function Fc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vl(n){return"object"==typeof n&&null!=n&&n.outlets}function Eg(n,t,e,r,i){let s={};if(r&&bn(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(v=>`${v}`):`${a}`}),n===t)return new Bs(e,s,i);const o=xC(n,t,e);return new Bs(o,s,i)}function xC(n,t,e){const r={};return bn(n.children,(i,s)=>{r[s]=i===t?e:xC(i,t,e)}),new st(n.segments,r)}class IC{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Fc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(vl);if(i&&i!==fC(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bg{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function RC(n,t,e){if(n||(n=new st([],{})),0===n.segments.length&&n.hasChildren())return Nc(n,t,e);const r=function FU(n,t,e){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return s;const o=n.segments[i],a=e[r];if(vl(a))break;const l=`${a}`,v=r<e.length-1?e[r+1]:null;if(i>0&&void 0===l)break;if(l&&v&&"object"==typeof v&&void 0===v.outlets){if(!PC(l,v,o))return s;r+=2}else{if(!PC(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new st(n.segments.slice(0,r.pathIndex),{});return s.children[Je]=new st(n.segments.slice(r.pathIndex),n.children),Nc(s,0,i)}return r.match&&0===i.length?new st(n.segments,{}):r.match&&!n.hasChildren()?Dg(n,t,e):r.match?Nc(n,0,i):Dg(n,t,e)}function Nc(n,t,e){if(0===e.length)return new st(n.segments,{});{const r=function kU(n){return vl(n[0])?n[0].outlets:{[Je]:n}}(e),i={};return bn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=RC(n.children[o],t,s))}),bn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new st(n.segments,i)}}function Dg(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const s=e[i];if(vl(s)){const l=NU(s.outlets);return new st(r,l)}if(0===i&&Fc(e[0])){r.push(new pl(n.segments[t].path,OC(e[0]))),i++;continue}const o=vl(s)?s.outlets[Je]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&Fc(a)?(r.push(new pl(o,OC(a))),i+=2):(r.push(new pl(o,{})),i++)}return new st(r,{})}function NU(n){const t={};return bn(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Dg(new st([],{}),0,e))}),t}function OC(n){const t={};return bn(n,(e,r)=>t[r]=`${e}`),t}function PC(n,t,e){return n==e.path&&hi(t,e.parameters)}class UU{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),yg(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=Qo(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),bn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){const i=t.value,s=e?e.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=Qo(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=Qo(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=Qo(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sU(s.value.snapshot))}),t.children.length&&this.forwardEvent(new rU(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,s=e?e.value:null;if(yg(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yg(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=function VU(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,r)}}class Cg{constructor(t,e){this.routes=t,this.module=e}}function ns(n){return"function"==typeof n}function Hs(n){return n instanceof Bs}const yl=Symbol("INITIAL_VALUE");function _l(){return Pi(n=>qD(n.map(t=>t.pipe(Pr(1),Ns(yl)))).pipe(tC((t,e)=>{let r=!1;return e.reduce((i,s,o)=>i!==yl?i:(s===yl&&(r=!0),r||!1!==s&&o!==e.length-1&&!Hs(s)?i:s),t)},yl),xr(t=>t!==yl),q(t=>Hs(t)?t:!0===t),Pr(1)))}class zU{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new El,this.attachRef=null}}class El{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new zU,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Tg=(()=>{class n{constructor(e,r,i,s,o){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.name=s||Je,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new $U(e,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(re(El),re(Xn),re(ws),ys("name"),re(wr))},n.\u0275dir=Oe({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $U{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Vs?this.route:t===El?this.childContexts:this.parent.get(t,e)}}let LC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ft({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&Dt(0,"router-outlet")},directives:[Tg],encapsulation:2}),n})();function kC(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];YU(r,XU(t,r))}}function YU(n,t){n.children&&kC(n.children,t)}function XU(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Sg(n){const t=n.children&&n.children.map(Sg),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Je&&(e.component=LC),e}function Lr(n){return n.outlet||Je}function FC(n,t){const e=n.filter(r=>Lr(r)===t);return e.push(...n.filter(r=>Lr(r)!==t)),e}const NC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bc(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},NC):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||lU)(e,n,t);if(!s)return Object.assign({},NC);const o={};bn(s.posParams,(l,v)=>{o[v]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Uc(n,t,e,r,i="corrected"){if(e.length>0&&function qU(n,t,e){return e.some(r=>Vc(n,t,r)&&Lr(r)!==Je)}(n,e,r)){const o=new st(t,function ZU(n,t,e,r){const i={};i[Je]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Lr(s)!==Je){const o=new st([],{});o._sourceSegment=n,o._segmentIndexShift=t.length,i[Lr(s)]=o}return i}(n,t,r,new st(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function JU(n,t,e){return e.some(r=>Vc(n,t,r))}(n,e,r)){const o=new st(n.segments,function QU(n,t,e,r,i,s){const o={};for(const a of r)if(Vc(n,e,a)&&!i[Lr(a)]){const l=new st([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:t.length,o[Lr(a)]=l}return Object.assign(Object.assign({},i),o)}(n,t,e,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new st(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Vc(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function BC(n,t,e,r){return!!(Lr(n)===r||r!==Je&&Vc(t,e,n))&&("**"===n.path||Bc(t,n,e).matched)}function UC(n,t,e){return 0===t.length&&!n.children[e]}class Hc{constructor(t){this.segmentGroup=t||null}}class VC{constructor(t){this.urlTree=t}}function bl(n){return fl(new Hc(n))}function HC(n){return fl(new VC(n))}class rV{constructor(t,e,r,i,s){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(Mi)}apply(){const t=Uc(this.urlTree.root,[],[],this.config).segmentGroup,e=new st(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Je).pipe(q(s=>this.createUrlTree(wg(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Li(s=>{if(s instanceof VC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Hc?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Je).pipe(q(i=>this.createUrlTree(wg(i),t.queryParams,t.fragment))).pipe(Li(i=>{throw i instanceof Hc?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new st([],{[Je]:t}):t;return new Bs(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(q(s=>new st([],s))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return gn(i).pipe(Wo(s=>{const o=r.children[s],a=FC(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(q(l=>({segment:l,outlet:s})))}),tC((s,o)=>(s[o.outlet]=o.segment,s),{}),function XB(n,t){const e=arguments.length>=2;return r=>r.pipe(n?xr((i,s)=>n(i,s,r)):c,dg(1),e?rC(t):nC(()=>new Mc))}())}expandSegment(t,e,r,i,s,o){return gn(r).pipe(Wo(a=>this.expandSegmentAgainstRoute(t,e,r,a,i,s,o).pipe(Li(v=>{if(v instanceof Hc)return Fe(null);throw v}))),Yo(a=>!!a),Li((a,l)=>{if(a instanceof Mc||"EmptyError"===a.name)return UC(e,i,s)?Fe(new st([],{})):bl(e);throw a}))}expandSegmentAgainstRoute(t,e,r,i,s,o,a){return BC(i,e,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o):bl(e):bl(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?HC(s):this.lineralizeSegments(r,s).pipe(Kt(o=>{const a=new st(o,{});return this.expandSegment(t,a,e,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:v,positionalParamSegments:I}=Bc(e,i,s);if(!a)return bl(e);const H=this.applyRedirectCommands(l,i.redirectTo,I);return i.redirectTo.startsWith("/")?HC(H):this.lineralizeSegments(i,H).pipe(Kt(X=>this.expandSegment(t,e,r,X.concat(v),o,!1)))}matchSegmentAgainstRoute(t,e,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Fe(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe(q(H=>(r._loadedConfig=H,new st(i,{})))):Fe(new st(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Bc(e,r,i);return o?this.getChildConfig(t,r,i).pipe(Kt(I=>{const H=I.module,X=I.routes,{segmentGroup:Q,slicedSegments:ee}=Uc(e,a,l,X),ie=new st(Q.segments,Q.children);if(0===ee.length&&ie.hasChildren())return this.expandChildren(H,X,ie).pipe(q(ge=>new st(a,ge)));if(0===X.length&&0===ee.length)return Fe(new st(a,{}));const le=Lr(r)===s;return this.expandSegment(H,ie,X,ee,le?Je:s,!0).pipe(q(oe=>new st(a.concat(oe.segments),oe.children)))})):bl(e)}getChildConfig(t,e,r){return e.children?Fe(new Cg(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Fe(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe(Kt(i=>i?this.configLoader.load(t.injector,e).pipe(q(s=>(e._loadedConfig=s,s))):function tV(n){return fl(hg(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):Fe(new Cg([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;return i&&0!==i.length?Fe(i.map(o=>{const a=t.get(o);let l;if(function jU(n){return n&&ns(n.canLoad)}(a))l=a.canLoad(e,r);else{if(!ns(a))throw new Error("Invalid CanLoad guard");l=a(e,r)}return pi(l)})).pipe(_l(),En(o=>{if(!Hs(o))return;const a=hg(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),q(o=>!0===o)):Fe(!0)}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Fe(r);if(i.numberOfChildren>1||!i.children[Je])return fl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[Je]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const s=this.createSegmentGroup(t,e.root,r,i);return new Bs(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return bn(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=e[a]}else r[s]=i}),r}createSegmentGroup(t,e,r,i){const s=this.createSegments(t,e.segments,r,i);let o={};return bn(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,r,i)}),new st(s,o)}createSegments(t,e,r,i){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function wg(n){const t={};for(const r of Object.keys(n.children)){const s=wg(n.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function iV(n){if(1===n.numberOfChildren&&n.children[Je]){const t=n.children[Je];return new st(n.segments.concat(t.segments),t.children)}return n}(new st(n.segments,t))}class jC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class jc{constructor(t,e){this.component=t,this.route=e}}function oV(n,t,e){const r=n._root;return Dl(r,t?t._root:null,e,[r.value])}function Gc(n,t,e){const r=function lV(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function Dl(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Qo(t);return n.children.forEach(o=>{(function uV(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function cV(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Us(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Us(n.url,t.url)||!hi(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_g(n,t)||!hi(n.queryParams,t.queryParams);default:return!_g(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new jC(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Dl(n,t,s.component?a?a.children:null:e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jc(a.outlet.component,o))}else o&&Cl(t,a,i),i.canActivateChecks.push(new jC(r)),Dl(n,null,s.component?a?a.children:null:e,r,i)})(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),bn(s,(o,a)=>Cl(o,e.getContext(a),i)),i}function Cl(n,t,e){const r=Qo(n),i=n.value;bn(r,(s,o)=>{Cl(s,i.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new jc(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class _V{}function GC(n){return new p(t=>t.error(n))}class bV{constructor(t,e,r,i,s,o){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const t=Uc(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Je);if(null===e)return null;const r=new kc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Je,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Fi(r,e),s=new AC(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,r=wC(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const s of Object.keys(e.children)){const o=e.children[s],a=FC(t,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=KC(r);return function DV(n){n.sort((t,e)=>t.value.outlet===Je?-1:e.value.outlet===Je?1:t.value.outlet.localeCompare(e.value.outlet))}(i),i}processSegment(t,e,r,i){for(const s of t){const o=this.processSegmentAgainstRoute(s,e,r,i);if(null!==o)return o}return UC(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!BC(t,e,r,i))return null;let s,o=[],a=[];if("**"===t.path){const Q=r.length>0?fC(r).parameters:{};s=new kc(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$C(t),Lr(t),t.component,t,WC(e),zC(e)+r.length,YC(t))}else{const Q=Bc(e,t,r);if(!Q.matched)return null;o=Q.consumedSegments,a=Q.remainingSegments,s=new kc(o,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$C(t),Lr(t),t.component,t,WC(e),zC(e)+o.length,YC(t))}const l=function CV(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:v,slicedSegments:I}=Uc(e,o,a,l.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===I.length&&v.hasChildren()){const Q=this.processChildren(l,v);return null===Q?null:[new Fi(s,Q)]}if(0===l.length&&0===I.length)return[new Fi(s,[])];const H=Lr(t)===i,X=this.processSegment(l,v,I,H?Je:i);return null===X?null:[new Fi(s,X)]}}function TV(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function KC(n){const t=[],e=new Set;for(const r of n){if(!TV(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=KC(r.children);t.push(new Fi(r.value,i))}return t.filter(r=>!e.has(r))}function WC(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function zC(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function $C(n){return n.data||{}}function YC(n){return n.resolve||{}}function XC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ag(n){return Pi(t=>{const e=n(t);return e?gn(e).pipe(q(()=>t)):Fe(t)})}class OV extends class RV{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Mg=new De("ROUTES");class QC{constructor(t,e,r,i){this.injector=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe(q(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=s.create(t);return new Cg(dC(o.injector.get(Mg,void 0,Ue.Self|Ue.Optional)).map(Sg),o)}),Li(s=>{throw e._loader$=void 0,s}));return e._loader$=new zB(i,()=>new N).pipe(eC()),e._loader$}loadModuleFactory(t){return pi(t()).pipe(Kt(e=>e instanceof aE?Fe(e):gn(this.compiler.compileModuleAsync(e))))}}class LV{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function kV(n){throw n}function FV(n,t,e){return t.parse("/")}function ZC(n,t){return Fe(null)}const NV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fr=(()=>{class n{constructor(e,r,i,s,o,a,l){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new N,this.errorHandler=kV,this.malformedUriErrorHandler=FV,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ZC,afterPreactivation:ZC},this.urlHandlingStrategy=new LV,this.routeReuseStrategy=new OV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Mi),this.console=o.get(RL);const H=o.get(rt);this.isNgZoneEnabled=H instanceof rt&&rt.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function cU(){return new Bs(new st([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new QC(o,a,X=>this.triggerEvent(new oC(X)),X=>this.triggerEvent(new aC(X))),this.routerState=SC(this.currentUrlTree,this.rootComponentType),this.transitions=new Or({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(xr(i=>0!==i.id),q(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Pi(i=>{let s=!1,o=!1;return Fe(i).pipe(En(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pi(a=>{const l=this.browserUrlTree.toString(),v=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return qC(a.source)&&(this.browserUrlTree=a.extractedUrl),Fe(a).pipe(Pi(H=>{const X=this.transitions.getValue();return r.next(new fg(H.id,this.serializeUrl(H.extractedUrl),H.source,H.restoredState)),X!==this.transitions.getValue()?er:Promise.resolve(H)}),function sV(n,t,e,r){return Pi(i=>function nV(n,t,e,r,i){return new rV(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe(q(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),En(H=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:H.urlAfterRedirects})}),function SV(n,t,e,r,i){return Kt(s=>function EV(n,t,e,r,i="emptyOnly",s="legacy"){try{const o=new bV(n,t,e,r,i,s).recognize();return null===o?GC(new _V):Fe(o)}catch(o){return GC(o)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),r,i).pipe(q(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,H=>this.serializeUrl(H),this.paramsInheritanceStrategy,this.relativeLinkResolution),En(H=>{if("eager"===this.urlUpdateStrategy){if(!H.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(H.urlAfterRedirects,H.rawUrl);this.setBrowserUrl(Q,H)}this.browserUrlTree=H.urlAfterRedirects}const X=new ZB(H.id,this.serializeUrl(H.extractedUrl),this.serializeUrl(H.urlAfterRedirects),H.targetSnapshot);r.next(X)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:X,extractedUrl:Q,source:ee,restoredState:ie,extras:le}=a,de=new fg(X,this.serializeUrl(Q),ee,ie);r.next(de);const oe=SC(Q,this.rootComponentType).snapshot;return Fe(Object.assign(Object.assign({},a),{targetSnapshot:oe,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),er}),Ag(a=>{const{targetSnapshot:l,id:v,extractedUrl:I,rawUrl:H,extras:{skipLocationChange:X,replaceUrl:Q}}=a;return this.hooks.beforePreactivation(l,{navigationId:v,appliedUrlTree:I,rawUrlTree:H,skipLocationChange:!!X,replaceUrl:!!Q})}),En(a=>{const l=new qB(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),q(a=>Object.assign(Object.assign({},a),{guards:oV(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function dV(n,t){return Kt(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Fe(Object.assign(Object.assign({},e),{guardsResult:!0})):function fV(n,t,e,r){return gn(n).pipe(Kt(i=>function yV(n,t,e,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Fe(s.map(a=>{const l=Gc(a,t,i);let v;if(function WU(n){return n&&ns(n.canDeactivate)}(l))v=pi(l.canDeactivate(n,t,e,r));else{if(!ns(l))throw new Error("Invalid CanDeactivate guard");v=pi(l(n,t,e,r))}return v.pipe(Yo())})).pipe(_l()):Fe(!0)}(i.component,i.route,e,t,r)),Yo(i=>!0!==i,!0))}(o,r,i,n).pipe(Kt(a=>a&&function HU(n){return"boolean"==typeof n}(a)?function hV(n,t,e,r){return gn(t).pipe(Wo(i=>xc(function gV(n,t){return null!==n&&t&&t(new nU(n)),Fe(!0)}(i.route.parent,r),function pV(n,t){return null!==n&&t&&t(new iU(n)),Fe(!0)}(i.route,r),function vV(n,t,e){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function aV(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>cg(()=>Fe(o.guards.map(l=>{const v=Gc(l,o.node,e);let I;if(function KU(n){return n&&ns(n.canActivateChild)}(v))I=pi(v.canActivateChild(r,n));else{if(!ns(v))throw new Error("Invalid CanActivateChild guard");I=pi(v(r,n))}return I.pipe(Yo())})).pipe(_l())));return Fe(s).pipe(_l())}(n,i.path,e),function mV(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Fe(!0);const i=r.map(s=>cg(()=>{const o=Gc(s,t,e);let a;if(function GU(n){return n&&ns(n.canActivate)}(o))a=pi(o.canActivate(t,n));else{if(!ns(o))throw new Error("Invalid CanActivate guard");a=pi(o(t,n))}return a.pipe(Yo())}));return Fe(i).pipe(_l())}(n,i.route,e))),Yo(i=>!0!==i,!0))}(r,s,n,t):Fe(a)),q(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),En(a=>{if(Hs(a.guardsResult)){const v=hg(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw v.url=a.guardsResult,v}const l=new JB(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),xr(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),Ag(a=>{if(a.guards.canActivateChecks.length)return Fe(a).pipe(En(l=>{const v=new eU(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(v)}),Pi(l=>{let v=!1;return Fe(l).pipe(function wV(n,t){return Kt(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Fe(e);let s=0;return gn(i).pipe(Wo(o=>function AV(n,t,e,r){return function MV(n,t,e,r){const i=XC(n);if(0===i.length)return Fe({});const s={};return gn(i).pipe(Kt(o=>function xV(n,t,e,r){const i=Gc(n,t,r);return pi(i.resolve?i.resolve(t,e):i(t,e))}(n[o],t,e,r).pipe(En(a=>{s[o]=a}))),dg(1),Kt(()=>XC(s).length===i.length?Fe(s):er))}(n._resolve,n,t,r).pipe(q(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),wC(n,e).resolve),null)))}(o.route,r,n,t)),En(()=>s++),dg(1),Kt(o=>s===i.length?Fe(e):er))})}(this.paramsInheritanceStrategy,this.ngModule.injector),En({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),En(l=>{const v=new tU(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(v)}))}),Ag(a=>{const{targetSnapshot:l,id:v,extractedUrl:I,rawUrl:H,extras:{skipLocationChange:X,replaceUrl:Q}}=a;return this.hooks.afterPreactivation(l,{navigationId:v,appliedUrlTree:I,rawUrlTree:H,skipLocationChange:!!X,replaceUrl:!!Q})}),q(a=>{const l=function MU(n,t,e){const r=ml(n,t._root,e?e._root:void 0);return new TC(r,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),En(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>q(r=>(new UU(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),En({next(){s=!0},complete(){s=!0}}),iC(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),Li(a=>{if(o=!0,function aU(n){return n&&n[uC]}(a)){const l=Hs(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const v=new sC(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(v),l?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),H={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qC(i.source)};this.scheduleNavigation(I,"imperative",null,H,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new QB(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(v){i.reject(v)}}return er}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=e.state)||void 0===i?void 0:i.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){kC(e),this.config=e.map(Sg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,v=i||this.routerState.root,I=l?this.currentUrlTree.fragment:o;let H=null;switch(a){case"merge":H=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":H=this.currentUrlTree.queryParams;break;default:H=s||null}return null!==H&&(H=this.removeEmptyProps(H)),function RU(n,t,e,r,i){if(0===e.length)return Eg(t.root,t.root,t.root,r,i);const s=function OU(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new IC(!0,0,n);let t=0,e=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return bn(s.outlets,(l,v)=>{a[v]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new IC(e,t,r)}(e);if(s.toRoot())return Eg(t.root,t.root,new st([],{}),r,i);const o=function PU(n,t,e){if(n.isAbsolute)return new bg(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new bg(s,s===t.root,0)}const r=Fc(n.commands[0])?0:1;return function LU(n,t,e){let r=n,i=t,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new bg(r,!1,i-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,t,n),a=o.processChildren?Nc(o.segmentGroup,o.index,s.commands):RC(o.segmentGroup,o.index,s.commands);return Eg(t.root,o.segmentGroup,a,r,i)}(v,this.currentUrlTree,e,H,null!=I?I:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Hs(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function UV(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},NV):!1===r?Object.assign({},BV):r,Hs(e))return pC(this.currentUrlTree,e,i);const s=this.parseUrl(e);return pC(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const s=e[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new hl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let v,I,H;o?(v=o.resolve,I=o.reject,H=o.promise):H=new Promise((ee,ie)=>{v=ee,I=ie});const X=++this.navigationId;let Q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Q=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):Q=0,this.setTransition({id:X,targetPageId:Q,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:v,reject:I,promise:H,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),H.catch(ee=>Promise.reject(ee))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(e,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new sC(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){Fo()},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function qC(n){return"imperative"!==n}let Kc=(()=>{class n{constructor(e,r,i,s,o){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new N,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==e?r.setAttribute(i,"tabindex",e):r.removeAttribute(i,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Zo(this.skipLocationChange),replaceUrl:Zo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zo(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(re(fr),re(Vs),ys("tabindex"),re(Ai),re(_t))},n.\u0275dir=Oe({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&pt("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Yn]}),n})(),Wc=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new N,this.subscription=e.events.subscribe(s=>{s instanceof hl&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,i,s,o){if(0!==e||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Zo(this.skipLocationChange),replaceUrl:Zo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zo(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(re(fr),re(Vs),re(Go))},n.\u0275dir=Oe({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&pt("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&mt("target",r.target)("href",r.href,Cs)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Yn]}),n})();function Zo(n){return""===n||!!n}class JC{}class eT{preload(t,e){return Fe(null)}}let tT=(()=>{class n{constructor(e,r,i,s){this.router=e,this.injector=i,this.preloadingStrategy=s,this.loader=new QC(i,r,l=>e.triggerEvent(new oC(l)),l=>e.triggerEvent(new aC(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(xr(e=>e instanceof hl),Wo(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Mi);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(e,s)):s.children&&i.push(this.processRoutes(e,s.children));return gn(i).pipe(fs(),q(s=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Fe(r._loadedConfig):this.loader.load(e.injector,r)).pipe(Kt(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(ae(fr),ae($E),ae($t),ae(JC))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),xg=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof hl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof lC&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new lC(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){Fo()},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const js=new De("ROUTER_CONFIGURATION"),nT=new De("ROUTER_FORROOT_GUARD"),GV=[Wu,{provide:yC,useClass:_C},{provide:fr,useFactory:function YV(n,t,e,r,i,s,o={},a,l){const v=new fr(null,n,t,e,r,i,dC(s));return a&&(v.urlHandlingStrategy=a),l&&(v.routeReuseStrategy=l),function XV(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(o,v),o.enableTracing&&v.events.subscribe(I=>{var H,X;null===(H=console.group)||void 0===H||H.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(X=console.groupEnd)||void 0===X||X.call(console)}),v},deps:[yC,El,Wu,$t,$E,Mg,js,[class PV{},new Dr],[class IV{},new Dr]]},El,{provide:Vs,useFactory:function QV(n){return n.routerState.root},deps:[fr]},tT,eT,class jV{preload(t,e){return e().pipe(Li(()=>Fe(null)))}},{provide:js,useValue:{enableTracing:!1}}];function KV(){return new qE("Router",fr)}let rT=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[GV,iT(e),{provide:nT,useFactory:$V,deps:[[fr,new Dr,new _s]]},{provide:js,useValue:r||{}},{provide:Go,useFactory:zV,deps:[Is,[new cu(dp),new Dr],js]},{provide:xg,useFactory:WV,deps:[fr,BF,js]},{provide:JC,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:eT},{provide:qE,multi:!0,useFactory:KV},[Ig,{provide:Qh,multi:!0,useFactory:ZV,deps:[Ig]},{provide:sT,useFactory:qV,deps:[Ig]},{provide:zE,multi:!0,useExisting:sT}]]}}static forChild(e){return{ngModule:n,providers:[iT(e)]}}}return n.\u0275fac=function(e){return new(e||n)(ae(nT,8),ae(fr,8))},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({}),n})();function WV(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new xg(n,t,e)}function zV(n,t,e={}){return e.useHash?new Ck(n,t):new vb(n,t)}function $V(n){return"guarded"}function iT(n){return[{provide:lM,multi:!0,useValue:n},{provide:Mg,multi:!0,useValue:n}]}let Ig=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new N}appInitializer(){return this.injector.get(Ek,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(fr),o=this.injector.get(js);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Fe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(js),i=this.injector.get(tT),s=this.injector.get(xg),o=this.injector.get(fr),a=this.injector.get(Vu);e===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(ae($t))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function ZV(n){return n.appInitializer.bind(n)}function qV(n){return n.bootstrapListener.bind(n)}const sT=new De("Router Initializer");let oT=(()=>{class n{constructor(e){this.http=e,this.URL="https://api.wisey.app/api/v1/core/preview-courses"}getCourses(){return this.http.get(`${this.URL}`,{headers:new Qr({Authorization:`Bearer ${localStorage.getItem("token")}`})})}getCourse(e){return this.http.get(`${this.URL}/${e}`,{headers:new Qr({Authorization:`Bearer ${localStorage.getItem("token")}`})})}}return n.\u0275fac=function(e){return new(e||n)(ae(al))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ln(n){return null!=n&&"false"!=`${n}`}function Bn(n,t=0){return function e2(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function zc(n){return Array.isArray(n)?n:[n]}function nn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Gs(n){return n instanceof _t?n.nativeElement:n}const t2=["addListener","removeListener"],n2=["addEventListener","removeEventListener"],r2=["on","off"];function $c(n,t,e,r){if(Be(e)&&(r=e,e=void 0),r)return $c(n,t,e).pipe(ug(r));const[i,s]=function a2(n){return Be(n.addEventListener)&&Be(n.removeEventListener)}(n)?n2.map(o=>a=>n[o](t,a,e)):function s2(n){return Be(n.addListener)&&Be(n.removeListener)}(n)?t2.map(aT(n,t)):function o2(n){return Be(n.on)&&Be(n.off)}(n)?r2.map(aT(n,t)):[];if(!i&&Wn(n))return Kt(o=>$c(o,t,e))(cn(n));if(!i)throw new TypeError("Invalid event target");return new p(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function aT(n,t){return e=>r=>n[e](t,r)}class l2 extends O{constructor(t,e){super()}schedule(t,e=0){return this}}const Yc={setInterval(n,t,...e){const{delegate:r}=Yc;return(null==r?void 0:r.setInterval)?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=Yc;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0};class Rg extends l2{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,r=0){return Yc.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&Yc.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,r=!1;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,J(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Tl={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=Tl;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(s=>{e=void 0,n(s)});return new O(()=>null==e?void 0:e(i))},requestAnimationFrame(...n){const{delegate:t}=Tl;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Tl;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},lT={now:()=>(lT.delegate||Date).now(),delegate:void 0};class Sl{constructor(t,e=Sl.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}Sl.now=lT.now;class Og extends Sl{constructor(t,e=Sl.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}new class c2 extends Og{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class u2 extends Rg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Tl.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:s}=t;null!=e&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==e&&(Tl.cancelAnimationFrame(e),t._scheduled=void 0)}});let Pg,f2=1;const Xc={};function uT(n){return n in Xc&&(delete Xc[n],!0)}const h2={setImmediate(n){const t=f2++;return Xc[t]=!0,Pg||(Pg=Promise.resolve()),Pg.then(()=>uT(t)&&n()),t},clearImmediate(n){uT(n)}},{setImmediate:p2,clearImmediate:g2}=h2,Qc={setImmediate(...n){const{delegate:t}=Qc;return((null==t?void 0:t.setImmediate)||p2)(...n)},clearImmediate(n){const{delegate:t}=Qc;return((null==t?void 0:t.clearImmediate)||g2)(n)},delegate:void 0},Lg=(new class v2 extends Og{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class m2 extends Rg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Qc.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:s}=t;null!=e&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==e&&(Qc.clearImmediate(e),t._scheduled=void 0)}}),new Og(Rg)),_2=Lg;function cT(n,t=Lg){return function E2(n){return $((t,e)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const v=i;i=null,e.next(v)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Z(e,v=>{r=!0,i=v,s||cn(n(v)).subscribe(s=Z(e,a,l))},()=>{o=!0,(!r||!s||s.closed)&&e.complete()}))})}(()=>function D2(n=0,t,e=_2){let r=-1;return null!=t&&(Bl(t)?e=t:r=t),new p(i=>{let s=function b2(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,t))}let kg;try{kg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){kg=!1}let wl,Ks,Fg,Un=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function NF(n){return n===Lb}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!kg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(ae(Uu))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zc(n){return function C2(){if(null==wl&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>wl=!0}))}finally{wl=wl||!1}return wl}()?n:!!n.capture}function T2(){if(null==Ks){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ks=!1,Ks;if("scrollBehavior"in document.documentElement.style)Ks=!0;else{const n=Element.prototype.scrollTo;Ks=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ks}function fT(n){if(function S2(){if(null==Fg){const n="undefined"!=typeof document?document.head:null;Fg=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Fg}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Ws(n){return n.composedPath?n.composedPath()[0]:n.target}function Ng(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const w2=new De("cdk-dir-doc",{providedIn:"root",factory:function A2(){return uu(Qe)}}),M2=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Jo=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new nt,e){const i=e.documentElement?e.documentElement.dir:null;this.value=function x2(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?M2.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(ae(w2,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Al=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({}),n})(),hT=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new N,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new p(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(cT(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Fe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(xr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,e)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=Gs(r),s=e.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$c(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(ae(rt),ae(Un),ae(Qe,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jc=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new N,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,s=i.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(cT(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(ae(Un),ae(rt),ae(Qe,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ed=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({}),n})(),pT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Al,ed],Al,ed]}),n})();class Bg{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class td extends Bg{constructor(t,e,r,i){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i}}class Ug extends Bg{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class O2 extends Bg{constructor(t){super(),this.element=t instanceof _t?t.nativeElement:t}}class Vg{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof td?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Ug?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof O2?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class P2 extends Vg{constructor(t,e,r,i,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||$t.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let gT=(()=>{class n extends Vg{constructor(e,r,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new nt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=r.createComponent(s,r.length,e.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(re(ws),re(Xn),re(Qe))},n.\u0275dir=Oe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ke]}),n})(),mT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({}),n})();function Ht(n){return $((t,e)=>{cn(n).subscribe(Z(e,()=>e.complete(),F)),!e.closed&&t.subscribe(e)})}function ea(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}const bT=T2();class z2{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=nn(-this._previousScrollPosition.left),t.style.top=nn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),bT&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bT&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class $2{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class DT{enable(){}disable(){}attach(){}}function Wg(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function CT(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Y2{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Wg(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let X2=(()=>{class n{constructor(e,r,i,s){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new DT,this.close=o=>new $2(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new z2(this._viewportRuler,this._document),this.reposition=o=>new Y2(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(ae(hT),ae(Jc),ae(rt),ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zg{constructor(t){if(this.scrollStrategy=new DT,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class Q2{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Z2{constructor(t,e,r,i,s,o,a,l,v){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new N,this._attachments=new N,this._detachments=new N,this._locationChanges=O.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new N,this._outsidePointerEvents=new N,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Pr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=nn(this._config.width),t.height=nn(this._config.height),t.minWidth=nn(this._config.minWidth),t.minHeight=nn(this._config.minHeight),t.maxWidth=nn(this._config.maxWidth),t.maxHeight=nn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,r){const i=zc(e||[]).filter(s=>!!s);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ht(eo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let TT=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ng()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(e),Ng()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe),ae(Un))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ST="cdk-overlay-connected-position-bounding-box",q2=/([A-Za-z%]+)$/;class J2{constructor(t,e,r,i,s){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new N,this._resizeSubscription=O.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(ST),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,i,a),v=this._getOverlayPoint(l,e,a),I=this._getOverlayFit(v,e,r,a);if(I.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(I,v,r)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<I.visibleArea)&&(o={overlayFit:I,overlayPoint:v,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const v of s){const I=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);I>l&&(l=I,a=v)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&zs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ST),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i,s;if("center"==r.originX)i=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i="start"==r.originX?o:a}return e.left<0&&(i-=e.left),s="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:i,y:s}}_getOverlayPoint(t,e,r){let i,s;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+s}}_getOverlayFit(t,e,r,i){const s=AT(e);let{x:o,y:a}=t,l=this._getOffset(i,"x"),v=this._getOffset(i,"y");l&&(o+=l),v&&(a+=v);let X=0-a,Q=a+s.height-r.height,ee=this._subtractOverflows(s.width,0-o,o+s.width-r.width),ie=this._subtractOverflows(s.height,X,Q),le=ee*ie;return{visibleArea:le,isCompletelyWithinViewport:s.width*s.height===le,fitsInViewportVertically:ie===s.height,fitsInViewportHorizontally:ee==s.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,s=r.right-e.x,o=wT(this._overlayRef.getConfig().minHeight),a=wT(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=a&&a<=s;return(t.fitsInViewportVertically||null!=o&&o<=i)&&v}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=AT(e),s=this._viewportRect,o=Math.max(t.x+i.width-s.width,0),a=Math.max(t.y+i.height-s.height,0),l=Math.max(s.top-r.top-t.y,0),v=Math.max(s.left-r.left-t.x,0);let I=0,H=0;return I=i.width<=s.width?v||-o:t.x<this._viewportMargin?s.left-r.left-t.x:0,H=i.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-r.top-t.y:0,this._previousPushAmount={x:I,y:H},{x:t.x+I,y:t.y+H}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Q2(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let s,o,a,I,H,X;if("top"===e.overlayY)o=t.y,s=r.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=r.height-t.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const Q=Math.min(r.bottom-t.y+r.top,t.y),ee=this._lastBoundingBoxSize.height;s=2*Q,o=t.y-Q,s>ee&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-ee/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)X=r.width-t.x+this._viewportMargin,I=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)H=t.x,I=r.right-t.x;else{const Q=Math.min(r.right-t.x+r.left,t.x),ee=this._lastBoundingBoxSize.width;I=2*Q,H=t.x-Q,I>ee&&!this._isInitialRender&&!this._growAfterOpen&&(H=t.x-ee/2)}return{top:o,left:H,bottom:a,right:X,width:I,height:s}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=nn(r.height),i.top=nn(r.top),i.bottom=nn(r.bottom),i.width=nn(r.width),i.left=nn(r.left),i.right=nn(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=nn(s)),o&&(i.maxWidth=nn(o))}this._lastBoundingBoxSize=r,zs(this._boundingBox.style,i)}_resetBoundingBoxStyles(){zs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){zs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const I=this._viewportRuler.getViewportScrollPosition();zs(r,this._getExactOverlayY(e,t,I)),zs(r,this._getExactOverlayX(e,t,I))}else r.position="static";let a="",l=this._getOffset(e,"x"),v=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),v&&(a+=`translateY(${v}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=nn(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=nn(o.maxWidth):s&&(r.maxWidth="")),zs(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=nn(s.y),i}_getExactOverlayX(t,e,r){let o,i={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=nn(s.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:CT(t,r),isOriginOutsideView:Wg(t,r),isOverlayClipped:CT(e,r),isOverlayOutsideView:Wg(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&zc(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof _t)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function zs(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function wT(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(q2);return e&&"px"!==e?null:parseFloat(t)}return n||null}function AT(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const MT="cdk-global-overlay-wrapper";class eH{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(MT),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),v=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(MT),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let tH=(()=>{class n{constructor(e,r,i,s){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new eH}flexibleConnectedTo(e){return new J2(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(ae(Jc),ae(Qe),ae(Un),ae(TT))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xT=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nH=(()=>{class n extends xT{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe),ae(rt,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rH=(()=>{class n extends xT{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ws(s)},this._clickListener=s=>{const o=Ws(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let v=l.length-1;v>-1;v--){const I=l[v];if(I._outsidePointerEvents.observers.length<1||!I.hasAttached())continue;if(I.overlayElement.contains(o)||I.overlayElement.contains(a))break;const H=I._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>H.next(s)):H.next(s)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe),ae(Un),ae(rt,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iH=0,rs=(()=>{class n{constructor(e,r,i,s,o,a,l,v,I,H,X){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=v,this._directionality=I,this._location=H,this._outsideClickDispatcher=X}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new zg(e);return o.direction=o.direction||this._directionality.value,new Z2(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+iH++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Vu)),new P2(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(ae(X2),ae(TT),ae(ws),ae(tH),ae(nH),ae($t),ae(rt),ae(Qe),ae(Jo),ae(Wu),ae(rH))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const sH=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],IT=new De("cdk-connected-overlay-scroll-strategy");let RT=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(re(_t))},n.\u0275dir=Oe({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),OT=(()=>{class n{constructor(e,r,i,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=O.EMPTY,this._attachSubscription=O.EMPTY,this._detachSubscription=O.EMPTY,this._positionSubscription=O.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new nt,this.positionChange=new nt,this.attach=new nt,this.detach=new nt,this.overlayKeydown=new nt,this.overlayOutsideClick=new nt,this._templatePortal=new Ug(r,i),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ln(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ln(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ln(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ln(e)}get push(){return this._push}set push(e){this._push=ln(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=sH);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!ea(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new zg({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof RT?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function L2(n,t=!1){return $((e,r)=>{let i=0;e.subscribe(Z(r,s=>{const o=n(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(re(rs),re($r),re(Xn),re(IT),re(Jo,8))},n.\u0275dir=Oe({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Yn]}),n})();const aH={provide:IT,deps:[rs],useFactory:function oH(n){return()=>n.scrollStrategies.reposition()}};let $g=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[rs,aH],imports:[[Al,mT,pT],pT]}),n})();function Yg(n,t=Lg){return $((e,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const v=s;s=null,r.next(v)}};function l(){const v=o+n,I=t.now();if(I<v)return i=this.schedule(void 0,v-I),void r.add(i);a()}e.subscribe(Z(r,v=>{s=v,o=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function LT(n){return xr((t,e)=>n<=e)}function kT(n,t=c){return n=null!=n?n:lH,$((e,r)=>{let i,s=!0;e.subscribe(Z(r,o=>{const a=t(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function lH(n,t){return n===t}let FT=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uH=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=Gs(e);return new p(i=>{const o=this._observeElement(r).subscribe(i);return()=>{o.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new N,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:i}=this._observedElements.get(e);r&&r.disconnect(),i.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(ae(FT))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cH=(()=>{class n{constructor(e,r,i){this._contentObserver=e,this._elementRef=r,this._ngZone=i,this.event=new nt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=ln(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Bn(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Yg(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(re(uH),re(_t),re(rt))},n.\u0275dir=Oe({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),NT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[FT]}),n})();function nd(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const UT="cdk-describedby-message",rd="cdk-describedby-host";let VT=0,hH=(()=>{class n{constructor(e,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+VT++,this._document=e}describe(e,r,i){if(!this._canBeDescribed(e,r))return;const s=Xg(r,i);"string"!=typeof r?(HT(r),this._messageRegistry.set(s,{messageElement:r,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(r,i),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,r,i){var s;if(!r||!this._isElementNode(e))return;const o=Xg(r,i);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),"string"==typeof r){const a=this._messageRegistry.get(o);a&&0===a.referenceCount&&this._deleteMessageElement(o)}0===(null===(s=this._messagesContainer)||void 0===s?void 0:s.childNodes.length)&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){var e;const r=this._document.querySelectorAll(`[${rd}="${this._id}"]`);for(let i=0;i<r.length;i++)this._removeCdkDescribedByReferenceIds(r[i]),r[i].removeAttribute(rd);null===(e=this._messagesContainer)||void 0===e||e.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,r){const i=this._document.createElement("div");HT(i),i.textContent=e,r&&i.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(Xg(e,r),{messageElement:i,referenceCount:0})}_deleteMessageElement(e){var r,i;null===(i=null===(r=this._messageRegistry.get(e))||void 0===r?void 0:r.messageElement)||void 0===i||i.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<r.length;s++)r[s].remove();const i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(e),i.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(e){const r=nd(e,"aria-describedby").filter(i=>0!=i.indexOf(UT));e.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(e,r){const i=this._messageRegistry.get(r);(function dH(n,t,e){const r=nd(n,t);r.some(i=>i.trim()==e.trim())||(r.push(e.trim()),n.setAttribute(t,r.join(" ")))})(e,"aria-describedby",i.messageElement.id),e.setAttribute(rd,this._id),i.referenceCount++}_removeMessageReference(e,r){const i=this._messageRegistry.get(r);i.referenceCount--,function fH(n,t,e){const i=nd(n,t).filter(s=>s!=e.trim());i.length?n.setAttribute(t,i.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",i.messageElement.id),e.removeAttribute(rd)}_isElementDescribedByMessage(e,r){const i=nd(e,"aria-describedby"),s=this._messageRegistry.get(r),o=s&&s.messageElement.id;return!!o&&-1!=i.indexOf(o)}_canBeDescribed(e,r){if(!this._isElementNode(e))return!1;if(r&&"object"==typeof r)return!0;const i=null==r?"":`${r}`.trim(),s=e.getAttribute("aria-label");return!(!i||s&&s.trim()===i)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(ae(Qe),ae(Un))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Xg(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function HT(n){n.id||(n.id=`${UT}-${VT++}`)}class gH extends class pH{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new N,this._typeaheadSubscription=O.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new N,this.change=new N,t instanceof qa&&t.changes.subscribe(e=>{if(this._activeItem){const i=e.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(En(e=>this._pressedLetters.push(e)),Yg(t),xr(()=>this._pressedLetters.length>0),q(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,o=r[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||ea(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t),i=e[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const i=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof qa?this._items.toArray():this._items}}{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}function GT(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function KT(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const bH=new De("cdk-input-modality-detector-options"),DH={ignoreKeys:[18,17,224,91,16]},ta=Zc({passive:!0,capture:!0});let CH=(()=>{class n{constructor(e,r,i,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Or(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(v=>v===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ws(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(GT(o)?"keyboard":"mouse"),this._mostRecentTarget=Ws(o))},this._onTouchstart=o=>{KT(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ws(o))},this._options=Object.assign(Object.assign({},DH),s),this.modalityDetected=this._modality.pipe(LT(1)),this.modalityChanged=this.modalityDetected.pipe(kT()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ta),i.addEventListener("mousedown",this._onMousedown,ta),i.addEventListener("touchstart",this._onTouchstart,ta)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ta),document.removeEventListener("mousedown",this._onMousedown,ta),document.removeEventListener("touchstart",this._onTouchstart,ta))}}return n.\u0275fac=function(e){return new(e||n)(ae(Un),ae(rt),ae(Qe),ae(bH,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TH=new De("liveAnnouncerElement",{providedIn:"root",factory:function SH(){return null}}),wH=new De("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Qg=(()=>{class n{constructor(e,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=e||this._createLiveElement()}announce(e,...r){const i=this._defaultOptions;let s,o;return 1===r.length&&"number"==typeof r[0]?o=r[0]:[s,o]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==o&&i&&(o=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e,r;clearTimeout(this._previousTimeout),null===(e=this._liveElement)||void 0===e||e.remove(),this._liveElement=null,null===(r=this._currentResolve)||void 0===r||r.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",r=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(e){return new(e||n)(ae(TH,8),ae(rt),ae(Qe),ae(wH,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AH=new De("cdk-focus-monitor-default-options"),id=Zc({passive:!0,capture:!0});let zT=(()=>{class n{constructor(e,r,i,s,o){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new N,this._rootNodeFocusAndBlurListener=a=>{const l=Ws(a),v="focus"===a.type?this._onFocus:this._onBlur;for(let I=l;I;I=I.parentElement)v.call(this,a,I)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(e,r=!1){const i=Gs(e);if(!this._platform.isBrowser||1!==i.nodeType)return Fe(null);const s=fT(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new N,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const r=Gs(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const s=Gs(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),s=Ws(e);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,id),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,id)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ht(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,id),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,id),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,s)=>{(s===e||i.checkChildren&&s.contains(e))&&r.push([s,i])}),r}}return n.\u0275fac=function(e){return new(e||n)(ae(rt),ae(Un),ae(CH),ae(Qe,8),ae(AH,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $T="cdk-high-contrast-black-on-white",YT="cdk-high-contrast-white-on-black",Zg="cdk-high-contrast-active";let XT=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Zg),e.remove($T),e.remove(YT),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(Zg),e.add($T)):2===r&&(e.add(Zg),e.add(YT))}}}return n.\u0275fac=function(e){return new(e||n)(ae(Un),ae(Qe))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MH=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(ae(XT))},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[NT]]}),n})();function xH(n,t){if(1&n&&Dt(0,"mat-pseudo-checkbox",4),2&n){const e=at();Ae("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function IH(n,t){if(1&n&&(me(0,"span",5),We(1),_e()),2&n){const e=at();Ce(1),kn("(",e.group.label,")")}}const RH=["*"],PH=new De("mat-sanity-checks",{providedIn:"root",factory:function OH(){return!0}});let Mt=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Ng()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(ae(XT),ae(PH,8),ae(Qe))},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Al],Al]}),n})();function qg(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ln(t)}}}function sd(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function ZT(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ln(t)}}}function LH(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Bn(e):this.defaultTabIndex}}}function kH(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new N,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}function FH(n){return class extends n{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new p(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}let BH=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt],Mt]}),n})();class UH{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const JT={enterDuration:225,exitDuration:150},Jg=Zc({passive:!0}),eS=["mousedown","touchstart"],tS=["mouseup","mouseleave","touchend","touchcancel"];class HH{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Gs(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},JT),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const o=r.radius||function GH(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),a=t-i.left,l=e-i.top,v=s.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=a-o+"px",I.style.top=l-o+"px",I.style.height=2*o+"px",I.style.width=2*o+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(I),function jH(n){window.getComputedStyle(n).getPropertyValue("opacity")}(I),I.style.transform="scale(1)";const H=new UH(this,I,r);return H.state=0,this._activeRipples.add(H),r.persistent||(this._mostRecentTransientRipple=H),this._runTimeoutOutsideZone(()=>{const X=H===this._mostRecentTransientRipple;H.state=1,!r.persistent&&(!X||!this._isPointerDown)&&H.fadeOut()},v),H}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,i=Object.assign(Object.assign({},JT),t.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Gs(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(eS))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(tS),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=GT(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!KT(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Jg)})})}_removeTriggerEvents(){this._triggerElement&&(eS.forEach(t=>{this._triggerElement.removeEventListener(t,this,Jg)}),this._pointerUpEventsRegistered&&tS.forEach(t=>{this._triggerElement.removeEventListener(t,this,Jg)}))}}const KH=new De("mat-ripple-global-options");let em=(()=>{class n{constructor(e,r,i,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new HH(this,r,e,i)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(rt),re(Un),re(KH,8),re(fi,8))},n.\u0275dir=Oe({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&fn("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),nS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt],Mt]}),n})(),WH=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(re(fi,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,r){2&e&&fn("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),zH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt]]}),n})();const rS=new De("MAT_OPTION_PARENT_COMPONENT"),iS=new De("MatOptgroup");let $H=0;class YH{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let XH=(()=>{class n{constructor(e,r,i,s){this._element=e,this._changeDetectorRef=r,this._parent=i,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+$H++,this.onSelectionChange=new nt,this._stateChanges=new N}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ln(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!ea(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new YH(this,e))}}return n.\u0275fac=function(e){Fo()},n.\u0275dir=Oe({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),sS=(()=>{class n extends XH{constructor(e,r,i,s){super(e,r,i,s)}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(wr),re(rS,8),re(iS,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,r){1&e&&pt("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),2&e&&(Ah("id",r.id),mt("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),fn("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[Ke],ngContentSelectors:RH,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,r){1&e&&(ai(),Ye(0,xH,1,2,"mat-pseudo-checkbox",0),me(1,"span",1),Qt(2),_e(),Ye(3,IH,2,1,"span",2),Dt(4,"div",3)),2&e&&(Ae("ngIf",r.multiple),Ce(3),Ae("ngIf",r.group&&r.group._inert),Ce(1),Ae("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},directives:[WH,Rs,em],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function oS(n,t,e){if(e.length){let r=t.toArray(),i=e.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}let aS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[nS,Xi,Mt,zH]]}),n})();const ZH=["mat-button",""],qH=["*"],ej=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],tj=sd(qg(ZT(class{constructor(n){this._elementRef=n}})));let od=(()=>{class n extends tj{constructor(e,r,i){super(e),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of ej)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(zT),re(fi,8))},n.\u0275cmp=Ft({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&Sr(em,5),2&e){let i;wt(i=At())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(mt("disabled",r.disabled||null),fn("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ke],attrs:ZH,ngContentSelectors:qH,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(ai(),me(0,"span",0),Qt(1),_e(),Dt(2,"span",1)(3,"span",2)),2&e&&(Ce(2),fn("mat-button-ripple-round",r.isRoundButton||r.isIconButton),Ae("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[em],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),tm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[nS,Mt],Mt]}),n})();const lS=new Set;let na,nj=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ij}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function rj(n){if(!lS.has(n))try{na||(na=document.createElement("style"),na.setAttribute("type","text/css"),document.head.appendChild(na)),na.sheet&&(na.sheet.insertRule(`@media ${n} {body{ }}`,0),lS.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(ae(Un))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ij(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let nm=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new N}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return uS(zc(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let s=qD(uS(zc(e)).map(o=>this._registerQuery(o).observable));return s=xc(s.pipe(Pr(1)),s.pipe(LT(1),Yg(0))),s.pipe(q(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:v})=>{a.matches=a.matches||l,a.breakpoints[v]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),s={observable:new p(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ns(r),q(({matches:o})=>({query:e,matches:o})),Ht(this._destroySubject)),mql:r};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(ae(nj),ae(rt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uS(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function sj(n,t){if(1&n){const e=oi();me(0,"div",2)(1,"button",3),pt("click",function(){return Hr(e),at().action()}),We(2),_e()()}if(2&n){const e=at();Ce(2),Tr(e.data.action)}}function oj(n,t){}const dS=new De("MatSnackBarData");class ad{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const aj=Math.pow(2,31)-1;class rm{constructor(t,e){this._overlayRef=e,this._afterDismissed=new N,this._afterOpened=new N,this._onAction=new N,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,aj))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let lj=(()=>{class n{constructor(e,r){this.snackBarRef=e,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(re(rm),re(dS))},n.\u0275cmp=Ft({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,r){1&e&&(me(0,"span",0),We(1),_e(),Ye(2,sj,3,1,"div",1)),2&e&&(Ce(1),Tr(r.data.message),Ce(1),Ae("ngIf",r.hasAction))},directives:[od,Rs],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const uj={snackBarState:ll("state",[qi("void, hidden",_n({transform:"scale(0.8)",opacity:0})),qi("visible",_n({transform:"scale(1)",opacity:1})),Ji("* => visible",Os("150ms cubic-bezier(0, 0, 0.2, 1)")),Ji("* => void, * => hidden",Os("75ms cubic-bezier(0.4, 0.0, 1, 1)",_n({opacity:0})))])};let cj=(()=>{class n extends Vg{constructor(e,r,i,s,o){super(),this._ngZone=e,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new N,this._onExit=new N,this._onEnter=new N,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:r,toState:i}=e;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Pr(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>e.classList.add(i)):e.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(i=document.activeElement),e.removeAttribute("aria-hidden"),r.appendChild(e),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(re(rt),re(_t),re(wr),re(Un),re(ad))},n.\u0275cmp=Ft({type:n,selectors:[["snack-bar-container"]],viewQuery:function(e,r){if(1&e&&Sr(gT,7),2&e){let i;wt(i=At())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,r){1&e&&Ch("@state.done",function(s){return r.onAnimationEnd(s)}),2&e&&Mh("@state",r._animationState)},features:[Ke],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,r){1&e&&(me(0,"div",0),Ye(1,oj,0,0,"ng-template",1),_e(),Dt(2,"div")),2&e&&(Ce(2),mt("aria-live",r._live)("role",r._role))},directives:[gT],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[uj.snackBarState]}}),n})(),fS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[$g,mT,Xi,tm,Mt],Mt]}),n})();const hS=new De("mat-snack-bar-default-options",{providedIn:"root",factory:function dj(){return new ad}});let fj=(()=>{class n{constructor(e,r,i,s,o,a){this._overlay=e,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,r){return this._attach(e,r)}openFromTemplate(e,r){return this._attach(e,r)}open(e,r="",i){const s=Object.assign(Object.assign({},this._defaultConfig),i);return s.data={message:e,action:r},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,r){const s=$t.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:ad,useValue:r}]}),o=new td(this.snackBarContainerComponent,r.viewContainerRef,s),a=e.attach(o);return a.instance.snackBarConfig=r,a.instance}_attach(e,r){const i=Object.assign(Object.assign(Object.assign({},new ad),this._defaultConfig),r),s=this._createOverlay(i),o=this._attachSnackBarContainer(s,i),a=new rm(o,s);if(e instanceof $r){const l=new Ug(e,null,{$implicit:i.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(i,a),v=new td(e,void 0,l),I=o.attachComponentPortal(v);a.instance=I.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Ht(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),i.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(a,i),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,r){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),r.duration&&r.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(r.duration))}_createOverlay(e){const r=new zg;r.direction=e.direction;let i=this._overlay.position().global();const s="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,a=!o&&"center"!==e.horizontalPosition;return o?i.left("0"):a?i.right("0"):i.centerHorizontally(),"top"===e.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(e,r){return $t.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:rm,useValue:r},{provide:dS,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(ae(rs),ae(Qg),ae($t),ae(nm),ae(n,12),ae(hS))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),pS=(()=>{class n extends fj{constructor(e,r,i,s,o,a){super(e,r,i,s,o,a),this.simpleSnackBarComponent=lj,this.snackBarContainerComponent=cj,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(ae(rs),ae(Qg),ae($t),ae(nm),ae(n,12),ae(hS))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:fS}),n})();function gS(...n){const t=Im(n),{args:e,keys:r}=QD(n),i=new p(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,v=o;for(let I=0;I<o;I++){let H=!1;cn(e[I]).subscribe(Z(s,X=>{H||(H=!0,v--),a[I]=X},()=>l--,void 0,()=>{(!l||!H)&&(v||s.next(r?ZD(r,a):a),s.complete())}))}});return t?i.pipe(ug(t)):i}const hj=["*"];let ld;function xl(n){var t;return(null===(t=function pj(){if(void 0===ld&&(ld=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(ld=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return ld}())||void 0===t?void 0:t.createHTML(n))||n}function mS(n){return Error(`Unable to find icon with the name "${n}"`)}function vS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function yS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class $s{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let ud=(()=>{class n{constructor(e,r,i,s){this._httpClient=e,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,s){return this._addSvgIconConfig(e,r,new $s(i,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,s){const o=this._sanitizer.sanitize(ht.HTML,i);if(!o)throw yS(i);const a=xl(o);return this._addSvgIconConfig(e,r,new $s("",a,s))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new $s(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){const s=this._sanitizer.sanitize(ht.HTML,r);if(!s)throw yS(r);const o=xl(s);return this._addSvgIconSetConfig(e,new $s("",o,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(ht.RESOURCE_URL,e);if(!r)throw vS(e);const i=this._cachedIconsByUrl.get(r);return i?Fe(cd(i)):this._loadSvgIconFromConfig(new $s(e,null)).pipe(En(s=>this._cachedIconsByUrl.set(r,s)),q(s=>cd(s)))}getNamedSvgIcon(e,r=""){const i=_S(r,e);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,e),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(e,o):fl(mS(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Fe(cd(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(q(r=>cd(r)))}_getSvgFromIconSetConfigs(e,r){const i=this._extractIconWithNameFromAnySet(e,r);return i?Fe(i):gS(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Li(a=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(ht.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(v)),Fe(null)})))).pipe(q(()=>{const o=this._extractIconWithNameFromAnySet(e,r);if(!o)throw mS(e);return o}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(En(r=>e.svgText=r),q(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Fe(null):this._fetchIcon(e).pipe(En(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){const s=e.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(xl("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){const r=this._svgElementFromString(xl("<svg></svg>")),i=e.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){var r;const{url:i,options:s}=e,o=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function gj(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(ht.RESOURCE_URL,i);if(!a)throw vS(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const v=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(q(I=>xl(I)),iC(()=>this._inProgressUrlFetches.delete(a)),Lm());return this._inProgressUrlFetches.set(a,v),v}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(_S(e,r),i),this}_addSvgIconSetConfig(e,r){const i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,e);if(s)return vj(s)?new $s(s.url,null,s.options):new $s(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(ae(al,8),ae(Rp),ae(Qe,8),ae(Wi))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cd(n){return n.cloneNode(!0)}function _S(n,t){return n+":"+t}function vj(n){return!(!n.url||!n.options)}const yj=sd(class{constructor(n){this._elementRef=n}}),_j=new De("mat-icon-location",{providedIn:"root",factory:function Ej(){const n=uu(Qe),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),ES=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],bj=ES.map(n=>`[${n}]`).join(", "),Dj=/^url\(['"]?#(.*?)['"]?\)$/;let bS=(()=>{class n extends yj{constructor(e,r,i,s,o){super(e),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=O.EMPTY,i||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ln(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=e.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),r&&e.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(bj),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)ES.forEach(o=>{const a=r[s],l=a.getAttribute(o),v=l?l.match(Dj):null;if(v){let I=i.get(a);I||(I=[],i.set(a,I)),I.push({name:o,value:v[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Pr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(ud),ys("aria-hidden"),re(_j),re(Wi))},n.\u0275cmp=Ft({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,r){2&e&&(mt("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),fn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ke],ngContentSelectors:hj,decls:1,vars:0,template:function(e,r){1&e&&(ai(),Qt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Cj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt],Mt]}),n})();const Tj=["tooltip"],DS="tooltip-panel",CS=Zc({passive:!0}),TS=new De("mat-tooltip-scroll-strategy"),Mj={provide:TS,deps:[rs],useFactory:function Aj(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},xj=new De("mat-tooltip-default-options",{providedIn:"root",factory:function Ij(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Rj=(()=>{class n{constructor(e,r,i,s,o,a,l,v,I,H,X,Q){this._overlay=e,this._elementRef=r,this._scrollDispatcher=i,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=v,this._dir=H,this._defaultOptions=X,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new N,this._scrollStrategy=I,this._document=Q,X&&(X.position&&(this.position=X.position),X.touchGestures&&(this.touchGestures=X.touchGestures)),H.change.pipe(Ht(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(e){var r;e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(r=this._tooltipInstance)||void 0===r||r.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=ln(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Bn(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Bn(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ht(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,i])=>{e.removeEventListener(r,i,CS)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const r=this._createOverlay();this._detach(),this._portal=this._portal||new td(this._tooltipComponent,this._viewContainerRef);const i=this._tooltipInstance=r.attach(this._portal).instance;i._triggerElement=this._elementRef.nativeElement,i._mouseLeaveHideDelay=this._hideDelay,i.afterHidden().pipe(Ht(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),i.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){var e;if(this._overlayRef)return this._overlayRef;const r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return i.positionChanges.pipe(Ht(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${DS}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ht(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ht(this._destroyed)).subscribe(()=>{var s;return null===(s=this._tooltipInstance)||void 0===s?void 0:s._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe(Ht(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!ea(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),(null===(e=this._defaultOptions)||void 0===e?void 0:e.disableTooltipInteractivity)&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const r=e.getConfig().positionStrategy,i=this._getOrigin(),s=this._getOverlayPosition();r.withPositions([this._addOffset(Object.assign(Object.assign({},i.main),s.main)),this._addOffset(Object.assign(Object.assign({},i.fallback),s.fallback))])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r||"below"==r?i={originX:"center",originY:"above"==r?"top":"bottom"}:"before"==r||"left"==r&&e||"right"==r&&!e?i={originX:"start",originY:"center"}:("after"==r||"right"==r&&e||"left"==r&&!e)&&(i={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r?i={overlayX:"center",overlayY:"bottom"}:"below"==r?i={overlayX:"center",overlayY:"top"}:"before"==r||"left"==r&&e||"right"==r&&!e?i={overlayX:"end",overlayY:"center"}:("after"==r||"right"==r&&e||"left"==r&&!e)&&(i={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Pr(1),Ht(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,r){return"above"===this.position||"below"===this.position?"top"===r?r="bottom":"bottom"===r&&(r="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:r}}_updateCurrentPositionClass(e){const{overlayY:r,originX:i,originY:s}=e;let o;if(o="center"===r?this._dir&&"rtl"===this._dir.value?"end"===i?"left":"right":"start"===i?"left":"right":"bottom"===r&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${DS}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",r=>{var i;const s=r.relatedTarget;(!s||!(null===(i=this._overlayRef)||void 0===i?void 0:i.overlayElement.contains(s)))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",r],["touchcancel",r])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([r,i])=>{this._elementRef.nativeElement.addEventListener(r,i,CS)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const r=this._document.elementFromPoint(e.clientX,e.clientY),i=this._elementRef.nativeElement;r!==i&&!i.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const r=this._elementRef.nativeElement,i=r.style;("on"===e||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),("on"===e||!r.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(e){Fo()},n.\u0275dir=Oe({type:n,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),im=(()=>{class n extends Rj{constructor(e,r,i,s,o,a,l,v,I,H,X,Q){super(e,r,i,s,o,a,l,v,I,H,X,Q),this._tooltipComponent=Pj}}return n.\u0275fac=function(e){return new(e||n)(re(rs),re(_t),re(hT),re(Xn),re(rt),re(Un),re(hH),re(zT),re(TS),re(Jo,8),re(xj,8),re(Qe))},n.\u0275dir=Oe({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[Ke]}),n})(),Oj=(()=>{class n{constructor(e,r){this._changeDetectorRef=e,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new N,this._animationsDisabled="NoopAnimations"===r}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const r=this._tooltip.nativeElement,i=this._showAnimation,s=this._hideAnimation;if(r.classList.remove(e?s:i),r.classList.add(e?i:s),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(r);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(r.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return n.\u0275fac=function(e){return new(e||n)(re(wr),re(fi,8))},n.\u0275dir=Oe({type:n}),n})(),Pj=(()=>{class n extends Oj{constructor(e,r,i){super(e,i),this._breakpointObserver=r,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return n.\u0275fac=function(e){return new(e||n)(re(wr),re(nm),re(fi,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(e,r){if(1&e&&Sr(Tj,7),2&e){let i;wt(i=At())&&(r._tooltip=i.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,r){1&e&&pt("mouseleave",function(s){return r._handleMouseLeave(s)}),2&e&&Yi("zoom",r.isVisible()?1:null)},features:[Ke],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(e,r){if(1&e&&(me(0,"div",0,1),pt("animationend",function(s){return r._handleAnimationEnd(s)}),function yE(n,t){const e=ut();let r;const i=n+20;e.firstCreatePass?(r=function YP(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(i,r.onDestroy)):r=e.data[i];const s=r.factory||(r.factory=vs(r.type)),o=Ui(re);try{const a=nu(!1),l=s();return nu(a),function yR(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,pe(),i,l),l}finally{Ui(o)}}(2,"async"),We(3),_e()),2&e){let i;fn("mat-tooltip-handset",null==(i=function _E(n,t,e){const r=n+20,i=pe(),s=oo(i,r);return function Za(n,t){return n[1].data[t].pure}(i,r)?hE(i,On(),t,s.transform,e,s):s.transform(e)}(2,4,r._isHandset))?null:i.matches),Ae("ngClass",r.tooltipClass),Ce(3),Tr(r.message)}},directives:[bp],pipes:[Ob],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),n})(),SS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[Mj],imports:[[MH,Xi,$g,Mt],Mt,ed]}),n})();function Lj(n,t){if(1&n&&(Ti(),Dt(0,"circle",4)),2&n){const e=at(),r=wu(1);Yi("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(r)),mt("r",e._getCircleRadius())}}function kj(n,t){if(1&n&&(Ti(),Dt(0,"circle",4)),2&n){const e=at(),r=wu(1);Yi("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(r)),mt("r",e._getCircleRadius())}}const Nj=sd(class{constructor(n){this._elementRef=n}},"primary"),Bj=new De("mat-progress-spinner-default-options",{providedIn:"root",factory:function Uj(){return{diameter:100}}});class gi extends Nj{constructor(t,e,r,i,s,o,a,l){super(t),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=O.EMPTY,this.mode="determinate";const v=gi._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),v.has(r.head)||v.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Bn(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Bn(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Bn(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=fT(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const r=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${r}% ${r}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,r=gi._diameters;let i=r.get(t);if(!i||!i.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),i||(i=new Set,r.set(t,i)),i.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}gi._diameters=new WeakMap,gi.\u0275fac=function(t){return new(t||gi)(re(_t),re(Un),re(Qe,8),re(fi,8),re(Bj),re(wr),re(Jc),re(rt))},gi.\u0275cmp=Ft({type:gi,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(mt("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Yi("width",e.diameter,"px")("height",e.diameter,"px"),fn("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Ke],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Ti(),me(0,"svg",0,1),Ye(2,Lj,1,11,"circle",2),Ye(3,kj,1,9,"circle",3),_e()),2&t&&(Yi("width",e.diameter,"px")("height",e.diameter,"px"),Ae("ngSwitch","indeterminate"===e.mode),mt("viewBox",e._getViewBox()),Ce(2),Ae("ngSwitchCase",!0),Ce(1),Ae("ngSwitchCase",!1))},directives:[Ko,nc],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Hj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt,Xi],Mt]}),n})();function jj(n,t){if(1&n&&(me(0,"li"),We(1),_e()),2&n){const e=t.$implicit;Ce(1),kn(" ",e,"")}}function Gj(n,t){1&n&&(me(0,"mat-icon",22),We(1,"lock"),_e())}function Kj(n,t){if(1&n&&(me(0,"p",20)(1,"span"),We(2),_e(),me(3,"span"),We(4),_e(),Ye(5,Gj,2,0,"mat-icon",21),_e()),2&n){const e=t.$implicit;Ce(2),kn(" ",e.order,". "),Ce(2),kn(" ",e.title,""),Ce(1),Ae("ngIf","unlocked"===e.status)}}function Wj(n,t){if(1&n&&(me(0,"div",3)(1,"div",4)(2,"button",5)(3,"mat-icon"),We(4,"keyboard_backspace"),_e()(),me(5,"div",6),We(6),_e()(),me(7,"div",7)(8,"div",8)(9,"video",9),Dt(10,"source",10),_e()(),me(11,"div",11)(12,"div",12)(13,"span",13),We(14,"Rating: "),_e(),We(15),_e(),me(16,"p",14)(17,"span",13),We(18,"Description: "),_e(),We(19),_e(),me(20,"div",15)(21,"span",13),We(22,"Skills:"),_e(),me(23,"ul"),Ye(24,jj,2,1,"li",16),_e()(),me(25,"div",17)(26,"span",13),We(27,"Lessons:"),_e(),me(28,"div",18),Ye(29,Kj,6,3,"p",19),_e()()()()()),2&n){const e=at();Ce(6),kn(" ",e.course.title,""),Ce(3),Ae("poster",e.course.lessons[0].previewImageLink+"/"+e.course.lessons[0].order+".webp",Cs),Ce(1),Ae("src",e.course.lessons[0].link,Cs),Ce(5),kn(" ",e.course.rating," "),Ce(4),kn(" ",e.course.description,""),Ce(5),Ae("ngForOf",e.course.meta.skills),Ce(5),Ae("ngForOf",e.course.lessons)}}function zj(n,t){1&n&&(me(0,"div")(1,"div",23),We(2,"Try to reload page "),me(3,"mat-icon"),We(4,"sync"),_e()()())}function $j(n,t){1&n&&(me(0,"div",24),Dt(1,"mat-spinner",25),_e())}let Yj=(()=>{class n{constructor(e,r,i){this.route=e,this.service=r,this._snackBar=i,this.isHideCourse=!0}ngOnInit(){this.route.params.pipe(Kt(e=>this.service.getCourse(e.id))).subscribe(e=>{this.isHideCourse=!1,this.course=e},()=>{this.isHideCourse=!1,this.openSnackBar("Something went wrong")})}openSnackBar(e,r=!0){this._snackBar.open(e,"Close",{duration:6e3,panelClass:r?"alert":"success"})}}return n.\u0275fac=function(e){return new(e||n)(re(Vs),re(oT),re(pS))},n.\u0275cmp=Ft({type:n,selectors:[["app-course"]],decls:3,vars:3,consts:[["class","course",4,"ngIf"],[4,"ngIf"],["class","blur",4,"ngIf"],[1,"course"],[1,"course-title"],["mat-button","","routerLink","/courses"],[1,"title"],[1,"course-wrapper"],[1,"video"],[3,"poster"],["type","",3,"src"],[1,"info"],[1,"rating","info-item"],[1,"point"],[1,"description","info-item"],[1,"skills","info-item"],[4,"ngFor","ngForOf"],[1,"info-item"],[1,"lessons-list"],["class","lesson",4,"ngFor","ngForOf"],[1,"lesson"],["class","lock","matTooltip","This lesson is locked","matTooltipPosition","above",4,"ngIf"],["matTooltip","This lesson is locked","matTooltipPosition","above",1,"lock"],[1,"reload"],[1,"blur"],["color","",1,"spinner"]],template:function(e,r){1&e&&(Ye(0,Wj,30,7,"div",0),Ye(1,zj,5,0,"div",1),Ye(2,$j,2,0,"div",2)),2&e&&(Ae("ngIf",r.course),Ce(1),Ae("ngIf",!r.course&&!r.isHideCourse),Ce(1),Ae("ngIf",r.isHideCourse))},directives:[Rs,od,Kc,bS,tc,im,gi],styles:[".course[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center;width:100%;flex-direction:column}.course-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;text-align:center;display:flex;align-items:center}.course-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.course-wrapper[_ngcontent-%COMP%]{display:flex;margin-top:15px}.course-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]{width:550px}.lessons-list[_ngcontent-%COMP%]{margin-left:5px}.lessons-list[_ngcontent-%COMP%]   .lesson[_ngcontent-%COMP%]{display:flex;margin:0 0 4px}.lessons-list[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{font-size:14px;margin-left:5px;color:#ee4747;height:-moz-fit-content;height:fit-content}.info-item[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:600}  snack-bar-container.alert{background:#ff8080}  .mat-progress-spinner circle,   .mat-spinner circle{stroke:#3e2dbb!important;opacity:1}"]}),n})();var Xj=ls(70),Qj=ls.n(Xj);const Zj=["connectionContainer"],qj=["inputContainer"],Jj=["label"];function eG(n,t){1&n&&(Va(0),me(1,"div",14),Dt(2,"div",15)(3,"div",16)(4,"div",17),_e(),me(5,"div",18),Dt(6,"div",15)(7,"div",16)(8,"div",17),_e(),Ha())}function tG(n,t){if(1&n){const e=oi();me(0,"div",19),pt("cdkObserveContent",function(){return Hr(e),at().updateOutlineGap()}),Qt(1,1),_e()}2&n&&Ae("cdkObserveContentDisabled","outline"!=at().appearance)}function nG(n,t){if(1&n&&(Va(0),Qt(1,2),me(2,"span"),We(3),_e(),Ha()),2&n){const e=at(2);Ce(3),Tr(e._control.placeholder)}}function rG(n,t){1&n&&Qt(0,3,["*ngSwitchCase","true"])}function iG(n,t){1&n&&(me(0,"span",23),We(1," *"),_e())}function sG(n,t){if(1&n){const e=oi();me(0,"label",20,21),pt("cdkObserveContent",function(){return Hr(e),at().updateOutlineGap()}),Ye(2,nG,4,1,"ng-container",12),Ye(3,rG,1,0,"ng-content",12),Ye(4,iG,2,0,"span",22),_e()}if(2&n){const e=at();fn("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),Ae("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),mt("for",e._control.id)("aria-owns",e._control.id),Ce(2),Ae("ngSwitchCase",!1),Ce(1),Ae("ngSwitchCase",!0),Ce(1),Ae("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function oG(n,t){1&n&&(me(0,"div",24),Qt(1,4),_e())}function aG(n,t){if(1&n&&(me(0,"div",25),Dt(1,"span",26),_e()),2&n){const e=at();Ce(1),fn("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function lG(n,t){1&n&&(me(0,"div"),Qt(1,5),_e()),2&n&&Ae("@transitionMessages",at()._subscriptAnimationState)}function uG(n,t){if(1&n&&(me(0,"div",30),We(1),_e()),2&n){const e=at(2);Ae("id",e._hintLabelId),Ce(1),Tr(e.hintLabel)}}function cG(n,t){if(1&n&&(me(0,"div",27),Ye(1,uG,2,2,"div",28),Qt(2,6),Dt(3,"div",29),Qt(4,7),_e()),2&n){const e=at();Ae("@transitionMessages",e._subscriptAnimationState),Ce(1),Ae("ngIf",e.hintLabel)}}const dG=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],fG=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],hG=new De("MatError"),pG={transitionMessages:ll("transitionMessages",[qi("enter",_n({opacity:1,transform:"translateY(0%)"})),Ji("void => enter",[_n({opacity:0,transform:"translateY(-5px)"}),Os("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let om=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Oe({type:n}),n})();const gG=new De("MatHint");let wS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Oe({type:n,selectors:[["mat-label"]]}),n})(),mG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Oe({type:n,selectors:[["mat-placeholder"]]}),n})();const vG=new De("MatPrefix"),yG=new De("MatSuffix");let AS=0;const EG=sd(class{constructor(n){this._elementRef=n}},"primary"),bG=new De("MAT_FORM_FIELD_DEFAULT_OPTIONS"),xS=new De("MatFormField");let DG=(()=>{class n extends EG{constructor(e,r,i,s,o,a,l){super(e),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new N,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+AS++,this._labelId="mat-form-field-label-"+AS++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ln(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Ns(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ht(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ht(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),eo(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ns(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ns(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ht(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,$c(this._label.nativeElement,"transitionend").pipe(Pr(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const I=r.querySelectorAll(`${i}, ${s}`);for(let H=0;H<I.length;H++)I[H].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=r.querySelectorAll(i),v=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const I=r.getBoundingClientRect();if(0===I.width&&0===I.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const H=this._getStartEnd(I),X=e.children,Q=this._getStartEnd(X[0].getBoundingClientRect());let ee=0;for(let ie=0;ie<X.length;ie++)ee+=X[ie].offsetWidth;o=Math.abs(Q-H)-5,a=ee>0?.75*ee+10:0}for(let I=0;I<l.length;I++)l[I].style.width=`${o}px`;for(let I=0;I<v.length;I++)v[I].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(wr),re(Jo,8),re(bG,8),re(Un),re(rt),re(fi,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,i){if(1&e&&(Mn(i,om,5),Mn(i,om,7),Mn(i,wS,5),Mn(i,wS,7),Mn(i,mG,5),Mn(i,hG,5),Mn(i,gG,5),Mn(i,vG,5),Mn(i,yG,5)),2&e){let s;wt(s=At())&&(r._controlNonStatic=s.first),wt(s=At())&&(r._controlStatic=s.first),wt(s=At())&&(r._labelChildNonStatic=s.first),wt(s=At())&&(r._labelChildStatic=s.first),wt(s=At())&&(r._placeholderChild=s.first),wt(s=At())&&(r._errorChildren=s),wt(s=At())&&(r._hintChildren=s),wt(s=At())&&(r._prefixChildren=s),wt(s=At())&&(r._suffixChildren=s)}},viewQuery:function(e,r){if(1&e&&(Sr(Zj,7),Sr(qj,5),Sr(Jj,5)),2&e){let i;wt(i=At())&&(r._connectionContainerRef=i.first),wt(i=At())&&(r._inputContainerRef=i.first),wt(i=At())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,r){2&e&&fn("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[St([{provide:xS,useExisting:n}]),Ke],ngContentSelectors:fG,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,r){1&e&&(ai(dG),me(0,"div",0)(1,"div",1,2),pt("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),Ye(3,eG,9,0,"ng-container",3),Ye(4,tG,2,1,"div",4),me(5,"div",5,6),Qt(7),me(8,"span",7),Ye(9,sG,5,16,"label",8),_e()(),Ye(10,oG,2,0,"div",9),_e(),Ye(11,aG,2,4,"div",10),me(12,"div",11),Ye(13,lG,2,1,"div",12),Ye(14,cG,5,2,"div",13),_e()()),2&e&&(Ce(3),Ae("ngIf","outline"==r.appearance),Ce(1),Ae("ngIf",r._prefixChildren.length),Ce(5),Ae("ngIf",r._hasFloatingLabel()),Ce(1),Ae("ngIf",r._suffixChildren.length),Ce(1),Ae("ngIf","outline"!=r.appearance),Ce(1),Ae("ngSwitch",r._getDisplayedMessages()),Ce(1),Ae("ngSwitchCase","error"),Ce(1),Ae("ngSwitchCase","hint"))},directives:[Rs,cH,Ko,nc],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[pG.transitionMessages]},changeDetection:0}),n})(),CG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Xi,Mt,NT],Mt]}),n})();class TG{constructor(t=!1,e,r=!0){this._multiple=t,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new N,e&&e.length&&(t?e.forEach(i=>this._markSelected(i)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}function is(n){return null==n||0===n.length}function OS(n){return null!=n&&"number"==typeof n.length}const xn=new De("NgValidators"),ss=new De("NgAsyncValidators"),xG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class IG{static min(t){return function PS(n){return t=>{if(is(t.value)||is(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function LS(n){return t=>{if(is(t.value)||is(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function kS(n){return is(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function FS(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function NS(n){return is(n.value)||xG.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function BS(n){return t=>is(t.value)||!OS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function US(n){return t=>OS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function VS(n){if(!n)return dd;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(is(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return zS(t)}static composeAsync(t){return $S(t)}}function dd(n){return null}function HS(n){return null!=n}function jS(n){const t=ja(n)?gn(n):n;return Dh(t),t}function GS(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function KS(n,t){return t.map(e=>e(n))}function WS(n){return n.map(t=>function RG(n){return!n.validate}(t)?t:e=>t.validate(e))}function zS(n){if(!n)return null;const t=n.filter(HS);return 0==t.length?null:function(e){return GS(KS(e,t))}}function lm(n){return null!=n?zS(WS(n)):null}function $S(n){if(!n)return null;const t=n.filter(HS);return 0==t.length?null:function(e){return gS(KS(e,t).map(jS)).pipe(q(GS))}}function um(n){return null!=n?$S(WS(n)):null}function YS(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function XS(n){return n._rawValidators}function QS(n){return n._rawAsyncValidators}function cm(n){return n?Array.isArray(n)?n:[n]:[]}function fd(n,t){return Array.isArray(n)?n.includes(t):n===t}function ZS(n,t){const e=cm(t);return cm(n).forEach(i=>{fd(e,i)||e.push(i)}),e}function qS(n,t){return cm(t).filter(e=>!fd(n,e))}class JS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=lm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=um(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ni extends JS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vn extends JS{get formDirective(){return null}get path(){return null}}function Il(n,t){hm(n,t),t.valueAccessor.writeValue(n.value),function HG(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nw(n,t)})}(n,t),function GG(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function jG(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nw(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function VG(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function gd(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),vd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function md(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function hm(n,t){const e=XS(n);null!==t.validator?n.setValidators(YS(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=QS(n);null!==t.asyncValidator?n.setAsyncValidators(YS(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();md(t._rawValidators,i),md(t._rawAsyncValidators,i)}function vd(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=XS(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==t.validator);s.length!==i.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const i=QS(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==t.asyncValidator);s.length!==i.length&&(e=!0,n.setAsyncValidators(s))}}}const r=()=>{};return md(t._rawValidators,r),md(t._rawAsyncValidators,r),e}function nw(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function rw(n,t){hm(n,t)}function sw(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mm(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Rl="VALID",yd="INVALID",ra="PENDING",Ol="DISABLED";function ym(n){return(_d(n)?n.validators:n)||null}function ow(n){return Array.isArray(n)?lm(n):n||null}function _m(n,t){return(_d(t)?t.asyncValidators:n)||null}function aw(n){return Array.isArray(n)?um(n):n||null}function _d(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const lw=n=>n instanceof fw,Em=n=>n instanceof Dm;function uw(n){return lw(n)?n.value:n.getRawValue()}function cw(n,t){const e=Em(n),r=n.controls;if(!(e?Object.keys(r):r).length)throw new Me(1e3,"");if(!r[t])throw new Me(1001,"")}function dw(n,t){Em(n),n._forEachChild((r,i)=>{if(void 0===t[i])throw new Me(1002,"")})}class bm{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ow(this._rawValidators),this._composedAsyncValidatorFn=aw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Rl}get invalid(){return this.status===yd}get pending(){return this.status==ra}get disabled(){return this.status===Ol}get enabled(){return this.status!==Ol}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ow(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=aw(t)}addValidators(t){this.setValidators(ZS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ZS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(qS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(qS(t,this._rawAsyncValidators))}hasValidator(t){return fd(this._rawValidators,t)}hasAsyncValidator(t){return fd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ra,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ol,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Rl,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rl||this.status===ra)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ol:Rl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ra,this._hasOwnPendingAsyncValidator=!0;const e=jS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function $G(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=Em(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof XG)(r)&&r.at(i)||null}),r}(this,t,".")}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Ol:this.errors?yd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ra)?ra:this._anyControlsHaveStatus(yd)?yd:Rl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_d(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fw extends bm{constructor(t=null,e,r){super(ym(e),_m(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_d(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){mm(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){mm(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Dm extends bm{constructor(t,e,r){super(ym(e),_m(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){dw(this,t),Object.keys(t).forEach(r=>{cw(this,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=uw(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class XG extends bm{constructor(t,e,r){super(ym(e),_m(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){dw(this,t),t.forEach((r,i)=>{cw(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>uw(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const QG={provide:Vn,useExisting:It(()=>Ed)},Pl=(()=>Promise.resolve(null))();let Ed=(()=>{class n extends Vn{constructor(e,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new nt,this.form=new Dm({},lm(e),um(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Pl.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Il(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Pl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Pl.then(()=>{const r=this._findContainer(e.path),i=new Dm({});rw(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Pl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){Pl.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,sw(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(re(xn,10),re(ss,10))},n.\u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&pt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[St([QG]),Ke]}),n})();const oK={provide:Vn,useExisting:It(()=>bd)};let bd=(()=>{class n extends Vn{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new nt,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return Il(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){gd(e.control||null,e,!1),mm(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,sw(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(gd(r||null,e),lw(i)&&(Il(i,e),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);rw(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function KG(n,t){return vd(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hm(this.form,this),this._oldForm&&vd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(re(xn,10),re(ss,10))},n.\u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&pt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[St([oK]),Ke,Yn]}),n})();const SK=["trigger"],wK=["panel"];function AK(n,t){if(1&n&&(me(0,"span",8),We(1),_e()),2&n){const e=at();Ce(1),Tr(e.placeholder)}}function MK(n,t){if(1&n&&(me(0,"span",12),We(1),_e()),2&n){const e=at(2);Ce(1),Tr(e.triggerValue)}}function xK(n,t){1&n&&Qt(0,0,["*ngSwitchCase","true"])}function IK(n,t){1&n&&(me(0,"span",9),Ye(1,MK,2,1,"span",10),Ye(2,xK,1,0,"ng-content",11),_e()),2&n&&(Ae("ngSwitch",!!at().customTrigger),Ce(2),Ae("ngSwitchCase",!0))}function RK(n,t){if(1&n){const e=oi();me(0,"div",13)(1,"div",14,15),pt("@transformPanel.done",function(i){return Hr(e),at()._panelDoneAnimatingStream.next(i.toState)})("keydown",function(i){return Hr(e),at()._handleKeydown(i)}),Qt(3,1),_e()()}if(2&n){const e=at();Ae("@transformPanelWrap",void 0),Ce(1),E0("mat-select-panel ",e._getPanelTheme(),""),Yi("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),Ae("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),mt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const OK=[[["mat-select-trigger"]],"*"],PK=["mat-select-trigger","*"],kw={transformPanelWrap:ll("transformPanelWrap",[Ji("* => void",U1("@transformPanel",[B1()],{optional:!0}))]),transformPanel:ll("transformPanel",[qi("void",_n({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),qi("showing",_n({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),qi("showing-multiple",_n({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Ji("void => *",Os("120ms cubic-bezier(0, 0, 0.2, 1)")),Ji("* => void",Os("100ms 25ms linear",_n({opacity:0})))])};let Fw=0;const Bw=new De("mat-select-scroll-strategy"),NK=new De("MAT_SELECT_CONFIG"),BK={provide:Bw,deps:[rs],useFactory:function FK(n){return()=>n.scrollStrategies.reposition()}};class UK{constructor(t,e){this.source=t,this.value=e}}const VK=ZT(LH(qg(kH(class{constructor(n,t,e,r,i){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=r,this.ngControl=i}})))),HK=new De("MatSelectTrigger");let jK=(()=>{class n extends VK{constructor(e,r,i,s,o,a,l,v,I,H,X,Q,ee,ie){var le,de,oe;super(o,s,l,v,H),this._viewportRuler=e,this._changeDetectorRef=r,this._ngZone=i,this._dir=a,this._parentFormField=I,this._liveAnnouncer=ee,this._defaultOptions=ie,this._panelOpen=!1,this._compareWith=(ge,Ie)=>ge===Ie,this._uid="mat-select-"+Fw++,this._triggerAriaLabelledBy=null,this._destroy=new N,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Fw++,this._panelDoneAnimatingStream=new N,this._overlayPanelClass=(null===(le=this._defaultOptions)||void 0===le?void 0:le.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(oe=null===(de=this._defaultOptions)||void 0===de?void 0:de.disableOptionCentering)&&void 0!==oe&&oe,this.ariaLabel="",this.optionSelectionChanges=cg(()=>{const ge=this.options;return ge?ge.changes.pipe(Ns(ge),Pi(()=>eo(...ge.map(Ie=>Ie.onSelectionChange)))):this._ngZone.onStable.pipe(Pr(1),Pi(()=>this.optionSelectionChanges))}),this.openedChange=new nt,this._openedStream=this.openedChange.pipe(xr(ge=>ge),q(()=>{})),this._closedStream=this.openedChange.pipe(xr(ge=>!ge),q(()=>{})),this.selectionChange=new nt,this.valueChange=new nt,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ie?void 0:ie.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ie.typeaheadDebounceInterval),this._scrollStrategyFactory=Q,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(X)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){var e,r,i,s;return null!==(s=null!==(e=this._required)&&void 0!==e?e:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(IG.required))&&void 0!==s&&s}set required(e){this._required=ln(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ln(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ln(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Bn(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new TG(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(kT(),Ht(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ht(this._destroy)).subscribe(e=>{e.added.forEach(r=>r.select()),e.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(Ns(null),Ht(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),r=this.ngControl;if(e!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,r;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(r=this._selectionModel)||void 0===r?void 0:r.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const r=e.keyCode,i=40===r||38===r||37===r||39===r,s=13===r||32===r,o=this._keyManager;if(!o.isTyping()&&s&&!ea(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const r=this._keyManager,i=e.keyCode,s=40===i||38===i,o=r.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==i&&32!==i||!r.activeItem||ea(e))if(!o&&this._multiple&&65===i&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=r.activeItemIndex;r.onKeydown(e),this._multiple&&s&&e.shiftKey&&r.activeItem&&r.activeItemIndex!==a&&r.activeItem._selectViaInteraction()}else e.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Pr(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(e);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,e)}catch(s){return!1}});return r&&this._selectionModel.select(r),r}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new gH(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Ht(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Ht(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=eo(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ht(e)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),eo(...this.options.map(r=>r._stateChanges)).pipe(Ht(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,r){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),r&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),r&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,e):e.indexOf(r)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const r=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(r?r+" ":"")+this.ariaLabelledby:r}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const r=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let i=(r?r+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(re(Jc),re(wr),re(rt),re(BH),re(_t),re(Jo,8),re(Ed,8),re(bd,8),re(xS,8),re(Ni,10),ys("tabindex"),re(Bw),re(Qg),re(NK,8))},n.\u0275dir=Oe({type:n,viewQuery:function(e,r){if(1&e&&(Sr(SK,5),Sr(wK,5),Sr(OT,5)),2&e){let i;wt(i=At())&&(r.trigger=i.first),wt(i=At())&&(r.panel=i.first),wt(i=At())&&(r._overlayDir=i.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Ke,Yn]}),n})(),GK=(()=>{class n extends jK{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,r,i){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-r+s/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Ht(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Pr(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const r=oS(e,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===r?0:function QH(n,t,e,r){return n<e?n:n+t>e+r?Math.max(0,n-r+t):e}((e+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new UK(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let v=this._selectionModel.selected[0]||this.options.first;o=v&&v.group?32:16}i||(o*=-1);const a=0-(e.left+o-(i?s:0)),l=e.right+o-r.width+(i?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,r,i){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?e*s:this._scrollTop===i?(e-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):r-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(e){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=i.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),v=Math.min(this._getItemCount()*r,256)-a-this._triggerRect.height;v>o?this._adjustPanelUp(v,o):a>s?this._adjustPanelDown(a,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,r){const i=Math.round(e-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,r,i){const s=Math.round(e-r);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*e,256),o=r*e-i;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=oS(a,this.options,this.optionGroups);const l=i/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const e=this._getItemHeight(),r=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=function yn(n){return Vi(()=>{const t=n.prototype.constructor,e=t[bi]||df(t),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[bi]||df(i);if(s&&s!==e)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(r||n)}}(),n.\u0275cmp=Ft({type:n,selectors:[["mat-select"]],contentQueries:function(e,r,i){if(1&e&&(Mn(i,HK,5),Mn(i,sS,5),Mn(i,iS,5)),2&e){let s;wt(s=At())&&(r.customTrigger=s.first),wt(s=At())&&(r.options=s),wt(s=At())&&(r.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,r){1&e&&pt("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&e&&(mt("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-describedby",r._ariaDescribedby||null)("aria-activedescendant",r._getAriaActiveDescendant()),fn("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[St([{provide:om,useExisting:n},{provide:rS,useExisting:n}]),Ke],ngContentSelectors:PK,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,r){if(1&e&&(ai(OK),me(0,"div",0,1),pt("click",function(){return r.toggle()}),me(3,"div",2),Ye(4,AK,2,1,"span",3),Ye(5,IK,3,2,"span",4),_e(),me(6,"div",5),Dt(7,"div",6),_e()(),Ye(8,RK,4,14,"ng-template",7),pt("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&e){const i=wu(1);mt("aria-owns",r.panelOpen?r.id+"-panel":null),Ce(3),Ae("ngSwitch",r.empty),mt("id",r._valueId),Ce(1),Ae("ngSwitchCase",!0),Ce(1),Ae("ngSwitchCase",!1),Ce(3),Ae("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},directives:[RT,Ko,nc,Ib,OT,bp],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[kw.transformPanelWrap,kw.transformPanel]},changeDetection:0}),n})(),KK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[BK],imports:[[Xi,$g,aS,Mt],ed,CG,aS,Mt]}),n})();function WK(n,t){if(1&n&&(me(0,"mat-option",19),We(1),_e()),2&n){const e=t.$implicit;Ae("value",e),Ce(1),kn(" ",e," ")}}function zK(n,t){if(1&n){const e=oi();me(0,"mat-form-field",16)(1,"mat-select",17),pt("selectionChange",function(i){return Hr(e),at(2)._changePageSize(i.value)}),Ye(2,WK,2,2,"mat-option",18),_e()()}if(2&n){const e=at(2);Ae("appearance",e._formFieldAppearance)("color",e.color),Ce(1),Ae("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),Ce(1),Ae("ngForOf",e._displayedPageSizeOptions)}}function $K(n,t){if(1&n&&(me(0,"div",20),We(1),_e()),2&n){const e=at(2);Ce(1),Tr(e.pageSize)}}function YK(n,t){if(1&n&&(me(0,"div",12)(1,"div",13),We(2),_e(),Ye(3,zK,3,6,"mat-form-field",14),Ye(4,$K,2,1,"div",15),_e()),2&n){const e=at();Ce(2),kn(" ",e._intl.itemsPerPageLabel," "),Ce(1),Ae("ngIf",e._displayedPageSizeOptions.length>1),Ce(1),Ae("ngIf",e._displayedPageSizeOptions.length<=1)}}function XK(n,t){if(1&n){const e=oi();me(0,"button",21),pt("click",function(){return Hr(e),at().firstPage()}),Ti(),me(1,"svg",7),Dt(2,"path",22),_e()()}if(2&n){const e=at();Ae("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),mt("aria-label",e._intl.firstPageLabel)}}function QK(n,t){if(1&n){const e=oi();Ti(),nf(),me(0,"button",23),pt("click",function(){return Hr(e),at().lastPage()}),Ti(),me(1,"svg",7),Dt(2,"path",24),_e()()}if(2&n){const e=at();Ae("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),mt("aria-label",e._intl.lastPageLabel)}}let Cd=(()=>{class n{constructor(){this.changes=new N,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,r,i)=>{if(0==i||0==r)return`0 of ${i}`;const s=e*r;return`${s+1} \u2013 ${s<(i=Math.max(i,0))?Math.min(s+r,i):s+r} of ${i}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qK={provide:Cd,deps:[[new Dr,new _s,Cd]],useFactory:function ZK(n){return n||new Cd}},eW=new De("MAT_PAGINATOR_DEFAULT_OPTIONS"),tW=qg(FH(class{}));let nW=(()=>{class n extends tW{constructor(e,r,i){if(super(),this._intl=e,this._changeDetectorRef=r,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new nt,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=i;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(Bn(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=Bn(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(Bn(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(r=>Bn(r)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=ln(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=ln(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const i=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,r)=>e-r),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(e){Fo()},n.\u0275dir=Oe({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[Ke]}),n})(),rW=(()=>{class n extends nW{constructor(e,r,i){super(e,r,i),i&&null!=i.formFieldAppearance&&(this._formFieldAppearance=i.formFieldAppearance)}}return n.\u0275fac=function(e){return new(e||n)(re(Cd),re(wr),re(eW,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[Ke],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,r){1&e&&(me(0,"div",0)(1,"div",1),Ye(2,YK,5,3,"div",2),me(3,"div",3)(4,"div",4),We(5),_e(),Ye(6,XK,3,5,"button",5),me(7,"button",6),pt("click",function(){return r.previousPage()}),Ti(),me(8,"svg",7),Dt(9,"path",8),_e()(),nf(),me(10,"button",9),pt("click",function(){return r.nextPage()}),Ti(),me(11,"svg",7),Dt(12,"path",10),_e()(),Ye(13,QK,3,5,"button",11),_e()()()),2&e&&(Ce(2),Ae("ngIf",!r.hidePageSize),Ce(3),kn(" ",r._intl.getRangeLabel(r.pageIndex,r.pageSize,r.length)," "),Ce(1),Ae("ngIf",r.showFirstLastButtons),Ce(1),Ae("matTooltip",r._intl.previousPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),mt("aria-label",r._intl.previousPageLabel),Ce(3),Ae("matTooltip",r._intl.nextPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),mt("aria-label",r._intl.nextPageLabel),Ce(3),Ae("ngIf",r.showFirstLastButtons))},directives:[DG,GK,sS,od,Rs,tc,im],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})(),iW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({providers:[qK],imports:[[Xi,tm,KK,SS,Mt]]}),n})();const Uw=["*"];class oW{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(r=>this._trackTile(r))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new aW(this.rowIndex,e)}_findMatchingGap(t){let e=-1,r=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(r=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(e)))}while(r-e<t||0==r);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let r=0;r<e.colspan;r++)this.tracker[t+r]=e.rowspan}}class aW{constructor(t,e){this.row=t,this.col=e}}const Vw=new De("MAT_GRID_LIST");let Hw=(()=>{class n{constructor(e,r){this._element=e,this._gridList=r,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(Bn(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(Bn(e))}_setStyle(e,r){this._element.nativeElement.style[e]=r}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(Vw,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,r){2&e&&mt("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:Uw,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,r){1&e&&(ai(),me(0,"div",0),Qt(1),_e())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})();const lW=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class Mm{constructor(){this._rows=0,this._rowspan=0}init(t,e,r,i){this._gutterSize=jw(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=r,this._direction=i}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":Qs(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,r){let i=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(t,r,i,s),this.setRowStyles(t,e,i,s)}setColStyles(t,e,r,i){let s=this.getBaseTileSize(r,i);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,e)),t._setStyle("width",Qs(this.getTileSize(s,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class uW extends Mm{constructor(t){super(),this.fixedRowHeight=t}init(t,e,r,i){super.init(t,e,r,i),this.fixedRowHeight=jw(this.fixedRowHeight),lW.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Qs(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Qs(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class cW extends Mm{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,r,i){this.baseTileHeight=this.getBaseTileSize(r/this.rowHeightRatio,i),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Qs(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Qs(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class dW extends Mm{setRowStyles(t,e){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(s,e)),t._setStyle("height",Qs(this.getTileSize(s,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function Qs(n){return`calc(${n})`}function jw(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let hW=(()=>{class n{constructor(e,r){this._element=e,this._dir=r,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(Bn(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${null==e?"":e}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const r=`${null==e?"":e}`;r!==this._rowHeight&&(this._rowHeight=r,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new dW:e&&e.indexOf(":")>-1?new cW(e):new uW(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new oW);const e=this._tileCoordinator,r=this._tiles.filter(s=>!s._gridList||s._gridList===this),i=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,r),this._tileStyler.init(this.gutterSize,e,this.cols,i),r.forEach((s,o)=>{const a=e.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return n.\u0275fac=function(e){return new(e||n)(re(_t),re(Jo,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-grid-list"]],contentQueries:function(e,r,i){if(1&e&&Mn(i,Hw,5),2&e){let s;wt(s=At())&&(r._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,r){2&e&&mt("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[St([{provide:Vw,useExisting:n}])],ngContentSelectors:Uw,decls:2,vars:0,template:function(e,r){1&e&&(ai(),me(0,"div"),Qt(1),_e())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),pW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[qT,Mt],qT,Mt]}),n})();const gW=["*",[["mat-card-footer"]]],mW=["*","mat-card-footer"],vW=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],yW=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let _W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Oe({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),EW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Oe({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),bW=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(re(fi,8))},n.\u0275cmp=Ft({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,r){2&e&&fn("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:mW,decls:2,vars:0,template:function(e,r){1&e&&(ai(gW),Qt(0),Qt(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),DW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ft({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:yW,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,r){1&e&&(ai(vW),Qt(0),me(1,"div",0),Qt(2,1),_e(),Qt(3,2))},encapsulation:2,changeDetection:0}),n})(),CW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt],Mt]}),n})(),TW=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=ln(e)}get inset(){return this._inset}set inset(e){this._inset=ln(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ft({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,r){2&e&&(mt("aria-orientation",r.vertical?"vertical":"horizontal"),fn("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),SW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[Mt],Mt]}),n})();const Gw=["box"],wW=function(){return[5,10]};function AW(n,t){if(1&n){const e=oi();me(0,"mat-paginator",4),pt("page",function(i){return Hr(e),at().changesPaginator(i)}),_e()}if(2&n){const e=at();Ae("length",e.courses.length)("pageSize",e.pageSize)("pageSizeOptions",function dE(n,t,e){const r=On()+n,i=pe();return i[r]===je?si(i,r,e?t.call(e):t()):function Ua(n,t){return n[t]}(i,r)}(3,wW))}}const MW=function(n){return["/course",n]};function xW(n,t){if(1&n&&(me(0,"mat-grid-tile")(1,"mat-card",8)(2,"mat-card-header")(3,"mat-card-title",9)(4,"p",10)(5,"a",11),We(6,"Open Course"),_e()(),me(7,"div",12)(8,"p",13),We(9),_e(),me(10,"button",14),Dt(11,"img",15),_e()()()(),Dt(12,"mat-divider"),me(13,"mat-card-content",16)(14,"video",17),Dt(15,"source",18),We(16," Your browser does not support the video tag. "),_e()(),me(17,"div",19)(18,"div",20)(19,"p",21),We(20,"Rating: "),me(21,"i"),We(22),_e()(),me(23,"p",22),We(24,"Number of lessons: "),me(25,"i"),We(26),_e()()(),Dt(27,"mat-divider"),me(28,"div",23)(29,"p"),We(30,"Skills:"),_e(),me(31,"p"),We(32),_e()()()()()),2&n){const e=t.$implicit;Ce(5),Ae("routerLink",function fE(n,t,e,r){return hE(pe(),On(),n,t,e,r)}(8,MW,e.id)),Ce(4),Tr(e.title),Ce(1),Ae("matTooltip",e.description),Ce(4),Ae("poster",e.previewImageLink+"/cover.webp",Cs),Ce(1),Ae("src",null==e||null==e.meta||null==e.meta.courseVideoPreview?null:e.meta.courseVideoPreview.link,Cs),Ce(7),kn(" ",e.rating,""),Ce(4),Tr(e.lessonsCount),Ce(6),kn(" ",e.meta.skills,"")}}function IW(n,t){if(1&n){const e=oi();me(0,"div",5)(1,"mat-grid-list",6),pt("resize",function(i){return Hr(e),at().onResize(i.target)},!1,vy),Ye(2,xW,33,10,"mat-grid-tile",7),_e()()}if(2&n){const e=at();Ce(1),Ae("cols",e.columns)("gutterSize","10px")("rowHeight",e.rowHeight),Ce(1),Ae("ngForOf",e.coursesView)}}function RW(n,t){1&n&&(me(0,"div",24),Dt(1,"mat-spinner",25),_e())}function OW(n,t){1&n&&(me(0,"div")(1,"div",26),We(2,"Try to reload page "),me(3,"mat-icon"),We(4,"sync"),_e()()())}let Kw=(()=>{class n{constructor(e,r){this.service=e,this._snackBar=r,this.courses=[],this.coursesView=[],this.pageSize=5,this.isHideCourses=!0,this.columns=2,this.rowHeight="400px",this.count=0}set boxResizeTriggerInit(e){if(e){let r=document.getElementById("box");this.onBoxResize(),null==r||r.addEventListener("onresize",this.onBoxResize)}}ngOnInit(){this.service.getCourses().subscribe(e=>{this.courses=e.courses,this.coursesView=[...this.courses].slice(0,this.pageSize),this.isHideCourses=!1,this.onResize(window)},()=>{this.isHideCourses=!1,this.openSnackBar("Something went wrong")})}ngAfterViewChecked(){0!==document.querySelectorAll("video").length&&0===this.count&&(this.count++,document.querySelectorAll("video").forEach(e=>{const i=new(Qj())({});i.loadSource("https://wisey.app/videos/lack-of-motivation-how-to-overcome-it/preview/AppleHLS1/preview.m3u8"),i.attachMedia(e)}))}changesPaginator(e){console.log(e),this.coursesView=[...this.courses].slice(0===e.pageIndex?0:e.pageSize*e.pageIndex,0===e.pageIndex?e.pageSize:e.pageSize*(e.pageIndex+1))}onBoxResize(){if(this.box){let e=Math.floor(this.box.nativeElement.clientWidth/100);this.columns=e>0?e:1}else this.columns=1}openSnackBar(e,r=!0){this._snackBar.open(e,"Close",{duration:6e3,panelClass:r?"alert":"success"})}onResize(e){const r=e.innerWidth;!r||(r>=1e3?(this.columns=2,this.rowHeight="400px"):r>770?this.columns=2:r<=770&&(this.columns=1))}}return n.\u0275fac=function(e){return new(e||n)(re(oT),re(pS))},n.\u0275cmp=Ft({type:n,selectors:[["app-courses"]],viewQuery:function(e,r){if(1&e&&(Sr(Gw,5),Sr(Gw,5)),2&e){let i;wt(i=At())&&(r.box=i.first),wt(i=At())&&(r.boxResizeTriggerInit=i.first)}},decls:4,vars:4,consts:[["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["class","box",4,"ngIf"],["class","blur",4,"ngIf"],[4,"ngIf"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],[1,"box"],["width","100%",3,"cols","gutterSize","rowHeight","resize"],[4,"ngFor","ngForOf"],[1,"card"],[1,"card__header"],[1,"open-btn"],[3,"routerLink"],[1,"card__header--info"],[1,"card__header--title"],["mat-button","","matTooltipPosition","above","aria-label","Button that displays a tooltip in various positions",1,"card__header--btn",3,"matTooltip"],["src","../../assets/lamp.png","alt","hint",1,"hint"],[1,"card__content"],["controls","","autoplay","","muted","",3,"poster"],["type","application/x-www-form-urlencoded",3,"src"],[1,"card__footer"],[1,"card__footer--item"],[1,"rating"],[1,"lessosns"],[1,"skills"],[1,"blur"],["color","",1,"spinner"],[1,"reload"]],template:function(e,r){1&e&&(Ye(0,AW,1,4,"mat-paginator",0),Ye(1,IW,3,4,"div",1),Ye(2,RW,2,0,"div",2),Ye(3,OW,5,0,"div",3)),2&e&&(Ae("ngIf",!r.isHideCourses&&r.courses.length),Ce(1),Ae("ngIf",!r.isHideCourses&&r.courses.length),Ce(1),Ae("ngIf",r.isHideCourses),Ce(1),Ae("ngIf",!r.courses.length&&!r.isHideCourses))},directives:[Rs,rW,hW,tc,Hw,bW,DW,EW,Wc,od,im,TW,_W,gi,bS],styles:[".box[_ngcontent-%COMP%]{margin:auto;margin-top:5rem;max-width:1010px}.open-btn[_ngcontent-%COMP%]{font-size:13px;display:flex;justify-content:flex-end;margin:10px 10px 0 0}.open-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.open-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#aeadad}.open-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card[_ngcontent-%COMP%]{height:100%;margin-bottom:15px;width:500px}.card__header[_ngcontent-%COMP%]{width:100%;margin:0 0 10px!important;height:45px;padding:0}.card__header--info[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between}.card__header--title[_ngcontent-%COMP%]{font-size:14px}.card__header--btn[_ngcontent-%COMP%]{min-width:20px;width:30px;display:flex;justify-content:center}.card__content[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:170px;margin:0}.card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{width:20px}.card__footer[_ngcontent-%COMP%]{padding:5px 10px}.card__footer--item[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.card__footer[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{margin-top:5px}  snack-bar-container.alert{background:#ff8080}  .mat-progress-spinner circle,   .mat-spinner circle{stroke:#3e2dbb!important;opacity:1}  .mat-card-header-text{margin:0!important;width:100%;padding:0}  .mat-card-content{margin-bottom:0!important;margin-top:15px}  .mat-paginator{background:#afafaf8f;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:fixed;z-index:1;top:36px;right:0;width:100%;color:#111}  .mat-paginator-container{min-height:40px}  .mat-typography p{margin:0}  .mat-select-value{color:#111}  .mat-grid-tile{border-radius:10px}"]}),n})();const PW=[{path:"",component:Kw},{path:"courses",component:Kw},{path:"course/:id",component:Yj}];let LW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[[rT.forRoot(PW)],rT]}),n})(),kW=(()=>{class n{constructor(e){this.http=e,this.URL="https://api.wisey.app/api/v1"}getToken(){return this.http.get(`${this.URL}/auth/anonymous`,{params:{platform:"subscriptions"}})}}return n.\u0275fac=function(e){return new(e||n)(ae(al))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FW=(()=>{class n{constructor(){this.isShowMenu=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ft({type:n,selectors:[["app-header"]],decls:3,vars:0,consts:[[1,"header"],[1,"header__title"]],template:function(e,r){1&e&&(me(0,"div",0)(1,"div",1),We(2," Genesis Test "),_e()())},styles:[".header[_ngcontent-%COMP%]{height:30px;padding:3px 0;display:flex;flex-direction:row;align-items:center;background:#000047;background:linear-gradient(309deg,#000047 11%,#4d4de3 38%,#4449d8 59%,#08037b 89%)}.header__title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;align-self:center;display:flex;justify-content:center;width:100%}"]}),n})(),NW=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ft({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"footer"],[1,"info"],[1,"links"],["href","https://github.com/DanaDovzhhttps://github.com/DanaDovzh/genesis-test"]],template:function(e,r){1&e&&(me(0,"div",0)(1,"div",1),We(2,"Genesis, Front-End School 2.0, 2023"),_e(),me(3,"div",2)(4,"a",3),We(5,"GitHub"),_e()()())},styles:[".footer[_ngcontent-%COMP%]{padding:5px;background:linear-gradient(309deg,#000047 49%,#060a7c 74%,#0019ff 95%);display:flex;align-items:center;justify-content:space-between;color:#fff}"]}),n})(),BW=(()=>{class n{constructor(e){this.service=e,this.title="genesis-test"}ngOnInit(){this.service.getToken().subscribe(e=>localStorage.setItem("token",e.token))}}return n.\u0275fac=function(e){return new(e||n)(re(kW))},n.\u0275cmp=Ft({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"content"]],template:function(e,r){1&e&&(me(0,"div",0),Dt(1,"app-header"),me(2,"div",1),Dt(3,"router-outlet"),_e(),Dt(4,"app-footer"),_e())},directives:[FW,Tg,NW],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{flex-shrink:1;flex-grow:1;position:relative;overflow-y:auto}app-footer[_ngcontent-%COMP%]{position:relative;bottom:0;flex-shrink:0;flex-grow:0;background:#eee}"]}),n})(),UW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n}),n.\u0275inj=tt({imports:[pW,iW,CW,Hj,SS,tm,fS,SW,Cj]}),n})(),VW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ot({type:n,bootstrap:[BW]}),n.\u0275inj=tt({providers:[],imports:[[$b,k1,LW,FB,UW]]}),n})();(function JL(){rb=!1})(),c1().bootstrapModule(VW).catch(n=>console.error(n))},70:function(la){var Be;"undefined"!=typeof window&&(Be=()=>(()=>{var Js={"./src/config.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{enableStreamingMode:()=>d,hlsDefaultConfig:()=>E,mergeConfig:()=>c});var z=O("./src/controller/abr-controller.ts"),B=O("./src/controller/audio-stream-controller.ts"),W=O("./src/controller/audio-track-controller.ts"),V=O("./src/controller/subtitle-stream-controller.ts"),Y=O("./src/controller/subtitle-track-controller.ts"),U=O("./src/controller/buffer-controller.ts"),F=O("./src/controller/timeline-controller.ts"),L=O("./src/controller/cap-level-controller.ts"),R=O("./src/controller/fps-controller.ts"),P=O("./src/controller/eme-controller.ts"),D=O("./src/controller/cmcd-controller.ts"),x=O("./src/utils/xhr-loader.ts"),w=O("./src/utils/fetch-loader.ts"),y=O("./src/utils/cues.ts"),g=O("./src/utils/mediakeys-helper.ts"),m=O("./src/utils/logger.ts");function h(){return h=Object.assign?Object.assign.bind():function(u){for(var p=1;p<arguments.length;p++){var M=arguments[p];for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(u[S]=M[S])}return u},h.apply(this,arguments)}function b(u,p){var M=Object.keys(u);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(u);p&&(S=S.filter(function(k){return Object.getOwnPropertyDescriptor(u,k).enumerable})),M.push.apply(M,S)}return M}function C(u){for(var p=1;p<arguments.length;p++){var M=null!=arguments[p]?arguments[p]:{};p%2?b(Object(M),!0).forEach(function(S){f(u,S,M[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(M)):b(Object(M)).forEach(function(S){Object.defineProperty(u,S,Object.getOwnPropertyDescriptor(M,S))})}return u}function f(u,p,M){return p=function _(u){var p=function A(u,p){if("object"!=typeof u||null===u)return u;var M=u[Symbol.toPrimitive];if(void 0!==M){var S=M.call(u,p||"default");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"==typeof p?p:String(p)}(p),p in u?Object.defineProperty(u,p,{value:M,enumerable:!0,configurable:!0,writable:!0}):u[p]=M,u}var E=C(C({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:x.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:z.default,bufferController:U.default,capLevelController:L.default,fpsController:R.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},function T(){return{cueHandler:y.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:V.SubtitleStreamController,subtitleTrackController:Y.default,timelineController:F.TimelineController,audioStreamController:B.default,audioTrackController:W.default,emeController:P.default,cmcdController:D.default});function c(u,p){if((p.liveSyncDurationCount||p.liveMaxLatencyDurationCount)&&(p.liveSyncDuration||p.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==p.liveMaxLatencyDurationCount&&(void 0===p.liveSyncDurationCount||p.liveMaxLatencyDurationCount<=p.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==p.liveMaxLatencyDuration&&(void 0===p.liveSyncDuration||p.liveMaxLatencyDuration<=p.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return h({},u,p)}function d(u){var p=u.loader;p!==w.default&&p!==x.default?(m.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),u.progressive=!1):(0,w.fetchSupported)()&&(u.loader=w.default,u.progressive=!0,u.enableSoftwareAES=!0,m.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>x});var z=O("./src/polyfills/number.ts"),B=O("./src/utils/ewma-bandwidth-estimator.ts"),W=O("./src/events.ts"),V=O("./src/errors.ts"),Y=O("./src/types/loader.ts"),U=O("./src/utils/logger.ts");function F(w,y){for(var g=0;g<y.length;g++){var m=y[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(w,R(m.key),m)}}function R(w){var y=function P(w,y){if("object"!=typeof w||null===w)return w;var g=w[Symbol.toPrimitive];if(void 0!==g){var m=g.call(w,y||"default");if("object"!=typeof m)return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(w)}(w,"string");return"symbol"==typeof y?y:String(y)}const x=function(){function w(g){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=g;var m=g.config;this.bwEstimator=new B.default(m.abrEwmaSlowVoD,m.abrEwmaFastVoD,m.abrEwmaDefaultEstimate),this.registerListeners()}var y=w.prototype;return y.registerListeners=function(){var m=this.hls;m.on(W.Events.FRAG_LOADING,this.onFragLoading,this),m.on(W.Events.FRAG_LOADED,this.onFragLoaded,this),m.on(W.Events.FRAG_BUFFERED,this.onFragBuffered,this),m.on(W.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.on(W.Events.ERROR,this.onError,this)},y.unregisterListeners=function(){var m=this.hls;m.off(W.Events.FRAG_LOADING,this.onFragLoading,this),m.off(W.Events.FRAG_LOADED,this.onFragLoaded,this),m.off(W.Events.FRAG_BUFFERED,this.onFragBuffered,this),m.off(W.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.off(W.Events.ERROR,this.onError,this)},y.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},y.onFragLoading=function(m,h){var C,b=h.frag;b.type!==Y.PlaylistLevelType.MAIN||this.timer||(this.fragCurrent=b,this.partCurrent=null!=(C=h.part)?C:null,this.timer=self.setInterval(this.onCheck,100))},y.onLevelLoaded=function(m,h){var b=this.hls.config;h.details.live?this.bwEstimator.update(b.abrEwmaSlowLive,b.abrEwmaFastLive):this.bwEstimator.update(b.abrEwmaSlowVoD,b.abrEwmaFastVoD)},y._abandonRulesCheck=function(){var m=this.fragCurrent,h=this.partCurrent,b=this.hls,C=b.autoLevelEnabled,f=b.media;if(m&&f){var _=h?h.stats:m.stats,A=h?h.duration:m.duration;if(_.aborted||_.loaded&&_.loaded===_.total||0===m.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(C&&!f.paused&&f.playbackRate&&f.readyState){var E=b.mainForwardBufferInfo;if(null!==E){var T=performance.now()-_.loading.start,c=Math.abs(f.playbackRate);if(!(T<=500*A/c)){var d=_.loaded&&_.loading.first,u=this.bwEstimator.getEstimate(),p=b.levels,M=b.minAutoLevel,k=_.total||Math.max(_.loaded,Math.round(A*p[m.level].maxBitrate/8)),j=d?1e3*_.loaded/T:0,N=j?(k-_.loaded)/j:8*k/u,G=E.len/c;if(!(N<=G)){var $,K=Number.POSITIVE_INFINITY;for($=m.level-1;$>M;$--){var Z=p[$].maxBitrate;if((K=j?A*Z/(6.4*j):A*Z/u)<G)break}K>=N||(U.logger.warn("Fragment "+m.sn+(h?" part "+h.index:"")+" of level "+m.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+$+"\n      Current BW estimate: "+((0,z.isFiniteNumber)(u)?(u/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+N.toFixed(3)+" s\n      Estimated load time for the next fragment: "+K.toFixed(3)+" s\n      Time to underbuffer: "+G.toFixed(3)+" s"),b.nextLoadLevel=$,d&&this.bwEstimator.sample(T,_.loaded),this.clearTimer(),(m.loader||m.keyLoader)&&(this.fragCurrent=this.partCurrent=null,m.abortRequests()),b.trigger(W.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:m,part:h,stats:_}))}}}}}},y.onFragLoaded=function(m,h){var b=h.frag,C=h.part;if(b.type===Y.PlaylistLevelType.MAIN&&(0,z.isFiniteNumber)(b.sn)){var f=C?C.stats:b.stats,_=C?C.duration:b.duration;if(this.clearTimer(),this.lastLoadedFragLevel=b.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var A=this.hls.levels[b.level],E=(A.loaded?A.loaded.bytes:0)+f.loaded,T=(A.loaded?A.loaded.duration:0)+_;A.loaded={bytes:E,duration:T},A.realBitrate=Math.round(8*E/T)}b.bitrateTest&&this.onFragBuffered(W.Events.FRAG_BUFFERED,{stats:f,frag:b,part:C,id:b.type})}},y.onFragBuffered=function(m,h){var b=h.frag,C=h.part,f=C?C.stats:b.stats;if(!f.aborted&&b.type===Y.PlaylistLevelType.MAIN&&"initSegment"!==b.sn){var _=f.parsing.end-f.loading.start;this.bwEstimator.sample(_,f.loaded),f.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=b.bitrateTest?_/1e3:0}},y.onError=function(m,h){var b;if((null===(b=h.frag)||void 0===b?void 0:b.type)===Y.PlaylistLevelType.MAIN){if(h.type===V.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(h.details){case V.ErrorDetails.FRAG_LOAD_ERROR:case V.ErrorDetails.FRAG_LOAD_TIMEOUT:case V.ErrorDetails.KEY_LOAD_ERROR:case V.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},y.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},y.getNextABRAutoLevel=function(){var m=this.fragCurrent,h=this.partCurrent,b=this.hls,C=b.maxAutoLevel,f=b.config,_=b.minAutoLevel,A=b.media,E=h?h.duration:m?m.duration:0,T=A&&0!==A.playbackRate?Math.abs(A.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():f.abrEwmaDefaultEstimate,d=b.mainForwardBufferInfo,u=(d?d.len:0)/T,p=this.findBestLevel(c,_,C,u,f.abrBandWidthFactor,f.abrBandWidthUpFactor);if(p>=0)return p;U.logger.trace((u?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var M=E?Math.min(E,f.maxStarvationDelay):f.maxStarvationDelay,S=f.abrBandWidthFactor,k=f.abrBandWidthUpFactor;if(!u){var j=this.bitrateTestDelay;j&&(M=(E?Math.min(E,f.maxLoadingDelay):f.maxLoadingDelay)-j,U.logger.trace("bitrate test took "+Math.round(1e3*j)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*M)+" ms"),S=k=1)}return p=this.findBestLevel(c,_,C,u+M,S,k),Math.max(p,0)},y.findBestLevel=function(m,h,b,C,f,_){for(var A,E=this.fragCurrent,T=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,u=d[c],p=!(null==u||null===(A=u.details)||void 0===A||!A.live),M=null==u?void 0:u.codecSet,S=T?T.duration:E?E.duration:0,k=b;k>=h;k--){var j=d[k];if(j&&(!M||j.codecSet===M)){var K,N=j.details,G=(T?null==N?void 0:N.partTarget:null==N?void 0:N.averagetargetduration)||S,$=d[k].maxBitrate,Z=$*G/(K=k<=c?f*m:_*m);if(U.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+k+"/"+Math.round(K)+"/"+$+"/"+G+"/"+C+"/"+Z),K>$&&(0===Z||!(0,z.isFiniteNumber)(Z)||p&&!this.bitrateTestDelay||Z<C))return k}}return-1},function L(w,y,g){y&&F(w.prototype,y),g&&F(w,g),Object.defineProperty(w,"prototype",{writable:!1})}(w,[{key:"nextAutoLevel",get:function(){var m=this._nextAutoLevel;if(-1!==m&&!this.bwEstimator.canEstimate())return m;var b=this.getNextABRAutoLevel();return-1!==m&&this.hls.levels[b].loadError?m:(-1!==m&&(b=Math.min(m,b)),b)},set:function(m){this._nextAutoLevel=m}}]),w}()},"./src/controller/audio-stream-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>f});var z=O("./src/polyfills/number.ts"),B=O("./src/controller/base-stream-controller.ts"),W=O("./src/events.ts"),V=O("./src/utils/buffer-helper.ts"),Y=O("./src/controller/fragment-tracker.ts"),U=O("./src/types/level.ts"),F=O("./src/types/loader.ts"),L=O("./src/loader/fragment.ts"),R=O("./src/demux/chunk-cache.ts"),P=O("./src/demux/transmuxer-interface.ts"),D=O("./src/types/transmuxer.ts"),x=O("./src/controller/fragment-finders.ts"),w=O("./src/utils/discontinuities.ts"),y=O("./src/errors.ts");function g(){return g=Object.assign?Object.assign.bind():function(_){for(var A=1;A<arguments.length;A++){var E=arguments[A];for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(_[T]=E[T])}return _},g.apply(this,arguments)}function h(_,A){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,c){return T.__proto__=c,T})(_,A)}const f=function(_){function A(T,c,d){var u;return(u=_.call(this,T,c,d,"[audio-stream-controller]")||this).videoBuffer=null,u.videoTrackCC=-1,u.waitingVideoCC=-1,u.audioSwitch=!1,u.trackId=-1,u.waitingData=null,u.mainDetails=null,u.bufferFlushed=!1,u.cachedTrackLoadedData=null,u._registerListeners(),u}!function m(_,A){_.prototype=Object.create(A.prototype),_.prototype.constructor=_,h(_,A)}(A,_);var E=A.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var c=this.hls;c.on(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.on(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(W.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(W.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),c.on(W.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.on(W.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),c.on(W.Events.ERROR,this.onError,this),c.on(W.Events.BUFFER_RESET,this.onBufferReset,this),c.on(W.Events.BUFFER_CREATED,this.onBufferCreated,this),c.on(W.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.on(W.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.on(W.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var c=this.hls;c.off(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.off(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(W.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(W.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),c.off(W.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.off(W.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),c.off(W.Events.ERROR,this.onError,this),c.off(W.Events.BUFFER_RESET,this.onBufferReset,this),c.off(W.Events.BUFFER_CREATED,this.onBufferCreated,this),c.off(W.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.off(W.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.off(W.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(c,d){var u=d.frag,M=d.initPTS;if("main"===d.id){var S=u.cc;this.initPTS[u.cc]=M,this.log("InitPTS for cc: "+S+" found from main: "+M),this.videoTrackCC=S,this.state===B.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(c){if(!this.levels)return this.startPosition=c,void(this.state=B.State.STOPPED);var d=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,d>0&&-1===c?(this.log("Override startPosition with lastCurrentTime @"+d.toFixed(3)),c=d,this.state=B.State.IDLE):(this.loadedmetadata=!1,this.state=B.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=c,this.tick()},E.doTick=function(){switch(this.state){case B.State.IDLE:this.doTickIdle();break;case B.State.WAITING_TRACK:var c,d=this.levels,p=null==d||null===(c=d[this.trackId])||void 0===c?void 0:c.details;if(p){if(this.waitForCdnTuneIn(p))break;this.state=B.State.WAITING_INIT_PTS}break;case B.State.FRAG_LOADING_WAITING_RETRY:var M,S=performance.now(),k=this.retryDate;(!k||S>=k||null!==(M=this.media)&&void 0!==M&&M.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=B.State.IDLE);break;case B.State.WAITING_INIT_PTS:var j=this.waitingData;if(j){var N=j.frag,G=j.part,K=j.cache,$=j.complete;if(void 0!==this.initPTS[N.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=B.State.FRAG_LOADING;var te={frag:N,part:G,payload:K.flush(),networkDetails:null};this._handleFragmentLoadProgress(te),$&&_.prototype._handleFragmentLoadComplete.call(this,te)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+N.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var q=this.getLoadPosition(),ne=V.BufferHelper.bufferInfo(this.mediaBuffer,q,this.config.maxBufferHole);(0,x.fragmentWithinToleranceTest)(ne.end,this.config.maxFragLookUpTolerance,N)<0&&(this.log("Waiting fragment cc ("+N.cc+") @ "+N.start+" cancelled because another fragment at "+ne.end+" is needed"),this.clearWaitingFragment())}}else this.state=B.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var c=this.waitingData;c&&(this.fragmentTracker.removeFragment(c.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=B.State.IDLE)},E.resetLoadingState=function(){this.clearWaitingFragment(),_.prototype.resetLoadingState.call(this)},E.onTickEnd=function(){var c=this.media;!c||!c.readyState||(this.lastCurrentTime=c.currentTime)},E.doTickIdle=function(){var c=this.hls,d=this.levels,u=this.media,p=this.trackId;if(d&&d[p]&&(u||!this.startFragRequested&&c.config.startFragPrefetch)){var k=d[p].details;if(!k||k.live&&this.levelLastLoaded!==p||this.waitForCdnTuneIn(k))return void(this.state=B.State.WAITING_TRACK);var j=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&j&&(this.bufferFlushed=!1,this.afterBufferFlushed(j,L.ElementaryStreamTypes.AUDIO,F.PlaylistLevelType.AUDIO));var N=this.getFwdBufferInfo(j,F.PlaylistLevelType.AUDIO);if(null!==N){var G=this.audioSwitch;if(!G&&this._streamEnded(N,k))return c.trigger(W.Events.BUFFER_EOS,{type:"audio"}),void(this.state=B.State.ENDED);var K=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,F.PlaylistLevelType.MAIN);if(!(N.len>=this.getMaxBufferLength(null==K?void 0:K.len))||G){var q=k.fragments[0].start,ne=N.end;if(G&&u){var se=this.getLoadPosition();ne=se,k.PTSKnown&&se<q&&(N.end>q||N.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),u.currentTime=q+.05)}if(!(K&&ne>K.end+k.targetduration)&&(K&&K.len||!N.len)){var ue=this.getNextFragment(ne,k);if(!ue)return void(this.bufferFlushed=!0);this.loadFragment(ue,k,ne)}}}}},E.getMaxBufferLength=function(c){var d=_.prototype.getMaxBufferLength.call(this);return c?Math.max(d,c):d},E.onMediaDetaching=function(){this.videoBuffer=null,_.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(c,d){var u=d.audioTracks;this.resetTransmuxer(),this.levels=u.map(function(p){return new U.Level(p)})},E.onAudioTrackSwitching=function(c,d){var u=!!d.url;this.trackId=d.id;var p=this.fragCurrent;p&&p.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),u?this.setInterval(100):this.resetTransmuxer(),u?(this.audioSwitch=!0,this.state=B.State.IDLE):this.state=B.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(c,d){this.mainDetails=d.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(W.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},E.onAudioTrackLoaded=function(c,d){var u;if(null!=this.mainDetails){var p=this.levels,M=d.details,S=d.id;if(p){this.log("Track "+S+" loaded ["+M.startSN+","+M.endSN+"],duration:"+M.totalduration);var k=p[S],j=0;if(M.live||null!==(u=k.details)&&void 0!==u&&u.live){var N=this.mainDetails;if(M.fragments[0]||(M.deltaUpdateFailed=!0),M.deltaUpdateFailed||!N)return;!k.details&&M.hasProgramDateTime&&N.hasProgramDateTime?((0,w.alignMediaPlaylistByPDT)(M,N),j=M.fragments[0].start):j=this.alignPlaylists(M,k.details)}k.details=M,this.levelLastLoaded=S,!this.startFragRequested&&(this.mainDetails||!M.live)&&this.setStartPosition(k.details,j),this.state===B.State.WAITING_TRACK&&!this.waitForCdnTuneIn(M)&&(this.state=B.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+S)}else this.cachedTrackLoadedData=d},E._handleFragmentLoadProgress=function(c){var d,u=c.frag,p=c.part,M=c.payload,S=this.config,k=this.trackId,j=this.levels;if(j){var N=j[k];console.assert(N,"Audio track is defined on fragment load progress");var G=N.details;console.assert(G,"Audio track details are defined on fragment load progress");var K=S.defaultAudioCodec||N.audioCodec||"mp4a.40.2",$=this.transmuxer;$||($=this.transmuxer=new P.default(this.hls,F.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Z=this.initPTS[u.cc],te=null===(d=u.initSegment)||void 0===d?void 0:d.data;if(void 0!==Z){var ne=p?p.index:-1,ue=new D.ChunkMetadata(u.level,u.sn,u.stats.chunkCount,M.byteLength,ne,-1!==ne);$.push(M,te,K,"",u,p,G.totalduration,!1,ue,Z)}else this.log("Unknown video PTS for cc "+u.cc+", waiting for video PTS before demuxing audio frag "+u.sn+" of ["+G.startSN+" ,"+G.endSN+"],track "+k),(this.waitingData=this.waitingData||{frag:u,part:p,cache:new R.default,complete:!1}).cache.push(new Uint8Array(M)),this.waitingVideoCC=this.videoTrackCC,this.state=B.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+u.sn+" of level "+u.level+" will not be buffered")},E._handleFragmentLoadComplete=function(c){this.waitingData?this.waitingData.complete=!0:_.prototype._handleFragmentLoadComplete.call(this,c)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(c,d){var u=d.tracks.audio;u&&(this.mediaBuffer=u.buffer||null),d.tracks.video&&(this.videoBuffer=d.tracks.video.buffer||null)},E.onFragBuffered=function(c,d){var M,u=d.frag,p=d.part;u.type===F.PlaylistLevelType.AUDIO?this.fragContextChanged(u)?this.warn("Fragment "+u.sn+(p?" p: "+p.index:"")+" of level "+u.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==u.sn&&(this.fragPrevious=u,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(W.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(u,p)):this.loadedmetadata||u.type!==F.PlaylistLevelType.MAIN||null!==(M=this.videoBuffer||this.media)&&void 0!==M&&M.buffered.length&&(this.loadedmetadata=!0)},E.onError=function(c,d){if(d.type!==y.ErrorTypes.KEY_SYSTEM_ERROR)switch(d.details){case y.ErrorDetails.FRAG_LOAD_ERROR:case y.ErrorDetails.FRAG_LOAD_TIMEOUT:case y.ErrorDetails.FRAG_PARSING_ERROR:case y.ErrorDetails.KEY_LOAD_ERROR:case y.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(F.PlaylistLevelType.AUDIO,d);break;case y.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case y.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==B.State.ERROR&&this.state!==B.State.STOPPED&&(this.state=d.fatal?B.State.ERROR:B.State.IDLE,this.warn(d.details+" while loading frag, switching to "+this.state+" state"));break;case y.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===d.parent&&(this.state===B.State.PARSING||this.state===B.State.PARSED)){var u=!0,p=this.getFwdBufferInfo(this.mediaBuffer,F.PlaylistLevelType.AUDIO);p&&p.len>.5&&(u=!this.reduceMaxBufferLength(p.len)),u&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,_.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(F.PlaylistLevelType.AUDIO,d)},E.onBufferFlushed=function(c,d){d.type===L.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===B.State.ENDED&&(this.state=B.State.IDLE))},E._handleTransmuxComplete=function(c){var d,u="audio",p=this.hls,M=c.remuxResult,S=c.chunkMeta,k=this.getCurrentContext(S);if(!k)return this.warn("The loading context changed while buffering fragment "+S.sn+" of level "+S.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(S.level);var j=k.frag,N=k.part,G=k.level.details,K=M.audio,$=M.text,Z=M.id3,te=M.initSegment;if(!this.fragContextChanged(j)&&G){if(this.state=B.State.PARSING,this.audioSwitch&&K&&this.completeAudioSwitch(),null!=te&&te.tracks&&(this._bufferInitSegment(te.tracks,j,S),p.trigger(W.Events.FRAG_PARSING_INIT_SEGMENT,{frag:j,id:u,tracks:te.tracks})),K){var q=K.startPTS,ne=K.endPTS,se=K.startDTS,ue=K.endDTS;N&&(N.elementaryStreams[L.ElementaryStreamTypes.AUDIO]={startPTS:q,endPTS:ne,startDTS:se,endDTS:ue}),j.setElementaryStreamInfo(L.ElementaryStreamTypes.AUDIO,q,ne,se,ue),this.bufferFragmentData(K,j,N,S)}if(null!=Z&&null!==(d=Z.samples)&&void 0!==d&&d.length){var ce=g({id:u,frag:j,details:G},Z);p.trigger(W.Events.FRAG_PARSING_METADATA,ce)}if($){var fe=g({id:u,frag:j,details:G},$);p.trigger(W.Events.FRAG_PARSING_USERDATA,fe)}}},E._bufferInitSegment=function(c,d,u){if(this.state===B.State.PARSING){c.video&&delete c.video;var p=c.audio;if(p){p.levelCodec=p.codec,p.id="audio",this.log("Init audio buffer, container:"+p.container+", codecs[parsed]=["+p.codec+"]"),this.hls.trigger(W.Events.BUFFER_CODECS,c);var M=p.initSegment;null!=M&&M.byteLength&&this.hls.trigger(W.Events.BUFFER_APPENDING,{type:"audio",frag:d,part:null,chunkMeta:u,parent:d.type,data:M}),this.tick()}}},E.loadFragment=function(c,d,u){var p=this.fragmentTracker.getState(c);this.fragCurrent=c,(this.audioSwitch||p===Y.FragmentState.NOT_LOADED||p===Y.FragmentState.PARTIAL)&&("initSegment"===c.sn?this._loadInitSegment(c,d):d.live&&!(0,z.isFiniteNumber)(this.initPTS[c.cc])?(this.log("Waiting for video PTS in continuity counter "+c.cc+" of live stream before loading audio fragment "+c.sn+" of level "+this.trackId),this.state=B.State.WAITING_INIT_PTS):(this.startFragRequested=!0,_.prototype.loadFragment.call(this,c,d,u)))},E.completeAudioSwitch=function(){var c=this.hls,u=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),_.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,c.trigger(W.Events.AUDIO_TRACK_SWITCHED,{id:u})},A}(B.default)},"./src/controller/audio-track-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>x});var z=O("./src/events.ts"),B=O("./src/errors.ts"),W=O("./src/controller/base-playlist-controller.ts"),V=O("./src/types/loader.ts");function Y(w,y){for(var g=0;g<y.length;g++){var m=y[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(w,F(m.key),m)}}function F(w){var y=function L(w,y){if("object"!=typeof w||null===w)return w;var g=w[Symbol.toPrimitive];if(void 0!==g){var m=g.call(w,y||"default");if("object"!=typeof m)return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(w)}(w,"string");return"symbol"==typeof y?y:String(y)}function P(w,y){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,h){return m.__proto__=h,m})(w,y)}const x=function(w){function y(m){var h;return(h=w.call(this,m,"[audio-track-controller]")||this).tracks=[],h.groupId=null,h.tracksInGroup=[],h.trackId=-1,h.trackName="",h.selectDefaultTrack=!0,h.registerListeners(),h}!function R(w,y){w.prototype=Object.create(y.prototype),w.prototype.constructor=w,P(w,y)}(y,w);var g=y.prototype;return g.registerListeners=function(){var h=this.hls;h.on(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.on(z.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.on(z.Events.LEVEL_LOADING,this.onLevelLoading,this),h.on(z.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),h.on(z.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),h.on(z.Events.ERROR,this.onError,this)},g.unregisterListeners=function(){var h=this.hls;h.off(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.off(z.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.off(z.Events.LEVEL_LOADING,this.onLevelLoading,this),h.off(z.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),h.off(z.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),h.off(z.Events.ERROR,this.onError,this)},g.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,w.prototype.destroy.call(this)},g.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},g.onManifestParsed=function(h,b){this.tracks=b.audioTracks||[]},g.onAudioTrackLoaded=function(h,b){var C=b.id,f=b.details,_=this.tracksInGroup[C];if(_){var A=_.details;_.details=b.details,this.log("audioTrack "+C+" loaded ["+f.startSN+"-"+f.endSN+"]"),C===this.trackId&&(this.retryCount=0,this.playlistLoaded(C,b,A))}else this.warn("Invalid audio track id "+C)},g.onLevelLoading=function(h,b){this.switchLevel(b.level)},g.onLevelSwitching=function(h,b){this.switchLevel(b.level)},g.switchLevel=function(h){var b=this.hls.levels[h];if(null!=b&&b.audioGroupIds){var C=b.audioGroupIds[b.urlId];if(this.groupId!==C){this.groupId=C;var f=this.tracks.filter(function(A){return!C||A.groupId===C});this.selectDefaultTrack&&!f.some(function(A){return A.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=f;var _={audioTracks:f};this.log("Updating audio tracks, "+f.length+' track(s) found in "'+C+'" group-id'),this.hls.trigger(z.Events.AUDIO_TRACKS_UPDATED,_),this.selectInitialTrack()}}},g.onError=function(h,b){w.prototype.onError.call(this,h,b),!b.fatal&&b.context&&b.context.type===V.PlaylistContextType.AUDIO_TRACK&&b.context.id===this.trackId&&b.context.groupId===this.groupId&&this.retryLoadingOrFail(b)},g.setAudioTrack=function(h){var b=this.tracksInGroup;if(h<0||h>=b.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var C=b[this.trackId];this.log("Now switching to audio-track index "+h);var f=b[h],_=f.id,A=f.groupId,E=void 0===A?"":A,T=f.name,c=f.type,d=f.url;if(this.trackId=h,this.trackName=T,this.selectDefaultTrack=!1,this.hls.trigger(z.Events.AUDIO_TRACK_SWITCHING,{id:_,groupId:E,name:T,type:c,url:d}),!f.details||f.details.live){var u=this.switchParams(f.url,null==C?void 0:C.details);this.loadPlaylist(u)}}},g.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var C=this.findTrackId(this.trackName)||this.findTrackId();-1!==C?this.setAudioTrack(C):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},g.findTrackId=function(h){for(var b=this.tracksInGroup,C=0;C<b.length;C++){var f=b[C];if((!this.selectDefaultTrack||f.default)&&(!h||h===f.name))return f.id}return-1},g.loadPlaylist=function(h){w.prototype.loadPlaylist.call(this);var b=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(b)){var C=b.id,f=b.groupId,_=b.url;if(h)try{_=h.addDirectives(_)}catch(A){this.warn("Could not construct new URL with HLS Delivery Directives: "+A)}this.log("loading audio-track playlist for id: "+C),this.clearTimer(),this.hls.trigger(z.Events.AUDIO_TRACK_LOADING,{url:_,id:C,groupId:f,deliveryDirectives:h||null})}},function U(w,y,g){y&&Y(w.prototype,y),g&&Y(w,g),Object.defineProperty(w,"prototype",{writable:!1})}(y,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(h){this.selectDefaultTrack=!1,this.setAudioTrack(h)}}]),y}(W.default)},"./src/controller/base-playlist-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>Y});var z=O("./src/types/level.ts"),B=O("./src/controller/level-helper.ts"),W=O("./src/utils/logger.ts"),V=O("./src/errors.ts"),Y=function(){function U(L,R){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=W.logger.log.bind(W.logger,R+":"),this.warn=W.logger.warn.bind(W.logger,R+":"),this.hls=L}var F=U.prototype;return F.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},F.onError=function(R,P){P.fatal&&(P.type===V.ErrorTypes.NETWORK_ERROR||P.type===V.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},F.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},F.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},F.stopLoad=function(){this.canLoad=!1,this.clearTimer()},F.switchParams=function(R,P){var D=null==P?void 0:P.renditionReports;if(D)for(var x=0;x<D.length;x++){var w=D[x],y=void 0;try{y=new self.URL(w.URI,P.url).href}catch(b){W.logger.warn("Could not construct new URL for Rendition Report: "+b),y=w.URI||""}if(y===R.slice(-y.length)){var g=parseInt(w["LAST-MSN"])||(null==P?void 0:P.lastPartSn),m=parseInt(w["LAST-PART"])||(null==P?void 0:P.lastPartIndex);if(this.hls.config.lowLatencyMode){var h=Math.min(P.age-P.partTarget,P.targetduration);m>=0&&h>P.partTarget&&(m+=1)}return new z.HlsUrlParameters(g,m>=0?m:void 0,z.HlsSkip.No)}}},F.loadPlaylist=function(R){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},F.shouldLoadTrack=function(R){return this.canLoad&&R&&!!R.url&&(!R.details||R.details.live)},F.playlistLoaded=function(R,P,D){var x=this,w=P.details,y=P.stats,g=self.performance.now(),m=y.loading.first?Math.max(0,g-y.loading.first):0;if(w.advancedDateTime=Date.now()-m,w.live||null!=D&&D.live){if(w.reloaded(D),D&&this.log("live playlist "+R+" "+(w.advanced?"REFRESHED "+w.lastPartSn+"-"+w.lastPartIndex:"MISSED")),D&&w.fragments.length>0&&(0,B.mergeDetails)(D,w),!this.canLoad||!w.live)return;var h,b=void 0,C=void 0;if(w.canBlockReload&&w.endSN&&w.advanced){var f=this.hls.config.lowLatencyMode,_=w.lastPartSn,A=w.endSN,E=w.lastPartIndex,c=_===A;-1!==E?(b=c?A+1:_,C=c?f?0:E:E+1):b=A+1;var u=w.age,M=Math.min(u+w.ageHeader-w.partTarget,1.5*w.targetduration);if(M>0){if(D&&M>D.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+D.tuneInGoal+" to: "+M+" with playlist age: "+w.age),M=0;else{var S=Math.floor(M/w.targetduration);b+=S,void 0!==C&&(C+=Math.round(M%w.targetduration/w.partTarget)),this.log("CDN Tune-in age: "+w.ageHeader+"s last advanced "+u.toFixed(2)+"s goal: "+M+" skip sn "+S+" to part "+C)}w.tuneInGoal=M}if(h=this.getDeliveryDirectives(w,P.deliveryDirectives,b,C),f||!c)return void this.loadPlaylist(h)}else h=this.getDeliveryDirectives(w,P.deliveryDirectives,b,C);var j=this.hls.mainForwardBufferInfo,K=(0,B.computeReloadInterval)(w,1e3*(w.edge-(j?j.end-j.len:0)));w.updated?g>this.requestScheduled+K&&(this.requestScheduled=y.loading.start):this.requestScheduled=-1,this.requestScheduled=void 0!==b&&w.canBlockReload?y.loading.first+K-(1e3*w.partTarget||1e3):(-1===this.requestScheduled?g:this.requestScheduled)+K;var $=this.requestScheduled-g;$=Math.max(0,$),this.log("reload live playlist "+R+" in "+Math.round($)+" ms"),this.timer=self.setTimeout(function(){return x.loadPlaylist(h)},$)}else this.clearTimer()},F.getDeliveryDirectives=function(R,P,D,x){var w=(0,z.getSkipValue)(R,D);return null!=P&&P.skip&&R.deltaUpdateFailed&&(D=P.msn,x=P.part,w=z.HlsSkip.No),new z.HlsUrlParameters(D,x,w)},F.retryLoadingOrFail=function(R){var w,P=this,D=this.hls.config,x=this.retryCount<D.levelLoadingMaxRetry;if(x)if(this.requestScheduled=-1,this.retryCount++,R.details.indexOf("LoadTimeOut")>-1&&null!==(w=R.context)&&void 0!==w&&w.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+R.details+'"'),this.loadPlaylist();else{var y=Math.min(Math.pow(2,this.retryCount)*D.levelLoadingRetryDelay,D.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return P.loadPlaylist()},y),this.warn("retry playlist loading #"+this.retryCount+" in "+y+' ms after "'+R.details+'"')}else this.warn('cannot recover from error "'+R.details+'"'),this.clearTimer(),R.fatal=!0;return x},U}()},"./src/controller/base-stream-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{State:()=>T,default:()=>c});var z=O("./src/polyfills/number.ts"),B=O("./src/task-loop.ts"),W=O("./src/controller/fragment-tracker.ts"),V=O("./src/utils/buffer-helper.ts"),Y=O("./src/utils/logger.ts"),U=O("./src/events.ts"),F=O("./src/errors.ts"),L=O("./src/types/transmuxer.ts"),R=O("./src/utils/mp4-tools.ts"),P=O("./src/utils/discontinuities.ts"),D=O("./src/controller/fragment-finders.ts"),x=O("./src/controller/level-helper.ts"),w=O("./src/loader/fragment-loader.ts"),y=O("./src/crypt/decrypter.ts"),g=O("./src/utils/time-ranges.ts"),m=O("./src/types/loader.ts");function h(d,u){for(var p=0;p<u.length;p++){var M=u[p];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(d,C(M.key),M)}}function C(d){var u=function f(d,u){if("object"!=typeof d||null===d)return d;var p=d[Symbol.toPrimitive];if(void 0!==p){var M=p.call(d,u||"default");if("object"!=typeof M)return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(d)}(d,"string");return"symbol"==typeof u?u:String(u)}function E(d,u){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,S){return M.__proto__=S,M})(d,u)}var T={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},c=function(d){function u(M,S,k,j){var N;return(N=d.call(this)||this).hls=void 0,N.fragPrevious=null,N.fragCurrent=null,N.fragmentTracker=void 0,N.transmuxer=null,N._state=T.STOPPED,N.media=null,N.mediaBuffer=null,N.config=void 0,N.bitrateTest=!1,N.lastCurrentTime=0,N.nextLoadPosition=0,N.startPosition=0,N.loadedmetadata=!1,N.fragLoadError=0,N.retryDate=0,N.levels=null,N.fragmentLoader=void 0,N.keyLoader=void 0,N.levelLastLoaded=null,N.startFragRequested=!1,N.decrypter=void 0,N.initPTS=[],N.onvseeking=null,N.onvended=null,N.logPrefix="",N.log=void 0,N.warn=void 0,N.logPrefix=j,N.log=Y.logger.log.bind(Y.logger,j+":"),N.warn=Y.logger.warn.bind(Y.logger,j+":"),N.hls=M,N.fragmentLoader=new w.default(M.config),N.keyLoader=k,N.fragmentTracker=S,N.config=M.config,N.decrypter=new y.default(M.config),M.on(U.Events.LEVEL_SWITCHING,N.onLevelSwitching,function _(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(N)),N}!function A(d,u){d.prototype=Object.create(u.prototype),d.prototype.constructor=d,E(d,u)}(u,d);var p=u.prototype;return p.doTick=function(){this.onTickEnd()},p.onTickEnd=function(){},p.startLoad=function(S){},p.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var S=this.fragCurrent;S&&(S.abortRequests(),this.fragmentTracker.removeFragment(S)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=T.STOPPED},p._streamEnded=function(S,k){if(k.live||S.nextStart||!S.end||!this.media)return!1;var j=k.partList;if(null!=j&&j.length){var N=j[j.length-1];return V.BufferHelper.isBuffered(this.media,N.start+N.duration/2)}return this.fragmentTracker.isEndListAppended(k.fragments[k.fragments.length-1].type)},p.getLevelDetails=function(){var S;if(this.levels&&null!==this.levelLastLoaded)return null===(S=this.levels[this.levelLastLoaded])||void 0===S?void 0:S.details},p.onMediaAttached=function(S,k){var j=this.media=this.mediaBuffer=k.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),j.addEventListener("seeking",this.onvseeking),j.addEventListener("ended",this.onvended);var N=this.config;this.levels&&N.autoStartLoad&&this.state===T.STOPPED&&this.startLoad(N.startPosition)},p.onMediaDetaching=function(){var S=this.media;null!=S&&S.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),S&&this.onvseeking&&this.onvended&&(S.removeEventListener("seeking",this.onvseeking),S.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},p.onMediaSeeking=function(){var S=this.config,k=this.fragCurrent,j=this.media,G=this.state,K=j?j.currentTime:0,$=V.BufferHelper.bufferInfo(this.mediaBuffer||j,K,S.maxBufferHole);if(this.log("media seeking to "+((0,z.isFiniteNumber)(K)?K.toFixed(3):K)+", state: "+G),this.state===T.ENDED)this.resetLoadingState();else if(k){var Z=S.maxFragLookUpTolerance,te=k.start-Z,q=k.start+k.duration+Z;if(!$.len||q<$.start||te>$.end){var ne=K>q;(K<te||ne)&&(ne&&k.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),k.abortRequests()),this.resetLoadingState())}}j&&(this.lastCurrentTime=K),!this.loadedmetadata&&!$.len&&(this.nextLoadPosition=this.startPosition=K),this.tickImmediate()},p.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},p.onLevelSwitching=function(S,k){this.fragLoadError=0},p.onHandlerDestroying=function(){this.stopLoad(),d.prototype.onHandlerDestroying.call(this)},p.onHandlerDestroyed=function(){this.state=T.STOPPED,this.hls.off(U.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,d.prototype.onHandlerDestroyed.call(this)},p.loadFragment=function(S,k,j){this._loadFragForPlayback(S,k,j)},p._loadFragForPlayback=function(S,k,j){var N=this;this._doFragLoad(S,k,j,function($){if(N.fragContextChanged(S))return N.warn("Fragment "+S.sn+($.part?" p: "+$.part.index:"")+" of level "+S.level+" was dropped during download."),void N.fragmentTracker.removeFragment(S);S.stats.chunkCount++,N._handleFragmentLoadProgress($)}).then(function(K){if(K){N.fragLoadError=0;var $=N.state;if(N.fragContextChanged(S))return void(($===T.FRAG_LOADING||!N.fragCurrent&&$===T.PARSING)&&(N.fragmentTracker.removeFragment(S),N.state=T.IDLE));"payload"in K&&(N.log("Loaded fragment "+S.sn+" of level "+S.level),N.hls.trigger(U.Events.FRAG_LOADED,K)),N._handleFragmentLoadComplete(K)}}).catch(function(K){N.state===T.STOPPED||N.state===T.ERROR||(N.warn(K),N.resetFragmentLoading(S))})},p.flushMainBuffer=function(S,k,j){if(void 0===j&&(j=null),S-k){var N={startOffset:S,endOffset:k,type:j};this.fragLoadError=0,this.hls.trigger(U.Events.BUFFER_FLUSHING,N)}},p._loadInitSegment=function(S,k){var j=this;this._doFragLoad(S,k).then(function(N){if(!N||j.fragContextChanged(S)||!j.levels)throw new Error("init load aborted");return N}).then(function(N){var G=j.hls,K=N.payload,$=S.decryptdata;if(K&&K.byteLength>0&&$&&$.key&&$.iv&&"AES-128"===$.method){var Z=self.performance.now();return j.decrypter.decrypt(new Uint8Array(K),$.key.buffer,$.iv.buffer).then(function(te){var q=self.performance.now();return G.trigger(U.Events.FRAG_DECRYPTED,{frag:S,payload:te,stats:{tstart:Z,tdecrypt:q}}),N.payload=te,N})}return N}).then(function(N){var G=j.fragCurrent,K=j.hls,$=j.levels;if(!$)throw new Error("init load aborted, missing levels");console.assert($[S.level].details,"Level details are defined when init segment is loaded");var te=S.stats;j.state=T.IDLE,j.fragLoadError=0,S.data=new Uint8Array(N.payload),te.parsing.start=te.buffering.start=self.performance.now(),te.parsing.end=te.buffering.end=self.performance.now(),N.frag===G&&K.trigger(U.Events.FRAG_BUFFERED,{stats:te,frag:G,part:null,id:S.type}),j.tick()}).catch(function(N){j.state===T.STOPPED||j.state===T.ERROR||(j.warn(N),j.resetFragmentLoading(S))})},p.fragContextChanged=function(S){var k=this.fragCurrent;return!S||!k||S.level!==k.level||S.sn!==k.sn||S.urlId!==k.urlId},p.fragBufferedComplete=function(S,k){var j,N,G,K,$=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+S.type+" sn: "+S.sn+(k?" part: "+k.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+S.level+" (frag:["+(null!=(j=S.startPTS)?j:NaN).toFixed(3)+"-"+(null!=(N=S.endPTS)?N:NaN).toFixed(3)+"] > buffer:"+($?g.default.toString(V.BufferHelper.getBuffered($)):"(detached)")+")"),this.state=T.IDLE,$&&(!this.loadedmetadata&&S.type==m.PlaylistLevelType.MAIN&&$.buffered.length&&(null===(G=this.fragCurrent)||void 0===G?void 0:G.sn)===(null===(K=this.fragPrevious)||void 0===K?void 0:K.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},p.seekToStartPos=function(){},p._handleFragmentLoadComplete=function(S){var k=this.transmuxer;if(k){var j=S.frag,N=S.part,G=S.partsLoaded,K=!G||0===G.length||G.some(function(Z){return!Z}),$=new L.ChunkMetadata(j.level,j.sn,j.stats.chunkCount+1,0,N?N.index:-1,!K);k.flush($)}},p._handleFragmentLoadProgress=function(S){},p._doFragLoad=function(S,k,j,N){var G,K=this;if(void 0===j&&(j=null),!this.levels)throw new Error("frag load aborted, missing levels");var $=null;if(!S.encrypted||null!==(G=S.decryptdata)&&void 0!==G&&G.key?!S.encrypted&&k.encryptedFragments.length&&this.keyLoader.loadClear(S,k.encryptedFragments):(this.log("Loading key for "+S.sn+" of ["+k.startSN+"-"+k.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+S.level),this.state=T.KEY_LOADING,this.fragCurrent=S,$=this.keyLoader.load(S).then(function(se){if(!K.fragContextChanged(se.frag))return K.hls.trigger(U.Events.KEY_LOADED,se),K.state===T.KEY_LOADING&&(K.state=T.IDLE),se}),this.hls.trigger(U.Events.KEY_LOADING,{frag:S}),this.throwIfFragContextChanged("KEY_LOADING")),j=Math.max(S.start,j||0),this.config.lowLatencyMode&&k){var Z=k.partList;if(Z&&N){j>S.end&&k.fragmentHint&&(S=k.fragmentHint);var te=this.getNextPart(Z,S,j);if(te>-1){var q=Z[te];return this.log("Loading part sn: "+S.sn+" p: "+q.index+" cc: "+S.cc+" of playlist ["+k.startSN+"-"+k.endSN+"] parts [0-"+te+"-"+(Z.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+S.level+", target: "+parseFloat(j.toFixed(3))),this.nextLoadPosition=q.start+q.duration,this.state=T.FRAG_LOADING,this.hls.trigger(U.Events.FRAG_LOADING,{frag:S,part:Z[te],targetBufferTime:j}),this.throwIfFragContextChanged("FRAG_LOADING parts"),$?$.then(function(se){return!se||K.fragContextChanged(se.frag)?null:K.doFragPartsLoad(S,Z,te,N)}).catch(function(se){return K.handleFragLoadError(se)}):this.doFragPartsLoad(S,Z,te,N).catch(function(se){return K.handleFragLoadError(se)})}if(!S.url||this.loadedEndOfParts(Z,j))return Promise.resolve(null)}}this.log("Loading fragment "+S.sn+" cc: "+S.cc+" "+(k?"of ["+k.startSN+"-"+k.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+S.level+", target: "+parseFloat(j.toFixed(3))),(0,z.isFiniteNumber)(S.sn)&&!this.bitrateTest&&(this.nextLoadPosition=S.start+S.duration),this.state=T.FRAG_LOADING,this.hls.trigger(U.Events.FRAG_LOADING,{frag:S,targetBufferTime:j}),this.throwIfFragContextChanged("FRAG_LOADING");var ne=this.config.progressive;return ne&&$?$.then(function(se){return!se||K.fragContextChanged(null==se?void 0:se.frag)?null:K.fragmentLoader.load(S,N)}).catch(function(se){return K.handleFragLoadError(se)}):Promise.all([this.fragmentLoader.load(S,ne?N:void 0),$]).then(function(se){var ue=se[0];return!ne&&ue&&N&&N(ue),ue}).catch(function(se){return K.handleFragLoadError(se)})},p.throwIfFragContextChanged=function(S){if(null===this.fragCurrent)throw new Error("frag load aborted, context changed in "+S)},p.doFragPartsLoad=function(S,k,j,N){var G=this;return new Promise(function(K,$){var Z=[];!function q(ne){var se=k[ne];G.fragmentLoader.loadPart(S,se,N).then(function(ue){Z[se.index]=ue;var ce=ue.part;G.hls.trigger(U.Events.FRAG_LOADED,ue);var fe=k[ne+1];if(!fe||fe.fragment!==S)return K({frag:S,part:ce,partsLoaded:Z});q(ne+1)}).catch($)}(j)})},p.handleFragLoadError=function(S){if("data"in S){var k=S.data;S.data&&k.details===F.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(k.frag,k.part):this.hls.trigger(U.Events.ERROR,k)}else this.hls.trigger(U.Events.ERROR,{type:F.ErrorTypes.OTHER_ERROR,details:F.ErrorDetails.INTERNAL_EXCEPTION,err:S,fatal:!0});return null},p._handleTransmuxerFlush=function(S){var k=this.getCurrentContext(S);if(k&&this.state===T.PARSING){var j=k.frag,N=k.part,G=k.level,K=self.performance.now();j.stats.parsing.end=K,N&&(N.stats.parsing.end=K),this.updateLevelTiming(j,N,G,S.partial)}else!this.fragCurrent&&this.state!==T.STOPPED&&this.state!==T.ERROR&&(this.state=T.IDLE)},p.getCurrentContext=function(S){var k=this.levels,j=S.level,N=S.sn,G=S.part;if(!k||!k[j])return this.warn("Levels object was unset while buffering fragment "+N+" of level "+j+". The current chunk will not be buffered."),null;var K=k[j],$=G>-1?(0,x.getPartWith)(K,N,G):null,Z=$?$.fragment:(0,x.getFragmentWithSN)(K,N,this.fragCurrent);return Z?{frag:Z,part:$,level:K}:null},p.bufferFragmentData=function(S,k,j,N){if(S&&this.state===T.PARSING){var G=S.data1,K=S.data2,$=G;G&&K&&($=(0,R.appendUint8Array)(G,K)),$&&$.length&&(this.hls.trigger(U.Events.BUFFER_APPENDING,{type:S.type,frag:k,part:j,chunkMeta:N,parent:k.type,data:$}),S.dropped&&S.independent&&!j&&this.flushBufferGap(k))}},p.flushBufferGap=function(S){var k=this.media;if(k){if(!V.BufferHelper.isBuffered(k,k.currentTime))return void this.flushMainBuffer(0,S.start);var j=k.currentTime,N=V.BufferHelper.bufferInfo(k,j,0),K=Math.min(2*this.config.maxFragLookUpTolerance,.25*S.duration),$=Math.max(Math.min(S.start-K,N.end-K),j+K);S.start-$>K&&this.flushMainBuffer($,S.start)}},p.getFwdBufferInfo=function(S,k){var j=this.config,N=this.getLoadPosition();if(!(0,z.isFiniteNumber)(N))return null;var G=V.BufferHelper.bufferInfo(S,N,j.maxBufferHole);if(0===G.len&&void 0!==G.nextStart){var K=this.fragmentTracker.getBufferedFrag(N,k);if(K&&G.nextStart<K.end)return V.BufferHelper.bufferInfo(S,N,Math.max(G.nextStart,j.maxBufferHole))}return G},p.getMaxBufferLength=function(S){var j,k=this.config;return j=S?Math.max(8*k.maxBufferSize/S,k.maxBufferLength):k.maxBufferLength,Math.min(j,k.maxMaxBufferLength)},p.reduceMaxBufferLength=function(S){var k=this.config;return k.maxMaxBufferLength>=(S||k.maxBufferLength)&&(k.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+k.maxMaxBufferLength+"s"),!0)},p.getNextFragment=function(S,k){var j=k.fragments,N=j.length;if(!N)return null;var $,G=this.config,K=j[0].start;if(k.live){var Z=G.initialLiveManifestSize;if(N<Z)return this.warn("Not enough fragments to start playback (have: "+N+", need: "+Z+")"),null;!k.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&($=this.getInitialLiveFragment(k,j),this.startPosition=$?this.hls.liveSyncPosition||$.start:S)}else S<=K&&($=j[0]);return $||($=this.getFragmentAtPosition(S,G.lowLatencyMode?k.partEnd:k.fragmentEnd,k)),this.mapToInitFragWhenRequired($)},p.mapToInitFragWhenRequired=function(S){return null==S||!S.initSegment||null!=S&&S.initSegment.data||this.bitrateTest?S:S.initSegment},p.getNextPart=function(S,k,j){for(var N=-1,G=!1,K=!0,$=0,Z=S.length;$<Z;$++){var te=S[$];if(K=K&&!te.independent,N>-1&&j<te.start)break;var q=te.loaded;q?N=-1:(G||te.independent||K)&&te.fragment===k&&(N=$),G=q}return N},p.loadedEndOfParts=function(S,k){var j=S[S.length-1];return j&&k>j.start&&j.loaded},p.getInitialLiveFragment=function(S,k){var j=this.fragPrevious,N=null;if(j){if(S.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+j.programDateTime),N=(0,D.findFragmentByPDT)(k,j.endProgramDateTime,this.config.maxFragLookUpTolerance)),!N){var G=j.sn+1;if(G>=S.startSN&&G<=S.endSN){var K=k[G-S.startSN];j.cc===K.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(N=K).sn)}N||(N=(0,D.findFragWithCC)(k,j.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+N.sn)}}else{var $=this.hls.liveSyncPosition;null!==$&&(N=this.getFragmentAtPosition($,this.bitrateTest?S.fragmentEnd:S.edge,S))}return N},p.getFragmentAtPosition=function(S,k,j){var ne,N=this.config,G=this.fragPrevious,K=j.fragments,$=j.endSN,Z=j.fragmentHint,te=N.maxFragLookUpTolerance,q=!!(N.lowLatencyMode&&j.partList&&Z);if(q&&Z&&!this.bitrateTest&&(K=K.concat(Z),$=Z.sn),ne=S<k?(0,D.findFragmentByPTS)(G,K,S,S>k-te?0:te):K[K.length-1]){var ue=ne.sn-j.startSN;if(this.fragmentTracker.getState(ne)===W.FragmentState.OK&&(G=ne),G&&ne.sn===G.sn&&!q&&G&&ne.level===G.level){var fe=K[ue+1];ne.sn<$&&this.fragmentTracker.getState(fe)!==W.FragmentState.OK?(this.log("SN "+ne.sn+" just loaded, load next one: "+fe.sn),ne=fe):ne=null}}return ne},p.synchronizeToLiveEdge=function(S){var k=this.config,j=this.media;if(j){var N=this.hls.liveSyncPosition,G=j.currentTime,$=S.edge,Z=G>=S.fragments[0].start-k.maxFragLookUpTolerance&&G<=$;null!==N&&j.duration>N&&(G<N||!Z)&&(!Z&&j.readyState<4||G<$-(void 0!==k.liveMaxLatencyDuration?k.liveMaxLatencyDuration:k.liveMaxLatencyDurationCount*S.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=N),j.readyState&&(this.warn("Playback: "+G.toFixed(3)+" is located too far from the end of live sliding playlist: "+$+", reset currentTime to : "+N.toFixed(3)),j.currentTime=N))}},p.alignPlaylists=function(S,k){var N=this.levelLastLoaded,G=this.fragPrevious,K=null!==N?this.levels[N]:null,$=S.fragments.length;if(!$)return this.warn("No fragments in live playlist"),0;var Z=S.fragments[0].start,te=!k,q=S.alignedSliding&&(0,z.isFiniteNumber)(Z);if(te||!q&&!Z){(0,P.alignStream)(G,K,S);var ne=S.fragments[0].start;return this.log("Live playlist sliding: "+ne.toFixed(2)+" start-sn: "+(k?k.startSN:"na")+"->"+S.startSN+" prev-sn: "+(G?G.sn:"na")+" fragments: "+$),ne}return Z},p.waitForCdnTuneIn=function(S){return S.live&&S.canBlockReload&&S.partTarget&&S.tuneInGoal>Math.max(S.partHoldBack,3*S.partTarget)},p.setStartPosition=function(S,k){var j=this.startPosition;if(j<k&&(j=-1),-1===j||-1===this.lastCurrentTime){var N=S.startTimeOffset;(0,z.isFiniteNumber)(N)?(j=k+N,N<0&&(j+=S.totalduration),j=Math.min(Math.max(k,j),k+S.totalduration),this.log("Start time offset "+N+" found in playlist, adjust startPosition to "+j),this.startPosition=j):S.live?j=this.hls.liveSyncPosition||k:this.startPosition=j=0,this.lastCurrentTime=j}this.nextLoadPosition=j},p.getLoadPosition=function(){var S=this.media,k=0;return this.loadedmetadata&&S?k=S.currentTime:this.nextLoadPosition&&(k=this.nextLoadPosition),k},p.handleFragLoadAborted=function(S,k){this.transmuxer&&"initSegment"!==S.sn&&S.stats.aborted&&(this.warn("Fragment "+S.sn+(k?" part"+k.index:"")+" of level "+S.level+" was aborted"),this.resetFragmentLoading(S))},p.resetFragmentLoading=function(S){(!this.fragCurrent||!this.fragContextChanged(S)&&this.state!==T.FRAG_LOADING_WAITING_RETRY)&&(this.state=T.IDLE)},p.onFragmentOrKeyLoadError=function(S,k){if(k.fatal)return this.stopLoad(),void(this.state=T.ERROR);var j=this.config;if(k.chunkMeta){var N=this.getCurrentContext(k.chunkMeta);N&&(k.frag=N.frag,k.levelRetry=!0,this.fragLoadError=j.fragLoadingMaxRetry)}var G=k.frag;if(G&&G.type===S){var K=this.fragCurrent;if(console.assert(K&&G.sn===K.sn&&G.level===K.level&&G.urlId===K.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=j.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var $=Math.min(Math.pow(2,this.fragLoadError)*j.fragLoadingRetryDelay,j.fragLoadingMaxRetryTimeout);this.warn("Fragment "+G.sn+" of "+S+" "+G.level+" failed to load, retrying in "+$+"ms"),this.retryDate=self.performance.now()+$,this.fragLoadError++,this.state=T.FRAG_LOADING_WAITING_RETRY}else k.levelRetry?(S===m.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=T.IDLE):(Y.logger.error(k.details+" reaches max retry, redispatch as fatal ..."),k.fatal=!0,this.hls.stopLoad(),this.state=T.ERROR)}},p.afterBufferFlushed=function(S,k,j){if(S){var N=V.BufferHelper.getBuffered(S);this.fragmentTracker.detectEvictedFragments(k,N,j),this.state===T.ENDED&&this.resetLoadingState()}},p.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=T.IDLE},p.resetStartWhenNotLoaded=function(S){if(!this.loadedmetadata){this.startFragRequested=!1;var k=this.levels?this.levels[S].details:null;null!=k&&k.live?(this.startPosition=-1,this.setStartPosition(k,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},p.updateLevelTiming=function(S,k,j,N){var G=this,K=j.details;console.assert(!!K,"level.details must be defined"),Object.keys(S.elementaryStreams).reduce(function(Z,te){var q=S.elementaryStreams[te];if(q){var ne=q.endPTS-q.startPTS;if(ne<=0)return G.warn("Could not parse fragment "+S.sn+" "+te+" duration reliably ("+ne+")"),Z||!1;var se=N?0:(0,x.updateFragPTSDTS)(K,S,q.startPTS,q.endPTS,q.startDTS,q.endDTS);return G.hls.trigger(U.Events.LEVEL_PTS_UPDATED,{details:K,level:j,drift:se,type:te,frag:S,start:q.startPTS,end:q.endPTS}),!0}return Z},!1)||(this.warn("Found no media in fragment "+S.sn+" of level "+j.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=T.PARSED,this.hls.trigger(U.Events.FRAG_PARSED,{frag:S,part:k})},p.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function b(d,u,p){u&&h(d.prototype,u),p&&h(d,p),Object.defineProperty(d,"prototype",{writable:!1})}(u,[{key:"state",get:function(){return this._state},set:function(S){var k=this._state;k!==S&&(this._state=S,this.log(k+"->"+S))}}]),u}(B.default)},"./src/controller/buffer-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>D});var z=O("./src/polyfills/number.ts"),B=O("./src/events.ts"),W=O("./src/utils/logger.ts"),V=O("./src/errors.ts"),Y=O("./src/utils/buffer-helper.ts"),U=O("./src/utils/mediasource-helper.ts"),F=O("./src/loader/fragment.ts"),L=O("./src/controller/buffer-operation-queue.ts"),R=(0,U.getMediaSource)(),P=/([ha]vc.)(?:\.[^.,]+)+/,D=function(){function x(y){var g=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var m=g.media,h=g.mediaSource;W.logger.log("[buffer-controller]: Media source opened"),m&&(m.removeEventListener("emptied",g._onMediaEmptied),g.updateMediaElementDuration(),g.hls.trigger(B.Events.MEDIA_ATTACHED,{media:m})),h&&h.removeEventListener("sourceopen",g._onMediaSourceOpen),g.checkPendingTracks()},this._onMediaSourceClose=function(){W.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){W.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var m=g.media,h=g._objectUrl;m&&m.src!==h&&W.logger.error("Media element src was set while attaching MediaSource ("+h+" > "+m.src+")")},this.hls=y,this._initSourceBuffer(),this.registerListeners()}var w=x.prototype;return w.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},w.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},w.registerListeners=function(){var g=this.hls;g.on(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),g.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(B.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.on(B.Events.BUFFER_RESET,this.onBufferReset,this),g.on(B.Events.BUFFER_APPENDING,this.onBufferAppending,this),g.on(B.Events.BUFFER_CODECS,this.onBufferCodecs,this),g.on(B.Events.BUFFER_EOS,this.onBufferEos,this),g.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),g.on(B.Events.FRAG_PARSED,this.onFragParsed,this),g.on(B.Events.FRAG_CHANGED,this.onFragChanged,this)},w.unregisterListeners=function(){var g=this.hls;g.off(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),g.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.off(B.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.off(B.Events.BUFFER_RESET,this.onBufferReset,this),g.off(B.Events.BUFFER_APPENDING,this.onBufferAppending,this),g.off(B.Events.BUFFER_CODECS,this.onBufferCodecs,this),g.off(B.Events.BUFFER_EOS,this.onBufferEos,this),g.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),g.off(B.Events.FRAG_PARSED,this.onFragParsed,this),g.off(B.Events.FRAG_CHANGED,this.onFragChanged,this)},w._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new L.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},w.onManifestParsed=function(g,m){var h=2;(m.audio&&!m.video||!m.altAudio)&&(h=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=h,this.details=null,W.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},w.onMediaAttaching=function(g,m){var h=this.media=m.media;if(h&&R){var b=this.mediaSource=new R;b.addEventListener("sourceopen",this._onMediaSourceOpen),b.addEventListener("sourceended",this._onMediaSourceEnded),b.addEventListener("sourceclose",this._onMediaSourceClose),h.src=self.URL.createObjectURL(b),this._objectUrl=h.src,h.addEventListener("emptied",this._onMediaEmptied)}},w.onMediaDetaching=function(){var g=this.media,m=this.mediaSource,h=this._objectUrl;if(m){if(W.logger.log("[buffer-controller]: media source detaching"),"open"===m.readyState)try{m.endOfStream()}catch(b){W.logger.warn("[buffer-controller]: onMediaDetaching: "+b.message+" while calling endOfStream")}this.onBufferReset(),m.removeEventListener("sourceopen",this._onMediaSourceOpen),m.removeEventListener("sourceended",this._onMediaSourceEnded),m.removeEventListener("sourceclose",this._onMediaSourceClose),g&&(g.removeEventListener("emptied",this._onMediaEmptied),h&&self.URL.revokeObjectURL(h),g.src===h?(g.removeAttribute("src"),g.load()):W.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(B.Events.MEDIA_DETACHED,void 0)},w.onBufferReset=function(){var g=this;this.getSourceBufferTypes().forEach(function(m){var h=g.sourceBuffer[m];try{h&&(g.removeBufferListeners(m),g.mediaSource&&g.mediaSource.removeSourceBuffer(h),g.sourceBuffer[m]=void 0)}catch(b){W.logger.warn("[buffer-controller]: Failed to reset the "+m+" buffer",b)}}),this._initSourceBuffer()},w.onBufferCodecs=function(g,m){var h=this,b=this.getSourceBufferTypes().length;Object.keys(m).forEach(function(C){if(b){var f=h.tracks[C];if(f&&"function"==typeof f.buffer.changeType){var _=m[C],A=_.id,E=_.codec,T=_.levelCodec,c=_.container,d=_.metadata,u=(f.levelCodec||f.codec).replace(P,"$1"),p=(T||E).replace(P,"$1");u!==p&&(h.appendChangeType(C,c+";codecs="+(T||E)),W.logger.log("[buffer-controller]: switching codec "+u+" to "+p),h.tracks[C]={buffer:f.buffer,codec:E,container:c,levelCodec:T,metadata:d,id:A})}}else h.pendingTracks[C]=m[C]}),!b&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},w.appendChangeType=function(g,m){var h=this,b=this.operationQueue,C={execute:function(){var _=h.sourceBuffer[g];_&&(W.logger.log("[buffer-controller]: changing "+g+" sourceBuffer type to "+m),_.changeType(m)),b.shiftAndExecuteNext(g)},onStart:function(){},onComplete:function(){},onError:function(_){W.logger.warn("[buffer-controller]: Failed to change "+g+" SourceBuffer type",_)}};b.append(C,g)},w.onBufferAppending=function(g,m){var h=this,b=this.hls,C=this.operationQueue,f=this.tracks,_=m.data,A=m.type,E=m.frag,T=m.part,c=m.chunkMeta,d=c.buffering[A],u=self.performance.now();d.start=u;var p=E.stats.buffering,M=T?T.stats.buffering:null;0===p.start&&(p.start=u),M&&0===M.start&&(M.start=u);var S=f.audio,k=!1;"audio"===A&&"audio/mpeg"===(null==S?void 0:S.container)&&(k=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);var j=E.start;C.append({execute:function(){if(d.executeStart=self.performance.now(),k){var K=h.sourceBuffer[A];if(K){var $=j-K.timestampOffset;Math.abs($)>=.1&&(W.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+j+" (delta: "+$+") sn: "+E.sn+")"),K.timestampOffset=j)}}h.appendExecutor(_,A)},onStart:function(){},onComplete:function(){var K=self.performance.now();d.executeEnd=d.end=K,0===p.first&&(p.first=K),M&&0===M.first&&(M.first=K);var $=h.sourceBuffer,Z={};for(var te in $)Z[te]=Y.BufferHelper.getBuffered($[te]);h.appendError=0,h.hls.trigger(B.Events.BUFFER_APPENDED,{type:A,frag:E,part:T,chunkMeta:c,parent:E.type,timeRanges:Z})},onError:function(K){W.logger.error("[buffer-controller]: Error encountered while trying to append to the "+A+" SourceBuffer",K);var $={type:V.ErrorTypes.MEDIA_ERROR,parent:E.type,details:V.ErrorDetails.BUFFER_APPEND_ERROR,err:K,fatal:!1};K.code===DOMException.QUOTA_EXCEEDED_ERR?$.details=V.ErrorDetails.BUFFER_FULL_ERROR:(h.appendError++,$.details=V.ErrorDetails.BUFFER_APPEND_ERROR,h.appendError>b.config.appendErrorMaxRetry&&(W.logger.error("[buffer-controller]: Failed "+b.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),$.fatal=!0,b.stopLoad())),b.trigger(B.Events.ERROR,$)}},A)},w.onBufferFlushing=function(g,m){var h=this,b=this.operationQueue,C=function(_){return{execute:h.removeExecutor.bind(h,_,m.startOffset,m.endOffset),onStart:function(){},onComplete:function(){h.hls.trigger(B.Events.BUFFER_FLUSHED,{type:_})},onError:function(E){W.logger.warn("[buffer-controller]: Failed to remove from "+_+" SourceBuffer",E)}}};m.type?b.append(C(m.type),m.type):this.getSourceBufferTypes().forEach(function(f){b.append(C(f),f)})},w.onFragParsed=function(g,m){var h=this,b=m.frag,C=m.part,f=[],_=C?C.elementaryStreams:b.elementaryStreams;_[F.ElementaryStreamTypes.AUDIOVIDEO]?f.push("audiovideo"):(_[F.ElementaryStreamTypes.AUDIO]&&f.push("audio"),_[F.ElementaryStreamTypes.VIDEO]&&f.push("video")),0===f.length&&W.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+b.type+" level: "+b.level+" sn: "+b.sn),this.blockBuffers(function(){var T=self.performance.now();b.stats.buffering.end=T,C&&(C.stats.buffering.end=T),h.hls.trigger(B.Events.FRAG_BUFFERED,{frag:b,part:C,stats:C?C.stats:b.stats,id:b.type})},f)},w.onFragChanged=function(g,m){this.flushBackBuffer()},w.onBufferEos=function(g,m){var h=this;this.getSourceBufferTypes().reduce(function(C,f){var _=h.sourceBuffer[f];return _&&(!m.type||m.type===f)&&(_.ending=!0,_.ended||(_.ended=!0,W.logger.log("[buffer-controller]: "+f+" sourceBuffer now EOS"))),C&&!(_&&!_.ended)},!0)&&(W.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){h.getSourceBufferTypes().forEach(function(f){var _=h.sourceBuffer[f];_&&(_.ending=!1)});var C=h.mediaSource;C&&"open"===C.readyState?(W.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),C.endOfStream()):C&&W.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+C.readyState)}))},w.onLevelUpdated=function(g,m){var h=m.details;!h.fragments.length||(this.details=h,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},w.flushBackBuffer=function(){var g=this.hls,m=this.details,h=this.media,b=this.sourceBuffer;if(h&&null!==m){var C=this.getSourceBufferTypes();if(C.length){var f=m.live&&null!==g.config.liveBackBufferLength?g.config.liveBackBufferLength:g.config.backBufferLength;if((0,z.isFiniteNumber)(f)&&!(f<0)){var _=h.currentTime,A=m.levelTargetDuration,E=Math.max(f,A),T=Math.floor(_/A)*A-E;C.forEach(function(c){var d=b[c];if(d){var u=Y.BufferHelper.getBuffered(d);if(u.length>0&&T>u.start(0)){if(g.trigger(B.Events.BACK_BUFFER_REACHED,{bufferEnd:T}),m.live)g.trigger(B.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:T});else if(d.ended&&u.end(u.length-1)-_<2*A)return void W.logger.info("[buffer-controller]: Cannot flush "+c+" back buffer while SourceBuffer is in ended state");g.trigger(B.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:T,type:c})}}})}}}},w.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var g=this.details,m=this.hls,b=this.mediaSource,C=g.fragments[0].start+g.totalduration,f=this.media.duration,_=(0,z.isFiniteNumber)(b.duration)?b.duration:0;g.live&&m.config.liveDurationInfinity?(W.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),b.duration=1/0,this.updateSeekableRange(g)):(C>_&&C>f||!(0,z.isFiniteNumber)(f))&&(W.logger.log("[buffer-controller]: Updating Media Source duration to "+C.toFixed(3)),b.duration=C)}},w.updateSeekableRange=function(g){var m=this.mediaSource,h=g.fragments;if(h.length&&g.live&&null!=m&&m.setLiveSeekableRange){var C=Math.max(0,h[0].start),f=Math.max(C,C+g.totalduration);m.setLiveSeekableRange(C,f)}},w.checkPendingTracks=function(){var g=this.bufferCodecEventsExpected,m=this.operationQueue,h=this.pendingTracks,b=Object.keys(h).length;if(b&&!g||2===b){this.createSourceBuffers(h),this.pendingTracks={};var C=this.getSourceBufferTypes();if(0===C.length)return void this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});C.forEach(function(f){m.executeNext(f)})}},w.createSourceBuffers=function(g){var m=this.sourceBuffer,h=this.mediaSource;if(!h)throw Error("createSourceBuffers called when mediaSource was null");var b=0;for(var C in g)if(!m[C]){var f=g[C];if(!f)throw Error("source buffer exists for track "+C+", however track does not");var _=f.levelCodec||f.codec,A=f.container+";codecs="+_;W.logger.log("[buffer-controller]: creating sourceBuffer("+A+")");try{var E=m[C]=h.addSourceBuffer(A),T=C;this.addBufferListener(T,"updatestart",this._onSBUpdateStart),this.addBufferListener(T,"updateend",this._onSBUpdateEnd),this.addBufferListener(T,"error",this._onSBUpdateError),this.tracks[C]={buffer:E,codec:_,container:f.container,levelCodec:f.levelCodec,metadata:f.metadata,id:f.id},b++}catch(c){W.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+c.message),this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,mimeType:A})}}b&&this.hls.trigger(B.Events.BUFFER_CREATED,{tracks:this.tracks})},w._onSBUpdateStart=function(g){this.operationQueue.current(g).onStart()},w._onSBUpdateEnd=function(g){var m=this.operationQueue;m.current(g).onComplete(),m.shiftAndExecuteNext(g)},w._onSBUpdateError=function(g,m){W.logger.error("[buffer-controller]: "+g+" SourceBuffer error",m),this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var h=this.operationQueue.current(g);h&&h.onError(m)},w.removeExecutor=function(g,m,h){var b=this.media,C=this.mediaSource,f=this.operationQueue,A=this.sourceBuffer[g];if(!b||!C||!A)return W.logger.warn("[buffer-controller]: Attempting to remove from the "+g+" SourceBuffer, but it does not exist"),void f.shiftAndExecuteNext(g);var E=(0,z.isFiniteNumber)(b.duration)?b.duration:1/0,T=(0,z.isFiniteNumber)(C.duration)?C.duration:1/0,c=Math.max(0,m),d=Math.min(h,E,T);d>c&&!A.ending?(A.ended=!1,W.logger.log("[buffer-controller]: Removing ["+c+","+d+"] from the "+g+" SourceBuffer"),console.assert(!A.updating,g+" sourceBuffer must not be updating"),A.remove(c,d)):f.shiftAndExecuteNext(g)},w.appendExecutor=function(g,m){var h=this.operationQueue,C=this.sourceBuffer[m];if(!C)return W.logger.warn("[buffer-controller]: Attempting to append to the "+m+" SourceBuffer, but it does not exist"),void h.shiftAndExecuteNext(m);C.ended=!1,console.assert(!C.updating,m+" sourceBuffer must not be updating"),C.appendBuffer(g)},w.blockBuffers=function(g,m){var h=this;if(void 0===m&&(m=this.getSourceBufferTypes()),!m.length)return W.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(g);var b=this.operationQueue,C=m.map(function(f){return b.appendBlocker(f)});Promise.all(C).then(function(){g(),m.forEach(function(f){var _=h.sourceBuffer[f];(!_||!_.updating)&&b.shiftAndExecuteNext(f)})})},w.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},w.addBufferListener=function(g,m,h){var b=this.sourceBuffer[g];if(b){var C=h.bind(this,g);this.listeners[g].push({event:m,listener:C}),b.addEventListener(m,C)}},w.removeBufferListeners=function(g){var m=this.sourceBuffer[g];!m||this.listeners[g].forEach(function(h){m.removeEventListener(h.event,h.listener)})},x}()},"./src/controller/buffer-operation-queue.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>B});var z=O("./src/utils/logger.ts"),B=function(){function W(Y){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=Y}var V=W.prototype;return V.append=function(U,F){var L=this.queues[F];L.push(U),1===L.length&&this.buffers[F]&&this.executeNext(F)},V.insertAbort=function(U,F){this.queues[F].unshift(U),this.executeNext(F)},V.appendBlocker=function(U){var F,L=new Promise(function(P){F=P});return this.append({execute:F,onStart:function(){},onComplete:function(){},onError:function(){}},U),L},V.executeNext=function(U){var R=this.buffers[U],P=this.queues[U];if(P.length){var D=P[0];try{D.execute()}catch(x){z.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),D.onError(x),(!R||!R.updating)&&(P.shift(),this.executeNext(U))}}},V.shiftAndExecuteNext=function(U){this.queues[U].shift(),this.executeNext(U)},V.current=function(U){return this.queues[U][0]},W}()},"./src/controller/cap-level-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>F});var z=O("./src/events.ts");function B(L,R){for(var P=0;P<R.length;P++){var D=R[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(L,V(D.key),D)}}function V(L){var R=function Y(L,R){if("object"!=typeof L||null===L)return L;var P=L[Symbol.toPrimitive];if(void 0!==P){var D=P.call(L,R||"default");if("object"!=typeof D)return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}const F=function(){function L(P){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=P,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var R=L.prototype;return R.setStreamController=function(D){this.streamController=D},R.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},R.registerListeners=function(){var D=this.hls;D.on(z.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),D.on(z.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),D.on(z.Events.MANIFEST_PARSED,this.onManifestParsed,this),D.on(z.Events.BUFFER_CODECS,this.onBufferCodecs,this),D.on(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},R.unregisterListener=function(){var D=this.hls;D.off(z.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),D.off(z.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),D.off(z.Events.MANIFEST_PARSED,this.onManifestParsed,this),D.off(z.Events.BUFFER_CODECS,this.onBufferCodecs,this),D.off(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},R.onFpsDropLevelCapping=function(D,x){L.isLevelAllowed(x.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(x.droppedLevel)},R.onMediaAttaching=function(D,x){this.media=x.media instanceof HTMLVideoElement?x.media:null,this.clientRect=null},R.onManifestParsed=function(D,x){var w=this.hls;this.restrictedLevels=[],this.firstLevel=x.firstLevel,w.config.capLevelToPlayerSize&&x.video&&this.startCapping()},R.onBufferCodecs=function(D,x){this.hls.config.capLevelToPlayerSize&&x.video&&this.startCapping()},R.onMediaDetaching=function(){this.stopCapping()},R.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var D=this.hls.levels;if(D.length){var x=this.hls;x.autoLevelCapping=this.getMaxLevel(D.length-1),x.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=x.autoLevelCapping}}},R.getMaxLevel=function(D){var x=this,w=this.hls.levels;if(!w.length)return-1;var y=w.filter(function(g,m){return L.isLevelAllowed(m,x.restrictedLevels)&&m<=D});return this.clientRect=null,L.getMaxLevelByMediaSize(y,this.mediaWidth,this.mediaHeight)},R.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},R.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},R.getDimensions=function(){if(this.clientRect)return this.clientRect;var D=this.media,x={width:0,height:0};if(D){var w=D.getBoundingClientRect();x.width=w.width,x.height=w.height,!x.width&&!x.height&&(x.width=w.right-w.left||D.width||0,x.height=w.bottom-w.top||D.height||0)}return this.clientRect=x,x},L.isLevelAllowed=function(D,x){return void 0===x&&(x=[]),-1===x.indexOf(D)},L.getMaxLevelByMediaSize=function(D,x,w){if(!D||!D.length)return-1;for(var g=D.length-1,m=0;m<D.length;m+=1){var h=D[m];if((h.width>=x||h.height>=w)&&(C=h,!(f=D[m+1])||C.width!==f.width||C.height!==f.height)){g=m;break}}var C,f;return g},function W(L,R,P){R&&B(L.prototype,R),P&&B(L,P),Object.defineProperty(L,"prototype",{writable:!1})}(L,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var D=1;if(!this.hls.config.ignoreDevicePixelRatio)try{D=self.devicePixelRatio}catch(x){}return D}}]),L}()},"./src/controller/cmcd-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>w});var z=O("./src/events.ts"),B=O("./src/types/cmcd.ts"),W=O("./src/utils/buffer-helper.ts"),V=O("./src/utils/logger.ts");function Y(y,g){for(var m=0;m<g.length;m++){var h=g[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,F(h.key),h)}}function U(y,g,m){return g&&Y(y.prototype,g),m&&Y(y,m),Object.defineProperty(y,"prototype",{writable:!1}),y}function F(y){var g=function L(y,g){if("object"!=typeof y||null===y)return y;var m=y[Symbol.toPrimitive];if(void 0!==m){var h=m.call(y,g||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(y)}(y,"string");return"symbol"==typeof g?g:String(g)}function R(y,g){var m="undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(m)return(m=m.call(y)).next.bind(m);if(Array.isArray(y)||(m=function P(y,g){if(y){if("string"==typeof y)return D(y,g);var m=Object.prototype.toString.call(y).slice(8,-1);if("Object"===m&&y.constructor&&(m=y.constructor.name),"Map"===m||"Set"===m)return Array.from(y);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return D(y,g)}}(y))||g&&y&&"number"==typeof y.length){m&&(y=m);var h=0;return function(){return h>=y.length?{done:!0}:{done:!1,value:y[h++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(y,g){(null==g||g>y.length)&&(g=y.length);for(var m=0,h=new Array(g);m<g;m++)h[m]=y[m];return h}function x(){return x=Object.assign?Object.assign.bind():function(y){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(y[h]=m[h])}return y},x.apply(this,arguments)}var w=function(){function y(m){var h=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){h.initialized&&(h.starved=!0),h.buffering=!0},this.onPlaying=function(){h.initialized||(h.initialized=!0),h.buffering=!1},this.applyPlaylistData=function(f){try{h.apply(f,{ot:B.CMCDObjectType.MANIFEST,su:!h.initialized})}catch(_){V.logger.warn("Could not generate manifest CMCD data.",_)}},this.applyFragmentData=function(f){try{var _=f.frag,A=h.hls.levels[_.level],E=h.getObjectType(_),T={d:1e3*_.duration,ot:E};(E===B.CMCDObjectType.VIDEO||E===B.CMCDObjectType.AUDIO||E==B.CMCDObjectType.MUXED)&&(T.br=A.bitrate/1e3,T.tb=h.getTopBandwidth(E)/1e3,T.bl=h.getBufferLength(E)),h.apply(f,T)}catch(c){V.logger.warn("Could not generate segment CMCD data.",c)}},this.hls=m;var b=this.config=m.config,C=b.cmcd;null!=C&&(b.pLoader=this.createPlaylistLoader(),b.fLoader=this.createFragmentLoader(),this.sid=C.sessionId||y.uuid(),this.cid=C.contentId,this.useHeaders=!0===C.useHeaders,this.registerListeners())}var g=y.prototype;return g.registerListeners=function(){var h=this.hls;h.on(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.on(z.Events.MEDIA_DETACHED,this.onMediaDetached,this),h.on(z.Events.BUFFER_CREATED,this.onBufferCreated,this)},g.unregisterListeners=function(){var h=this.hls;h.off(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.off(z.Events.MEDIA_DETACHED,this.onMediaDetached,this),h.off(z.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},g.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},g.onMediaAttached=function(h,b){this.media=b.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},g.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},g.onBufferCreated=function(h,b){var C,f;this.audioBuffer=null===(C=b.tracks.audio)||void 0===C?void 0:C.buffer,this.videoBuffer=null===(f=b.tracks.video)||void 0===f?void 0:f.buffer},g.createData=function(){var h;return{v:B.CMCDVersion,sf:B.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(h=this.media)||void 0===h?void 0:h.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},g.apply=function(h,b){if(void 0===b&&(b={}),x(b,this.createData()),this.starved&&(b.ot===B.CMCDObjectType.INIT||b.ot===B.CMCDObjectType.VIDEO||b.ot===B.CMCDObjectType.MUXED)&&(b.bs=!0,b.su=!0,this.starved=!1),null==b.su&&(b.su=this.buffering),this.useHeaders){var f=y.toHeaders(b);if(!Object.keys(f).length)return;h.headers||(h.headers={}),x(h.headers,f)}else{var _=y.toQuery(b);if(!_)return;h.url=y.appendQueryToUri(h.url,_)}},g.getObjectType=function(h){var b=h.type;return"subtitle"===b?B.CMCDObjectType.TIMED_TEXT:"initSegment"===h.sn?B.CMCDObjectType.INIT:"audio"===b?B.CMCDObjectType.AUDIO:"main"===b?this.hls.audioTracks.length?B.CMCDObjectType.VIDEO:B.CMCDObjectType.MUXED:void 0},g.getTopBandwidth=function(h){var C,b=0,f=this.hls;if(h===B.CMCDObjectType.AUDIO)C=f.audioTracks;else{var _=f.maxAutoLevel;C=f.levels.slice(0,_>-1?_+1:f.levels.length)}for(var T,E=R(C);!(T=E()).done;){var c=T.value;c.bitrate>b&&(b=c.bitrate)}return b>0?b:NaN},g.getBufferLength=function(h){var b=this.hls.media,C=h===B.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return C&&b?1e3*W.BufferHelper.bufferInfo(C,b.currentTime,this.config.maxBufferHole).len:NaN},g.createPlaylistLoader=function(){var b=this.applyPlaylistData,C=this.config.pLoader||this.config.loader;return function(){function f(A){this.loader=void 0,this.loader=new C(A)}var _=f.prototype;return _.destroy=function(){this.loader.destroy()},_.abort=function(){this.loader.abort()},_.load=function(E,T,c){b(E),this.loader.load(E,T,c)},U(f,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),f}()},g.createFragmentLoader=function(){var b=this.applyFragmentData,C=this.config.fLoader||this.config.loader;return function(){function f(A){this.loader=void 0,this.loader=new C(A)}var _=f.prototype;return _.destroy=function(){this.loader.destroy()},_.abort=function(){this.loader.abort()},_.load=function(E,T,c){b(E),this.loader.load(E,T,c)},U(f,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),f}()},y.uuid=function(){var h=URL.createObjectURL(new Blob),b=h.toString();return URL.revokeObjectURL(h),b.slice(b.lastIndexOf("/")+1)},y.serialize=function(h){for(var d,b=[],f=function(N){return Math.round(N)},_=function(N){return 100*f(N/100)},E={br:f,d:f,bl:_,dl:_,mtp:_,nor:function(N){return encodeURIComponent(N)},rtp:_,tb:f},c=R(Object.keys(h||{}).sort());!(d=c()).done;){var u=d.value,p=h[u];if(N=p,!(Number.isNaN(N)||null==N||""===N||!1===N||"v"===u&&1===p||"pr"==u&&1===p)){var M=E[u];M&&(p=M(p));var k,S=typeof p;k="ot"===u||"sf"===u||"st"===u?u+"="+p:"boolean"===S?u:"number"===S?u+"="+p:u+"="+JSON.stringify(p),b.push(k)}}var N;return b.join(",")},y.toHeaders=function(h){for(var C={},f=["Object","Request","Session","Status"],_=[{},{},{},{}],A={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},E=0,T=Object.keys(h);E<T.length;E++){var c=T[E];_[null!=A[c]?A[c]:1][c]=h[c]}for(var u=0;u<_.length;u++){var p=y.serialize(_[u]);p&&(C["CMCD-"+f[u]]=p)}return C},y.toQuery=function(h){return"CMCD="+encodeURIComponent(y.serialize(h))},y.appendQueryToUri=function(h,b){if(!b)return h;var C=h.includes("?")?"&":"?";return""+h+C+b},y}()},"./src/controller/eme-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>E});var z=O("./src/events.ts"),B=O("./src/errors.ts"),W=O("./src/utils/logger.ts"),V=O("./src/utils/mediakeys-helper.ts"),Y=O("./src/utils/keysystem-util.ts"),U=O("./src/utils/numeric-encoding-utils.ts"),F=O("./src/loader/level-key.ts"),L=O("./src/utils/hex.ts"),R=O("./src/utils/mp4-tools.ts"),P=O("./node_modules/eventemitter3/index.js"),D=O.n(P);function w(T){var c="function"==typeof Map?new Map:void 0;return w=function(u){if(null===u||!function m(T){return-1!==Function.toString.call(T).indexOf("[native code]")}(u))return u;if("function"!=typeof u)throw new TypeError("Super expression must either be null or a function");if(void 0!==c){if(c.has(u))return c.get(u);c.set(u,p)}function p(){return y(u,arguments,b(this).constructor)}return p.prototype=Object.create(u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h(p,u)},w(T)}function y(T,c,d){return(y=g()?Reflect.construct.bind():function(p,M,S){var k=[null];k.push.apply(k,M);var N=new(Function.bind.apply(p,k));return S&&h(N,S.prototype),N}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(T){return!1}}function h(T,c){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,p){return u.__proto__=p,u})(T,c)}function b(T){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)})(T)}var f="[eme]",_=function(){function T(d){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=T.CDMCleanupPromise?[T.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=W.logger.debug.bind(W.logger,f),this.log=W.logger.log.bind(W.logger,f),this.warn=W.logger.warn.bind(W.logger,f),this.error=W.logger.error.bind(W.logger,f),this.hls=d,this.config=d.config,this.registerListeners()}var c=T.prototype;return c.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},c.registerListeners=function(){this.hls.on(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(z.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(z.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},c.unregisterListeners=function(){this.hls.off(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(z.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(z.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},c.getLicenseServerUrl=function(u){var p=this.config,S=p.widevineLicenseUrl,k=p.drmSystems[u];if(k)return k.licenseUrl;if(u===V.KeySystems.WIDEVINE&&S)return S;throw new Error('no license server URL configured for key-system "'+u+'"')},c.getServerCertificateUrl=function(u){var M=this.config.drmSystems[u];if(M)return M.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+u+'"]')},c.attemptKeySystemAccess=function(u){var p=this,M=this.hls.levels,S=function(G,K,$){return!!G&&$.indexOf(G)===K},k=M.map(function(N){return N.audioCodec}).filter(S),j=M.map(function(N){return N.videoCodec}).filter(S);return k.length+j.length===0&&j.push("avc1.42e01e"),new Promise(function(N,G){!function $(Z){var te=Z.shift();p.getMediaKeysPromise(te,k,j).then(function(q){return N({keySystem:te,mediaKeys:q})}).catch(function(q){Z.length?$(Z):G(q instanceof A?q:new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:q,fatal:!0},q.message))})}(u)})},c.requestMediaKeySystemAccess=function(u,p){var M=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof M){var S="Configured requestMediaKeySystemAccess is not a function "+M;return null===V.requestMediaKeySystemAccess&&"http:"===self.location.protocol&&(S="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(S))}return M(u,p)},c.getMediaKeysPromise=function(u,p,M){var S=this,k=(0,V.getSupportedMediaKeySystemConfigurations)(u,p,M,this.config.drmSystemOptions),j=this.keySystemAccessPromises[u],N=null==j?void 0:j.keySystemAccess;if(!N){this.log('Requesting encrypted media "'+u+'" key-system access with config: '+JSON.stringify(k)),N=this.requestMediaKeySystemAccess(u,k);var G=this.keySystemAccessPromises[u]={keySystemAccess:N};return N.catch(function(K){S.log('Failed to obtain access to key-system "'+u+'": '+K)}),N.then(function(K){S.log('Access for key-system "'+K.keySystem+'" obtained');var $=S.fetchServerCertificate(u);return S.log('Create media-keys for "'+u+'"'),G.mediaKeys=K.createMediaKeys().then(function(Z){return S.log('Media-keys created for "'+u+'"'),$.then(function(te){return te?S.setMediaKeysServerCertificate(Z,u,te):Z})}),G.mediaKeys.catch(function(Z){S.error('Failed to create media-keys for "'+u+'"}: '+Z)}),G.mediaKeys})}return N.then(function(){return j.mediaKeys})},c.createMediaKeySessionContext=function(u){var p=u.decryptdata,M=u.keySystem,S=u.mediaKeys;console.assert(!!S,"mediaKeys is defined"),this.log('Creating key-system session "'+M+'" keyId: '+L.default.hexDump(p.keyId||[]));var k=S.createSession(),j={decryptdata:p,keySystem:M,mediaKeys:S,mediaKeysSession:k,keyStatus:"status-pending"};return this.mediaKeySessions.push(j),j},c.renewKeySession=function(u){var p=u.decryptdata;if(p.pssh){var M=this.createMediaKeySessionContext(u),S=this.getKeyIdString(p);this.keyIdToKeySessionPromise[S]=this.generateRequestWithPreferredKeySession(M,"cenc",p.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(u)},c.getKeyIdString=function(u){if(!u)throw new Error("Could not read keyId of undefined decryptdata");if(null===u.keyId)throw new Error("keyId is null");return L.default.hexDump(u.keyId)},c.updateKeySession=function(u,p){var M,S=u.mediaKeysSession;return this.log('Updating key-session "'+S.sessionId+'" for keyID '+L.default.hexDump((null===(M=u.decryptdata)||void 0===M?void 0:M.keyId)||[])+"\n      } (data length: "+(p&&p.byteLength)+")"),S.update(p)},c.selectKeySystemFormat=function(u){var p=Object.keys(u.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+u.sn+" "+u.type+": "+u.level+") key formats "+p.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(p)),this.keyFormatPromise},c.getKeyFormatPromise=function(u){var p=this;return new Promise(function(M,S){var k=(0,V.getKeySystemsForConfig)(p.config),j=u.map(V.keySystemFormatToKeySystemDomain).filter(function(N){return!!N&&-1!==k.indexOf(N)});return p.getKeySystemSelectionPromise(j).then(function(N){var G=N.keySystem,K=(0,V.keySystemDomainToKeySystemFormat)(G);K?M(K):S(new Error('Unable to find format for key-system "'+G+'"'))}).catch(S)})},c.loadKey=function(u){var p=this,M=u.keyInfo.decryptdata,S=this.getKeyIdString(M),k="(keyId: "+S+' format: "'+M.keyFormat+'" method: '+M.method+" uri: "+M.uri+")";this.log("Starting session for key "+k);var j=this.keyIdToKeySessionPromise[S];return j||(j=this.keyIdToKeySessionPromise[S]=this.getKeySystemForKeyPromise(M).then(function(N){var G=N.keySystem,K=N.mediaKeys;return p.throwIfDestroyed(),p.log("Handle encrypted media sn: "+u.frag.sn+" "+u.frag.type+": "+u.frag.level+" using key "+k),p.attemptSetMediaKeys(G,K).then(function(){p.throwIfDestroyed();var $=p.createMediaKeySessionContext({keySystem:G,mediaKeys:K,decryptdata:M});return p.generateRequestWithPreferredKeySession($,"cenc",M.pssh,"playlist-key")})})).catch(function(N){return p.handleError(N)}),j},c.throwIfDestroyed=function(u){if(void 0===u&&(u="Invalid state"),!this.hls)throw new Error("invalid state")},c.handleError=function(u){!this.hls||(this.error(u.message),this.hls.trigger(z.Events.ERROR,u instanceof A?u.data:{type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:u,fatal:!0}))},c.getKeySystemForKeyPromise=function(u){var p=this.getKeyIdString(u),M=this.keyIdToKeySessionPromise[p];if(!M){var S=(0,V.keySystemFormatToKeySystemDomain)(u.keyFormat),k=S?[S]:(0,V.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(k)}return M},c.getKeySystemSelectionPromise=function(u){if(u.length||(u=(0,V.getKeySystemsForConfig)(this.config)),0===u.length)throw new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(u)},c._onMediaEncrypted=function(u){var p=this,M=u.initDataType,S=u.initData;if(this.debug('"'+u.type+'" event: init data type: "'+M+'"'),null!==S){var k,j;if("sinf"===M&&this.config.drmSystems[V.KeySystems.FAIRPLAY]){var N=(0,R.bin2str)(new Uint8Array(S));try{var G=(0,U.base64Decode)(JSON.parse(N).sinf),K=(0,R.parseSinf)(new Uint8Array(G));if(!K)return;k=K.subarray(8,24),j=V.KeySystems.FAIRPLAY}catch(fe){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var $=(0,R.parsePssh)(S);if(null===$)return;0===$.version&&$.systemId===V.KeySystemIds.WIDEVINE&&$.data&&(k=$.data.subarray(8,24)),j=(0,V.keySystemIdToKeySystemDomain)($.systemId)}if(j&&k){for(var Z=L.default.hexDump(k),te=this.keyIdToKeySessionPromise,q=this.mediaKeySessions,ne=te[Z],se=function(ve){var Re=q[ve],Ee=Re.decryptdata;if(Ee.pssh||!Ee.keyId)return"continue";var ye=L.default.hexDump(Ee.keyId);return Z===ye||-1!==Ee.uri.replace(/-/g,"").indexOf(Z)?(ne=te[ye],delete te[ye],Ee.pssh=new Uint8Array(S),Ee.keyId=k,ne=te[Z]=ne.then(function(){return p.generateRequestWithPreferredKeySession(Re,M,S,"encrypted-event-key-match")}),"break"):void 0},ue=0;ue<q.length;ue++){var ce=se(ue);if("continue"!==ce&&"break"===ce)break}ne||(ne=te[Z]=this.getKeySystemSelectionPromise([j]).then(function(fe){var ve,Re=fe.keySystem,Ee=fe.mediaKeys;p.throwIfDestroyed();var ye=new F.LevelKey("ISO-23001-7",Z,null!=(ve=(0,V.keySystemDomainToKeySystemFormat)(Re))?ve:"");return ye.pssh=new Uint8Array(S),ye.keyId=k,p.attemptSetMediaKeys(Re,Ee).then(function(){p.throwIfDestroyed();var Te=p.createMediaKeySessionContext({decryptdata:ye,keySystem:Re,mediaKeys:Ee});return p.generateRequestWithPreferredKeySession(Te,M,S,"encrypted-event-no-match")})})),ne.catch(function(fe){return p.handleError(fe)})}}},c._onWaitingForKey=function(u){this.log('"'+u.type+'" event')},c.attemptSetMediaKeys=function(u,p){var M=this,S=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+u+'"');var k=Promise.all(S).then(function(){if(!M.media)throw new Error("Attempted to set mediaKeys without media element attached");return M.media.setMediaKeys(p)});return this.setMediaKeysQueue.push(k),k.then(function(){M.log('Media-keys set for "'+u+'"'),S.push(k),M.setMediaKeysQueue=M.setMediaKeysQueue.filter(function(j){return-1===S.indexOf(j)})})},c.generateRequestWithPreferredKeySession=function(u,p,M,S){var k,j,N=this,G=null===(k=this.config.drmSystems)||void 0===k||null===(j=k[u.keySystem])||void 0===j?void 0:j.generateRequest;if(G)try{var K=G.call(this.hls,p,M,u);if(!K)throw new Error("Invalid response from configured generateRequest filter");p=K.initDataType,M=u.decryptdata.pssh=K.initData?new Uint8Array(K.initData):null}catch(ne){var $;if(this.warn(ne.message),null!==($=this.hls)&&void 0!==$&&$.config.debug)throw ne}if(null===M)return this.log('Skipping key-session request for "'+S+'" (no initData)'),Promise.resolve(u);var Z=this.getKeyIdString(u.decryptdata);this.log('Generating key-session request for "'+S+'": '+Z+" (init data type: "+p+" length: "+(M?M.byteLength:null)+")");var te=new(D());u.mediaKeysSession.onmessage=function(ne){var se=u.mediaKeysSession;if(se){var ue=ne.messageType,ce=ne.message;N.log('"'+ue+'" message event for session "'+se.sessionId+'" message size: '+ce.byteLength),"license-request"===ue||"license-renewal"===ue?N.renewLicense(u,ce).catch(function(fe){N.handleError(fe),te.emit("error",fe)}):"license-release"===ue?u.keySystem===V.KeySystems.FAIRPLAY&&(N.updateKeySession(u,(0,Y.strToUtf8array)("acknowledged")),N.removeSession(u)):N.warn('unhandled media key message type "'+ue+'"')}else te.emit("error",new Error("invalid state"))},u.mediaKeysSession.onkeystatuseschange=function(ne){if(u.mediaKeysSession){N.onKeyStatusChange(u);var ue=u.keyStatus;te.emit("keyStatus",ue),"expired"===ue&&(N.warn(u.keySystem+" expired for key "+Z),N.renewKeySession(u))}else te.emit("error",new Error("invalid state"))};var q=new Promise(function(ne,se){te.on("error",se),te.on("keyStatus",function(ue){ue.startsWith("usable")?ne():"output-restricted"===ue?se(new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===ue?se(new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+ue+'"')):"expired"===ue?se(new Error("key expired while generating request")):N.warn('unhandled key status change "'+ue+'"')})});return u.mediaKeysSession.generateRequest(p,M).then(function(){var ne;N.log('Request generated for key-session "'+(null===(ne=u.mediaKeysSession)||void 0===ne?void 0:ne.sessionId)+'" keyId: '+Z)}).catch(function(ne){throw new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:ne,fatal:!1},"Error generating key-session request: "+ne)}).then(function(){return q}).catch(function(ne){throw te.removeAllListeners(),N.removeSession(u),ne}).then(function(){return te.removeAllListeners(),u})},c.onKeyStatusChange=function(u){var p=this;u.mediaKeysSession.keyStatuses.forEach(function(M,S){p.log('key status change "'+M+'" for keyStatuses keyId: '+L.default.hexDump("buffer"in S?new Uint8Array(S.buffer,S.byteOffset,S.byteLength):new Uint8Array(S))+" session keyId: "+L.default.hexDump(new Uint8Array(u.decryptdata.keyId||[]))+" uri: "+u.decryptdata.uri),u.keyStatus=M})},c.fetchServerCertificate=function(u){var p=this;return new Promise(function(M,S){var k=p.getServerCertificateUrl(u);if(!k)return M();p.log('Fetching serverCertificate for "'+u+'"');var j=new XMLHttpRequest;j.open("GET",k,!0),j.responseType="arraybuffer",j.onreadystatechange=function(){j.readyState===XMLHttpRequest.DONE&&(200===j.status?M(j.response):S(new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:j},'"'+u+'" certificate request XHR failed ('+k+"). Status: "+j.status+" ("+j.statusText+")")))},j.send()})},c.setMediaKeysServerCertificate=function(u,p,M){var S=this;return new Promise(function(k,j){u.setServerCertificate(M).then(function(N){S.log("setServerCertificate "+(N?"success":"not supported by CDM")+" ("+(null==M?void 0:M.byteLength)+') on "'+p+'"'),k(u)}).catch(function(N){j(new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:N,fatal:!0},N.message))})})},c.renewLicense=function(u,p){var M=this;return this.requestLicense(u,new Uint8Array(p)).then(function(S){return M.updateKeySession(u,new Uint8Array(S)).catch(function(k){throw new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:k,fatal:!0},k.message)})})},c.setupLicenseXHR=function(u,p,M,S){var k=this,j=this.config.licenseXhrSetup;return j?Promise.resolve().then(function(){if(!M.decryptdata)throw new Error("Key removed");return j.call(k.hls,u,p,M,S)}).catch(function(N){if(!M.decryptdata)throw N;return u.open("POST",p,!0),j.call(k.hls,u,p,M,S)}).then(function(N){return u.readyState||u.open("POST",p,!0),{xhr:u,licenseChallenge:N||S}}):(u.open("POST",p,!0),Promise.resolve({xhr:u,licenseChallenge:S}))},c.requestLicense=function(u,p){var M=this;return new Promise(function(S,k){var j=M.getLicenseServerUrl(u.keySystem);M.log("Sending license request to URL: "+j);var N=new XMLHttpRequest;N.responseType="arraybuffer",N.onreadystatechange=function(){if(!M.hls||!u.mediaKeysSession)return k(new Error("invalid state"));if(4===N.readyState)if(200===N.status){M._requestLicenseFailureCount=0;var G=N.response;M.log("License received "+(G instanceof ArrayBuffer?G.byteLength:G));var K=M.config.licenseResponseCallback;if(K)try{G=K.call(M.hls,N,j,u)}catch(Z){M.error(Z)}S(G)}else M._requestLicenseFailureCount++,M._requestLicenseFailureCount>3||N.status>=400&&N.status<500?k(new A({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:N},"License Request XHR failed ("+j+"). Status: "+N.status+" ("+N.statusText+")")):(M.warn("Retrying license request, "+(3-M._requestLicenseFailureCount+1)+" attempts left"),M.requestLicense(u,p).then(S,k))},u.licenseXhr&&u.licenseXhr.readyState!==XMLHttpRequest.DONE&&u.licenseXhr.abort(),u.licenseXhr=N,M.setupLicenseXHR(N,j,u,p).then(function(G){G.xhr.send(G.licenseChallenge)})})},c.onMediaAttached=function(u,p){if(this.config.emeEnabled){var M=p.media;this.media=M,M.addEventListener("encrypted",this.onMediaEncrypted),M.addEventListener("waitingforkey",this.onWaitingForKey)}},c.onMediaDetached=function(){var u=this,p=this.media,M=this.mediaKeySessions;p&&(p.removeEventListener("encrypted",this.onMediaEncrypted),p.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},F.LevelKey.clearKeyUriToKeyIdMap();var S=M.length;T.CDMCleanupPromise=Promise.all(M.map(function(k){return u.removeSession(k)}).concat(null==p?void 0:p.setMediaKeys(null).catch(function(k){u.log("Could not clear media keys: "+k+". media.src: "+(null==p?void 0:p.src))}))).then(function(){S&&(u.log("finished closing key sessions and clearing media keys"),M.length=0)}).catch(function(k){u.log("Could not close sessions and clear media keys: "+k+". media.src: "+(null==p?void 0:p.src))})},c.onManifestLoaded=function(u,p){var M=p.sessionKeys;if(M&&this.config.emeEnabled&&!this.keyFormatPromise){var S=M.reduce(function(k,j){return-1===k.indexOf(j.keyFormat)&&k.push(j.keyFormat),k},[]);this.log("Selecting key-system from session-keys "+S.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(S)}},c.removeSession=function(u){var p=this,M=u.mediaKeysSession,S=u.licenseXhr;if(M){this.log("Remove licenses and keys and close session "+M.sessionId),M.onmessage=null,M.onkeystatuseschange=null,S&&S.readyState!==XMLHttpRequest.DONE&&S.abort(),u.mediaKeysSession=u.decryptdata=u.licenseXhr=void 0;var k=this.mediaKeySessions.indexOf(u);return k>-1&&this.mediaKeySessions.splice(k,1),M.remove().catch(function(j){p.log("Could not remove session: "+j)}).then(function(){return M.close()}).catch(function(j){p.log("Could not close session: "+j)})}},T}();_.CDMCleanupPromise=void 0;var A=function(T){function c(d,u){var p;return(p=T.call(this,u)||this).data=void 0,p.data=d,d.err=d.error,p}return function x(T,c){T.prototype=Object.create(c.prototype),T.prototype.constructor=T,h(T,c)}(c,T),c}(w(Error));const E=_},"./src/controller/fps-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>V});var z=O("./src/events.ts"),B=O("./src/utils/logger.ts");const V=function(){function Y(F){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=F,this.registerListeners()}var U=Y.prototype;return U.setStreamController=function(L){this.streamController=L},U.registerListeners=function(){this.hls.on(z.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},U.unregisterListeners=function(){this.hls.off(z.Events.MEDIA_ATTACHING,this.onMediaAttaching)},U.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},U.onMediaAttaching=function(L,R){var P=this.hls.config;if(P.capLevelOnFPSDrop){var D=R.media instanceof self.HTMLVideoElement?R.media:null;this.media=D,D&&"function"==typeof D.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),P.fpsDroppedMonitoringPeriod)}},U.checkFPS=function(L,R,P){var D=performance.now();if(R){if(this.lastTime){var w=P-this.lastDroppedFrames,y=R-this.lastDecodedFrames,g=1e3*w/(D-this.lastTime),m=this.hls;if(m.trigger(z.Events.FPS_DROP,{currentDropped:w,currentDecoded:y,totalDroppedFrames:P}),g>0&&w>m.config.fpsDroppedMonitoringThreshold*y){var h=m.currentLevel;B.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(-1===m.autoLevelCapping||m.autoLevelCapping>=h)&&(m.trigger(z.Events.FPS_DROP_LEVEL_CAPPING,{level:h-=1,droppedLevel:m.currentLevel}),m.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=D,this.lastDroppedFrames=P,this.lastDecodedFrames=R}},U.checkFPSInterval=function(){var L=this.media;if(L)if(this.isVideoPlaybackQualityAvailable){var R=L.getVideoPlaybackQuality();this.checkFPS(L,R.totalVideoFrames,R.droppedVideoFrames)}else this.checkFPS(L,L.webkitDecodedFrameCount,L.webkitDroppedFrameCount)},Y}()},"./src/controller/fragment-finders.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{findFragWithCC:()=>F,findFragmentByPDT:()=>W,findFragmentByPTS:()=>V,fragmentWithinToleranceTest:()=>Y,pdtWithinToleranceTest:()=>U});var z=O("./src/polyfills/number.ts"),B=O("./src/utils/binary-search.ts");function W(L,R,P){if(null===R||!Array.isArray(L)||!L.length||!(0,z.isFiniteNumber)(R))return null;if(R<(L[0].programDateTime||0))return null;if(R>=(L[L.length-1].endProgramDateTime||0))return null;P=P||0;for(var w=0;w<L.length;++w){var y=L[w];if(U(R,P,y))return y}return null}function V(L,R,P,D){void 0===P&&(P=0),void 0===D&&(D=0);var x=null;if(L?x=R[L.sn-R[0].sn+1]||null:0===P&&0===R[0].start&&(x=R[0]),x&&0===Y(P,D,x))return x;var w=B.default.search(R,Y.bind(null,P,D));return!w||w===L&&x?x:w}function Y(L,R,P){if(void 0===L&&(L=0),void 0===R&&(R=0),P.start<=L&&P.start+P.duration>L)return 0;var D=Math.min(R,P.duration+(P.deltaPTS?P.deltaPTS:0));return P.start+P.duration-D<=L?1:P.start-D>L&&P.start?-1:0}function U(L,R,P){var D=1e3*Math.min(R,P.duration+(P.deltaPTS?P.deltaPTS:0));return(P.endProgramDateTime||0)-D>L}function F(L,R){return B.default.search(L,function(P){return P.cc<R?1:P.cc>R?-1:0})}},"./src/controller/fragment-tracker.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{FragmentState:()=>W,FragmentTracker:()=>V});var z=O("./src/events.ts"),B=O("./src/types/loader.ts"),W=(()=>{return(F=W||(W={})).NOT_LOADED="NOT_LOADED",F.APPENDING="APPENDING",F.PARTIAL="PARTIAL",F.OK="OK",W;var F})(),V=function(){function F(R){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=R,this._registerListeners()}var L=F.prototype;return L._registerListeners=function(){var P=this.hls;P.on(z.Events.BUFFER_APPENDED,this.onBufferAppended,this),P.on(z.Events.FRAG_BUFFERED,this.onFragBuffered,this),P.on(z.Events.FRAG_LOADED,this.onFragLoaded,this)},L._unregisterListeners=function(){var P=this.hls;P.off(z.Events.BUFFER_APPENDED,this.onBufferAppended,this),P.off(z.Events.FRAG_BUFFERED,this.onFragBuffered,this),P.off(z.Events.FRAG_LOADED,this.onFragLoaded,this)},L.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},L.getAppendedFrag=function(P,D){if(D===B.PlaylistLevelType.MAIN){var x=this.activeFragment,w=this.activeParts;if(!x)return null;if(w)for(var y=w.length;y--;){var g=w[y],m=g?g.end:x.appendedPTS;if(g.start<=P&&void 0!==m&&P<=m)return y>9&&(this.activeParts=w.slice(y-9)),g}else if(x.start<=P&&void 0!==x.appendedPTS&&P<=x.appendedPTS)return x}return this.getBufferedFrag(P,D)},L.getBufferedFrag=function(P,D){for(var x=this.fragments,w=Object.keys(x),y=w.length;y--;){var g=x[w[y]];if((null==g?void 0:g.body.type)===D&&g.buffered){var m=g.body;if(m.start<=P&&P<=m.end)return m}}return null},L.detectEvictedFragments=function(P,D,x){var w=this;this.timeRanges&&(this.timeRanges[P]=D),Object.keys(this.fragments).forEach(function(y){var g=w.fragments[y];if(g){if(!g.buffered&&!g.loaded)return void(g.body.type===x&&w.removeFragment(g.body));var m=g.range[P];!m||m.time.some(function(h){var b=!w.isTimeBuffered(h.startPTS,h.endPTS,D);return b&&w.removeFragment(g.body),b})}})},L.detectPartialFragments=function(P){var D=this,x=this.timeRanges,w=P.frag,y=P.part;if(x&&"initSegment"!==w.sn){var g=U(w),m=this.fragments[g];!m||(Object.keys(x).forEach(function(h){var b=w.elementaryStreams[h];b&&(m.range[h]=D.getBufferedTimes(w,y,null!==y||!0===b.partial,x[h]))}),m.loaded=null,Object.keys(m.range).length?(m.buffered=!0,m.body.endList&&(this.endListFragments[m.body.type]=m)):this.removeFragment(m.body))}},L.fragBuffered=function(P){var D=U(P),x=this.fragments[D];x&&(x.loaded=null,x.buffered=!0)},L.getBufferedTimes=function(P,D,x,w){for(var y={time:[],partial:x},g=D?D.start:P.start,m=D?D.end:P.end,h=P.minEndPTS||m,b=P.maxStartPTS||g,C=0;C<w.length;C++){var f=w.start(C)-this.bufferPadding,_=w.end(C)+this.bufferPadding;if(b>=f&&h<=_){y.time.push({startPTS:Math.max(g,w.start(C)),endPTS:Math.min(m,w.end(C))});break}if(g<_&&m>f)y.partial=!0,y.time.push({startPTS:Math.max(g,w.start(C)),endPTS:Math.min(m,w.end(C))});else if(m<=f)break}return y},L.getPartialFragment=function(P){var x,w,y,D=null,g=0,m=this.bufferPadding,h=this.fragments;return Object.keys(h).forEach(function(b){var C=h[b];!C||Y(C)&&(y=C.body.end+m,P>=(w=C.body.start-m)&&P<=y&&(x=Math.min(P-w,y-P),g<=x&&(D=C.body,g=x)))}),D},L.isEndListAppended=function(P){var D=this.endListFragments[P];return void 0!==D&&(D.buffered||Y(D))},L.getState=function(P){var D=U(P),x=this.fragments[D];return x?x.buffered?Y(x)?W.PARTIAL:W.OK:W.APPENDING:W.NOT_LOADED},L.isTimeBuffered=function(P,D,x){for(var w,y,g=0;g<x.length;g++){if(w=x.start(g)-this.bufferPadding,y=x.end(g)+this.bufferPadding,P>=w&&D<=y)return!0;if(D<=w)return!1}return!1},L.onFragLoaded=function(P,D){var x=D.frag;if("initSegment"!==x.sn&&!x.bitrateTest&&!D.part){var y=U(x);this.fragments[y]={body:x,loaded:D,buffered:!1,range:Object.create(null)}}},L.onBufferAppended=function(P,D){var x=this,w=D.frag,y=D.part,g=D.timeRanges;if(w.type===B.PlaylistLevelType.MAIN)if(this.activeFragment!==w&&(this.activeFragment=w,w.appendedPTS=void 0),y){var m=this.activeParts;m||(this.activeParts=m=[]),m.push(y)}else this.activeParts=null;this.timeRanges=g,Object.keys(g).forEach(function(h){var b=g[h];if(x.detectEvictedFragments(h,b),!y&&w.type===B.PlaylistLevelType.MAIN){var C=w.elementaryStreams[h];if(!C)return;for(var f=0;f<b.length;f++){var _=b.end(f);w.appendedPTS=_<=C.endPTS&&_>C.startPTS?Math.max(_,w.appendedPTS||0):C.endPTS}}})},L.onFragBuffered=function(P,D){this.detectPartialFragments(D)},L.hasFragment=function(P){var D=U(P);return!!this.fragments[D]},L.removeFragmentsInRange=function(P,D,x){var w=this;Object.keys(this.fragments).forEach(function(y){var g=w.fragments[y];if(g&&g.buffered){var m=g.body;m.type===x&&m.start<D&&m.end>P&&w.removeFragment(m)}})},L.removeFragment=function(P){var D=U(P);P.stats.loaded=0,P.clearElementaryStreamInfo(),P.appendedPTS=void 0,delete this.fragments[D],P.endList&&delete this.endListFragments[P.type]},L.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},F}();function Y(F){var L,R;return F.buffered&&((null===(L=F.range.video)||void 0===L?void 0:L.partial)||(null===(R=F.range.audio)||void 0===R?void 0:R.partial))}function U(F){return F.type+"_"+F.level+"_"+F.urlId+"_"+F.sn}},"./src/controller/gap-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{MAX_START_GAP_JUMP:()=>U,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>F,SKIP_BUFFER_RANGE_START:()=>L,STALL_MINIMUM_DURATION_MS:()=>Y,default:()=>R});var z=O("./src/utils/buffer-helper.ts"),B=O("./src/errors.ts"),W=O("./src/events.ts"),V=O("./src/utils/logger.ts"),Y=250,U=2,F=.1,L=.05,R=function(){function P(x,w,y,g){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=x,this.media=w,this.fragmentTracker=y,this.hls=g}var D=P.prototype;return D.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},D.poll=function(w,y){var g=this.config,m=this.media,h=this.stalled;if(null!==m){var b=m.currentTime,C=m.seeking,f=this.seeking&&!C,_=!this.seeking&&C;if(this.seeking=C,b!==w){if(this.moved=!0,null!==h){if(this.stallReported){var A=self.performance.now()-h;V.logger.warn("playback not stuck anymore @"+b+", after "+Math.round(A)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((_||f)&&(this.stalled=null),!(m.paused&&!C||m.ended||0===m.playbackRate)&&z.BufferHelper.getBuffered(m).length){var E=z.BufferHelper.bufferInfo(m,b,0),c=E.nextStart||0;if(E.len>0||c){if(C){var d=E.len>U,u=!c||y&&y.start<=b||c-b>U&&!this.fragmentTracker.getPartialFragment(b);if(d||u)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,M=Math.max(c,E.start||0)-b,S=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,k=null==S||null===(p=S.details)||void 0===p?void 0:p.live;if(M>0&&M<=(k?2*S.details.targetduration:U))return void this._trySkipBufferHole(null)}var N=self.performance.now();if(null===h)return void(this.stalled=N);var G=N-h;if(C||!(G>=Y)||(this._reportStall(E),this.media)){var K=z.BufferHelper.bufferInfo(m,b,g.maxBufferHole);this._tryFixBufferStall(K,G)}}}}},D._tryFixBufferStall=function(w,y){var g=this.config,h=this.media;if(null!==h){var C=this.fragmentTracker.getPartialFragment(h.currentTime);if(C&&(this._trySkipBufferHole(C)||!this.media))return;w.len>g.maxBufferHole&&y>1e3*g.highBufferWatchdogPeriod&&(V.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},D._reportStall=function(w){var y=this.hls,g=this.media;!this.stallReported&&g&&(this.stallReported=!0,V.logger.warn("Playback stalling at @"+g.currentTime+" due to low buffer ("+JSON.stringify(w)+")"),y.trigger(W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:w.len}))},D._trySkipBufferHole=function(w){var y=this.config,g=this.hls,m=this.media;if(null===m)return 0;for(var h=m.currentTime,b=0,C=z.BufferHelper.getBuffered(m),f=0;f<C.length;f++){var _=C.start(f);if(h+y.maxBufferHole>=b&&h<_){var A=Math.max(_+L,m.currentTime+F);return V.logger.warn("skipping hole, adjusting currentTime from "+h+" to "+A),this.moved=!0,this.stalled=null,m.currentTime=A,w&&g.trigger(W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+h+" to "+A,frag:w}),A}b=C.end(f)}return 0},D._tryNudgeBuffer=function(){var w=this.config,y=this.hls,g=this.media,m=this.nudgeRetry;if(null!==g){var h=g.currentTime;if(this.nudgeRetry++,m<w.nudgeMaxRetry){var b=h+(m+1)*w.nudgeOffset;V.logger.warn("Nudging 'currentTime' from "+h+" to "+b),g.currentTime=b,y.trigger(W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else V.logger.error("Playhead still not moving while enough data buffered @"+h+" after "+w.nudgeMaxRetry+" nudges"),y.trigger(W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},P}()},"./src/controller/id3-track-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>w});var z=O("./src/polyfills/number.ts"),B=O("./src/events.ts"),W=O("./src/utils/texttrack-utils.ts"),V=O("./src/demux/id3.ts"),Y=O("./src/loader/date-range.ts"),U=O("./src/types/demuxer.ts");function L(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var R=function(){var y=L();try{new y(0,Number.POSITIVE_INFINITY,"")}catch(g){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function P(y,g){return y.getTime()/1e3-g}function D(y){return Uint8Array.from(y.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}const w=function(){function y(m){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=m,this._registerListeners()}var g=y.prototype;return g.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},g._registerListeners=function(){var h=this.hls;h.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.on(B.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),h.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),h.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},g._unregisterListeners=function(){var h=this.hls;h.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),h.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.off(B.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),h.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),h.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},g.onMediaAttached=function(h,b){this.media=b.media},g.onMediaDetaching=function(){!this.id3Track||((0,W.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},g.onManifestLoading=function(){this.dateRangeCuesAppended={}},g.createTrack=function(h){var b=this.getID3Track(h.textTracks);return b.mode="hidden",b},g.getID3Track=function(h){if(this.media){for(var b=0;b<h.length;b++){var C=h[b];if("metadata"===C.kind&&"id3"===C.label)return(0,W.sendAddTrackEvent)(C,this.media),C}return this.media.addTextTrack("metadata","id3")}},g.onFragParsingMetadata=function(h,b){if(this.media){var C=this.hls.config,f=C.enableEmsgMetadataCues,_=C.enableID3MetadataCues;if(f||_){var A=b.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var E=L(),T=0;T<A.length;T++){var c=A[T].type;if((c!==U.MetadataSchema.emsg||f)&&_){var d=V.getID3Frames(A[T].data);if(d){var u=A[T].pts,p=u+A[T].duration;p>R&&(p=R),p-u<=0&&(p=u+.25);for(var S=0;S<d.length;S++){var k=d[S];if(!V.isTimeStampFrame(k)){this.updateId3CueEnds(u);var j=new E(u,p,"");j.value=k,c&&(j.type=c),this.id3Track.addCue(j)}}}}}}}},g.updateId3CueEnds=function(h){var b,C=null===(b=this.id3Track)||void 0===b?void 0:b.cues;if(C)for(var f=C.length;f--;){var _=C[f];_.startTime<h&&_.endTime===R&&(_.endTime=h)}},g.onBufferFlushing=function(h,b){var _=b.type,A=this.id3Track,E=this.hls;if(E){var T=E.config,c=T.enableEmsgMetadataCues,d=T.enableID3MetadataCues;A&&(c||d)&&(0,W.removeCuesInRange)(A,b.startOffset,b.endOffset,"audio"===_?function(M){return M.type===U.MetadataSchema.audioId3&&d}:"video"===_?function(M){return M.type===U.MetadataSchema.emsg&&c}:function(M){return M.type===U.MetadataSchema.audioId3&&d||M.type===U.MetadataSchema.emsg&&c})}},g.onLevelUpdated=function(h,b){var C=this,f=b.details;if(this.media&&f.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var _=this.dateRangeCuesAppended,A=this.id3Track,E=f.dateRanges,T=Object.keys(E);if(A)for(var c=Object.keys(_).filter(function(N){return!T.includes(N)}),d=function(G){var K=c[G];Object.keys(_[K].cues).forEach(function($){A.removeCue(_[K].cues[$])}),delete _[K]},u=c.length;u--;)d(u);var p=f.fragments[f.fragments.length-1];if(0!==T.length&&(0,z.isFiniteNumber)(null==p?void 0:p.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var M=p.programDateTime/1e3-p.start,S=L(),k=function(G){var K=T[G],$=E[K],Z=_[K],te=(null==Z?void 0:Z.cues)||{},q=(null==Z?void 0:Z.durationKnown)||!1,ne=P($.startDate,M),se=R,ue=$.endDate;if(ue)se=P(ue,M),q=!0;else if($.endOnNext&&!q){var ce=T.reduce(function(Te,Ze){var lt=E[Ze];return lt.class===$.class&&lt.id!==Ze&&lt.startDate>$.startDate&&Te.push(lt),Te},[]).sort(function(Te,Ze){return Te.startDate.getTime()-Ze.startDate.getTime()})[0];ce&&(se=P(ce.startDate,M),q=!0)}for(var fe=Object.keys($.attr),ve=0;ve<fe.length;ve++){var Re=fe[ve];if(Re!==Y.DateRangeAttribute.ID&&Re!==Y.DateRangeAttribute.CLASS&&Re!==Y.DateRangeAttribute.START_DATE&&Re!==Y.DateRangeAttribute.DURATION&&Re!==Y.DateRangeAttribute.END_DATE&&Re!==Y.DateRangeAttribute.END_ON_NEXT){var Ee=te[Re];if(Ee)q&&!Z.durationKnown&&(Ee.endTime=se);else{var ye=$.attr[Re];Ee=new S(ne,se,""),(Re===Y.DateRangeAttribute.SCTE35_OUT||Re===Y.DateRangeAttribute.SCTE35_IN)&&(ye=D(ye)),Ee.value={key:Re,data:ye},Ee.type=U.MetadataSchema.dateRange,C.id3Track.addCue(Ee),te[Re]=Ee}}}_[K]={cues:te,dateRange:$,durationKnown:q}},j=0;j<T.length;j++)k(j)}}},y}()},"./src/controller/latency-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>L});var z=O("./src/errors.ts"),B=O("./src/events.ts"),W=O("./src/utils/logger.ts");function V(R,P){for(var D=0;D<P.length;D++){var x=P[D];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(R,U(x.key),x)}}function U(R){var P=function F(R,P){if("object"!=typeof R||null===R)return R;var D=R[Symbol.toPrimitive];if(void 0!==D){var x=D.call(R,P||"default");if("object"!=typeof x)return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(R)}(R,"string");return"symbol"==typeof P?P:String(P)}var L=function(){function R(D){var x=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return x.timeupdate()},this.hls=D,this.config=D.config,this.registerListeners()}var P=R.prototype;return P.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},P.registerListeners=function(){this.hls.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(B.Events.ERROR,this.onError,this)},P.unregisterListeners=function(){this.hls.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(B.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(B.Events.ERROR,this.onError)},P.onMediaAttached=function(x,w){this.media=w.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},P.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},P.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},P.onLevelUpdated=function(x,w){var y=w.details;this.levelDetails=y,y.advanced&&this.timeupdate(),!y.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},P.onError=function(x,w){w.details===z.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,W.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},P.timeupdate=function(){var x=this.media,w=this.levelDetails;if(x&&w){this.currentTime=x.currentTime;var y=this.computeLatency();if(null!==y){this._latency=y;var g=this.config,h=g.maxLiveSyncPlaybackRate;if(g.lowLatencyMode&&1!==h){var b=this.targetLatency;if(null!==b){var C=y-b,f=Math.min(this.maxLatency,b+w.targetduration);if(w.live&&C<f&&C>.05&&this.forwardBufferLength>1){var A=Math.min(2,Math.max(1,h)),E=Math.round(2/(1+Math.exp(-.75*C-this.edgeStalled))*20)/20;x.playbackRate=Math.min(A,Math.max(1,E))}else 1!==x.playbackRate&&0!==x.playbackRate&&(x.playbackRate=1)}}}}},P.estimateLiveEdge=function(){var x=this.levelDetails;return null===x?null:x.edge+x.age},P.computeLatency=function(){var x=this.estimateLiveEdge();return null===x?null:x-this.currentTime},function Y(R,P,D){P&&V(R.prototype,P),D&&V(R,D),Object.defineProperty(R,"prototype",{writable:!1})}(R,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var x=this.config,w=this.levelDetails;return void 0!==x.liveMaxLatencyDuration?x.liveMaxLatencyDuration:w?x.liveMaxLatencyDurationCount*w.targetduration:0}},{key:"targetLatency",get:function(){var x=this.levelDetails;if(null===x)return null;var g=x.targetduration,m=this.config,h=m.liveSyncDuration,f=this.hls.userConfig,_=m.lowLatencyMode&&x.partHoldBack||x.holdBack;return(f.liveSyncDuration||f.liveSyncDurationCount||0===_)&&(_=void 0!==h?h:m.liveSyncDurationCount*g),_+Math.min(1*this.stallCount,g)}},{key:"liveSyncPosition",get:function(){var x=this.estimateLiveEdge(),w=this.targetLatency,y=this.levelDetails;if(null===x||null===w||null===y)return null;var g=y.edge,b=g-(this.config.lowLatencyMode&&y.partTarget||y.targetduration);return Math.min(Math.max(g-y.totalduration,x-w-this.edgeStalled),b)}},{key:"drift",get:function(){var x=this.levelDetails;return null===x?1:x.drift}},{key:"edgeStalled",get:function(){var x=this.levelDetails;return null===x?0:Math.max(x.age-3*(this.config.lowLatencyMode&&x.partTarget||x.targetduration),0)}},{key:"forwardBufferLength",get:function(){var x=this.media,w=this.levelDetails;if(!x||!w)return 0;var y=x.buffered.length;return(y?x.buffered.end(y-1):w.edge)-this.currentTime}}]),R}()},"./src/controller/level-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>m});var z=O("./src/types/level.ts"),B=O("./src/events.ts"),W=O("./src/errors.ts"),V=O("./src/utils/codecs.ts"),Y=O("./src/controller/level-helper.ts"),U=O("./src/controller/base-playlist-controller.ts"),F=O("./src/types/loader.ts");function L(){return L=Object.assign?Object.assign.bind():function(h){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var f in C)Object.prototype.hasOwnProperty.call(C,f)&&(h[f]=C[f])}return h},L.apply(this,arguments)}function R(h,b){for(var C=0;C<b.length;C++){var f=b[C];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,D(f.key),f)}}function D(h){var b=function x(h,b){if("object"!=typeof h||null===h)return h;var C=h[Symbol.toPrimitive];if(void 0!==C){var f=C.call(h,b||"default");if("object"!=typeof f)return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(h)}(h,"string");return"symbol"==typeof b?b:String(b)}function y(h,b){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,_){return f.__proto__=_,f})(h,b)}var g=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),m=function(h){function b(f){var _;return(_=h.call(this,f,"[level-controller]")||this)._levels=[],_._firstLevel=-1,_._startLevel=void 0,_.currentLevelIndex=-1,_.manualLevelIndex=-1,_.onParsedComplete=void 0,_._registerListeners(),_}!function w(h,b){h.prototype=Object.create(b.prototype),h.prototype.constructor=h,y(h,b)}(b,h);var C=b.prototype;return C._registerListeners=function(){var _=this.hls;_.on(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),_.on(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.on(B.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),_.on(B.Events.ERROR,this.onError,this)},C._unregisterListeners=function(){var _=this.hls;_.off(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),_.off(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.off(B.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),_.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),_.off(B.Events.ERROR,this.onError,this)},C.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,h.prototype.destroy.call(this)},C.startLoad=function(){this._levels.forEach(function(A){A.loadError=0}),h.prototype.startLoad.call(this)},C.onManifestLoaded=function(_,A){var d,p,E=[],T=[],c=[],u={},M=!1,S=!1,k=!1;if(A.levels.forEach(function(K){var $=K.attrs;M=M||!(!K.width||!K.height),S=S||!!K.videoCodec,k=k||!!K.audioCodec,g&&K.audioCodec&&-1!==K.audioCodec.indexOf("mp4a.40.34")&&(K.audioCodec=void 0);var Z=K.bitrate+"-"+K.attrs.RESOLUTION+"-"+K.attrs.CODECS;(p=u[Z])?p.url.push(K.url):(p=new z.Level(K),u[Z]=p,E.push(p)),$&&($.AUDIO&&(0,Y.addGroupId)(p,"audio",$.AUDIO),$.SUBTITLES&&(0,Y.addGroupId)(p,"text",$.SUBTITLES))}),(M||S)&&k&&(E=E.filter(function(K){return!!K.videoCodec||!(!K.width||!K.height)})),E=E.filter(function(K){var $=K.audioCodec,Z=K.videoCodec;return(!$||(0,V.isCodecSupportedInMp4)($,"audio"))&&(!Z||(0,V.isCodecSupportedInMp4)(Z,"video"))}),A.audioTracks&&(T=A.audioTracks.filter(function(K){return!K.audioCodec||(0,V.isCodecSupportedInMp4)(K.audioCodec,"audio")}),(0,Y.assignTrackIdsByGroup)(T)),A.subtitles&&(0,Y.assignTrackIdsByGroup)(c=A.subtitles),E.length>0){d=E[0].bitrate,E.sort(function(K,$){return K.attrs["HDCP-LEVEL"]!==$.attrs["HDCP-LEVEL"]?(K.attrs["HDCP-LEVEL"]||"")>($.attrs["HDCP-LEVEL"]||"")?1:-1:K.bitrate!==$.bitrate?K.bitrate-$.bitrate:K.attrs.SCORE!==$.attrs.SCORE?K.attrs.decimalFloatingPoint("SCORE")-$.attrs.decimalFloatingPoint("SCORE"):M&&K.height!==$.height?K.height-$.height:0}),this._levels=E;for(var j=0;j<E.length;j++)if(E[j].bitrate===d){this._firstLevel=j,this.log("manifest loaded, "+E.length+" level(s) found, first bitrate: "+d);break}var G={levels:E,audioTracks:T,subtitleTracks:c,sessionData:A.sessionData,sessionKeys:A.sessionKeys,firstLevel:this._firstLevel,stats:A.stats,audio:k,video:S,altAudio:!(k&&!S)&&T.some(function(K){return!!K.url})};this.hls.trigger(B.Events.MANIFEST_PARSED,G),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(B.Events.ERROR,{type:W.ErrorTypes.MEDIA_ERROR,details:W.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:A.url,reason:"no level with compatible codecs found in manifest"})},C.onError=function(_,A){var E,T;if(h.prototype.onError.call(this,_,A),!A.fatal){var c=A.context,d=this._levels[this.currentLevelIndex];if(c&&(c.type===F.PlaylistContextType.AUDIO_TRACK&&d.audioGroupIds&&c.groupId===d.audioGroupIds[d.urlId]||c.type===F.PlaylistContextType.SUBTITLE_TRACK&&d.textGroupIds&&c.groupId===d.textGroupIds[d.urlId]))return void this.redundantFailover(this.currentLevelIndex);var M,u=!1,p=!0;switch(A.details){case W.ErrorDetails.FRAG_LOAD_ERROR:case W.ErrorDetails.FRAG_LOAD_TIMEOUT:case W.ErrorDetails.KEY_LOAD_ERROR:case W.ErrorDetails.KEY_LOAD_TIMEOUT:if(A.frag){var S=A.frag.type===F.PlaylistLevelType.MAIN?A.frag.level:this.currentLevelIndex,k=this._levels[S];k?(k.fragmentError++,k.fragmentError>this.hls.config.fragLoadingMaxRetry&&(M=S)):M=S}break;case W.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var j=d.attrs["HDCP-LEVEL"];j&&(this.hls.maxHdcpLevel=z.HdcpLevels[z.HdcpLevels.indexOf(j)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case W.ErrorDetails.FRAG_PARSING_ERROR:case W.ErrorDetails.KEY_SYSTEM_NO_SESSION:M=(null===(E=A.frag)||void 0===E?void 0:E.type)===F.PlaylistLevelType.MAIN?A.frag.level:this.currentLevelIndex,A.levelRetry=!1;break;case W.ErrorDetails.LEVEL_LOAD_ERROR:case W.ErrorDetails.LEVEL_LOAD_TIMEOUT:c&&(c.deliveryDirectives&&(p=!1),M=c.level),u=!0;break;case W.ErrorDetails.REMUX_ALLOC_ERROR:M=null!=(T=A.level)?T:this.currentLevelIndex,u=!0}void 0!==M&&this.recoverLevel(A,M,u,p)}},C.recoverLevel=function(_,A,E,T){var c=_.details,d=this._levels[A];if(d.loadError++,E){if(!this.retryLoadingOrFail(_))return void(this.currentLevelIndex=-1);_.levelRetry=!0}if(T){var p=d.url.length;if(p>1&&d.loadError<p)_.levelRetry=!0,this.redundantFailover(A);else if(-1===this.manualLevelIndex){for(var M=-1,S=this._levels,k=S.length;k--;){var j=(k+this.currentLevelIndex)%S.length;if(j!==this.currentLevelIndex&&0===S[j].loadError){M=j;break}}M>-1&&this.currentLevelIndex!==M?(this.warn(c+": switch to "+M),_.levelRetry=!0,this.hls.nextAutoLevel=M):!1===_.levelRetry&&(_.fatal=!0)}}},C.redundantFailover=function(_){var A=this._levels[_],E=A.url.length;if(E>1){var T=(A.urlId+1)%E;this.warn("Switching to redundant URL-id "+T),this._levels.forEach(function(c){c.urlId=T}),this.level=_}},C.onFragLoaded=function(_,A){var E=A.frag;if(void 0!==E&&E.type===F.PlaylistLevelType.MAIN){var T=this._levels[E.level];void 0!==T&&(T.fragmentError=0,T.loadError=0)}},C.onLevelLoaded=function(_,A){var E,u,T=A.level,c=A.details,d=this._levels[T];if(!d)return this.warn("Invalid level index "+T),void(null!==(u=A.deliveryDirectives)&&void 0!==u&&u.skip&&(c.deltaUpdateFailed=!0));T===this.currentLevelIndex?(0===d.fragmentError&&(d.loadError=0,this.retryCount=0),this.playlistLoaded(T,A,d.details)):null!==(E=A.deliveryDirectives)&&void 0!==E&&E.skip&&(c.deltaUpdateFailed=!0)},C.onAudioTrackSwitched=function(_,A){var E=this.hls.levels[this.currentLevelIndex];if(E&&E.audioGroupIds){for(var T=-1,c=this.hls.audioTracks[A.id].groupId,d=0;d<E.audioGroupIds.length;d++)if(E.audioGroupIds[d]===c){T=d;break}T!==E.urlId&&(E.urlId=T,this.startLoad())}},C.loadPlaylist=function(_){h.prototype.loadPlaylist.call(this);var A=this.currentLevelIndex,E=this._levels[A];if(this.canLoad&&E&&E.url.length>0){var T=E.urlId,c=E.url[T];if(_)try{c=_.addDirectives(c)}catch(d){this.warn("Could not construct new URL with HLS Delivery Directives: "+d)}this.log("Attempt loading level index "+A+(void 0!==(null==_?void 0:_.msn)?" at sn "+_.msn+" part "+_.part:"")+" with URL-id "+T+" "+c),this.clearTimer(),this.hls.trigger(B.Events.LEVEL_LOADING,{url:c,level:A,id:T,deliveryDirectives:_||null})}},C.removeLevel=function(_,A){var E=function(d,u){return u!==A},T=this._levels.filter(function(c,d){return d!==_||c.url.length>1&&void 0!==A&&(c.url=c.url.filter(E),c.audioGroupIds&&(c.audioGroupIds=c.audioGroupIds.filter(E)),c.textGroupIds&&(c.textGroupIds=c.textGroupIds.filter(E)),c.urlId=0,!0)}).map(function(c,d){var u=c.details;return null!=u&&u.fragments&&u.fragments.forEach(function(p){p.level=d}),c});this._levels=T,this.hls.trigger(B.Events.LEVELS_UPDATED,{levels:T})},function P(h,b,C){b&&R(h.prototype,b),C&&R(h,C),Object.defineProperty(h,"prototype",{writable:!1})}(b,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(_){var A,E=this._levels;if(0!==E.length&&(this.currentLevelIndex!==_||null===(A=E[_])||void 0===A||!A.details)){if(_<0||_>=E.length){var T=_<0;if(this.hls.trigger(B.Events.ERROR,{type:W.ErrorTypes.OTHER_ERROR,details:W.ErrorDetails.LEVEL_SWITCH_ERROR,level:_,fatal:T,reason:"invalid level idx"}),T)return;_=Math.min(_,E.length-1)}this.clearTimer();var c=this.currentLevelIndex,d=E[c],u=E[_];this.log("switching to level "+_+" from "+c),this.currentLevelIndex=_;var p=L({},u,{level:_,maxBitrate:u.maxBitrate,uri:u.uri,urlId:u.urlId});delete p._urlId,this.hls.trigger(B.Events.LEVEL_SWITCHING,p);var M=u.details;if(!M||M.live){var S=this.switchParams(u.uri,null==d?void 0:d.details);this.loadPlaylist(S)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(_){this.manualLevelIndex=_,void 0===this._startLevel&&(this._startLevel=_),-1!==_&&(this.level=_)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(_){this._firstLevel=_}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var _=this.hls.config.startLevel;return void 0!==_?_:this._firstLevel}return this._startLevel},set:function(_){this._startLevel=_}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(_){this.level=_,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=_)}}]),b}(U.default)},"./src/controller/level-helper.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{addGroupId:()=>Y,addSliding:()=>g,adjustSliding:()=>y,assignTrackIdsByGroup:()=>U,computeReloadInterval:()=>m,getFragmentWithSN:()=>h,getPartWith:()=>b,mapFragmentIntersection:()=>w,mapPartIntersection:()=>x,mergeDetails:()=>P,updateFragPTSDTS:()=>R,updatePTS:()=>F});var z=O("./src/polyfills/number.ts"),B=O("./src/utils/logger.ts"),W=O("./src/loader/date-range.ts");function V(){return V=Object.assign?Object.assign.bind():function(C){for(var f=1;f<arguments.length;f++){var _=arguments[f];for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&(C[A]=_[A])}return C},V.apply(this,arguments)}function Y(C,f,_){switch(f){case"audio":C.audioGroupIds||(C.audioGroupIds=[]),C.audioGroupIds.push(_);break;case"text":C.textGroupIds||(C.textGroupIds=[]),C.textGroupIds.push(_)}}function U(C){var f={};C.forEach(function(_){var A=_.groupId||"";_.id=f[A]=f[A]||0,f[A]++})}function F(C,f,_){L(C[f],C[_])}function L(C,f){var _=f.startPTS;if((0,z.isFiniteNumber)(_)){var E,A=0;f.sn>C.sn?(A=_-C.start,E=C):(A=C.start-_,E=f),E.duration!==A&&(E.duration=A)}else f.start=f.sn>C.sn?C.cc===f.cc&&C.minEndPTS?C.start+(C.minEndPTS-C.start):C.start+C.duration:Math.max(C.start-f.duration,0)}function R(C,f,_,A,E,T){A-_<=0&&(B.logger.warn("Fragment should have a positive duration",f),A=_+f.duration,T=E+f.duration);var d=_,u=A,p=f.startPTS,M=f.endPTS;if((0,z.isFiniteNumber)(p)){var S=Math.abs(p-_);f.deltaPTS=(0,z.isFiniteNumber)(f.deltaPTS)?Math.max(S,f.deltaPTS):S,d=Math.max(_,p),_=Math.min(_,p),E=Math.min(E,f.startDTS),u=Math.min(A,M),A=Math.max(A,M),T=Math.max(T,f.endDTS)}f.duration=A-_;var k=_-f.start;f.start=f.startPTS=_,f.maxStartPTS=d,f.startDTS=E,f.endPTS=A,f.minEndPTS=u,f.endDTS=T;var j=f.sn;if(!C||j<C.startSN||j>C.endSN)return 0;var N,G=j-C.startSN,K=C.fragments;for(K[G]=f,N=G;N>0;N--)L(K[N],K[N-1]);for(N=G;N<K.length-1;N++)L(K[N],K[N+1]);return C.fragmentHint&&L(K[K.length-1],C.fragmentHint),C.PTSKnown=C.alignedSliding=!0,k}function P(C,f){for(var _=null,A=C.fragments,E=A.length-1;E>=0;E--){var T=A[E].initSegment;if(T){_=T;break}}C.fragmentHint&&delete C.fragmentHint.endPTS;var d,c=0;if(w(C,f,function(N,G){N.relurl&&(c=N.cc-G.cc),(0,z.isFiniteNumber)(N.startPTS)&&(0,z.isFiniteNumber)(N.endPTS)&&(G.start=G.startPTS=N.startPTS,G.startDTS=N.startDTS,G.appendedPTS=N.appendedPTS,G.maxStartPTS=N.maxStartPTS,G.endPTS=N.endPTS,G.endDTS=N.endDTS,G.minEndPTS=N.minEndPTS,G.duration=N.endPTS-N.startPTS,G.duration&&(d=G),f.PTSKnown=f.alignedSliding=!0),G.elementaryStreams=N.elementaryStreams,G.loader=N.loader,G.stats=N.stats,G.urlId=N.urlId,N.initSegment&&(G.initSegment=N.initSegment,_=N.initSegment)}),_&&(f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments).forEach(function(N){var G;(!N.initSegment||N.initSegment.relurl===(null===(G=_)||void 0===G?void 0:G.relurl))&&(N.initSegment=_)}),f.skippedSegments)if(f.deltaUpdateFailed=f.fragments.some(function(N){return!N}),f.deltaUpdateFailed){B.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=f.skippedSegments;p--;)f.fragments.shift();f.startSN=f.fragments[0].sn,f.startCC=f.fragments[0].cc}else f.canSkipDateRanges&&(f.dateRanges=function D(C,f,_){var A=V({},C);return _&&_.forEach(function(E){delete A[E]}),Object.keys(f).forEach(function(E){var T=new W.DateRange(f[E].attr,A[E]);T.isValid?A[E]=T:B.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(f[E].attr)+'"')}),A}(C.dateRanges,f.dateRanges,f.recentlyRemovedDateranges));var M=f.fragments;if(c){B.logger.warn("discontinuity sliding from playlist, take drift into account");for(var S=0;S<M.length;S++)M[S].cc+=c}f.skippedSegments&&(f.startCC=f.fragments[0].cc),x(C.partList,f.partList,function(N,G){G.elementaryStreams=N.elementaryStreams,G.stats=N.stats}),d?R(f,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS):y(C,f),M.length&&(f.totalduration=f.edge-M[0].start),f.driftStartTime=C.driftStartTime,f.driftStart=C.driftStart;var k=f.advancedDateTime;if(f.advanced&&k){var j=f.edge;f.driftStart||(f.driftStartTime=k,f.driftStart=j),f.driftEndTime=k,f.driftEnd=j}else f.driftEndTime=C.driftEndTime,f.driftEnd=C.driftEnd,f.advancedDateTime=C.advancedDateTime}function x(C,f,_){if(C&&f)for(var A=0,E=0,T=C.length;E<=T;E++){var c=C[E],d=f[E+A];c&&d&&c.index===d.index&&c.fragment.sn===d.fragment.sn?_(c,d):A--}}function w(C,f,_){for(var A=f.skippedSegments,E=Math.max(C.startSN,f.startSN)-f.startSN,T=(C.fragmentHint?1:0)+(A?f.endSN:Math.min(C.endSN,f.endSN))-f.startSN,c=f.startSN-C.startSN,d=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments,u=C.fragmentHint?C.fragments.concat(C.fragmentHint):C.fragments,p=E;p<=T;p++){var M=u[c+p],S=d[p];A&&!S&&p<A&&(S=f.fragments[p]=M),M&&S&&_(M,S)}}function y(C,f){var _=f.startSN+f.skippedSegments-C.startSN,A=C.fragments;_<0||_>=A.length||g(f,A[_].start)}function g(C,f){if(f){for(var _=C.fragments,A=C.skippedSegments;A<_.length;A++)_[A].start+=f;C.fragmentHint&&(C.fragmentHint.start+=f)}}function m(C,f){void 0===f&&(f=1/0);var _=1e3*C.targetduration;if(C.updated){var A=C.fragments;if(A.length&&4*_>f){var T=1e3*A[A.length-1].duration;T<_&&(_=T)}}else _/=2;return Math.round(_)}function h(C,f,_){if(!C||!C.details)return null;var A=C.details,E=A.fragments[f-A.startSN];return E||(E=A.fragmentHint)&&E.sn===f?E:f<A.startSN&&_&&_.sn===f?_:null}function b(C,f,_){if(!C||!C.details)return null;var A=C.details.partList;if(A)for(var E=A.length;E--;){var T=A[E];if(T.index===_&&T.fragment.sn===f)return T}return null}},"./src/controller/stream-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>f});var z=O("./src/polyfills/number.ts"),B=O("./src/controller/base-stream-controller.ts"),W=O("./src/is-supported.ts"),V=O("./src/events.ts"),Y=O("./src/utils/buffer-helper.ts"),U=O("./src/controller/fragment-tracker.ts"),F=O("./src/types/loader.ts"),L=O("./src/loader/fragment.ts"),R=O("./src/demux/transmuxer-interface.ts"),P=O("./src/types/transmuxer.ts"),D=O("./src/controller/gap-controller.ts"),x=O("./src/errors.ts");function w(_,A){for(var E=0;E<A.length;E++){var T=A[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(_,g(T.key),T)}}function g(_){var A=function m(_,A){if("object"!=typeof _||null===_)return _;var E=_[Symbol.toPrimitive];if(void 0!==E){var T=E.call(_,A||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(_)}(_,"string");return"symbol"==typeof A?A:String(A)}function b(_,A){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,c){return T.__proto__=c,T})(_,A)}var f=function(_){function A(T,c,d){var u;return(u=_.call(this,T,c,d,"[stream-controller]")||this).audioCodecSwap=!1,u.gapController=null,u.level=-1,u._forceStartLoad=!1,u.altAudio=!1,u.audioOnly=!1,u.fragPlaying=null,u.onvplaying=null,u.onvseeked=null,u.fragLastKbps=0,u.couldBacktrack=!1,u.backtrackFragment=null,u.audioCodecSwitch=!1,u.videoBuffer=null,u._registerListeners(),u}!function h(_,A){_.prototype=Object.create(A.prototype),_.prototype.constructor=_,b(_,A)}(A,_);var E=A.prototype;return E._registerListeners=function(){var c=this.hls;c.on(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.on(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(V.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.on(V.Events.LEVEL_LOADING,this.onLevelLoading,this),c.on(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),c.on(V.Events.ERROR,this.onError,this),c.on(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.on(V.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),c.on(V.Events.BUFFER_CREATED,this.onBufferCreated,this),c.on(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.on(V.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),c.on(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var c=this.hls;c.off(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.off(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(V.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.off(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),c.off(V.Events.ERROR,this.onError,this),c.off(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.off(V.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),c.off(V.Events.BUFFER_CREATED,this.onBufferCreated,this),c.off(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.off(V.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),c.off(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},E.startLoad=function(c){if(this.levels){var d=this.lastCurrentTime,u=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var p=u.startLevel;-1===p&&(u.config.testBandwidth&&this.levels.length>1?(p=0,this.bitrateTest=!0):p=u.nextAutoLevel),this.level=u.nextLoadLevel=p,this.loadedmetadata=!1}d>0&&-1===c&&(this.log("Override startPosition with lastCurrentTime @"+d.toFixed(3)),c=d),this.state=B.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=c,this.tick()}else this._forceStartLoad=!0,this.state=B.State.STOPPED},E.stopLoad=function(){this._forceStartLoad=!1,_.prototype.stopLoad.call(this)},E.doTick=function(){switch(this.state){case B.State.IDLE:this.doTickIdle();break;case B.State.WAITING_LEVEL:var c,d=this.levels,p=null==d||null===(c=d[this.level])||void 0===c?void 0:c.details;if(p&&(!p.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(p))break;this.state=B.State.IDLE;break}break;case B.State.FRAG_LOADING_WAITING_RETRY:var M,S=self.performance.now(),k=this.retryDate;(!k||S>=k||null!==(M=this.media)&&void 0!==M&&M.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=B.State.IDLE)}this.onTickEnd()},E.onTickEnd=function(){_.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},E.doTickIdle=function(){var c=this.hls,u=this.levels,S=c.nextLoadLevel;if(null!==this.levelLastLoaded&&(this.media||!this.startFragRequested&&c.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&u&&u[S]){var k=u[S],j=this.getMainFwdBufferInfo();if(null!==j){var N=this.getLevelDetails();if(N&&this._streamEnded(j,N)){var G={};return this.altAudio&&(G.type="video"),this.hls.trigger(V.Events.BUFFER_EOS,G),void(this.state=B.State.ENDED)}this.level=c.nextLoadLevel=S;var K=k.details;if(!K||this.state===B.State.WAITING_LEVEL||K.live&&this.levelLastLoaded!==S)return this.level=S,void(this.state=B.State.WAITING_LEVEL);if(!(j.len>=this.getMaxBufferLength(k.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>j.end&&(this.backtrackFragment=null);var te=this.backtrackFragment?this.backtrackFragment.start:j.end,q=this.getNextFragment(te,K);if(this.couldBacktrack&&!this.fragPrevious&&q&&"initSegment"!==q.sn&&this.fragmentTracker.getState(q)!==U.FragmentState.OK){var ne,se=(null!=(ne=this.backtrackFragment)?ne:q).sn,ce=K.fragments[se-K.startSN-1];ce&&q.cc===ce.cc&&(q=ce,this.fragmentTracker.removeFragment(ce))}else this.backtrackFragment&&j.len&&(this.backtrackFragment=null);if(q&&this.fragmentTracker.getState(q)===U.FragmentState.OK&&this.nextLoadPosition>te){var fe=this.audioOnly&&!this.altAudio?L.ElementaryStreamTypes.AUDIO:L.ElementaryStreamTypes.VIDEO,ve=(fe===L.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ve&&this.afterBufferFlushed(ve,fe,F.PlaylistLevelType.MAIN),q=this.getNextFragment(this.nextLoadPosition,K)}!q||(q.initSegment&&!q.initSegment.data&&!this.bitrateTest&&(q=q.initSegment),this.loadFragment(q,K,te))}}}},E.loadFragment=function(c,d,u){var p,M=this.fragmentTracker.getState(c);this.fragCurrent=c,M===U.FragmentState.NOT_LOADED?"initSegment"===c.sn?this._loadInitSegment(c,d):this.bitrateTest?(this.log("Fragment "+c.sn+" of level "+c.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(c,d)):(this.startFragRequested=!0,_.prototype.loadFragment.call(this,c,d,u)):M===U.FragmentState.APPENDING?this.reduceMaxBufferLength(c.duration)&&this.fragmentTracker.removeFragment(c):0===(null===(p=this.media)||void 0===p?void 0:p.buffered.length)&&this.fragmentTracker.removeAllFragments()},E.getAppendedFrag=function(c){var d=this.fragmentTracker.getAppendedFrag(c,F.PlaylistLevelType.MAIN);return d&&"fragment"in d?d.fragment:d},E.getBufferedFrag=function(c){return this.fragmentTracker.getBufferedFrag(c,F.PlaylistLevelType.MAIN)},E.followingBufferedFrag=function(c){return c?this.getBufferedFrag(c.end+.5):null},E.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},E.nextLevelSwitch=function(){var c=this.levels,d=this.media;if(null!=d&&d.readyState){var u,p=this.getAppendedFrag(d.currentTime);if(p&&p.start>1&&this.flushMainBuffer(0,p.start-1),!d.paused&&c){var k=this.fragLastKbps;u=k&&this.fragCurrent?this.fragCurrent.duration*c[this.hls.nextLoadLevel].maxBitrate/(1e3*k)+1:0}else u=0;var j=this.getBufferedFrag(d.currentTime+u);if(j){var N=this.followingBufferedFrag(j);if(N){this.abortCurrentFrag();var K=N.duration,$=Math.max(j.end,(N.maxStartPTS?N.maxStartPTS:N.start)+Math.min(Math.max(K-this.config.maxFragLookUpTolerance,.5*K),.75*K));this.flushMainBuffer($,Number.POSITIVE_INFINITY)}}}},E.abortCurrentFrag=function(){var c=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,c&&c.abortRequests(),this.state){case B.State.KEY_LOADING:case B.State.FRAG_LOADING:case B.State.FRAG_LOADING_WAITING_RETRY:case B.State.PARSING:case B.State.PARSED:this.state=B.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},E.flushMainBuffer=function(c,d){_.prototype.flushMainBuffer.call(this,c,d,this.altAudio?"video":null)},E.onMediaAttached=function(c,d){_.prototype.onMediaAttached.call(this,c,d);var u=d.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),u.addEventListener("playing",this.onvplaying),u.addEventListener("seeked",this.onvseeked),this.gapController=new D.default(this.config,u,this.fragmentTracker,this.hls)},E.onMediaDetaching=function(){var c=this.media;c&&this.onvplaying&&this.onvseeked&&(c.removeEventListener("playing",this.onvplaying),c.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),_.prototype.onMediaDetaching.call(this)},E.onMediaPlaying=function(){this.tick()},E.onMediaSeeked=function(){var c=this.media,d=c?c.currentTime:null;(0,z.isFiniteNumber)(d)&&this.log("Media seeked to "+d.toFixed(3)),this.tick()},E.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(V.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},E.onManifestParsed=function(c,d){var M,u=!1,p=!1;d.levels.forEach(function(S){(M=S.audioCodec)&&(-1!==M.indexOf("mp4a.40.2")&&(u=!0),-1!==M.indexOf("mp4a.40.5")&&(p=!0))}),this.audioCodecSwitch=u&&p&&!(0,W.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=d.levels,this.startFragRequested=!1},E.onLevelLoading=function(c,d){var u=this.levels;if(u&&this.state===B.State.IDLE){var p=u[d.level];(!p.details||p.details.live&&this.levelLastLoaded!==d.level||this.waitForCdnTuneIn(p.details))&&(this.state=B.State.WAITING_LEVEL)}},E.onLevelLoaded=function(c,d){var u,p=this.levels,M=d.level,S=d.details;if(p){this.log("Level "+M+" loaded ["+S.startSN+","+S.endSN+"], cc ["+S.startCC+", "+S.endCC+"] duration:"+S.totalduration);var j=this.fragCurrent;j&&(this.state===B.State.FRAG_LOADING||this.state===B.State.FRAG_LOADING_WAITING_RETRY)&&j.level!==d.level&&j.loader&&(this.state=B.State.IDLE,this.backtrackFragment=null,j.abortRequests());var N=p[M],G=0;if(S.live||null!==(u=N.details)&&void 0!==u&&u.live){if(S.fragments[0]||(S.deltaUpdateFailed=!0),S.deltaUpdateFailed)return;G=this.alignPlaylists(S,N.details)}if(N.details=S,this.levelLastLoaded=M,this.hls.trigger(V.Events.LEVEL_UPDATED,{details:S,level:M}),this.state===B.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(S))return;this.state=B.State.IDLE}this.startFragRequested?S.live&&this.synchronizeToLiveEdge(S):this.setStartPosition(S,G),this.tick()}else this.warn("Levels were reset while loading level "+M)},E._handleFragmentLoadProgress=function(c){var d,u=c.frag,p=c.part,M=c.payload,S=this.levels;if(S){var k=S[u.level],j=k.details;if(j){var N=k.videoCodec,G=j.PTSKnown||!j.live,K=null===(d=u.initSegment)||void 0===d?void 0:d.data,$=this._getAudioCodec(k),Z=this.transmuxer=this.transmuxer||new R.default(this.hls,F.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),te=p?p.index:-1,ne=new P.ChunkMetadata(u.level,u.sn,u.stats.chunkCount,M.byteLength,te,-1!==te);Z.push(M,K,$,N,u,p,j.totalduration,G,ne,this.initPTS[u.cc])}else this.warn("Dropping fragment "+u.sn+" of level "+u.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+u.sn+" of level "+u.level+" will not be buffered")},E.onAudioTrackSwitching=function(c,d){var u=this.altAudio,M=d.id;if(!d.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var S=this.fragCurrent;S&&(this.log("Switching to main audio track, cancel main fragment load"),S.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var k=this.hls;u&&k.trigger(V.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),k.trigger(V.Events.AUDIO_TRACK_SWITCHED,{id:M})}},E.onAudioTrackSwitched=function(c,d){var p=!!this.hls.audioTracks[d.id].url;if(p){var M=this.videoBuffer;M&&this.mediaBuffer!==M&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=M)}this.altAudio=p,this.tick()},E.onBufferCreated=function(c,d){var p,M,u=d.tracks,S=!1;for(var k in u){var j=u[k];if("main"===j.id){if(M=k,p=j,"video"===k){var N=u[k];N&&(this.videoBuffer=N.buffer)}}else S=!0}S&&p?(this.log("Alternate track found, use "+M+".buffered to schedule main fragment loading"),this.mediaBuffer=p.buffer):this.mediaBuffer=this.media},E.onFragBuffered=function(c,d){var u=d.frag,p=d.part;if(!u||u.type===F.PlaylistLevelType.MAIN){if(this.fragContextChanged(u))return this.warn("Fragment "+u.sn+(p?" p: "+p.index:"")+" of level "+u.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===B.State.PARSED&&(this.state=B.State.IDLE));var M=p?p.stats:u.stats;this.fragLastKbps=Math.round(8*M.total/(M.buffering.end-M.loading.first)),"initSegment"!==u.sn&&(this.fragPrevious=u),this.fragBufferedComplete(u,p)}},E.onError=function(c,d){if(d.type!==x.ErrorTypes.KEY_SYSTEM_ERROR)switch(d.details){case x.ErrorDetails.FRAG_LOAD_ERROR:case x.ErrorDetails.FRAG_LOAD_TIMEOUT:case x.ErrorDetails.FRAG_PARSING_ERROR:case x.ErrorDetails.KEY_LOAD_ERROR:case x.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(F.PlaylistLevelType.MAIN,d);break;case x.ErrorDetails.LEVEL_LOAD_ERROR:case x.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==B.State.ERROR&&(d.fatal?(this.warn(""+d.details),this.state=B.State.ERROR):!d.levelRetry&&this.state===B.State.WAITING_LEVEL&&(this.state=B.State.IDLE));break;case x.ErrorDetails.BUFFER_FULL_ERROR:if("main"===d.parent&&(this.state===B.State.PARSING||this.state===B.State.PARSED)){var u=!0,p=this.getFwdBufferInfo(this.media,F.PlaylistLevelType.MAIN);p&&p.len>.5&&(u=!this.reduceMaxBufferLength(p.len)),u&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(F.PlaylistLevelType.MAIN,d)},E.checkBuffer=function(){var c=this.media,d=this.gapController;c&&d&&c.readyState&&(!this.loadedmetadata&&Y.BufferHelper.getBuffered(c).length||d.poll(this.lastCurrentTime,this.state!==B.State.IDLE?this.fragCurrent:null),this.lastCurrentTime=c.currentTime)},E.onFragLoadEmergencyAborted=function(){this.state=B.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},E.onBufferFlushed=function(c,d){var u=d.type;(u!==L.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((u===L.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,u,F.PlaylistLevelType.MAIN)},E.onLevelsUpdated=function(c,d){this.levels=d.levels},E.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},E.seekToStartPos=function(){var c=this.media;if(c){var d=c.currentTime,u=this.startPosition;if(u>=0&&d<u){if(c.seeking)return void this.log("could not seek to "+u+", already seeking at "+d);var p=Y.BufferHelper.getBuffered(c),S=(p.length?p.start(0):0)-u;S>0&&(S<this.config.maxBufferHole||S<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+S+" to match buffer start"),this.startPosition=u+=S),this.log("seek to target start position "+u+" from current time "+d),c.currentTime=u}}},E._getAudioCodec=function(c){var d=this.config.defaultAudioCodec||c.audioCodec;return this.audioCodecSwap&&d&&(this.log("Swapping audio codec"),d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),d},E._loadBitrateTestFrag=function(c,d){var u=this;c.bitrateTest=!0,this._doFragLoad(c,d).then(function(p){var M=u.hls;if(p&&!u.fragContextChanged(c)){u.fragLoadError=0,u.state=B.State.IDLE,u.startFragRequested=!1,u.bitrateTest=!1;var S=c.stats;S.parsing.start=S.parsing.end=S.buffering.start=S.buffering.end=self.performance.now(),M.trigger(V.Events.FRAG_LOADED,p),c.bitrateTest=!1}})},E._handleTransmuxComplete=function(c){var d,u="main",p=this.hls,M=c.remuxResult,S=c.chunkMeta,k=this.getCurrentContext(S);if(!k)return this.warn("The loading context changed while buffering fragment "+S.sn+" of level "+S.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(S.level);var j=k.frag,N=k.part,G=k.level,K=M.video,$=M.text,Z=M.id3,te=M.initSegment,q=G.details,ne=this.altAudio?void 0:M.audio;if(!this.fragContextChanged(j)){if(this.state=B.State.PARSING,te){te.tracks&&(this._bufferInitSegment(G,te.tracks,j,S),p.trigger(V.Events.FRAG_PARSING_INIT_SEGMENT,{frag:j,id:u,tracks:te.tracks}));var se=te.initPTS,ue=te.timescale;(0,z.isFiniteNumber)(se)&&(this.initPTS[j.cc]=se,p.trigger(V.Events.INIT_PTS_FOUND,{frag:j,id:u,initPTS:se,timescale:ue}))}if(K&&!1!==M.independent){if(q){var ce=K.startPTS,fe=K.endPTS,ve=K.startDTS,Re=K.endDTS;if(N)N.elementaryStreams[K.type]={startPTS:ce,endPTS:fe,startDTS:ve,endDTS:Re};else if(K.firstKeyFrame&&K.independent&&1===S.id&&(this.couldBacktrack=!0),K.dropped&&K.independent){var Ee=this.getMainFwdBufferInfo();if((Ee?Ee.end:this.getLoadPosition())+this.config.maxBufferHole<(K.firstKeyFramePTS?K.firstKeyFramePTS:ce)-this.config.maxBufferHole)return void this.backtrack(j);j.setElementaryStreamInfo(K.type,j.start,fe,j.start,Re,!0)}j.setElementaryStreamInfo(K.type,ce,fe,ve,Re),this.backtrackFragment&&(this.backtrackFragment=j),this.bufferFragmentData(K,j,N,S)}}else if(!1===M.independent)return void this.backtrack(j);if(ne){var Ze=ne.startPTS,lt=ne.endPTS,Pt=ne.startDTS,gt=ne.endDTS;N&&(N.elementaryStreams[L.ElementaryStreamTypes.AUDIO]={startPTS:Ze,endPTS:lt,startDTS:Pt,endDTS:gt}),j.setElementaryStreamInfo(L.ElementaryStreamTypes.AUDIO,Ze,lt,Pt,gt),this.bufferFragmentData(ne,j,N,S)}q&&null!=Z&&null!==(d=Z.samples)&&void 0!==d&&d.length&&p.trigger(V.Events.FRAG_PARSING_METADATA,{id:u,frag:j,details:q,samples:Z.samples}),q&&$&&p.trigger(V.Events.FRAG_PARSING_USERDATA,{id:u,frag:j,details:q,samples:$.samples})}},E._bufferInitSegment=function(c,d,u,p){var M=this;if(this.state===B.State.PARSING){this.audioOnly=!!d.audio&&!d.video,this.altAudio&&!this.audioOnly&&delete d.audio;var S=d.audio,k=d.video,j=d.audiovideo;if(S){var N=c.audioCodec,G=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(N&&(N=-1!==N.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==S.metadata.channelCount&&-1===G.indexOf("firefox")&&(N="mp4a.40.5")),-1!==G.indexOf("android")&&"audio/mpeg"!==S.container&&this.log("Android: force audio codec to "+(N="mp4a.40.2")),c.audioCodec&&c.audioCodec!==N&&this.log('Swapping manifest audio codec "'+c.audioCodec+'" for "'+N+'"'),S.levelCodec=N,S.id="main",this.log("Init audio buffer, container:"+S.container+", codecs[selected/level/parsed]=["+(N||"")+"/"+(c.audioCodec||"")+"/"+S.codec+"]")}k&&(k.levelCodec=c.videoCodec,k.id="main",this.log("Init video buffer, container:"+k.container+", codecs[level/parsed]=["+(c.videoCodec||"")+"/"+k.codec+"]")),j&&this.log("Init audiovideo buffer, container:"+j.container+", codecs[level/parsed]=["+(c.attrs.CODECS||"")+"/"+j.codec+"]"),this.hls.trigger(V.Events.BUFFER_CODECS,d),Object.keys(d).forEach(function(K){var Z=d[K].initSegment;null!=Z&&Z.byteLength&&M.hls.trigger(V.Events.BUFFER_APPENDING,{type:K,data:Z,frag:u,part:null,chunkMeta:p,parent:u.type})}),this.tick()}},E.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,F.PlaylistLevelType.MAIN)},E.backtrack=function(c){this.couldBacktrack=!0,this.backtrackFragment=c,this.resetTransmuxer(),this.flushBufferGap(c),this.fragmentTracker.removeFragment(c),this.fragPrevious=null,this.nextLoadPosition=c.start,this.state=B.State.IDLE},E.checkFragmentChanged=function(){var c=this.media,d=null;if(c&&c.readyState>1&&!1===c.seeking){var u=c.currentTime;if(Y.BufferHelper.isBuffered(c,u)?d=this.getAppendedFrag(u):Y.BufferHelper.isBuffered(c,u+.1)&&(d=this.getAppendedFrag(u+.1)),d){this.backtrackFragment=null;var p=this.fragPlaying,M=d.level;(!p||d.sn!==p.sn||p.level!==M||d.urlId!==p.urlId)&&(this.fragPlaying=d,this.hls.trigger(V.Events.FRAG_CHANGED,{frag:d}),(!p||p.level!==M)&&this.hls.trigger(V.Events.LEVEL_SWITCHED,{level:M}))}}},function y(_,A,E){A&&w(_.prototype,A),E&&w(_,E),Object.defineProperty(_,"prototype",{writable:!1})}(A,[{key:"nextLevel",get:function(){var c=this.nextBufferedFrag;return c?c.level:-1}},{key:"currentFrag",get:function(){var c=this.media;return c?this.fragPlaying||this.getAppendedFrag(c.currentTime):null}},{key:"currentProgramDateTime",get:function(){var c=this.media;if(c){var d=c.currentTime,u=this.currentFrag;if(u&&(0,z.isFiniteNumber)(d)&&(0,z.isFiniteNumber)(u.programDateTime))return new Date(u.programDateTime+1e3*(d-u.start))}return null}},{key:"currentLevel",get:function(){var c=this.currentFrag;return c?c.level:-1}},{key:"nextBufferedFrag",get:function(){var c=this.currentFrag;return c?this.followingBufferedFrag(c):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),A}(B.default)},"./src/controller/subtitle-stream-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{SubtitleStreamController:()=>h});var z=O("./src/events.ts"),B=O("./src/utils/buffer-helper.ts"),W=O("./src/controller/fragment-finders.ts"),V=O("./src/utils/discontinuities.ts"),Y=O("./src/controller/level-helper.ts"),U=O("./src/controller/fragment-tracker.ts"),F=O("./src/controller/base-stream-controller.ts"),L=O("./src/types/loader.ts"),R=O("./src/types/level.ts");function P(C,f){for(var _=0;_<f.length;_++){var A=f[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(C,x(A.key),A)}}function x(C){var f=function w(C,f){if("object"!=typeof C||null===C)return C;var _=C[Symbol.toPrimitive];if(void 0!==_){var A=_.call(C,f||"default");if("object"!=typeof A)return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===f?String:Number)(C)}(C,"string");return"symbol"==typeof f?f:String(f)}function g(C,f){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,E){return A.__proto__=E,A})(C,f)}var h=function(C){function f(A,E,T){var c;return(c=C.call(this,A,E,T,"[subtitle-stream-controller]")||this).levels=[],c.currentTrackId=-1,c.tracksBuffered=[],c.mainDetails=null,c._registerListeners(),c}!function y(C,f){C.prototype=Object.create(f.prototype),C.prototype.constructor=C,g(C,f)}(f,C);var _=f.prototype;return _.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},_._registerListeners=function(){var E=this.hls;E.on(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.on(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.on(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.on(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.on(z.Events.ERROR,this.onError,this),E.on(z.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),E.on(z.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),E.on(z.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),E.on(z.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),E.on(z.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),E.on(z.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_._unregisterListeners=function(){var E=this.hls;E.off(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.off(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.off(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.off(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.off(z.Events.ERROR,this.onError,this),E.off(z.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),E.off(z.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),E.off(z.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),E.off(z.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),E.off(z.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),E.off(z.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_.startLoad=function(E){this.stopLoad(),this.state=F.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=E,this.tick()},_.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},_.onLevelLoaded=function(E,T){this.mainDetails=T.details},_.onSubtitleFragProcessed=function(E,T){var c=T.frag,d=T.success;if(this.fragPrevious=c,this.state=F.State.IDLE,d){var u=this.tracksBuffered[this.currentTrackId];if(u){for(var p,M=c.start,S=0;S<u.length;S++)if(M>=u[S].start&&M<=u[S].end){p=u[S];break}var k=c.start+c.duration;p?p.end=k:u.push(p={start:M,end:k}),this.fragmentTracker.fragBuffered(c)}}},_.onBufferFlushing=function(E,T){var c=T.startOffset,d=T.endOffset;if(0===c&&d!==Number.POSITIVE_INFINITY){var u=this.currentTrackId,p=this.levels;if(!p.length||!p[u]||!p[u].details)return;var k=d-p[u].details.targetduration;if(k<=0)return;T.endOffsetSubtitles=Math.max(0,k),this.tracksBuffered.forEach(function(j){for(var N=0;N<j.length;)if(j[N].end<=k)j.shift();else{if(!(j[N].start<k))break;j[N].start=k,N++}}),this.fragmentTracker.removeFragmentsInRange(c,k,L.PlaylistLevelType.SUBTITLE)}},_.onFragBuffered=function(E,T){var c;this.loadedmetadata||T.frag.type!==L.PlaylistLevelType.MAIN||null!==(c=this.media)&&void 0!==c&&c.buffered.length&&(this.loadedmetadata=!0)},_.onError=function(E,T){var c=T.frag;!c||c.type!==L.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=F.State.IDLE)},_.onSubtitleTracksUpdated=function(E,T){var c=this,d=T.subtitleTracks;this.tracksBuffered=[],this.levels=d.map(function(u){return new R.Level(u)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(u){c.tracksBuffered[u.id]=[]}),this.mediaBuffer=null},_.onSubtitleTrackSwitch=function(E,T){if(this.currentTrackId=T.id,this.levels.length&&-1!==this.currentTrackId){var c=this.levels[this.currentTrackId];this.mediaBuffer=null!=c&&c.details?this.mediaBufferTimeRanges:null,c&&this.setInterval(500)}else this.clearInterval()},_.onSubtitleTrackLoaded=function(E,T){var c,d=T.details,u=T.id,p=this.currentTrackId,M=this.levels;if(M.length){var S=M[p];if(!(u>=M.length||u!==p)&&S){this.mediaBuffer=this.mediaBufferTimeRanges;var k=0;if(d.live||null!==(c=S.details)&&void 0!==c&&c.live){var j=this.mainDetails;if(d.deltaUpdateFailed||!j)return;var N=j.fragments[0];S.details?0===(k=this.alignPlaylists(d,S.details))&&N&&(0,Y.addSliding)(d,k=N.start):d.hasProgramDateTime&&j.hasProgramDateTime?((0,V.alignMediaPlaylistByPDT)(d,j),k=d.fragments[0].start):N&&(0,Y.addSliding)(d,k=N.start)}S.details=d,this.levelLastLoaded=u,!this.startFragRequested&&(this.mainDetails||!d.live)&&this.setStartPosition(S.details,k),this.tick(),d.live&&!this.fragCurrent&&this.media&&this.state===F.State.IDLE&&((0,W.findFragmentByPTS)(null,d.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),S.details=void 0))}}},_._handleFragmentLoadComplete=function(E){var T=this,c=E.frag,d=E.payload,u=c.decryptdata,p=this.hls;if(!this.fragContextChanged(c)&&d&&d.byteLength>0&&u&&u.key&&u.iv&&"AES-128"===u.method){var M=performance.now();this.decrypter.decrypt(new Uint8Array(d),u.key.buffer,u.iv.buffer).then(function(S){var k=performance.now();p.trigger(z.Events.FRAG_DECRYPTED,{frag:c,payload:S,stats:{tstart:M,tdecrypt:k}})}).catch(function(S){T.warn(S.name+": "+S.message),T.state=F.State.IDLE})}},_.doTick=function(){if(this.media){if(this.state===F.State.IDLE){var E=this.currentTrackId,T=this.levels;if(!T.length||!T[E]||!T[E].details)return;var c=T[E].details,d=c.targetduration,u=this.config,p=this.getLoadPosition(),M=B.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],p-d,u.maxBufferHole),S=M.end,k=M.len,j=this.getFwdBufferInfo(this.media,L.PlaylistLevelType.MAIN);if(k>this.getMaxBufferLength(null==j?void 0:j.len)+d)return;console.assert(c,"Subtitle track details are defined on idle subtitle stream controller tick");var G=c.fragments,K=G.length,Z=null,te=this.fragPrevious;if(S<c.edge){var q=u.maxFragLookUpTolerance;!(Z=(0,W.findFragmentByPTS)(te,G,Math.max(G[0].start,S),q))&&te&&te.start<G[0].start&&(Z=G[0])}else Z=G[K-1];if(!Z)return;Z=this.mapToInitFragWhenRequired(Z),this.fragmentTracker.getState(Z)===U.FragmentState.NOT_LOADED&&this.loadFragment(Z,c,S)}}else this.state=F.State.IDLE},_.getMaxBufferLength=function(E){var T=C.prototype.getMaxBufferLength.call(this);return E?Math.max(T,E):T},_.loadFragment=function(E,T,c){this.fragCurrent=E,"initSegment"===E.sn?this._loadInitSegment(E,T):(this.startFragRequested=!0,C.prototype.loadFragment.call(this,E,T,c))},function D(C,f,_){f&&P(C.prototype,f),_&&P(C,_),Object.defineProperty(C,"prototype",{writable:!1})}(f,[{key:"mediaBufferTimeRanges",get:function(){return new b(this.tracksBuffered[this.currentTrackId]||[])}}]),f}(F.default),b=function(f){this.buffered=void 0;var _=function(E,T,c){if((T>>>=0)>c-1)throw new DOMException("Failed to execute '"+E+"' on 'TimeRanges': The index provided ("+T+") is greater than the maximum bound ("+c+")");return f[T][E]};this.buffered={get length(){return f.length},end:function(E){return _("end",E,f.length)},start:function(E){return _("start",E,f.length)}}}},"./src/controller/subtitle-track-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>w});var z=O("./src/events.ts"),B=O("./src/utils/texttrack-utils.ts"),W=O("./src/controller/base-playlist-controller.ts"),V=O("./src/types/loader.ts");function Y(y,g){for(var m=0;m<g.length;m++){var h=g[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,F(h.key),h)}}function F(y){var g=function L(y,g){if("object"!=typeof y||null===y)return y;var m=y[Symbol.toPrimitive];if(void 0!==m){var h=m.call(y,g||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(y)}(y,"string");return"symbol"==typeof g?g:String(g)}function P(y,g){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,b){return h.__proto__=b,h})(y,g)}function x(y){for(var g=[],m=0;m<y.length;m++){var h=y[m];"subtitles"===h.kind&&h.label&&g.push(y[m])}return g}const w=function(y){function g(h){var b;return(b=y.call(this,h,"[subtitle-track-controller]")||this).media=null,b.tracks=[],b.groupId=null,b.tracksInGroup=[],b.trackId=-1,b.selectDefaultTrack=!0,b.queuedDefaultTrack=-1,b.trackChangeListener=function(){return b.onTextTracksChanged()},b.asyncPollTrackChange=function(){return b.pollTrackChange(0)},b.useTextTrackPolling=!1,b.subtitlePollingInterval=-1,b._subtitleDisplay=!0,b.registerListeners(),b}!function R(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,P(y,g)}(g,y);var m=g.prototype;return m.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,y.prototype.destroy.call(this)},m.registerListeners=function(){var b=this.hls;b.on(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),b.on(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.on(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.on(z.Events.MANIFEST_PARSED,this.onManifestParsed,this),b.on(z.Events.LEVEL_LOADING,this.onLevelLoading,this),b.on(z.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),b.on(z.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),b.on(z.Events.ERROR,this.onError,this)},m.unregisterListeners=function(){var b=this.hls;b.off(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),b.off(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.off(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.off(z.Events.MANIFEST_PARSED,this.onManifestParsed,this),b.off(z.Events.LEVEL_LOADING,this.onLevelLoading,this),b.off(z.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),b.off(z.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),b.off(z.Events.ERROR,this.onError,this)},m.onMediaAttached=function(b,C){this.media=C.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},m.pollTrackChange=function(b){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,b)},m.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),x(this.media.textTracks).forEach(function(C){(0,B.clearCurrentCues)(C)}),this.subtitleTrack=-1,this.media=null)},m.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},m.onManifestParsed=function(b,C){this.tracks=C.subtitleTracks},m.onSubtitleTrackLoaded=function(b,C){var f=C.id,_=C.details,E=this.tracksInGroup[this.trackId];if(E){var T=E.details;E.details=C.details,this.log("subtitle track "+f+" loaded ["+_.startSN+"-"+_.endSN+"]"),f===this.trackId&&(this.retryCount=0,this.playlistLoaded(f,C,T))}else this.warn("Invalid subtitle track id "+f)},m.onLevelLoading=function(b,C){this.switchLevel(C.level)},m.onLevelSwitching=function(b,C){this.switchLevel(C.level)},m.switchLevel=function(b){var C=this.hls.levels[b];if(null!=C&&C.textGroupIds){var f=C.textGroupIds[C.urlId];if(this.groupId!==f){var _=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,A=this.tracks.filter(function(c){return!f||c.groupId===f});this.tracksInGroup=A;var E=this.findTrackId(null==_?void 0:_.name)||this.findTrackId();this.groupId=f;var T={subtitleTracks:A};this.log("Updating subtitle tracks, "+A.length+' track(s) found in "'+f+'" group-id'),this.hls.trigger(z.Events.SUBTITLE_TRACKS_UPDATED,T),-1!==E&&this.setSubtitleTrack(E,_)}}},m.findTrackId=function(b){for(var C=this.tracksInGroup,f=0;f<C.length;f++){var _=C[f];if((!this.selectDefaultTrack||_.default)&&(!b||b===_.name))return _.id}return-1},m.onError=function(b,C){y.prototype.onError.call(this,b,C),!C.fatal&&C.context&&C.context.type===V.PlaylistContextType.SUBTITLE_TRACK&&C.context.id===this.trackId&&C.context.groupId===this.groupId&&this.retryLoadingOrFail(C)},m.loadPlaylist=function(b){y.prototype.loadPlaylist.call(this);var C=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(C)){var f=C.id,_=C.groupId,A=C.url;if(b)try{A=b.addDirectives(A)}catch(E){this.warn("Could not construct new URL with HLS Delivery Directives: "+E)}this.log("Loading subtitle playlist for id "+f),this.hls.trigger(z.Events.SUBTITLE_TRACK_LOADING,{url:A,id:f,groupId:_,deliveryDirectives:b||null})}},m.toggleTrackModes=function(b){var C=this,f=this.media,_=this.trackId;if(f){var A=x(f.textTracks),E=A.filter(function(d){return d.groupId===C.groupId});if(-1===b)[].slice.call(A).forEach(function(d){d.mode="disabled"});else{var T=E[_];T&&(T.mode="disabled")}var c=E[b];c&&(c.mode=this.subtitleDisplay?"showing":"hidden")}},m.setSubtitleTrack=function(b,C){var f,_=this.tracksInGroup;if(this.media){if(this.trackId!==b&&this.toggleTrackModes(b),!(this.trackId===b&&(-1===b||null!==(f=_[b])&&void 0!==f&&f.details)||b<-1||b>=_.length)){this.clearTimer();var A=_[b];if(this.log("Switching to subtitle track "+b),this.trackId=b,A){var T=A.groupId;this.hls.trigger(z.Events.SUBTITLE_TRACK_SWITCH,{id:A.id,groupId:void 0===T?"":T,name:A.name,type:A.type,url:A.url});var M=this.switchParams(A.url,null==C?void 0:C.details);this.loadPlaylist(M)}else this.hls.trigger(z.Events.SUBTITLE_TRACK_SWITCH,{id:b})}}else this.queuedDefaultTrack=b},m.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var b=-1,C=x(this.media.textTracks),f=0;f<C.length;f++)if("hidden"===C[f].mode)b=f;else if("showing"===C[f].mode){b=f;break}this.subtitleTrack!==b&&(this.subtitleTrack=b)}},function U(y,g,m){g&&Y(y.prototype,g),m&&Y(y,m),Object.defineProperty(y,"prototype",{writable:!1})}(g,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(b){this._subtitleDisplay=b,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(b){this.selectDefaultTrack=!1,this.setSubtitleTrack(b,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}]),g}(W.default)},"./src/controller/timeline-controller.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{TimelineController:()=>D});var z=O("./src/polyfills/number.ts"),B=O("./src/events.ts"),W=O("./src/utils/cea-608-parser.ts"),V=O("./src/utils/output-filter.ts"),Y=O("./src/utils/webvtt-parser.ts"),U=O("./src/utils/texttrack-utils.ts"),F=O("./src/utils/imsc1-ttml-parser.ts"),L=O("./src/utils/mp4-tools.ts"),R=O("./src/types/loader.ts"),P=O("./src/utils/logger.ts"),D=function(){function g(h){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=h,this.config=h.config,this.Cues=h.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var b=new V.default(this,"textTrack1"),C=new V.default(this,"textTrack2"),f=new V.default(this,"textTrack3"),_=new V.default(this,"textTrack4");this.cea608Parser1=new W.default(1,b,C),this.cea608Parser2=new W.default(3,f,_)}h.on(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),h.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),h.on(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),h.on(B.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),h.on(B.Events.FRAG_LOADING,this.onFragLoading,this),h.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),h.on(B.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),h.on(B.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),h.on(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),h.on(B.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),h.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var m=g.prototype;return m.destroy=function(){var b=this.hls;b.off(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),b.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.off(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),b.off(B.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),b.off(B.Events.FRAG_LOADING,this.onFragLoading,this),b.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),b.off(B.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),b.off(B.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),b.off(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),b.off(B.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),b.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},m.addCues=function(b,C,f,_,A){for(var E=!1,T=A.length;T--;){var c=A[T],d=w(c[0],c[1],C,f);if(d>=0&&(c[0]=Math.min(c[0],C),c[1]=Math.max(c[1],f),E=!0,d/(f-C)>.5))return}if(E||A.push([C,f]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[b],C,f,_);else{var p=this.Cues.newCue(null,C,f,_);this.hls.trigger(B.Events.CUES_PARSED,{type:"captions",cues:p,track:b})}},m.onInitPtsFound=function(b,C){var f=this,_=C.frag,T=C.timescale,c=this.unparsedVttFrags;"main"===C.id&&(this.initPTS[_.cc]=C.initPTS,this.timescale[_.cc]=T),c.length&&(this.unparsedVttFrags=[],c.forEach(function(d){f.onFragLoaded(B.Events.FRAG_LOADED,d)}))},m.getExistingTrack=function(b){var C=this.media;if(C)for(var f=0;f<C.textTracks.length;f++){var _=C.textTracks[f];if(_[b])return _}return null},m.createCaptionsTrack=function(b){this.config.renderTextTracksNatively?this.createNativeTrack(b):this.createNonNativeTrack(b)},m.createNativeTrack=function(b){if(!this.captionsTracks[b]){var f=this.captionsTracks,_=this.media,A=this.captionsProperties[b],E=A.label,T=A.languageCode,c=this.getExistingTrack(b);if(c)f[b]=c,(0,U.clearCurrentCues)(f[b]),(0,U.sendAddTrackEvent)(f[b],_);else{var d=this.createTextTrack("captions",E,T);d&&(d[b]=!0,f[b]=d)}}},m.createNonNativeTrack=function(b){if(!this.nonNativeCaptionsTracks[b]){var C=this.captionsProperties[b];if(C){var _={_id:b,label:C.label,kind:"captions",default:!!C.media&&!!C.media.default,closedCaptions:C.media};this.nonNativeCaptionsTracks[b]=_,this.hls.trigger(B.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[_]})}}},m.createTextTrack=function(b,C,f){var _=this.media;if(_)return _.addTextTrack(b,C,f)},m.onMediaAttaching=function(b,C){this.media=C.media,this._cleanTracks()},m.onMediaDetaching=function(){var b=this.captionsTracks;Object.keys(b).forEach(function(C){(0,U.clearCurrentCues)(b[C]),delete b[C]}),this.nonNativeCaptionsTracks={}},m.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},m._cleanTracks=function(){var b=this.media;if(b){var C=b.textTracks;if(C)for(var f=0;f<C.length;f++)(0,U.clearCurrentCues)(C[f])}},m.onSubtitleTracksUpdated=function(b,C){var f=this;this.textTracks=[];var _=C.subtitleTracks||[],A=_.some(function(d){return d.textCodec===F.IMSC1_CODEC});if(this.config.enableWebVTT||A&&this.config.enableIMSC1){var E=this.tracks&&_&&this.tracks.length===_.length;if(this.tracks=_||[],this.config.renderTextTracksNatively){var T=this.media?this.media.textTracks:[];this.tracks.forEach(function(d,u){var p;if(u<T.length){for(var M=null,S=0;S<T.length;S++)if(x(T[S],d)){M=T[S];break}M&&(p=M)}if(p)(0,U.clearCurrentCues)(p);else{var k=f._captionsOrSubtitlesFromCharacteristics(d);(p=f.createTextTrack(k,d.name,d.lang))&&(p.mode="disabled")}p&&(p.groupId=d.groupId,f.textTracks.push(p))})}else if(!E&&this.tracks&&this.tracks.length){var c=this.tracks.map(function(d){return{label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}});this.hls.trigger(B.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},m._captionsOrSubtitlesFromCharacteristics=function(b){var C;if(null!==(C=b.attrs)&&void 0!==C&&C.CHARACTERISTICS){var f=/transcribes-spoken-dialog/gi.test(b.attrs.CHARACTERISTICS),_=/describes-music-and-sound/gi.test(b.attrs.CHARACTERISTICS);if(f&&_)return"captions"}return"subtitles"},m.onManifestLoaded=function(b,C){var f=this;this.config.enableCEA708Captions&&C.captions&&C.captions.forEach(function(_){var A=/(?:CC|SERVICE)([1-4])/.exec(_.instreamId);if(A){var T=f.captionsProperties["textTrack"+A[1]];!T||(T.label=_.name,_.lang&&(T.languageCode=_.lang),T.media=_)}})},m.closedCaptionsForLevel=function(b){var C=this.hls.levels[b.level];return null==C?void 0:C.attrs["CLOSED-CAPTIONS"]},m.onFragLoading=function(b,C){var f=this.cea608Parser1,_=this.cea608Parser2,A=this.lastSn;if(this.enabled&&f&&_&&C.frag.type===R.PlaylistLevelType.MAIN){var T,c,d=C.frag.sn,u=null!=(T=null==C||null===(c=C.part)||void 0===c?void 0:c.index)?T:-1;d===A+1||d===A&&u===this.lastPartIndex+1||(f.reset(),_.reset()),this.lastSn=d,this.lastPartIndex=u}},m.onFragLoaded=function(b,C){var f=C.frag,_=C.payload,A=this.initPTS,E=this.unparsedVttFrags;if(f.type===R.PlaylistLevelType.SUBTITLE)if(_.byteLength){if(!(0,z.isFiniteNumber)(A[f.cc]))return E.push(C),void(A.length&&this.hls.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f,error:new Error("Missing initial subtitle PTS")}));var T=f.decryptdata;if(null==T||!T.encrypted||"stats"in C){var d=this.tracks[f.level],u=this.vttCCs;u[f.cc]||(u[f.cc]={start:f.start,prevCC:this.prevCC,new:!0},this.prevCC=f.cc),d&&d.textCodec===F.IMSC1_CODEC?this._parseIMSC1(f,_):this._parseVTTs(f,_,u)}}else this.hls.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f,error:new Error("Empty subtitle payload")})},m._parseIMSC1=function(b,C){var f=this,_=this.hls;(0,F.parseIMSC1)(C,this.initPTS[b.cc],this.timescale[b.cc],function(A){f._appendCues(A,b.level),_.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:b})},function(A){P.logger.log("Failed to parse IMSC1: "+A),_.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:b,error:A})})},m._parseVTTs=function(b,C,f){var _,A=this,E=this.hls,T=null!==(_=b.initSegment)&&void 0!==_&&_.data?(0,L.appendUint8Array)(b.initSegment.data,new Uint8Array(C)):C;(0,Y.parseWebVTT)(T,this.initPTS[b.cc],this.timescale[b.cc],f,b.cc,b.start,function(c){A._appendCues(c,b.level),E.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:b})},function(c){A._fallbackToIMSC1(b,C),P.logger.log("Failed to parse VTT cue: "+c),E.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:b,error:c})})},m._fallbackToIMSC1=function(b,C){var f=this,_=this.tracks[b.level];_.textCodec||(0,F.parseIMSC1)(C,this.initPTS[b.cc],this.timescale[b.cc],function(){_.textCodec=F.IMSC1_CODEC,f._parseIMSC1(b,C)},function(){_.textCodec="wvtt"})},m._appendCues=function(b,C){var f=this.hls;if(this.config.renderTextTracksNatively){var _=this.textTracks[C];if(!_||"disabled"===_.mode)return;b.forEach(function(T){return(0,U.addCueToTrack)(_,T)})}else{var A=this.tracks[C];if(!A)return;f.trigger(B.Events.CUES_PARSED,{type:"subtitles",cues:b,track:A.default?"default":"subtitles"+C})}},m.onFragDecrypted=function(b,C){var f=C.frag;if(f.type===R.PlaylistLevelType.SUBTITLE){if(!(0,z.isFiniteNumber)(this.initPTS[f.cc]))return void this.unparsedVttFrags.push(C);this.onFragLoaded(B.Events.FRAG_LOADED,C)}},m.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},m.onFragParsingUserdata=function(b,C){var f=this.cea608Parser1,_=this.cea608Parser2;if(this.enabled&&f&&_){var A=C.frag,E=C.samples;if(A.type!==R.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(A))for(var T=0;T<E.length;T++){var c=E[T].bytes;if(c){var d=this.extractCea608Data(c);f.addData(E[T].pts,d[0]),_.addData(E[T].pts,d[1])}}}},m.onBufferFlushing=function(b,C){var f=C.startOffset,_=C.endOffset,A=C.endOffsetSubtitles,E=C.type,T=this.media;if(T&&!(T.currentTime<_)){if(!E||"video"===E){var c=this.captionsTracks;Object.keys(c).forEach(function(u){return(0,U.removeCuesInRange)(c[u],f,_)})}if(this.config.renderTextTracksNatively&&0===f&&void 0!==A){var d=this.textTracks;Object.keys(d).forEach(function(u){return(0,U.removeCuesInRange)(d[u],f,A)})}}},m.extractCea608Data=function(b){for(var C=[[],[]],f=31&b[0],_=2,A=0;A<f;A++){var E=b[_++],T=127&b[_++],c=127&b[_++];if((0!==T||0!==c)&&0!=(4&E)){var u=3&E;(0===u||1===u)&&(C[u].push(T),C[u].push(c))}}return C},g}();function x(g,m){return g&&g.label===m.name&&!(g.textTrack1||g.textTrack2)}function w(g,m,h,b){return Math.min(m,b)-Math.max(g,h)}},"./src/crypt/aes-crypto.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>z});var z=function(){function B(V,Y){this.subtle=void 0,this.aesIV=void 0,this.subtle=V,this.aesIV=Y}return B.prototype.decrypt=function(Y,U){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},U,Y)},B}()},"./src/crypt/aes-decryptor.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>W,removePadding:()=>B});var z=O("./src/utils/typed-array.ts");function B(V){var Y=V.byteLength,U=Y&&new DataView(V.buffer).getUint8(Y-1);return U?(0,z.sliceUint8)(V,0,Y-U):V}var W=function(){function V(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var Y=V.prototype;return Y.uint8ArrayToUint32Array_=function(F){for(var L=new DataView(F),R=new Uint32Array(4),P=0;P<4;P++)R[P]=L.getUint32(4*P);return R},Y.initTable=function(){var F=this.sBox,L=this.invSBox,R=this.subMix,P=R[0],D=R[1],x=R[2],w=R[3],y=this.invSubMix,g=y[0],m=y[1],h=y[2],b=y[3],C=new Uint32Array(256),f=0,_=0,A=0;for(A=0;A<256;A++)C[A]=A<128?A<<1:A<<1^283;for(A=0;A<256;A++){var E=_^_<<1^_<<2^_<<3^_<<4;F[f]=E=E>>>8^255&E^99,L[E]=f;var T=C[f],c=C[T],d=C[c],u=257*C[E]^16843008*E;P[f]=u<<24|u>>>8,D[f]=u<<16|u>>>16,x[f]=u<<8|u>>>24,w[f]=u,g[E]=(u=16843009*d^65537*c^257*T^16843008*f)<<24|u>>>8,m[E]=u<<16|u>>>16,h[E]=u<<8|u>>>24,b[E]=u,f?(f=T^C[C[C[d^T]]],_^=C[C[_]]):f=_=1}},Y.expandKey=function(F){for(var L=this.uint8ArrayToUint32Array_(F),R=!0,P=0;P<L.length&&R;)R=L[P]===this.key[P],P++;if(!R){this.key=L;var D=this.keySize=L.length;if(4!==D&&6!==D&&8!==D)throw new Error("Invalid aes key size="+D);var w,y,T,c,x=this.ksRows=4*(D+6+1),g=this.keySchedule=new Uint32Array(x),m=this.invKeySchedule=new Uint32Array(x),h=this.sBox,b=this.rcon,C=this.invSubMix,f=C[0],_=C[1],A=C[2],E=C[3];for(w=0;w<x;w++)w<D?T=g[w]=L[w]:(c=T,w%D==0?(c=h[(c=c<<8|c>>>24)>>>24]<<24|h[c>>>16&255]<<16|h[c>>>8&255]<<8|h[255&c],c^=b[w/D|0]<<24):D>6&&w%D==4&&(c=h[c>>>24]<<24|h[c>>>16&255]<<16|h[c>>>8&255]<<8|h[255&c]),g[w]=T=(g[w-D]^c)>>>0);for(y=0;y<x;y++)w=x-y,c=3&y?g[w]:g[w-4],m[y]=y<4||w<=4?c:f[h[c>>>24]]^_[h[c>>>16&255]]^A[h[c>>>8&255]]^E[h[255&c]],m[y]=m[y]>>>0}},Y.networkToHostOrderSwap=function(F){return F<<24|(65280&F)<<8|(16711680&F)>>8|F>>>24},Y.decrypt=function(F,L,R){for(var d,u,p,M,S,k,j,N,G,K,$,Z,te,P=this.keySize+6,D=this.invKeySchedule,x=this.invSBox,w=this.invSubMix,y=w[0],g=w[1],m=w[2],h=w[3],b=this.uint8ArrayToUint32Array_(R),C=b[0],f=b[1],_=b[2],A=b[3],E=new Int32Array(F),T=new Int32Array(E.length),q=this.networkToHostOrderSwap;L<E.length;){for(N=q(E[L]),G=q(E[L+1]),K=q(E[L+2]),$=q(E[L+3]),M=N^D[0],S=$^D[1],k=K^D[2],j=G^D[3],Z=4,te=1;te<P;te++)d=y[S>>>24]^g[k>>16&255]^m[j>>8&255]^h[255&M]^D[Z+1],u=y[k>>>24]^g[j>>16&255]^m[M>>8&255]^h[255&S]^D[Z+2],p=y[j>>>24]^g[M>>16&255]^m[S>>8&255]^h[255&k]^D[Z+3],M=y[M>>>24]^g[S>>16&255]^m[k>>8&255]^h[255&j]^D[Z],S=d,k=u,j=p,Z+=4;d=x[S>>>24]<<24^x[k>>16&255]<<16^x[j>>8&255]<<8^x[255&M]^D[Z+1],u=x[k>>>24]<<24^x[j>>16&255]<<16^x[M>>8&255]<<8^x[255&S]^D[Z+2],p=x[j>>>24]<<24^x[M>>16&255]<<16^x[S>>8&255]<<8^x[255&k]^D[Z+3],T[L]=q(x[M>>>24]<<24^x[S>>16&255]<<16^x[k>>8&255]<<8^x[255&j]^D[Z]^C),T[L+1]=q(p^f),T[L+2]=q(u^_),T[L+3]=q(d^A),C=N,f=G,_=K,A=$,L+=4}return T.buffer},V}()},"./src/crypt/decrypter.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>L});var z=O("./src/crypt/aes-crypto.ts"),B=O("./src/crypt/fast-aes-key.ts"),W=O("./src/crypt/aes-decryptor.ts"),V=O("./src/utils/logger.ts"),Y=O("./src/utils/mp4-tools.ts"),U=O("./src/utils/typed-array.ts"),L=function(){function R(D,x){var y=(void 0===x?{}:x).removePKCS7Padding,g=void 0===y||y;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=D.enableSoftwareAES,this.removePKCS7Padding=g,g)try{var m=self.crypto;m&&(this.subtle=m.subtle||m.webkitSubtle)}catch(h){}null===this.subtle&&(this.useSoftware=!0)}var P=R.prototype;return P.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},P.isSync=function(){return this.useSoftware},P.flush=function(){var x=this.currentResult;if(!x||this.remainderData)return this.reset(),null;var y=new Uint8Array(x);return this.reset(),this.removePKCS7Padding?(0,W.removePadding)(y):y},P.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},P.decrypt=function(x,w,y){var g=this;return this.useSoftware?new Promise(function(m,h){g.softwareDecrypt(new Uint8Array(x),w,y);var b=g.flush();b?m(b.buffer):h(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(x),w,y)},P.softwareDecrypt=function(x,w,y){var g=this.currentIV,m=this.currentResult,h=this.remainderData;this.logOnce("JS AES decrypt"),h&&(x=(0,Y.appendUint8Array)(h,x),this.remainderData=null);var b=this.getValidChunk(x);if(!b.length)return null;g&&(y=g);var C=this.softwareDecrypter;C||(C=this.softwareDecrypter=new W.default),C.expandKey(w);var f=m;return this.currentResult=C.decrypt(b.buffer,0,y),this.currentIV=(0,U.sliceUint8)(b,-16).buffer,f||null},P.webCryptoDecrypt=function(x,w,y){var g=this,m=this.subtle;return(this.key!==w||!this.fastAesKey)&&(this.key=w,this.fastAesKey=new B.default(m,w)),this.fastAesKey.expandKey().then(function(h){return m?(g.logOnce("WebCrypto AES decrypt"),new z.default(m,new Uint8Array(y)).decrypt(x.buffer,h)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(h){return V.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+h.name+": "+h.message),g.onWebCryptoError(x,w,y)})},P.onWebCryptoError=function(x,w,y){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(x,w,y);var g=this.flush();if(g)return g.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},P.getValidChunk=function(x){var w=x,y=x.length-x.length%16;return y!==x.length&&(w=(0,U.sliceUint8)(x,0,y),this.remainderData=(0,U.sliceUint8)(x,y)),w},P.logOnce=function(x){!this.logEnabled||(V.logger.log("[decrypter]: "+x),this.logEnabled=!1)},R}()},"./src/crypt/fast-aes-key.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>z});var z=function(){function B(V,Y){this.subtle=void 0,this.key=void 0,this.subtle=V,this.key=Y}return B.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},B}()},"./src/demux/aacdemuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>L});var z=O("./src/demux/base-audio-demuxer.ts"),B=O("./src/demux/adts.ts"),W=O("./src/utils/logger.ts"),V=O("./src/demux/id3.ts");function U(R,P){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,w){return x.__proto__=w,x})(R,P)}const L=function(R){function P(x,w){var y;return(y=R.call(this)||this).observer=void 0,y.config=void 0,y.observer=x,y.config=w,y}!function Y(R,P){R.prototype=Object.create(P.prototype),R.prototype.constructor=R,U(R,P)}(P,R);var D=P.prototype;return D.resetInitSegment=function(w,y,g,m){R.prototype.resetInitSegment.call(this,w,y,g,m),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:y,duration:m,inputTimeScale:9e4,dropped:0}},P.probe=function(w){if(!w)return!1;for(var g=(V.getID3Data(w,0)||[]).length,m=w.length;g<m;g++)if(B.probe(w,g))return W.logger.log("ADTS sync word found !"),!0;return!1},D.canParse=function(w,y){return B.canParse(w,y)},D.appendFrame=function(w,y,g){B.initTrackConfig(w,this.observer,y,g,w.manifestCodec);var m=B.appendFrame(w,y,g,this.basePTS,this.frameIndex);if(m&&0===m.missing)return m},P}(z.default)},"./src/demux/adts.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{appendFrame:()=>g,canGetFrameLength:()=>L,canParse:()=>P,getAudioConfig:()=>V,getFrameDuration:()=>w,getFullFrameLength:()=>F,getHeaderLength:()=>U,initTrackConfig:()=>x,isHeader:()=>R,isHeaderPattern:()=>Y,parseFrameHeader:()=>y,probe:()=>D});var z=O("./src/utils/logger.ts"),B=O("./src/errors.ts"),W=O("./src/events.ts");function V(m,h,b,C){var f,_,A,E,T=navigator.userAgent.toLowerCase(),c=C,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];f=1+((192&h[b+2])>>>6);var u=(60&h[b+2])>>>2;if(!(u>d.length-1))return A=(1&h[b+2])<<2,A|=(192&h[b+3])>>>6,z.logger.log("manifest codec:"+C+", ADTS type:"+f+", samplingIndex:"+u),/firefox/i.test(T)?u>=6?(f=5,E=new Array(4),_=u-3):(f=2,E=new Array(2),_=u):-1!==T.indexOf("android")?(f=2,E=new Array(2),_=u):(f=5,E=new Array(4),C&&(-1!==C.indexOf("mp4a.40.29")||-1!==C.indexOf("mp4a.40.5"))||!C&&u>=6?_=u-3:((C&&-1!==C.indexOf("mp4a.40.2")&&(u>=6&&1===A||/vivaldi/i.test(T))||!C&&1===A)&&(f=2,E=new Array(2)),_=u)),E[0]=f<<3,E[0]|=(14&u)>>1,E[1]|=(1&u)<<7,E[1]|=A<<3,5===f&&(E[1]|=(14&_)>>1,E[2]=(1&_)<<7,E[2]|=8,E[3]=0),{config:E,samplerate:d[u],channelCount:A,codec:"mp4a.40."+f,manifestCodec:c};m.trigger(W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}function Y(m,h){return 255===m[h]&&240==(246&m[h+1])}function U(m,h){return 1&m[h+1]?7:9}function F(m,h){return(3&m[h+3])<<11|m[h+4]<<3|(224&m[h+5])>>>5}function L(m,h){return h+5<m.length}function R(m,h){return h+1<m.length&&Y(m,h)}function P(m,h){return L(m,h)&&Y(m,h)&&F(m,h)<=m.length-h}function D(m,h){if(R(m,h)){var b=U(m,h);if(h+b>=m.length)return!1;var C=F(m,h);if(C<=b)return!1;var f=h+C;return f===m.length||R(m,f)}return!1}function x(m,h,b,C,f){if(!m.samplerate){var _=V(h,b,C,f);if(!_)return;m.config=_.config,m.samplerate=_.samplerate,m.channelCount=_.channelCount,m.codec=_.codec,m.manifestCodec=_.manifestCodec,z.logger.log("parsed codec:"+m.codec+", rate:"+_.samplerate+", channels:"+_.channelCount)}}function w(m){return 9216e4/m}function y(m,h){var b=U(m,h);if(h+b<=m.length){var C=F(m,h)-b;if(C>0)return{headerLength:b,frameLength:C}}}function g(m,h,b,C,f){var T,A=C+f*w(m.samplerate),E=y(h,b);if(E){var d=E.headerLength,u=d+E.frameLength,p=Math.max(0,b+u-h.length);p?(T=new Uint8Array(u-d)).set(h.subarray(b+d,h.length),0):T=h.subarray(b+d,b+u);var M={unit:T,pts:A};return p||m.samples.push(M),{sample:M,length:u,missing:p}}var S=h.length-b;return(T=new Uint8Array(S)).set(h.subarray(b,h.length),0),{sample:{unit:T,pts:A},length:S,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>R,initPTSFn:()=>L});var z=O("./src/polyfills/number.ts"),B=O("./src/demux/id3.ts"),W=O("./src/types/demuxer.ts"),V=O("./src/demux/dummy-demuxed-track.ts"),Y=O("./src/utils/mp4-tools.ts"),U=O("./src/utils/typed-array.ts"),F=function(){function P(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var D=P.prototype;return D.resetInitSegment=function(w,y,g,m){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},D.resetTimeStamp=function(w){this.initPTS=w,this.resetContiguity()},D.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},D.canParse=function(w,y){return!1},D.appendFrame=function(w,y,g){},D.demux=function(w,y){this.cachedData&&(w=(0,Y.appendUint8Array)(this.cachedData,w),this.cachedData=null);var h,g=B.getID3Data(w,0),m=g?g.length:0,b=this._audioTrack,C=this._id3Track,f=g?B.getTimeStamp(g):void 0,_=w.length;for((null===this.basePTS||0===this.frameIndex&&(0,z.isFiniteNumber)(f))&&(this.basePTS=L(f,y,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),g&&g.length>0&&C.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:g,type:W.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});m<_;){if(this.canParse(w,m)){var A=this.appendFrame(b,w,m);A?(this.frameIndex++,this.lastPTS=A.sample.pts,h=m+=A.length):m=_}else B.canParse(w,m)?(g=B.getID3Data(w,m),C.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:g,type:W.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),h=m+=g.length):m++;if(m===_&&h!==_){var E=(0,U.sliceUint8)(w,h);this.cachedData=this.cachedData?(0,Y.appendUint8Array)(this.cachedData,E):E}}return{audioTrack:b,videoTrack:(0,V.dummyTrack)(),id3Track:C,textTrack:(0,V.dummyTrack)()}},D.demuxSampleAes=function(w,y,g){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},D.flush=function(w){var y=this.cachedData;return y&&(this.cachedData=null,this.demux(y,0)),{audioTrack:this._audioTrack,videoTrack:(0,V.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,V.dummyTrack)()}},D.destroy=function(){},P}(),L=function(D,x,w){return(0,z.isFiniteNumber)(D)?90*D:9e4*x+(w||0)};const R=F},"./src/demux/chunk-cache.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>z});var z=function(){function W(){this.chunks=[],this.dataLength=0}var V=W.prototype;return V.push=function(U){this.chunks.push(U),this.dataLength+=U.length},V.flush=function(){var L,U=this.chunks;return U.length?(L=1===U.length?U[0]:function B(W,V){for(var Y=new Uint8Array(V),U=0,F=0;F<W.length;F++){var L=W[F];Y.set(L,U),U+=L.length}return Y}(U,this.dataLength),this.reset(),L):new Uint8Array(0)},V.reset=function(){this.chunks.length=0,this.dataLength=0},W}()},"./src/demux/dummy-demuxed-track.ts":(he,J,O)=>{"use strict";function z(B,W){return void 0===B&&(B=""),void 0===W&&(W=9e4),{type:B,id:-1,pid:-1,inputTimeScale:W,sequenceNumber:-1,samples:[],dropped:0}}O.r(J),O.d(J,{dummyTrack:()=>z})},"./src/demux/exp-golomb.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>W});var z=O("./src/utils/logger.ts");const W=function(){function V(U){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=U,this.bytesAvailable=U.byteLength,this.word=0,this.bitsAvailable=0}var Y=V.prototype;return Y.loadWord=function(){var F=this.data,L=this.bytesAvailable,R=F.byteLength-L,P=new Uint8Array(4),D=Math.min(4,L);if(0===D)throw new Error("no bytes available");P.set(F.subarray(R,R+D)),this.word=new DataView(P.buffer).getUint32(0),this.bitsAvailable=8*D,this.bytesAvailable-=D},Y.skipBits=function(F){var L;F=Math.min(F,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>F?(this.word<<=F,this.bitsAvailable-=F):(F-=this.bitsAvailable,F-=(L=F>>3)<<3,this.bytesAvailable-=L,this.loadWord(),this.word<<=F,this.bitsAvailable-=F)},Y.readBits=function(F){var L=Math.min(this.bitsAvailable,F),R=this.word>>>32-L;if(F>32&&z.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=L,this.bitsAvailable>0)this.word<<=L;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(L=F-L)>0&&this.bitsAvailable?R<<L|this.readBits(L):R},Y.skipLZ=function(){var F;for(F=0;F<this.bitsAvailable;++F)if(0!=(this.word&2147483648>>>F))return this.word<<=F,this.bitsAvailable-=F,F;return this.loadWord(),F+this.skipLZ()},Y.skipUEG=function(){this.skipBits(1+this.skipLZ())},Y.skipEG=function(){this.skipBits(1+this.skipLZ())},Y.readUEG=function(){var F=this.skipLZ();return this.readBits(F+1)-1},Y.readEG=function(){var F=this.readUEG();return 1&F?1+F>>>1:-1*(F>>>1)},Y.readBoolean=function(){return 1===this.readBits(1)},Y.readUByte=function(){return this.readBits(8)},Y.readUShort=function(){return this.readBits(16)},Y.readUInt=function(){return this.readBits(32)},Y.skipScalingList=function(F){for(var L=8,R=8,D=0;D<F;D++)0!==R&&(R=(L+this.readEG()+256)%256),L=0===R?L:R},Y.readSPS=function(){var D,x,w,F=0,L=0,R=0,P=0,y=this.readUByte.bind(this),g=this.readBits.bind(this),m=this.readUEG.bind(this),h=this.readBoolean.bind(this),b=this.skipBits.bind(this),C=this.skipEG.bind(this),f=this.skipUEG.bind(this),_=this.skipScalingList.bind(this);y();var A=y();if(g(5),b(3),y(),f(),100===A||110===A||122===A||244===A||44===A||83===A||86===A||118===A||128===A){var E=m();if(3===E&&b(1),f(),f(),b(1),h())for(x=3!==E?8:12,w=0;w<x;w++)h()&&_(w<6?16:64)}f();var T=m();if(0===T)m();else if(1===T)for(b(1),C(),C(),D=m(),w=0;w<D;w++)C();f(),b(1);var c=m(),d=m(),u=g(1);0===u&&b(1),b(1),h()&&(F=m(),L=m(),R=m(),P=m());var p=[1,1];if(h()&&h())switch(y()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[y()<<8|y(),y()<<8|y()]}return{width:Math.ceil(16*(c+1)-2*F-2*L),height:(2-u)*(d+1)*16-(u?2:4)*(R+P),pixelRatio:p}},Y.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},V}()},"./src/demux/id3.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{canParse:()=>Y,decodeFrame:()=>P,getID3Data:()=>W,getID3Frames:()=>R,getTimeStamp:()=>U,isFooter:()=>B,isHeader:()=>z,isTimeStampFrame:()=>F,testables:()=>m,utf8ArrayToStr:()=>g});var h,z=function(f,_){return _+10<=f.length&&73===f[_]&&68===f[_+1]&&51===f[_+2]&&f[_+3]<255&&f[_+4]<255&&f[_+6]<128&&f[_+7]<128&&f[_+8]<128&&f[_+9]<128},B=function(f,_){return _+10<=f.length&&51===f[_]&&68===f[_+1]&&73===f[_+2]&&f[_+3]<255&&f[_+4]<255&&f[_+6]<128&&f[_+7]<128&&f[_+8]<128&&f[_+9]<128},W=function(f,_){for(var A=_,E=0;z(f,_);)E+=10,E+=V(f,_+6),B(f,_+10)&&(E+=10),_+=E;if(E>0)return f.subarray(A,A+E)},V=function(f,_){var A=0;return A=(127&f[_])<<21,A|=(127&f[_+1])<<14,(A|=(127&f[_+2])<<7)|127&f[_+3]},Y=function(f,_){return z(f,_)&&V(f,_+6)+10<=f.length-_},U=function(f){for(var _=R(f),A=0;A<_.length;A++){var E=_[A];if(F(E))return y(E)}},F=function(f){return f&&"PRIV"===f.key&&"com.apple.streaming.transportStreamTimestamp"===f.info},L=function(f){var _=String.fromCharCode(f[0],f[1],f[2],f[3]),A=V(f,4);return{type:_,size:A,data:f.subarray(10,10+A)}},R=function(f){for(var _=0,A=[];z(f,_);){for(var E=V(f,_+6),T=(_+=10)+E;_+8<T;){var c=L(f.subarray(_)),d=P(c);d&&A.push(d),_+=c.size+10}B(f,_)&&(_+=10)}return A},P=function(f){return"PRIV"===f.type?D(f):"W"===f.type[0]?w(f):x(f)},D=function(f){if(!(f.size<2)){var _=g(f.data,!0),A=new Uint8Array(f.data.subarray(_.length+1));return{key:f.type,info:_,data:A.buffer}}},x=function(f){if(!(f.size<2)){if("TXXX"===f.type){var _=1,A=g(f.data.subarray(_),!0),E=g(f.data.subarray(_+=A.length+1));return{key:f.type,info:A,data:E}}var T=g(f.data.subarray(1));return{key:f.type,data:T}}},w=function(f){if("WXXX"===f.type){if(f.size<2)return;var _=1,A=g(f.data.subarray(_),!0),E=g(f.data.subarray(_+=A.length+1));return{key:f.type,info:A,data:E}}var T=g(f.data);return{key:f.type,data:T}},y=function(f){if(8===f.data.byteLength){var _=new Uint8Array(f.data),E=(_[4]<<23)+(_[5]<<15)+(_[6]<<7)+_[7];return E/=45,1&_[3]&&(E+=47721858.84),Math.round(E)}},g=function(f,_){void 0===_&&(_=!1);var A=function b(){return!h&&void 0!==self.TextDecoder&&(h=new self.TextDecoder("utf-8")),h}();if(A){var E=A.decode(f);if(_){var T=E.indexOf("\0");return-1!==T?E.substring(0,T):E}return E.replace(/\0/g,"")}for(var d,u,p,c=f.length,M="",S=0;S<c;){if(0===(d=f[S++])&&_)return M;if(0!==d&&3!==d)switch(d>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:M+=String.fromCharCode(d);break;case 12:case 13:u=f[S++],M+=String.fromCharCode((31&d)<<6|63&u);break;case 14:u=f[S++],p=f[S++],M+=String.fromCharCode((15&d)<<12|(63&u)<<6|(63&p)<<0)}}return M},m={decodeTextFrame:x}},"./src/demux/mp3demuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>L});var z=O("./src/demux/base-audio-demuxer.ts"),B=O("./src/demux/id3.ts"),W=O("./src/utils/logger.ts"),V=O("./src/demux/mpegaudio.ts");function U(R,P){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,w){return x.__proto__=w,x})(R,P)}var F=function(R){function P(){return R.apply(this,arguments)||this}!function Y(R,P){R.prototype=Object.create(P.prototype),R.prototype.constructor=R,U(R,P)}(P,R);var D=P.prototype;return D.resetInitSegment=function(w,y,g,m){R.prototype.resetInitSegment.call(this,w,y,g,m),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:y,duration:m,inputTimeScale:9e4,dropped:0}},P.probe=function(w){if(!w)return!1;for(var g=(B.getID3Data(w,0)||[]).length,m=w.length;g<m;g++)if(V.probe(w,g))return W.logger.log("MPEG Audio sync word found !"),!0;return!1},D.canParse=function(w,y){return V.canParse(w,y)},D.appendFrame=function(w,y,g){if(null!==this.basePTS)return V.appendFrame(w,y,g,this.basePTS,this.frameIndex)},P}(z.default);const L=F},"./src/demux/mp4demuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>F});var z=O("./src/polyfills/number.ts"),B=O("./src/types/demuxer.ts"),W=O("./src/utils/mp4-tools.ts"),V=O("./src/demux/dummy-demuxed-track.ts"),Y=/\/emsg[-/]ID3/i;const F=function(){function L(P,D){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=D}var R=L.prototype;return R.resetTimeStamp=function(){},R.resetInitSegment=function(D,x,w,y){var g=this.videoTrack=(0,V.dummyTrack)("video",1),m=this.audioTrack=(0,V.dummyTrack)("audio",1),h=this.txtTrack=(0,V.dummyTrack)("text",1);if(this.id3Track=(0,V.dummyTrack)("id3",1),this.timeOffset=0,D&&D.byteLength){var b=(0,W.parseInitSegment)(D);if(b.video){var C=b.video,_=C.timescale,A=C.codec;g.id=C.id,g.timescale=h.timescale=_,g.codec=A}if(b.audio){var E=b.audio,c=E.timescale,d=E.codec;m.id=E.id,m.timescale=c,m.codec=d}h.id=W.RemuxerTrackIdConfig.text,g.sampleDuration=0,g.duration=m.duration=y}},R.resetContiguity=function(){},L.probe=function(D){return D=D.length>16384?D.subarray(0,16384):D,(0,W.findBox)(D,["moof"]).length>0},R.demux=function(D,x){this.timeOffset=x;var w=D,y=this.videoTrack,g=this.txtTrack;if(this.config.progressive){this.remainderData&&(w=(0,W.appendUint8Array)(this.remainderData,D));var m=(0,W.segmentValidRange)(w);this.remainderData=m.remainder,y.samples=m.valid||new Uint8Array}else y.samples=w;var h=this.extractID3Track(y,x);return g.samples=(0,W.parseSamples)(x,y),{videoTrack:y,audioTrack:this.audioTrack,id3Track:h,textTrack:this.txtTrack}},R.flush=function(){var D=this.timeOffset,x=this.videoTrack,w=this.txtTrack;x.samples=this.remainderData||new Uint8Array,this.remainderData=null;var y=this.extractID3Track(x,this.timeOffset);return w.samples=(0,W.parseSamples)(D,x),{videoTrack:x,audioTrack:(0,V.dummyTrack)(),id3Track:y,textTrack:(0,V.dummyTrack)()}},R.extractID3Track=function(D,x){var w=this.id3Track;if(D.samples.length){var y=(0,W.findBox)(D.samples,["emsg"]);y&&y.forEach(function(g){var m=(0,W.parseEmsg)(g);if(Y.test(m.schemeIdUri)){var h=(0,z.isFiniteNumber)(m.presentationTime)?m.presentationTime/m.timeScale:x+m.presentationTimeDelta/m.timeScale,b=4294967295===m.eventDuration?Number.POSITIVE_INFINITY:m.eventDuration/m.timeScale;b<=.001&&(b=Number.POSITIVE_INFINITY);var C=m.payload;w.samples.push({data:C,len:C.byteLength,dts:h,pts:h,type:B.MetadataSchema.emsg,duration:b})}})}return w},R.demuxSampleAes=function(D,x,w){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},R.destroy=function(){},L}()},"./src/demux/mpegaudio.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{appendFrame:()=>U,canParse:()=>P,isHeader:()=>R,isHeaderPattern:()=>L,parseHeader:()=>F,probe:()=>D});var z=null,B=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],W=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],V=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Y=[0,1,1,4];function U(x,w,y,g,m){if(!(y+24>w.length)){var h=F(w,y);if(h&&y+h.frameLength<=w.length){var C=g+m*(9e4*h.samplesPerFrame/h.sampleRate),f={unit:w.subarray(y,y+h.frameLength),pts:C,dts:C};return x.config=[],x.channelCount=h.channelCount,x.samplerate=h.sampleRate,x.samples.push(f),{sample:f,length:h.frameLength,missing:0}}}}function F(x,w){var y=x[w+1]>>3&3,g=x[w+1]>>1&3,m=x[w+2]>>4&15,h=x[w+2]>>2&3;if(1!==y&&0!==m&&15!==m&&3!==h){var C=x[w+3]>>6,_=1e3*B[14*(3===y?3-g:3===g?3:4)+m-1],E=W[3*(3===y?0:2===y?1:2)+h],T=3===C?1:2,c=V[y][g],d=Y[g],u=8*c*d,p=Math.floor(c*_/E+(x[w+2]>>1&1))*d;if(null===z){var S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);z=S?parseInt(S[1]):0}return!!z&&z<=87&&2===g&&_>=224e3&&0===C&&(x[w+3]=128|x[w+3]),{sampleRate:E,channelCount:T,frameLength:p,samplesPerFrame:u}}}function L(x,w){return 255===x[w]&&224==(224&x[w+1])&&0!=(6&x[w+1])}function R(x,w){return w+1<x.length&&L(x,w)}function P(x,w){return L(x,w)&&4<=x.length-w}function D(x,w){if(w+1<x.length&&L(x,w)){var g=F(x,w),m=4;null!=g&&g.frameLength&&(m=g.frameLength);var h=w+m;return h===x.length||R(x,h)}return!1}},"./src/demux/sample-aes.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>V});var z=O("./src/crypt/decrypter.ts"),B=O("./src/utils/mp4-tools.ts");const V=function(){function Y(F,L,R){this.keyData=void 0,this.decrypter=void 0,this.keyData=R,this.decrypter=new z.default(L,{removePKCS7Padding:!1})}var U=Y.prototype;return U.decryptBuffer=function(L){return this.decrypter.decrypt(L,this.keyData.key.buffer,this.keyData.iv.buffer)},U.decryptAacSample=function(L,R,P){var D=this,x=L[R].unit;if(!(x.length<=16)){var w=x.subarray(16,x.length-x.length%16),y=w.buffer.slice(w.byteOffset,w.byteOffset+w.length);this.decryptBuffer(y).then(function(g){var m=new Uint8Array(g);x.set(m,16),D.decrypter.isSync()||D.decryptAacSamples(L,R+1,P)})}},U.decryptAacSamples=function(L,R,P){for(;;R++){if(R>=L.length)return void P();if(!(L[R].unit.length<32||(this.decryptAacSample(L,R,P),this.decrypter.isSync())))return}},U.getAvcEncryptedData=function(L){for(var R=16*Math.floor((L.length-48)/160)+16,P=new Int8Array(R),D=0,x=32;x<L.length-16;x+=160,D+=16)P.set(L.subarray(x,x+16),D);return P},U.getAvcDecryptedUnit=function(L,R){for(var P=new Uint8Array(R),D=0,x=32;x<L.length-16;x+=160,D+=16)L.set(P.subarray(D,D+16),x);return L},U.decryptAvcSample=function(L,R,P,D,x){var w=this,y=(0,B.discardEPB)(x.data),g=this.getAvcEncryptedData(y);this.decryptBuffer(g.buffer).then(function(m){x.data=w.getAvcDecryptedUnit(y,m),w.decrypter.isSync()||w.decryptAvcSamples(L,R,P+1,D)})},U.decryptAvcSamples=function(L,R,P,D){if(L instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;R++,P=0){if(R>=L.length)return void D();for(var x=L[R].units;!(P>=x.length);P++){var w=x[P];if(!(w.data.length<=48||1!==w.type&&5!==w.type||(this.decryptAvcSample(L,R,P,D,w),this.decrypter.isSync())))return}}},Y}()},"./src/demux/transmuxer-interface.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>P});var z=O("./src/demux/webworkify-webpack.js"),B=O("./src/events.ts"),W=O("./src/demux/transmuxer.ts"),V=O("./src/utils/logger.ts"),Y=O("./src/errors.ts"),U=O("./src/utils/mediasource-helper.ts"),F=O("./node_modules/eventemitter3/index.js"),R=(0,U.getMediaSource)()||{isTypeSupported:function(){return!1}},P=function(){function D(w,y,g,m){var h=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var b=w.config;this.hls=w,this.id=y,this.useWorker=!!b.enableWorker,this.onTransmuxComplete=g,this.onFlush=m;var C=function(T,c){(c=c||{}).frag=h.frag,c.id=h.id,h.hls.trigger(T,c)};this.observer=new F.EventEmitter,this.observer.on(B.Events.FRAG_DECRYPTED,C),this.observer.on(B.Events.ERROR,C);var f={mp4:R.isTypeSupported("video/mp4"),mpeg:R.isTypeSupported("audio/mpeg"),mp3:R.isTypeSupported('audio/mp4; codecs="mp3"')},_=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){var A;V.logger.log("demuxing in webworker");try{A=this.worker=(0,z.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),A.addEventListener("message",this.onwmsg),A.onerror=function(E){h.useWorker=!1,V.logger.warn("Exception in webworker, fallback to inline"),h.hls.trigger(B.Events.ERROR,{type:Y.ErrorTypes.OTHER_ERROR,details:Y.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(E.message+"  ("+E.filename+":"+E.lineno+")")})},A.postMessage({cmd:"init",typeSupported:f,vendor:_,id:y,config:JSON.stringify(b)})}catch(E){V.logger.warn("Error in worker:",E),V.logger.error("Error while initializing DemuxerWorker, fallback to inline"),A&&self.URL.revokeObjectURL(A.objectURL),this.transmuxer=new W.default(this.observer,f,b,_,y),this.worker=null}}else this.transmuxer=new W.default(this.observer,f,b,_,y)}var x=D.prototype;return x.destroy=function(){var y=this.worker;if(y)y.removeEventListener("message",this.onwmsg),y.terminate(),this.worker=null,this.onwmsg=void 0;else{var g=this.transmuxer;g&&(g.destroy(),this.transmuxer=null)}var m=this.observer;m&&m.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},x.push=function(y,g,m,h,b,C,f,_,A,E){var T,c,d=this;A.transmuxing.start=self.performance.now();var u=this.transmuxer,p=this.worker,M=C?C.start:b.start,S=b.decryptdata,k=this.frag,j=!(k&&b.cc===k.cc),N=!(k&&A.level===k.level),G=k?A.sn-k.sn:-1,K=this.part?A.part-this.part.index:-1,Z=!N&&(1===G||0===G&&(1===K||0===G&&A.id>1&&A.id===(null==k?void 0:k.stats.chunkCount)&&K<=0)),te=self.performance.now();(N||G||0===b.stats.parsing.start)&&(b.stats.parsing.start=te),C&&(K||!Z)&&(C.stats.parsing.start=te);var q=!(k&&(null===(T=b.initSegment)||void 0===T?void 0:T.url)===(null===(c=k.initSegment)||void 0===c?void 0:c.url)),ne=new W.TransmuxState(j,Z,_,N,M,q);if(!Z||j||q){V.logger.log("[transmuxer-interface, "+b.type+"]: Starting new transmux session for sn: "+A.sn+" p: "+A.part+" level: "+A.level+" id: "+A.id+"\n        discontinuity: "+j+"\n        trackSwitch: "+N+"\n        contiguous: "+Z+"\n        accurateTimeOffset: "+_+"\n        timeOffset: "+M+"\n        initSegmentChange: "+q);var se=new W.TransmuxConfig(m,h,g,f,E);this.configureTransmuxer(se)}if(this.frag=b,this.part=C,p)p.postMessage({cmd:"demux",data:y,decryptdata:S,chunkMeta:A,state:ne},y instanceof ArrayBuffer?[y]:[]);else if(u){var ue=u.push(y,S,A,ne);(0,W.isPromise)(ue)?(u.async=!0,ue.then(function(ce){d.handleTransmuxComplete(ce)}).catch(function(ce){d.transmuxerError(ce,A,"transmuxer-interface push error")})):(u.async=!1,this.handleTransmuxComplete(ue))}},x.flush=function(y){var g=this;y.transmuxing.start=self.performance.now();var m=this.transmuxer,h=this.worker;if(h)h.postMessage({cmd:"flush",chunkMeta:y});else if(m){var b=m.flush(y);(0,W.isPromise)(b)||m.async?((0,W.isPromise)(b)||(b=Promise.resolve(b)),b.then(function(f){g.handleFlushResult(f,y)}).catch(function(f){g.transmuxerError(f,y,"transmuxer-interface flush error")})):this.handleFlushResult(b,y)}},x.transmuxerError=function(y,g,m){!this.hls||this.hls.trigger(B.Events.ERROR,{type:Y.ErrorTypes.MEDIA_ERROR,details:Y.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:g,fatal:!1,error:y,err:y,reason:m})},x.handleFlushResult=function(y,g){var m=this;y.forEach(function(h){m.handleTransmuxComplete(h)}),this.onFlush(g)},x.onWorkerMessage=function(y){var g=y.data,m=this.hls;switch(g.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(g.data);break;case"flush":this.onFlush(g.data);break;case"workerLog":V.logger[g.data.logType]&&V.logger[g.data.logType](g.data.message);break;default:g.data=g.data||{},g.data.frag=this.frag,g.data.id=this.id,m.trigger(g.event,g.data)}},x.configureTransmuxer=function(y){var g=this.worker,m=this.transmuxer;g?g.postMessage({cmd:"configure",config:y}):m&&m.configure(y)},x.handleTransmuxComplete=function(y){y.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(y)},D}()},"./src/demux/transmuxer-worker.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>F});var z=O("./src/demux/transmuxer.ts"),B=O("./src/events.ts"),W=O("./src/utils/logger.ts"),V=O("./node_modules/eventemitter3/index.js"),U=O("./src/errors.ts");function F(x){var w=new V.EventEmitter,y=function(h,b){x.postMessage({event:h,data:b})};w.on(B.Events.FRAG_DECRYPTED,y),w.on(B.Events.ERROR,y),x.addEventListener("message",function(m){var h=m.data;switch(h.cmd){case"init":var b=JSON.parse(h.config);x.transmuxer=new z.default(w,h.typeSupported,b,h.vendor,h.id),(0,W.enableLogs)(b.debug,h.id),function(){var h=function(f){W.logger[f]=function(E){y("workerLog",{logType:f,message:E})}};for(var b in W.logger)h(b)}(),y("init",null);break;case"configure":x.transmuxer.configure(h.config);break;case"demux":var C=x.transmuxer.push(h.data,h.decryptdata,h.chunkMeta,h.state);(0,z.isPromise)(C)?(x.transmuxer.async=!0,C.then(function(E){L(x,E)}).catch(function(E){y(B.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:E,err:E,reason:"transmuxer-worker push error"})})):(x.transmuxer.async=!1,L(x,C));break;case"flush":var f=h.chunkMeta,_=x.transmuxer.flush(f);(0,z.isPromise)(_)||x.transmuxer.async?((0,z.isPromise)(_)||(_=Promise.resolve(_)),_.then(function(E){P(x,E,f)}).catch(function(E){y(B.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:E,err:E,reason:"transmuxer-worker flush error"})})):P(x,_,f)}})}function L(x,w){if(function D(x){return!(x.audio||x.video||x.text||x.id3||x.initSegment)}(w.remuxResult))return!1;var y=[],g=w.remuxResult,m=g.audio,h=g.video;return m&&R(y,m),h&&R(y,h),x.postMessage({event:"transmuxComplete",data:w},y),!0}function R(x,w){w.data1&&x.push(w.data1.buffer),w.data2&&x.push(w.data2.buffer)}function P(x,w,y){w.reduce(function(m,h){return L(x,h)||m},!1)||x.postMessage({event:"transmuxComplete",data:w[0]}),x.postMessage({event:"flush",data:y})}},"./src/demux/transmuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{TransmuxConfig:()=>h,TransmuxState:()=>b,default:()=>w,isPromise:()=>m});var D,z=O("./src/events.ts"),B=O("./src/errors.ts"),W=O("./src/crypt/decrypter.ts"),V=O("./src/demux/aacdemuxer.ts"),Y=O("./src/demux/mp4demuxer.ts"),U=O("./src/demux/tsdemuxer.ts"),F=O("./src/demux/mp3demuxer.ts"),L=O("./src/remux/mp4-remuxer.ts"),R=O("./src/remux/passthrough-remuxer.ts"),P=O("./src/utils/logger.ts");try{D=self.performance.now.bind(self.performance)}catch(C){P.logger.debug("Unable to use Performance API on this environment"),D=self.Date.now}var x=[{demux:Y.default,remux:R.default},{demux:U.default,remux:L.default},{demux:V.default,remux:L.default},{demux:F.default,remux:L.default}],w=function(){function C(_,A,E,T,c){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=_,this.typeSupported=A,this.config=E,this.vendor=T,this.id=c}var f=C.prototype;return f.configure=function(A){this.transmuxConfig=A,this.decrypter&&this.decrypter.reset()},f.push=function(A,E,T,c){var d=this,u=T.transmuxing;u.executeStart=D();var p=new Uint8Array(A),M=this.currentTransmuxState,S=this.transmuxConfig;c&&(this.currentTransmuxState=c);var k=c||M,j=k.contiguous,N=k.discontinuity,G=k.trackSwitch,K=k.accurateTimeOffset,$=k.timeOffset,Z=k.initSegmentChange,te=S.audioCodec,q=S.videoCodec,ne=S.defaultInitPts,se=S.duration,ue=S.initSegmentData,ce=function y(C,f){var _=null;return C.byteLength>0&&null!=f&&null!=f.key&&null!==f.iv&&null!=f.method&&(_=f),_}(p,E);if(ce&&"AES-128"===ce.method){var fe=this.getDecrypter();if(!fe.isSync())return this.decryptionPromise=fe.webCryptoDecrypt(p,ce.key.buffer,ce.iv.buffer).then(function(Ze){var lt=d.push(Ze,null,T);return d.decryptionPromise=null,lt}),this.decryptionPromise;var ve=fe.softwareDecrypt(p,ce.key.buffer,ce.iv.buffer);if(T.part>-1&&(ve=fe.flush()),!ve)return u.executeEnd=D(),g(T);p=new Uint8Array(ve)}var Ee=this.needsProbing(N,G);Ee&&this.configureTransmuxer(p),(N||G||Z||Ee)&&this.resetInitSegment(ue,te,q,se,E),(N||Z||Ee)&&this.resetInitialTimestamp(ne),j||this.resetContiguity();var ye=this.transmux(p,ce,$,K,T),Te=this.currentTransmuxState;return Te.contiguous=!0,Te.discontinuity=!1,Te.trackSwitch=!1,u.executeEnd=D(),ye},f.flush=function(A){var E=this,T=A.transmuxing;T.executeStart=D();var c=this.decrypter,d=this.currentTransmuxState,u=this.decryptionPromise;if(u)return u.then(function(){return E.flush(A)});var p=[],M=d.timeOffset;if(c){var S=c.flush();S&&p.push(this.push(S,null,A))}var k=this.demuxer;if(!k||!this.remuxer)return this.observer.emit(z.Events.ERROR,z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),T.executeEnd=D(),[g(A)];var N=k.flush(M);return m(N)?N.then(function(G){return E.flushRemux(p,G,A),p}):(this.flushRemux(p,N,A),p)},f.flushRemux=function(A,E,T){var c=E.audioTrack,d=E.videoTrack,u=E.id3Track,p=E.textTrack,M=this.currentTransmuxState,S=M.accurateTimeOffset,k=M.timeOffset;P.logger.log("[transmuxer.ts]: Flushed fragment "+T.sn+(T.part>-1?" p: "+T.part:"")+" of level "+T.level);var j=this.remuxer.remux(c,d,u,p,k,S,!0,this.id);A.push({remuxResult:j,chunkMeta:T}),T.transmuxing.executeEnd=D()},f.resetInitialTimestamp=function(A){var E=this.demuxer,T=this.remuxer;!E||!T||(E.resetTimeStamp(A),T.resetTimeStamp(A))},f.resetContiguity=function(){var A=this.demuxer,E=this.remuxer;!A||!E||(A.resetContiguity(),E.resetNextTimestamp())},f.resetInitSegment=function(A,E,T,c,d){var u=this.demuxer,p=this.remuxer;!u||!p||(u.resetInitSegment(A,E,T,c),p.resetInitSegment(A,E,T,d))},f.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},f.transmux=function(A,E,T,c,d){return E&&"SAMPLE-AES"===E.method?this.transmuxSampleAes(A,E,T,c,d):this.transmuxUnencrypted(A,T,c,d)},f.transmuxUnencrypted=function(A,E,T,c){var d=this.demuxer.demux(A,E,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(d.audioTrack,d.videoTrack,d.id3Track,d.textTrack,E,T,!1,this.id),chunkMeta:c}},f.transmuxSampleAes=function(A,E,T,c,d){var u=this;return this.demuxer.demuxSampleAes(A,E,T).then(function(p){return{remuxResult:u.remuxer.remux(p.audioTrack,p.videoTrack,p.id3Track,p.textTrack,T,c,!1,u.id),chunkMeta:d}})},f.configureTransmuxer=function(A){for(var u,E=this.config,T=this.observer,c=this.typeSupported,d=this.vendor,p=0,M=x.length;p<M;p++)if(x[p].demux.probe(A)){u=x[p];break}u||(P.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),u={demux:Y.default,remux:R.default});var S=this.demuxer,k=this.remuxer,j=u.remux,N=u.demux;(!k||!(k instanceof j))&&(this.remuxer=new j(T,E,c,d)),(!S||!(S instanceof N))&&(this.demuxer=new N(T,E,c),this.probe=N.probe)},f.needsProbing=function(A,E){return!this.demuxer||!this.remuxer||A||E},f.getDecrypter=function(){var A=this.decrypter;return A||(A=this.decrypter=new W.default(this.config)),A},C}(),g=function(f){return{remuxResult:{},chunkMeta:f}};function m(C){return"then"in C&&C.then instanceof Function}var h=function(f,_,A,E,T){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=f,this.videoCodec=_,this.initSegmentData=A,this.duration=E,this.defaultInitPts=T},b=function(f,_,A,E,T,c){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=f,this.contiguous=_,this.accurateTimeOffset=A,this.trackSwitch=E,this.timeOffset=T,this.initSegmentChange=c}},"./src/demux/tsdemuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>C});var z=O("./src/demux/adts.ts"),B=O("./src/demux/mpegaudio.ts"),W=O("./src/demux/exp-golomb.ts"),V=O("./src/demux/sample-aes.ts"),Y=O("./src/events.ts"),U=O("./src/utils/mp4-tools.ts"),F=O("./src/utils/logger.ts"),L=O("./src/errors.ts"),R=O("./src/types/demuxer.ts");function P(){return P=Object.assign?Object.assign.bind():function(f){for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(f[E]=A[E])}return f},P.apply(this,arguments)}var D=188;function w(f,_,A,E){return{key:f,frame:!1,pts:_,dts:A,units:[],debug:E,length:0}}function y(f,_){return((31&f[_+1])<<8)+f[_+2]}function g(f,_){return(31&f[_+10])<<8|f[_+11]}function m(f,_,A,E){var T={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},d=_+3+((15&f[_+1])<<8|f[_+2])-4;for(_+=12+((15&f[_+10])<<8|f[_+11]);_<d;){var p=y(f,_);switch(f[_]){case 207:if(!E){F.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===T.audio&&(T.audio=p);break;case 21:-1===T.id3&&(T.id3=p);break;case 219:if(!E){F.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===T.avc&&(T.avc=p);break;case 3:case 4:!0!==A.mpeg&&!0!==A.mp3?F.logger.log("MPEG audio found, not supported in this browser"):-1===T.audio&&(T.audio=p,T.segmentCodec="mp3");break;case 36:F.logger.warn("Unsupported HEVC stream type found")}_+=5+((15&f[_+3])<<8|f[_+4])}return T}function h(f){var A,E,T,c,d,_=0,u=f.data;if(!f||0===f.size)return null;for(;u[0].length<19&&u.length>1;){var p=new Uint8Array(u[0].length+u[1].length);p.set(u[0]),p.set(u[1],u[0].length),u[0]=p,u.splice(1,1)}if(1===((A=u[0])[0]<<16)+(A[1]<<8)+A[2]){if((E=(A[4]<<8)+A[5])&&E>f.size-6)return null;var S=A[7];192&S&&(c=536870912*(14&A[9])+4194304*(255&A[10])+16384*(254&A[11])+128*(255&A[12])+(254&A[13])/2,64&S?c-(d=536870912*(14&A[14])+4194304*(255&A[15])+16384*(254&A[16])+128*(255&A[17])+(254&A[18])/2)>54e5&&(F.logger.warn(Math.round((c-d)/9e4)+"s delta between PTS and DTS, align them"),c=d):d=c);var k=(T=A[8])+9;if(f.size<=k)return null;f.size-=k;for(var j=new Uint8Array(f.size),N=0,G=u.length;N<G;N++){var K=(A=u[N]).byteLength;if(k){if(k>K){k-=K;continue}A=A.subarray(k),K-=k,k=0}j.set(A,_),_+=K}return E&&(E-=T+3),{data:j,pts:c,dts:d,len:E}}return null}function b(f,_){if(f.units.length&&f.frame){if(void 0===f.pts){var A=_.samples,E=A.length;if(!E)return void _.dropped++;var T=A[E-1];f.pts=T.pts,f.dts=T.dts}_.samples.push(f)}f.debug.length&&F.logger.log(f.pts+"/"+f.dts+":"+f.debug)}const C=function(){function f(A,E,T){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=A,this.config=E,this.typeSupported=T}f.probe=function(E){var T=f.syncOffset(E);return T>0&&F.logger.warn("MPEG2-TS detected but first sync word found @ offset "+T),-1!==T},f.syncOffset=function(E){for(var T=E.length,c=Math.min(940,E.length-D)+1,d=0;d<c;){for(var u=!1,p=d;p<T&&71===E[p];p+=D)if(!u&&0===y(E,p)&&(u=!0),u&&p+D>c)return d;d++}return-1},f.createTrack=function(E,T){return{container:"video"===E||"audio"===E?"video/mp2t":void 0,type:E,id:U.RemuxerTrackIdConfig[E],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===E?T:void 0}};var _=f.prototype;return _.resetInitSegment=function(E,T,c,d){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=f.createTrack("video"),this._audioTrack=f.createTrack("audio",d),this._id3Track=f.createTrack("id3"),this._txtTrack=f.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=T,this.videoCodec=c,this._duration=d},_.resetTimeStamp=function(){},_.resetContiguity=function(){var E=this._audioTrack,T=this._avcTrack,c=this._id3Track;E&&(E.pesData=null),T&&(T.pesData=null),c&&(c.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},_.demux=function(E,T,c,d){void 0===c&&(c=!1),void 0===d&&(d=!1),c||(this.sampleAes=null);var u,p=this._avcTrack,M=this._audioTrack,S=this._id3Track,k=this._txtTrack,j=p.pid,N=p.pesData,G=M.pid,K=S.pid,$=M.pesData,Z=S.pesData,te=null,q=this.pmtParsed,ne=this._pmtId,se=E.length;if(this.remainderData&&(se=(E=(0,U.appendUint8Array)(this.remainderData,E)).length,this.remainderData=null),se<D&&!d)return this.remainderData=E,{audioTrack:M,videoTrack:p,id3Track:S,textTrack:k};var ue=Math.max(0,f.syncOffset(E));(se-=(se-ue)%D)<E.byteLength&&!d&&(this.remainderData=new Uint8Array(E.buffer,se,E.buffer.byteLength-se));for(var ce=0,fe=ue;fe<se;fe+=D)if(71===E[fe]){var ve=!!(64&E[fe+1]),Re=y(E,fe),ye=void 0;if((48&E[fe+3])>>4>1){if((ye=fe+5+E[fe+4])===fe+D)continue}else ye=fe+4;switch(Re){case j:ve&&(N&&(u=h(N))&&this.parseAVCPES(p,k,u,!1),N={data:[],size:0}),N&&(N.data.push(E.subarray(ye,fe+D)),N.size+=fe+D-ye);break;case G:if(ve){if($&&(u=h($)))switch(M.segmentCodec){case"aac":this.parseAACPES(M,u);break;case"mp3":this.parseMPEGPES(M,u)}$={data:[],size:0}}$&&($.data.push(E.subarray(ye,fe+D)),$.size+=fe+D-ye);break;case K:ve&&(Z&&(u=h(Z))&&this.parseID3PES(S,u),Z={data:[],size:0}),Z&&(Z.data.push(E.subarray(ye,fe+D)),Z.size+=fe+D-ye);break;case 0:ve&&(ye+=E[ye]+1),ne=this._pmtId=g(E,ye);break;case ne:ve&&(ye+=E[ye]+1);var Te=m(E,ye,this.typeSupported,c);(j=Te.avc)>0&&(p.pid=j),(G=Te.audio)>0&&(M.pid=G,M.segmentCodec=Te.segmentCodec),(K=Te.id3)>0&&(S.pid=K),null!==te&&!q&&(F.logger.warn("MPEG-TS PMT found at "+fe+" after unknown PID '"+te+"'. Backtracking to sync byte @"+ue+" to parse all TS packets."),te=null,fe=ue-188),q=this.pmtParsed=!0;break;case 17:case 8191:break;default:te=Re}}else ce++;ce>0&&this.observer.emit(Y.Events.ERROR,Y.Events.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ce+" TS packet/s that do not start with 0x47"}),p.pesData=N,M.pesData=$,S.pesData=Z;var Ze={audioTrack:M,videoTrack:p,id3Track:S,textTrack:k};return d&&this.extractRemainingSamples(Ze),Ze},_.flush=function(){var T,E=this.remainderData;return this.remainderData=null,T=E?this.demux(E,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(T),this.sampleAes?this.decrypt(T,this.sampleAes):T},_.extractRemainingSamples=function(E){var k,T=E.audioTrack,c=E.videoTrack,d=E.id3Track,u=E.textTrack,p=c.pesData,M=T.pesData,S=d.pesData;if(p&&(k=h(p))?(this.parseAVCPES(c,u,k,!0),c.pesData=null):c.pesData=p,M&&(k=h(M))){switch(T.segmentCodec){case"aac":this.parseAACPES(T,k);break;case"mp3":this.parseMPEGPES(T,k)}T.pesData=null}else null!=M&&M.size&&F.logger.log("last AAC PES packet truncated,might overlap between fragments"),T.pesData=M;S&&(k=h(S))?(this.parseID3PES(d,k),d.pesData=null):d.pesData=S},_.demuxSampleAes=function(E,T,c){var d=this.demux(E,c,!0,!this.config.progressive),u=this.sampleAes=new V.default(this.observer,this.config,T);return this.decrypt(d,u)},_.decrypt=function(E,T){return new Promise(function(c){var d=E.audioTrack,u=E.videoTrack;d.samples&&"aac"===d.segmentCodec?T.decryptAacSamples(d.samples,0,function(){u.samples?T.decryptAvcSamples(u.samples,0,0,function(){c(E)}):c(E)}):u.samples&&T.decryptAvcSamples(u.samples,0,0,function(){c(E)})})},_.destroy=function(){this._duration=0},_.parseAVCPES=function(E,T,c,d){var k,u=this,p=this.parseAVCNALu(E,c.data),S=this.avcSample,j=!1;c.data=null,S&&p.length&&!E.audFound&&(b(S,E),S=this.avcSample=w(!1,c.pts,c.dts,"")),p.forEach(function(N){switch(N.type){case 1:k=!0,S||(S=u.avcSample=w(!0,c.pts,c.dts,"")),S.frame=!0;var G=N.data;if(j&&G.length>4){var K=new W.default(G).readSliceType();(2===K||4===K||7===K||9===K)&&(S.key=!0)}break;case 5:k=!0,S||(S=u.avcSample=w(!0,c.pts,c.dts,"")),S.key=!0,S.frame=!0;break;case 6:k=!0,(0,U.parseSEIMessageFromNALu)(N.data,1,c.pts,T.samples);break;case 7:if(k=!0,j=!0,!E.sps){var Z=new W.default(N.data).readSPS();E.width=Z.width,E.height=Z.height,E.pixelRatio=Z.pixelRatio,E.sps=[N.data],E.duration=u._duration;for(var te=N.data.subarray(1,4),q="avc1.",ne=0;ne<3;ne++){var se=te[ne].toString(16);se.length<2&&(se="0"+se),q+=se}E.codec=q}break;case 8:k=!0,E.pps||(E.pps=[N.data]);break;case 9:k=!1,E.audFound=!0,S&&b(S,E),S=u.avcSample=w(!1,c.pts,c.dts,"");break;case 12:k=!0;break;default:k=!1,S&&(S.debug+="unknown NAL "+N.type+" ")}S&&k&&S.units.push(N)}),d&&S&&(b(S,E),this.avcSample=null)},_.getLastNalUnit=function(E){var T,d,c=this.avcSample;if((!c||0===c.units.length)&&(c=E[E.length-1]),null!==(T=c)&&void 0!==T&&T.units){var u=c.units;d=u[u.length-1]}return d},_.parseAVCNALu=function(E,T){var S,k,c=T.byteLength,d=E.naluState||0,u=d,p=[],M=0,N=-1,G=0;for(-1===d&&(N=0,G=31&T[0],d=0,M=1);M<c;)if(S=T[M++],d)if(1!==d)if(S)if(1===S){if(N>=0){var K={data:T.subarray(N,M-d-1),type:G};p.push(K)}else{var $=this.getLastNalUnit(E.samples);if($&&(u&&M<=4-u&&$.state&&($.data=$.data.subarray(0,$.data.byteLength-u)),(k=M-d-1)>0)){var Z=new Uint8Array($.data.byteLength+k);Z.set($.data,0),Z.set(T.subarray(0,k),$.data.byteLength),$.data=Z,$.state=0}}M<c?(N=M,G=31&T[M],d=0):d=-1}else d=0;else d=3;else d=S?0:2;else d=S?0:1;if(N>=0&&d>=0){var te={data:T.subarray(N,c),type:G,state:d};p.push(te)}if(0===p.length){var q=this.getLastNalUnit(E.samples);if(q){var ne=new Uint8Array(q.data.byteLength+T.byteLength);ne.set(q.data,0),ne.set(T,q.data.byteLength),q.data=ne}}return E.naluState=d,p},_.parseAACPES=function(E,T){var j,N,G,K,$,c=0,d=this.aacOverFlow,u=T.data;if(d){this.aacOverFlow=null;var p=d.missing,M=d.sample.unit.byteLength;if(-1===p){var S=new Uint8Array(M+u.byteLength);S.set(d.sample.unit,0),S.set(u,M),u=S}else{var k=M-p;d.sample.unit.set(u.subarray(0,p),k),E.samples.push(d.sample),c=d.missing}}for(j=c,N=u.length;j<N-1&&!z.isHeader(u,j);j++);if(j===c||(j<N-1?(G="AAC PES did not start with ADTS header,offset:"+j,K=!1):(G="no ADTS header found in AAC PES",K=!0),F.logger.warn("parsing error:"+G),this.observer.emit(Y.Events.ERROR,Y.Events.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:K,reason:G}),!K)){if(z.initTrackConfig(E,this.observer,u,j,this.audioCodec),void 0!==T.pts)$=T.pts;else{if(!d)return void F.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var Z=z.getFrameDuration(E.samplerate);$=d.sample.pts+Z}for(var q,te=0;j<N;){if(j+=(q=z.appendFrame(E,u,j,$,te)).length,q.missing){this.aacOverFlow=q;break}for(te++;j<N-1&&!z.isHeader(u,j);j++);}}},_.parseMPEGPES=function(E,T){var c=T.data,d=c.length,u=0,p=0,M=T.pts;if(void 0!==M)for(;p<d;)if(B.isHeader(c,p)){var S=B.appendFrame(E,c,p,M,u);if(!S)break;p+=S.length,u++}else p++;else F.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},_.parseID3PES=function(E,T){if(void 0!==T.pts){var c=P({},T,{type:this._avcTrack?R.MetadataSchema.emsg:R.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});E.samples.push(c)}else F.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},f}()},"./src/demux/webworkify-webpack.js":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>D});var B=function(){var w=ENTRY_MODULE,y={},g=function h(b){var C=y[b];if(void 0!==C)return C.exports;var f=y[b]={exports:{}};return w[b].call(f.exports,f,f.exports,h),f.exports};g.m=w,g.n=function(h){var b=h&&h.__esModule?function(){return h.default}:function(){return h};return g.d(b,{a:b}),b},g.d=function(h,b){for(var C in b)g.o(b,C)&&!g.o(h,C)&&Object.defineProperty(h,C,{enumerable:!0,get:b[C]})},g.o=function(h,b){return Object.prototype.hasOwnProperty.call(h,b)},g.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var m=g(ENTRY_MODULE);return m.default||m}.toString().split("ENTRY_MODULE"),W="[\\.|\\-|\\+|\\w|/|@]+",V="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+W+").*?\\)";function Y(x){return(x+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function U(x){return!isNaN(1*x)}function F(x,w,y){var g={};g[y]=[];var m=w.toString().replace(/^"[^"]+"/,"function"),h=m.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||m.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!h)return g;for(var f,b=h[1],C=new RegExp("(\\\\n|\\W)"+Y(b)+V,"g");f=C.exec(m);)"dll-reference"!==f[3]&&g[y].push(f[3]);for(C=new RegExp("\\("+Y(b)+'\\("(dll-reference\\s('+W+'))"\\)\\)'+V,"g");f=C.exec(m);)x[f[2]]||(g[y].push(f[1]),x[f[2]]=O(f[1]).m),g[f[2]]=g[f[2]]||[],g[f[2]].push(f[4]);for(var _=Object.keys(g),A=0;A<_.length;A++)for(var E=0;E<g[_[A]].length;E++)U(g[_[A]][E])&&(g[_[A]][E]=1*g[_[A]][E]);return g}function L(x){return Object.keys(x).reduce(function(y,g){return y||x[g].length>0},!1)}function P(x,w,y,g){var m=x[g].map(function(h){return'"'+h+'": '+w[g][h].toString().replace(/^"[^"]+"/,"function")}).join(",");return B[0]+"{"+m+"}"+B[1]+'"'+y+'"'+B[2]}function D(x,w){var y={main:O.m},g=(w=w||{}).all?{main:Object.keys(y.main)}:function R(x,w){for(var y={main:[w]},g={main:[]},m={main:{}};L(y);)for(var h=Object.keys(y),b=0;b<h.length;b++){var C=h[b],_=y[C].pop();if(m[C]=m[C]||{},!m[C][_]&&x[C][_]){m[C][_]=!0,g[C]=g[C]||[],g[C].push(_);for(var A=F(x,x[C][_],C),E=Object.keys(A),T=0;T<E.length;T++)y[E[T]]=y[E[T]]||[],y[E[T]]=y[E[T]].concat(A[E[T]])}}return g}(y,x),m="";Object.keys(g).filter(function(_){return"main"!==_}).forEach(function(_){for(var A=0;g[_][A];)A++;g[_].push(A),y[_][A]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",m=m+"var "+_+" = ("+P(g,y,A,modules)+")();\n"}),m=m+"new (("+P(g,y,x,"main")+")())(self);";var h=new window.Blob([m],{type:"text/javascript"}),C=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(h),f=new window.Worker(C);return f.objectURL=C,f}},"./src/errors.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{ErrorDetails:()=>B,ErrorTypes:()=>z});var z=(()=>{return(W=z||(z={})).NETWORK_ERROR="networkError",W.MEDIA_ERROR="mediaError",W.KEY_SYSTEM_ERROR="keySystemError",W.MUX_ERROR="muxError",W.OTHER_ERROR="otherError",z;var W})(),B=(()=>{return(W=B||(B={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",W.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",W.KEY_SYSTEM_NO_SESSION="keySystemNoSession",W.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",W.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",W.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",W.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",W.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",W.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",W.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",W.MANIFEST_LOAD_ERROR="manifestLoadError",W.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",W.MANIFEST_PARSING_ERROR="manifestParsingError",W.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",W.LEVEL_EMPTY_ERROR="levelEmptyError",W.LEVEL_LOAD_ERROR="levelLoadError",W.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",W.LEVEL_SWITCH_ERROR="levelSwitchError",W.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",W.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",W.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",W.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",W.FRAG_LOAD_ERROR="fragLoadError",W.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",W.FRAG_DECRYPT_ERROR="fragDecryptError",W.FRAG_PARSING_ERROR="fragParsingError",W.REMUX_ALLOC_ERROR="remuxAllocError",W.KEY_LOAD_ERROR="keyLoadError",W.KEY_LOAD_TIMEOUT="keyLoadTimeOut",W.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",W.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",W.BUFFER_APPEND_ERROR="bufferAppendError",W.BUFFER_APPENDING_ERROR="bufferAppendingError",W.BUFFER_STALLED_ERROR="bufferStalledError",W.BUFFER_FULL_ERROR="bufferFullError",W.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",W.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",W.INTERNAL_EXCEPTION="internalException",W.INTERNAL_ABORTED="aborted",W.UNKNOWN="unknown",B;var W})()},"./src/events.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{Events:()=>z});var z=(()=>{return(B=z||(z={})).MEDIA_ATTACHING="hlsMediaAttaching",B.MEDIA_ATTACHED="hlsMediaAttached",B.MEDIA_DETACHING="hlsMediaDetaching",B.MEDIA_DETACHED="hlsMediaDetached",B.BUFFER_RESET="hlsBufferReset",B.BUFFER_CODECS="hlsBufferCodecs",B.BUFFER_CREATED="hlsBufferCreated",B.BUFFER_APPENDING="hlsBufferAppending",B.BUFFER_APPENDED="hlsBufferAppended",B.BUFFER_EOS="hlsBufferEos",B.BUFFER_FLUSHING="hlsBufferFlushing",B.BUFFER_FLUSHED="hlsBufferFlushed",B.MANIFEST_LOADING="hlsManifestLoading",B.MANIFEST_LOADED="hlsManifestLoaded",B.MANIFEST_PARSED="hlsManifestParsed",B.LEVEL_SWITCHING="hlsLevelSwitching",B.LEVEL_SWITCHED="hlsLevelSwitched",B.LEVEL_LOADING="hlsLevelLoading",B.LEVEL_LOADED="hlsLevelLoaded",B.LEVEL_UPDATED="hlsLevelUpdated",B.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",B.LEVELS_UPDATED="hlsLevelsUpdated",B.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",B.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",B.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",B.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",B.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",B.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",B.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",B.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",B.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",B.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",B.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",B.CUES_PARSED="hlsCuesParsed",B.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",B.INIT_PTS_FOUND="hlsInitPtsFound",B.FRAG_LOADING="hlsFragLoading",B.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",B.FRAG_LOADED="hlsFragLoaded",B.FRAG_DECRYPTED="hlsFragDecrypted",B.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",B.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",B.FRAG_PARSING_METADATA="hlsFragParsingMetadata",B.FRAG_PARSED="hlsFragParsed",B.FRAG_BUFFERED="hlsFragBuffered",B.FRAG_CHANGED="hlsFragChanged",B.FPS_DROP="hlsFpsDrop",B.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",B.ERROR="hlsError",B.DESTROYING="hlsDestroying",B.KEY_LOADING="hlsKeyLoading",B.KEY_LOADED="hlsKeyLoaded",B.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",B.BACK_BUFFER_REACHED="hlsBackBufferReached",z;var B})()},"./src/hls.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>A});var z=O("./node_modules/url-toolkit/src/url-toolkit.js"),W=O("./src/loader/playlist-loader.ts"),V=O("./src/controller/id3-track-controller.ts"),Y=O("./src/controller/latency-controller.ts"),U=O("./src/controller/level-controller.ts"),F=O("./src/controller/fragment-tracker.ts"),L=O("./src/loader/key-loader.ts"),R=O("./src/controller/stream-controller.ts"),P=O("./src/is-supported.ts"),D=O("./src/utils/logger.ts"),x=O("./src/config.ts"),w=O("./node_modules/eventemitter3/index.js"),g=O("./src/events.ts"),m=O("./src/errors.ts"),h=O("./src/types/level.ts");function b(E,T){for(var c=0;c<T.length;c++){var d=T[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(E,f(d.key),d)}}function f(E){var T=function _(E,T){if("object"!=typeof E||null===E)return E;var c=E[Symbol.toPrimitive];if(void 0!==c){var d=c.call(E,T||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===T?String:Number)(E)}(E,"string");return"symbol"==typeof T?T:String(T)}var A=function(){function E(c){void 0===c&&(c={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new w.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var d=this.config=(0,x.mergeConfig)(E.DefaultConfig,c);this.userConfig=c,(0,D.enableLogs)(d.debug,"Hls instance"),this._autoLevelCapping=-1,d.progressive&&(0,x.enableStreamingMode)(d);var p=d.bufferController,M=d.capLevelController,S=d.fpsController,k=this.abrController=new(0,d.abrController)(this),j=this.bufferController=new p(this),N=this.capLevelController=new M(this),G=new S(this),K=new W.default(this),$=new V.default(this),Z=this.levelController=new U.default(this),te=new F.FragmentTracker(this),q=new L.default(this.config),ne=this.streamController=new R.default(this,te,q);N.setStreamController(ne),G.setStreamController(ne);var se=[K,Z,ne];this.networkControllers=se;var ue=[k,j,N,G,$,te];this.audioTrackController=this.createController(d.audioTrackController,se);var ce=d.audioStreamController;ce&&se.push(new ce(this,te,q)),this.subtitleTrackController=this.createController(d.subtitleTrackController,se);var fe=d.subtitleStreamController;fe&&se.push(new fe(this,te,q)),this.createController(d.timelineController,ue),q.emeController=this.emeController=this.createController(d.emeController,ue),this.cmcdController=this.createController(d.cmcdController,ue),this.latencyController=this.createController(Y.default,ue),this.coreComponents=ue}E.isSupported=function(){return(0,P.isSupported)()};var T=E.prototype;return T.createController=function(d,u){if(d){var p=new d(this);return u&&u.push(p),p}return null},T.on=function(d,u,p){void 0===p&&(p=this),this._emitter.on(d,u,p)},T.once=function(d,u,p){void 0===p&&(p=this),this._emitter.once(d,u,p)},T.removeAllListeners=function(d){this._emitter.removeAllListeners(d)},T.off=function(d,u,p,M){void 0===p&&(p=this),this._emitter.off(d,u,p,M)},T.listeners=function(d){return this._emitter.listeners(d)},T.emit=function(d,u,p){return this._emitter.emit(d,u,p)},T.trigger=function(d,u){if(this.config.debug)return this.emit(d,d,u);try{return this.emit(d,d,u)}catch(p){D.logger.error("An internal error happened while handling event "+d+'. Error message: "'+p.message+'". Here is a stacktrace:',p),this.trigger(g.Events.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:d,error:p})}return!1},T.listenerCount=function(d){return this._emitter.listenerCount(d)},T.destroy=function(){D.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(d){return d.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(d){return d.destroy()}),this.coreComponents.length=0},T.attachMedia=function(d){D.logger.log("attachMedia"),this._media=d,this.trigger(g.Events.MEDIA_ATTACHING,{media:d})},T.detachMedia=function(){D.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},T.loadSource=function(d){this.stopLoad();var u=this.media,p=this.url,M=this.url=z.buildAbsoluteURL(self.location.href,d,{alwaysNormalize:!0});D.logger.log("loadSource:"+M),u&&p&&p!==M&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(u)),this.trigger(g.Events.MANIFEST_LOADING,{url:d})},T.startLoad=function(d){void 0===d&&(d=-1),D.logger.log("startLoad("+d+")"),this.networkControllers.forEach(function(u){u.startLoad(d)})},T.stopLoad=function(){D.logger.log("stopLoad"),this.networkControllers.forEach(function(d){d.stopLoad()})},T.swapAudioCodec=function(){D.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},T.recoverMediaError=function(){D.logger.log("recoverMediaError");var d=this._media;this.detachMedia(),d&&this.attachMedia(d)},T.removeLevel=function(d,u){void 0===u&&(u=0),this.levelController.removeLevel(d,u)},function C(E,T,c){T&&b(E.prototype,T),c&&b(E,c),Object.defineProperty(E,"prototype",{writable:!1})}(E,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(d){D.logger.log("set currentLevel:"+d),this.loadLevel=d,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(d){D.logger.log("set nextLevel:"+d),this.levelController.manualLevel=d,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(d){D.logger.log("set loadLevel:"+d),this.levelController.manualLevel=d}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(d){this.levelController.nextLoadLevel=d}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(d){D.logger.log("set firstLevel:"+d),this.levelController.firstLevel=d}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(d){D.logger.log("set startLevel:"+d),-1!==d&&(d=Math.max(d,this.minAutoLevel)),this.levelController.startLevel=d}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(d){var u=!!d;u!==this.config.capLevelToPlayerSize&&(u?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=u)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(d){this._autoLevelCapping!==d&&(D.logger.log("set autoLevelCapping:"+d),this._autoLevelCapping=d)}},{key:"bandwidthEstimate",get:function(){var d=this.abrController.bwEstimator;return d?d.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(d){h.HdcpLevels.indexOf(d)>-1&&(this._maxHdcpLevel=d)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var d=this.levels,u=this.config.minAutoBitrate;if(!d)return 0;for(var p=d.length,M=0;M<p;M++)if(d[M].maxBitrate>=u)return M;return 0}},{key:"maxAutoLevel",get:function(){var M,d=this.levels,u=this.autoLevelCapping,p=this.maxHdcpLevel;if(M=-1===u&&d&&d.length?d.length-1:u,p)for(var S=M;S--;){var k=d[S].attrs["HDCP-LEVEL"];if(k&&k<=p)return S}return M}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(d){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,d)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var d=this.audioTrackController;return d?d.audioTracks:[]}},{key:"audioTrack",get:function(){var d=this.audioTrackController;return d?d.audioTrack:-1},set:function(d){var u=this.audioTrackController;u&&(u.audioTrack=d)}},{key:"subtitleTracks",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTrack:-1},set:function(d){var u=this.subtitleTrackController;u&&(u.subtitleTrack=d)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var d=this.subtitleTrackController;return!!d&&d.subtitleDisplay},set:function(d){var u=this.subtitleTrackController;u&&(u.subtitleDisplay=d)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(d){this.config.lowLatencyMode=d}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return m.ErrorTypes}},{key:"ErrorDetails",get:function(){return m.ErrorDetails}},{key:"DefaultConfig",get:function(){return E.defaultConfig?E.defaultConfig:x.hlsDefaultConfig},set:function(d){E.defaultConfig=d}}]),E}();A.defaultConfig=void 0},"./src/is-supported.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{changeTypeSupported:()=>V,isSupported:()=>W});var z=O("./src/utils/mediasource-helper.ts");function B(){return self.SourceBuffer||self.WebKitSourceBuffer}function W(){var Y=(0,z.getMediaSource)();if(!Y)return!1;var U=B();return!(!Y||"function"!=typeof Y.isTypeSupported||!Y.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||U&&(!U.prototype||"function"!=typeof U.prototype.appendBuffer||"function"!=typeof U.prototype.remove))}function V(){var Y,U=B();return"function"==typeof(null==U||null===(Y=U.prototype)||void 0===Y?void 0:Y.changeType)}},"./src/loader/date-range.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{DateRange:()=>P,DateRangeAttribute:()=>R});var z=O("./src/polyfills/number.ts"),B=O("./src/utils/attr-list.ts"),W=O("./src/utils/logger.ts");function V(){return V=Object.assign?Object.assign.bind():function(D){for(var x=1;x<arguments.length;x++){var w=arguments[x];for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(D[y]=w[y])}return D},V.apply(this,arguments)}function Y(D,x){for(var w=0;w<x.length;w++){var y=x[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(D,F(y.key),y)}}function F(D){var x=function L(D,x){if("object"!=typeof D||null===D)return D;var w=D[Symbol.toPrimitive];if(void 0!==w){var y=w.call(D,x||"default");if("object"!=typeof y)return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(D)}(D,"string");return"symbol"==typeof x?x:String(x)}var R=(()=>{return(D=R||(R={})).ID="ID",D.CLASS="CLASS",D.START_DATE="START-DATE",D.DURATION="DURATION",D.END_DATE="END-DATE",D.END_ON_NEXT="END-ON-NEXT",D.PLANNED_DURATION="PLANNED-DURATION",D.SCTE35_OUT="SCTE35-OUT",D.SCTE35_IN="SCTE35-IN",R;var D})(),P=function(){function D(x,w){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,w){var y=w.attr;for(var g in y)if(Object.prototype.hasOwnProperty.call(x,g)&&x[g]!==y[g]){W.logger.warn('DATERANGE tag attribute: "'+g+'" does not match for tags with ID: "'+x.ID+'"'),this._badValueForSameId=g;break}x=V(new B.AttrList({}),y,x)}if(this.attr=x,this._startDate=new Date(x[R.START_DATE]),R.END_DATE in this.attr){var m=new Date(this.attr[R.END_DATE]);(0,z.isFiniteNumber)(m.getTime())&&(this._endDate=m)}}return function U(D,x,w){x&&Y(D.prototype,x),w&&Y(D,w),Object.defineProperty(D,"prototype",{writable:!1})}(D,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var w=this.duration;return null!==w?new Date(this._startDate.getTime()+1e3*w):null}},{key:"duration",get:function(){if(R.DURATION in this.attr){var w=this.attr.decimalFloatingPoint(R.DURATION);if((0,z.isFiniteNumber)(w))return w}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return R.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(R.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(R.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,z.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),D}()},"./src/loader/fragment-loader.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{LoadError:()=>w,default:()=>D});var z=O("./src/polyfills/number.ts"),B=O("./src/errors.ts");function V(y){var g="function"==typeof Map?new Map:void 0;return V=function(h){if(null===h||!function F(y){return-1!==Function.toString.call(y).indexOf("[native code]")}(h))return h;if("function"!=typeof h)throw new TypeError("Super expression must either be null or a function");if(void 0!==g){if(g.has(h))return g.get(h);g.set(h,b)}function b(){return Y(h,arguments,R(this).constructor)}return b.prototype=Object.create(h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),L(b,h)},V(y)}function Y(y,g,m){return(Y=U()?Reflect.construct.bind():function(b,C,f){var _=[null];_.push.apply(_,C);var E=new(Function.bind.apply(b,_));return f&&L(E,f.prototype),E}).apply(null,arguments)}function U(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}function L(y,g){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,b){return h.__proto__=b,h})(y,g)}function R(y){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)})(y)}var P=Math.pow(2,17),D=function(){function y(m){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=m}var g=y.prototype;return g.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},g.abort=function(){this.loader&&this.loader.abort()},g.load=function(h,b){var C=this,f=h.url;if(!f)return Promise.reject(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,networkDetails:null},"Fragment does not have a "+(f?"part list":"url")));this.abort();var _=this.config,A=_.fLoader,E=_.loader;return new Promise(function(T,c){C.loader&&C.loader.destroy();var d=C.loader=h.loader=A?new A(_):new E(_),u=x(h),p={timeout:_.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:_.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===h.sn?1/0:P};h.stats=d.stats,d.load(u,p,{onSuccess:function(S,k,j,N){C.resetLoader(h,d);var G=S.data;j.resetIV&&h.decryptdata&&(h.decryptdata.iv=new Uint8Array(G.slice(0,16)),G=G.slice(16)),T({frag:h,part:null,payload:G,networkDetails:N})},onError:function(S,k,j){C.resetLoader(h,d),c(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,response:S,networkDetails:j}))},onAbort:function(S,k,j){C.resetLoader(h,d),c(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:h,networkDetails:j}))},onTimeout:function(S,k,j){C.resetLoader(h,d),c(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:h,networkDetails:j}))},onProgress:function(S,k,j,N){b&&b({frag:h,part:null,payload:j,networkDetails:N})}})})},g.loadPart=function(h,b,C){var f=this;this.abort();var _=this.config,A=_.fLoader,E=_.loader;return new Promise(function(T,c){f.loader&&f.loader.destroy();var d=f.loader=h.loader=A?new A(_):new E(_),u=x(h,b),p={timeout:_.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:_.fragLoadingMaxRetryTimeout,highWaterMark:P};b.stats=d.stats,d.load(u,p,{onSuccess:function(S,k,j,N){f.resetLoader(h,d),f.updateStatsFromPart(h,b);var G={frag:h,part:b,payload:S.data,networkDetails:N};C(G),T(G)},onError:function(S,k,j){f.resetLoader(h,d),c(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:h,part:b,response:S,networkDetails:j}))},onAbort:function(S,k,j){h.stats.aborted=b.stats.aborted,f.resetLoader(h,d),c(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:h,part:b,networkDetails:j}))},onTimeout:function(S,k,j){f.resetLoader(h,d),c(new w({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:h,part:b,networkDetails:j}))}})})},g.updateStatsFromPart=function(h,b){var C=h.stats,f=b.stats,_=f.total;if(C.loaded+=f.loaded,_){var A=Math.round(h.duration/b.duration),E=Math.min(Math.round(C.loaded/_),A),c=(A-E)*Math.round(C.loaded/E);C.total=C.loaded+c}else C.total=Math.max(C.loaded,C.total);var d=C.loading,u=f.loading;d.start?d.first+=u.first-u.start:(d.start=u.start,d.first=u.first),d.end=u.end},g.resetLoader=function(h,b){h.loader=null,this.loader===b&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),b.destroy()},y}();function x(y,g){void 0===g&&(g=null);var m=g||y,h={frag:y,part:g,responseType:"arraybuffer",url:m.url,headers:{},rangeStart:0,rangeEnd:0},b=m.byteRangeStartOffset,C=m.byteRangeEndOffset;if((0,z.isFiniteNumber)(b)&&(0,z.isFiniteNumber)(C)){var f,_=b,A=C;if("initSegment"===y.sn&&"AES-128"===(null===(f=y.decryptdata)||void 0===f?void 0:f.method)){var E=C-b;E%16&&(A=C+(16-E%16)),0!==b&&(h.resetIV=!0,_=b-16)}h.rangeStart=_,h.rangeEnd=A}return h}var w=function(y){function g(m){for(var h,b=arguments.length,C=new Array(b>1?b-1:0),f=1;f<b;f++)C[f-1]=arguments[f];return(h=y.call.apply(y,[this].concat(C))||this).data=void 0,h.data=m,h}return function W(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,L(y,g)}(g,y),g}(V(Error))},"./src/loader/fragment.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{BaseSegment:()=>x,ElementaryStreamTypes:()=>D,Fragment:()=>w,Part:()=>y});var z=O("./src/polyfills/number.ts"),B=O("./node_modules/url-toolkit/src/url-toolkit.js"),V=O("./src/loader/load-stats.ts");function Y(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,U(g,m)}function U(g,m){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,C){return b.__proto__=C,b})(g,m)}function F(g,m){for(var h=0;h<m.length;h++){var b=m[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,R(b.key),b)}}function L(g,m,h){return m&&F(g.prototype,m),h&&F(g,h),Object.defineProperty(g,"prototype",{writable:!1}),g}function R(g){var m=function P(g,m){if("object"!=typeof g||null===g)return g;var h=g[Symbol.toPrimitive];if(void 0!==h){var b=h.call(g,m||"default");if("object"!=typeof b)return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===m?String:Number)(g)}(g,"string");return"symbol"==typeof m?m:String(m)}var D=(()=>{return(g=D||(D={})).AUDIO="audio",g.VIDEO="video",g.AUDIOVIDEO="audiovideo",D;var g})(),x=function(){function g(h){var b;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((b={})[D.AUDIO]=null,b[D.VIDEO]=null,b[D.AUDIOVIDEO]=null,b),this.baseurl=h}return g.prototype.setByteRange=function(b,C){var f=b.split("@",2),_=[];_[0]=1===f.length?C?C.byteRangeEndOffset:0:parseInt(f[1]),_[1]=parseInt(f[0])+_[0],this._byteRange=_},L(g,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,B.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(b){this._url=b}}]),g}(),w=function(g){function m(b,C){var f;return(f=g.call(this,C)||this)._decryptdata=null,f.rawProgramDateTime=null,f.programDateTime=null,f.tagList=[],f.duration=0,f.sn=0,f.levelkeys=void 0,f.type=void 0,f.loader=null,f.keyLoader=null,f.level=-1,f.cc=0,f.startPTS=void 0,f.endPTS=void 0,f.appendedPTS=void 0,f.startDTS=void 0,f.endDTS=void 0,f.start=0,f.deltaPTS=void 0,f.maxStartPTS=void 0,f.minEndPTS=void 0,f.stats=new V.LoadStats,f.urlId=0,f.data=void 0,f.bitrateTest=!1,f.title=null,f.initSegment=null,f.endList=void 0,f.type=b,f}Y(m,g);var h=m.prototype;return h.setKeyFormat=function(C){if(this.levelkeys){var f=this.levelkeys[C];f&&!this._decryptdata&&(this._decryptdata=f.getDecryptData(this.sn))}},h.abortRequests=function(){var C,f;null===(C=this.loader)||void 0===C||C.abort(),null===(f=this.keyLoader)||void 0===f||f.abort()},h.setElementaryStreamInfo=function(C,f,_,A,E,T){void 0===T&&(T=!1);var c=this.elementaryStreams,d=c[C];d?(d.startPTS=Math.min(d.startPTS,f),d.endPTS=Math.max(d.endPTS,_),d.startDTS=Math.min(d.startDTS,A),d.endDTS=Math.max(d.endDTS,E)):c[C]={startPTS:f,endPTS:_,startDTS:A,endDTS:E,partial:T}},h.clearElementaryStreamInfo=function(){var C=this.elementaryStreams;C[D.AUDIO]=null,C[D.VIDEO]=null,C[D.AUDIOVIDEO]=null},L(m,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var f=this.levelkeys.identity;if(f)this._decryptdata=f.getDecryptData(this.sn);else{var _=Object.keys(this.levelkeys);if(1===_.length)return this._decryptdata=this.levelkeys[_[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!(0,z.isFiniteNumber)(this.programDateTime))return null;var C=(0,z.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*C}},{key:"encrypted",get:function(){var C;if(null!==(C=this._decryptdata)&&void 0!==C&&C.encrypted)return!0;if(this.levelkeys){var f=Object.keys(this.levelkeys),_=f.length;if(_>1||1===_&&this.levelkeys[f[0]].encrypted)return!0}return!1}}]),m}(x),y=function(g){function m(h,b,C,f,_){var A;(A=g.call(this,C)||this).fragOffset=0,A.duration=0,A.gap=!1,A.independent=!1,A.relurl=void 0,A.fragment=void 0,A.index=void 0,A.stats=new V.LoadStats,A.duration=h.decimalFloatingPoint("DURATION"),A.gap=h.bool("GAP"),A.independent=h.bool("INDEPENDENT"),A.relurl=h.enumeratedString("URI"),A.fragment=b,A.index=f;var E=h.enumeratedString("BYTERANGE");return E&&A.setByteRange(E,_),_&&(A.fragOffset=_.fragOffset+_.duration),A}return Y(m,g),L(m,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var b=this.elementaryStreams;return!!(b.audio||b.video||b.audiovideo)}}]),m}(x)},"./src/loader/key-loader.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>W});var z=O("./src/errors.ts"),B=O("./src/loader/fragment-loader.ts"),W=function(){function V(U){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=U}var Y=V.prototype;return Y.abort=function(){for(var F in this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[F].loader;L&&L.abort()}},Y.detach=function(){for(var F in this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[F];(L.mediaKeySessionContext||L.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[F]}},Y.destroy=function(){for(var F in this.detach(),this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[F].loader;L&&L.destroy()}this.keyUriToKeyInfo={}},Y.createKeyLoadError=function(F,L,R,P){return void 0===L&&(L=z.ErrorDetails.KEY_LOAD_ERROR),new B.LoadError({type:z.ErrorTypes.NETWORK_ERROR,details:L,fatal:!1,frag:F,networkDetails:R})},Y.loadClear=function(F,L){var R=this;if(this.emeController&&this.config.emeEnabled)for(var P=F.sn,D=F.cc,x=function(m){var h=L[m];if(D<=h.cc&&("initSegment"===P||P<h.sn))return R.emeController.selectKeySystemFormat(h).then(function(b){h.setKeyFormat(b)}),"break"},w=0;w<L.length&&"break"!==x(w);w++);},Y.load=function(F){var L=this;return!F.decryptdata&&F.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(F).then(function(R){return L.loadInternal(F,R)}):this.loadInternal(F)},Y.loadInternal=function(F,L){var R,P;L&&F.setKeyFormat(L);var D=F.decryptdata;if(!D)return Promise.reject(this.createKeyLoadError(F,z.ErrorDetails.KEY_LOAD_ERROR,null,L?"Expected frag.decryptdata to be defined after setting format "+L:"Missing decryption data on fragment in onKeyLoading"));var w=D.uri;if(!w)return Promise.reject(this.createKeyLoadError(F,z.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+w+'"'));var g,y=this.keyUriToKeyInfo[w];if(null!==(R=y)&&void 0!==R&&R.decryptdata.key)return D.key=y.decryptdata.key,Promise.resolve({frag:F,keyInfo:y});if(null!==(P=y)&&void 0!==P&&P.keyLoadPromise)switch(null===(g=y.mediaKeySessionContext)||void 0===g?void 0:g.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return y.keyLoadPromise.then(function(m){return D.key=m.keyInfo.decryptdata.key,{frag:F,keyInfo:y}})}switch(y=this.keyUriToKeyInfo[w]={decryptdata:D,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},D.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===D.keyFormat?this.loadKeyHTTP(y,F):this.loadKeyEME(y,F);case"AES-128":return this.loadKeyHTTP(y,F);default:return Promise.reject(this.createKeyLoadError(F,z.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+D.method+'"'))}},Y.loadKeyEME=function(F,L){var R={frag:L,keyInfo:F};if(this.emeController&&this.config.emeEnabled){var P=this.emeController.loadKey(R);if(P)return(F.keyLoadPromise=P.then(function(D){return F.mediaKeySessionContext=D,R})).catch(function(D){throw F.keyLoadPromise=null,D})}return Promise.resolve(R)},Y.loadKeyHTTP=function(F,L){var R=this,P=this.config,x=new(0,P.loader)(P);return L.keyLoader=F.loader=x,F.keyLoadPromise=new Promise(function(w,y){x.load({keyInfo:F,frag:L,responseType:"arraybuffer",url:F.decryptdata.uri},{timeout:P.fragLoadingTimeOut,maxRetry:0,retryDelay:P.fragLoadingRetryDelay,maxRetryDelay:P.fragLoadingMaxRetryTimeout,highWaterMark:0},{onSuccess:function(C,f,_,A){var E=_.frag,T=_.keyInfo;if(!E.decryptdata||T!==R.keyUriToKeyInfo[_.url])return y(R.createKeyLoadError(E,z.ErrorDetails.KEY_LOAD_ERROR,A,"after key load, decryptdata unset or changed"));T.decryptdata.key=E.decryptdata.key=new Uint8Array(C.data),E.keyLoader=null,T.loader=null,w({frag:E,keyInfo:T})},onError:function(C,f,_){R.resetLoader(f),y(R.createKeyLoadError(L,z.ErrorDetails.KEY_LOAD_ERROR,_))},onTimeout:function(C,f,_){R.resetLoader(f),y(R.createKeyLoadError(L,z.ErrorDetails.KEY_LOAD_TIMEOUT,_))},onAbort:function(C,f,_){R.resetLoader(f),y(R.createKeyLoadError(L,z.ErrorDetails.INTERNAL_ABORTED,_))}})})},Y.resetLoader=function(F){var L=F.frag,R=F.keyInfo,P=F.url,D=R.loader;L.keyLoader===D&&(L.keyLoader=null,R.loader=null),delete this.keyUriToKeyInfo[P],D&&D.destroy()},V}()},"./src/loader/level-details.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{LevelDetails:()=>F});var z=O("./src/polyfills/number.ts");function B(L,R){for(var P=0;P<R.length;P++){var D=R[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(L,V(D.key),D)}}function V(L){var R=function Y(L,R){if("object"!=typeof L||null===L)return L;var P=L[Symbol.toPrimitive];if(void 0!==P){var D=P.call(L,R||"default");if("object"!=typeof D)return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}var F=function(){function L(P){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=P}return L.prototype.reloaded=function(D){if(!D)return this.advanced=!0,void(this.updated=!0);var x=this.lastPartSn-D.lastPartSn,w=this.lastPartIndex-D.lastPartIndex;this.updated=this.endSN!==D.endSN||!!w||!!x,this.advanced=this.endSN>D.endSN||x>0||0===x&&w>0,this.misses=this.updated||this.advanced?Math.floor(.6*D.misses):D.misses+1,this.availabilityDelay=D.availabilityDelay},function W(L,R,P){R&&B(L.prototype,R),P&&B(L,P),Object.defineProperty(L,"prototype",{writable:!1})}(L,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,z.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var D=this.driftEndTime-this.driftStartTime;return D>0?1e3*(this.driftEnd-this.driftStart)/D:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var D;return null!==(D=this.partList)&&void 0!==D&&D.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var D;return null!==(D=this.fragments)&&void 0!==D&&D.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var D;return null!==(D=this.partList)&&void 0!==D&&D.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var D;return null!==(D=this.partList)&&void 0!==D&&D.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),L}()},"./src/loader/level-key.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{LevelKey:()=>F});var z=O("./src/utils/keysystem-util.ts"),B=O("./src/utils/mediakeys-helper.ts"),W=O("./src/utils/mp4-tools.ts"),V=O("./src/utils/logger.ts"),Y=O("./src/utils/numeric-encoding-utils.ts"),U={},F=function(){function R(D,x,w,y,g){void 0===y&&(y=[1]),void 0===g&&(g=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=D,this.uri=x,this.keyFormat=w,this.keyFormatVersions=y,this.iv=g,this.encrypted=!!D&&"NONE"!==D,this.isCommonEncryption=this.encrypted&&"AES-128"!==D}R.clearKeyUriToKeyIdMap=function(){U={}};var P=R.prototype;return P.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;switch(this.keyFormat){case"identity":return"SAMPLE-AES"===this.method;case B.KeySystemFormats.FAIRPLAY:case B.KeySystemFormats.WIDEVINE:case B.KeySystemFormats.PLAYREADY:case B.KeySystemFormats.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},P.getDecryptData=function(x){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof x&&("AES-128"===this.method&&!this.iv&&V.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),x=0);var w=function L(R){for(var P=new Uint8Array(16),D=12;D<16;D++)P[D]=R>>8*(15-D)&255;return P}(x);return new R(this.method,this.uri,"identity",this.keyFormatVersions,w)}var g=(0,z.convertDataUriToArrayBytes)(this.uri);if(g)switch(this.keyFormat){case B.KeySystemFormats.WIDEVINE:this.pssh=g,g.length>=22&&(this.keyId=g.subarray(g.length-22,g.length-6));break;case B.KeySystemFormats.PLAYREADY:var m=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,W.mp4pssh)(m,null,g);var h=new Uint16Array(g.buffer,g.byteOffset,g.byteLength/2),b=String.fromCharCode.apply(null,Array.from(h)),C=b.substring(b.indexOf("<"),b.length),A=(new DOMParser).parseFromString(C,"text/xml").getElementsByTagName("KID")[0];if(A){var E=A.childNodes[0]?A.childNodes[0].nodeValue:A.getAttribute("VALUE");if(E){var T=(0,Y.base64Decode)(E).subarray(0,16);(0,z.changeEndianness)(T),this.keyId=T}}break;default:var c=g.subarray(0,16);if(16!==c.length){var d=new Uint8Array(16);d.set(c,16-c.length),c=d}this.keyId=c}if(!this.keyId||16!==this.keyId.byteLength){var u=U[this.uri];if(!u){var p=Object.keys(U).length%Number.MAX_SAFE_INTEGER;u=new Uint8Array(16),new DataView(u.buffer,12,4).setUint32(0,p),U[this.uri]=u}this.keyId=u}return this},R}()},"./src/loader/load-stats.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{LoadStats:()=>z});var z=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>m});var z=O("./src/polyfills/number.ts"),B=O("./node_modules/url-toolkit/src/url-toolkit.js"),V=O("./src/loader/date-range.ts"),Y=O("./src/loader/fragment.ts"),U=O("./src/loader/level-details.ts"),F=O("./src/loader/level-key.ts"),L=O("./src/utils/attr-list.ts"),R=O("./src/utils/logger.ts"),P=O("./src/utils/codecs.ts");function D(){return D=Object.assign?Object.assign.bind():function(T){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(T[u]=d[u])}return T},D.apply(this,arguments)}var x=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,w=/#EXT-X-MEDIA:(.*)/g,y=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),g=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),m=function(){function T(){}return T.findGroup=function(d,u){for(var p=0;p<d.length;p++){var M=d[p];if(M.id===u)return M}},T.convertAVC1ToAVCOTI=function(d){var u=d.split(".");if(u.length>2){var p=u.shift()+".";return(p+=parseInt(u.shift()).toString(16))+("000"+parseInt(u.shift()).toString(16)).slice(-4)}return d},T.resolve=function(d,u){return(0,B.buildAbsoluteURL)(u,d,{alwaysNormalize:!0})},T.parseMasterPlaylist=function(d,u){var N,p=[],M=[],S={},k=[],j=!1;for(x.lastIndex=0;null!=(N=x.exec(d));)if(N[1]){var G,K=new L.AttrList(N[1]),$={attrs:K,bitrate:K.decimalInteger("AVERAGE-BANDWIDTH")||K.decimalInteger("BANDWIDTH"),name:K.NAME,url:T.resolve(N[2],u)},Z=K.decimalResolution("RESOLUTION");Z&&($.width=Z.width,$.height=Z.height),b((K.CODECS||"").split(/[ ,]+/).filter(function(ue){return ue}),$),$.videoCodec&&-1!==$.videoCodec.indexOf("avc1")&&($.videoCodec=T.convertAVC1ToAVCOTI($.videoCodec)),null!==(G=$.unknownCodecs)&&void 0!==G&&G.length||M.push($),p.push($)}else if(N[3]){var te=new L.AttrList(N[3]);te["DATA-ID"]&&(j=!0,S[te["DATA-ID"]]=te)}else if(N[4]){var q=N[4],ne=h(q,u);ne.encrypted&&ne.isSupported()?k.push(ne):R.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+q+'"')}return{levels:M.length>0&&M.length<p.length?M:p,sessionData:j?S:null,sessionKeys:k.length?k:null}},T.parseMasterPlaylistMedia=function(d,u,p,M){void 0===M&&(M=[]);var S,k=[],j=0;for(w.lastIndex=0;null!==(S=w.exec(d));){var N=new L.AttrList(S[1]);if(N.TYPE===p){var G={attrs:N,bitrate:0,id:j++,groupId:N["GROUP-ID"],instreamId:N["INSTREAM-ID"],name:N.NAME||N.LANGUAGE||"",type:p,default:N.bool("DEFAULT"),autoselect:N.bool("AUTOSELECT"),forced:N.bool("FORCED"),lang:N.LANGUAGE,url:N.URI?T.resolve(N.URI,u):""};if(M.length){var K=T.findGroup(M,G.groupId)||M[0];C(G,K,"audioCodec"),C(G,K,"textCodec")}k.push(G)}}return k},T.parseLevelPlaylist=function(d,u,p,M,S){var ne,se,ue,k=new U.LevelDetails(u),j=k.fragments,N=null,G=0,K=0,$=0,Z=0,te=null,q=new Y.Fragment(M,u),ce=-1,fe=!1;for(y.lastIndex=0,k.m3u8=d;null!==(ne=y.exec(d));){fe&&(fe=!1,(q=new Y.Fragment(M,u)).start=$,q.sn=G,q.cc=Z,q.level=p,N&&(q.initSegment=N,q.rawProgramDateTime=N.rawProgramDateTime,N.rawProgramDateTime=null));var ve=ne[1];if(ve){q.duration=parseFloat(ve);var Re=(" "+ne[2]).slice(1);q.title=Re||null,q.tagList.push(Re?["INF",ve,Re]:["INF",ve])}else if(ne[3])(0,z.isFiniteNumber)(q.duration)&&(q.start=$,ue&&E(q,ue,k),q.sn=G,q.level=p,q.cc=Z,q.urlId=S,j.push(q),q.relurl=(" "+ne[3]).slice(1),_(q,te),te=q,$+=q.duration,G++,K=0,fe=!0);else if(ne[4]){var Ee=(" "+ne[4]).slice(1);te?q.setByteRange(Ee,te):q.setByteRange(Ee)}else if(ne[5])q.rawProgramDateTime=(" "+ne[5]).slice(1),q.tagList.push(["PROGRAM-DATE-TIME",q.rawProgramDateTime]),-1===ce&&(ce=j.length);else{if(!(ne=ne[0].match(g))){R.logger.warn("No matches on slow regex match for level playlist!");continue}for(se=1;se<ne.length&&void 0===ne[se];se++);var ye=(" "+ne[se]).slice(1),Te=(" "+ne[se+1]).slice(1),Ze=ne[se+2]?(" "+ne[se+2]).slice(1):"";switch(ye){case"PLAYLIST-TYPE":k.type=Te.toUpperCase();break;case"MEDIA-SEQUENCE":G=k.startSN=parseInt(Te);break;case"SKIP":var lt=new L.AttrList(Te),Pt=lt.decimalInteger("SKIPPED-SEGMENTS");if((0,z.isFiniteNumber)(Pt)){k.skippedSegments=Pt;for(var gt=Pt;gt--;)j.unshift(null);G+=Pt}var Lt=lt.enumeratedString("RECENTLY-REMOVED-DATERANGES");Lt&&(k.recentlyRemovedDateranges=Lt.split("\t"));break;case"TARGETDURATION":k.targetduration=parseFloat(Te);break;case"VERSION":k.version=parseInt(Te);break;case"EXTM3U":break;case"ENDLIST":k.live=!1;break;case"#":(Te||Ze)&&q.tagList.push(Ze?[Te,Ze]:[Te]);break;case"DISCONTINUITY":Z++,q.tagList.push(["DIS"]);break;case"GAP":q.tagList.push([ye]);break;case"BITRATE":q.tagList.push([ye,Te]);break;case"DATERANGE":var dt=new L.AttrList(Te),xt=new V.DateRange(dt,k.dateRanges[dt.ID]);xt.isValid||k.skippedSegments?k.dateRanges[xt.id]=xt:R.logger.warn('Ignoring invalid DATERANGE tag: "'+Te+'"'),q.tagList.push(["EXT-X-DATERANGE",Te]);break;case"DISCONTINUITY-SEQUENCE":Z=parseInt(Te);break;case"KEY":var ft=h(Te,u);if(ft.isSupported()){if("NONE"===ft.method){ue=void 0;break}ue||(ue={}),ue[ft.keyFormat]&&(ue=D({},ue)),ue[ft.keyFormat]=ft}else R.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+Te+'"');break;case"START":var un=new L.AttrList(Te).decimalFloatingPoint("TIME-OFFSET");(0,z.isFiniteNumber)(un)&&(k.startTimeOffset=un);break;case"MAP":var Et=new L.AttrList(Te);if(q.duration){var Dn=new Y.Fragment(M,u);A(Dn,Et,p,ue),q.initSegment=N=Dn,N.rawProgramDateTime&&!q.rawProgramDateTime&&(q.rawProgramDateTime=N.rawProgramDateTime)}else A(q,Et,p,ue),N=q,fe=!0;break;case"SERVER-CONTROL":var In=new L.AttrList(Te);k.canBlockReload=In.bool("CAN-BLOCK-RELOAD"),k.canSkipUntil=In.optionalFloat("CAN-SKIP-UNTIL",0),k.canSkipDateRanges=k.canSkipUntil>0&&In.bool("CAN-SKIP-DATERANGES"),k.partHoldBack=In.optionalFloat("PART-HOLD-BACK",0),k.holdBack=In.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Zn=new L.AttrList(Te);k.partTarget=Zn.decimalFloatingPoint("PART-TARGET");break;case"PART":var jn=k.partList;jn||(jn=k.partList=[]);var qn=K>0?jn[jn.length-1]:void 0,vr=K++,Gn=new Y.Part(new L.AttrList(Te),q,u,vr,qn);jn.push(Gn),q.duration+=Gn.duration;break;case"PRELOAD-HINT":var pn=new L.AttrList(Te);k.preloadHint=pn;break;case"RENDITION-REPORT":var Cn=new L.AttrList(Te);k.renditionReports=k.renditionReports||[],k.renditionReports.push(Cn);break;default:R.logger.warn("line parsed but not handled: "+ne)}}}te&&!te.relurl?(j.pop(),$-=te.duration,k.partList&&(k.fragmentHint=te)):k.partList&&(_(q,te),q.cc=Z,k.fragmentHint=q,ue&&E(q,ue,k));var Kn=j.length,Wn=j[0],kt=j[Kn-1];if(($+=k.skippedSegments*k.targetduration)>0&&Kn&&kt){k.averagetargetduration=$/Kn;var Tn=kt.sn;k.endSN="initSegment"!==Tn?Tn:0,k.live||(kt.endList=!0),Wn&&(k.startCC=Wn.cc)}else k.endSN=0,k.startCC=0;return k.fragmentHint&&($+=k.fragmentHint.duration),k.totalduration=$,k.endCC=Z,ce>0&&function f(T,c){for(var d=T[c],u=c;u--;){var p=T[u];if(!p)return;p.programDateTime=d.programDateTime-1e3*p.duration,d=p}}(j,ce),k},T}();function h(T,c){var d,u,p=new L.AttrList(T),M=null!=(d=p.enumeratedString("METHOD"))?d:"",S=p.URI,k=p.hexadecimalInteger("IV"),j=p.enumeratedString("KEYFORMATVERSIONS"),N=null!=(u=p.enumeratedString("KEYFORMAT"))?u:"identity";S&&p.IV&&!k&&R.logger.error("Invalid IV: "+p.IV);var G=S?m.resolve(S,c):"",K=(j||"1").split("/").map(Number).filter(Number.isFinite);return new F.LevelKey(M,G,N,K,k)}function b(T,c){["video","audio","text"].forEach(function(d){var u=T.filter(function(M){return(0,P.isCodecType)(M,d)});if(u.length){var p=u.filter(function(M){return 0===M.lastIndexOf("avc1",0)||0===M.lastIndexOf("mp4a",0)});c[d+"Codec"]=p.length>0?p[0]:u[0],T=T.filter(function(M){return-1===u.indexOf(M)})}}),c.unknownCodecs=T}function C(T,c,d){var u=c[d];u&&(T[d]=u)}function _(T,c){T.rawProgramDateTime?T.programDateTime=Date.parse(T.rawProgramDateTime):null!=c&&c.programDateTime&&(T.programDateTime=c.endProgramDateTime),(0,z.isFiniteNumber)(T.programDateTime)||(T.programDateTime=null,T.rawProgramDateTime=null)}function A(T,c,d,u){T.relurl=c.URI,c.BYTERANGE&&T.setByteRange(c.BYTERANGE),T.level=d,T.sn="initSegment",u&&(T.levelkeys=u),T.initSegment=null}function E(T,c,d){T.levelkeys=c;var u=d.encryptedFragments;(!u.length||u[u.length-1].levelkeys!==c)&&Object.keys(c).some(function(p){return c[p].isCommonEncryption})&&u.push(T)}},"./src/loader/playlist-loader.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>D});var z=O("./src/polyfills/number.ts"),B=O("./src/events.ts"),W=O("./src/errors.ts"),V=O("./src/utils/logger.ts"),Y=O("./src/loader/m3u8-parser.ts"),U=O("./src/types/loader.ts"),F=O("./src/utils/attr-list.ts");function R(x,w){var y=x.url;return(void 0===y||0===y.indexOf("data:"))&&(y=w.url),y}const D=function(){function x(y){this.hls=void 0,this.loaders=Object.create(null),this.hls=y,this.registerListeners()}var w=x.prototype;return w.startLoad=function(g){},w.stopLoad=function(){this.destroyInternalLoaders()},w.registerListeners=function(){var g=this.hls;g.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(B.Events.LEVEL_LOADING,this.onLevelLoading,this),g.on(B.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),g.on(B.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},w.unregisterListeners=function(){var g=this.hls;g.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(B.Events.LEVEL_LOADING,this.onLevelLoading,this),g.off(B.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),g.off(B.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},w.createInternalLoader=function(g){var m=this.hls.config,f=new(m.pLoader||m.loader)(m);return g.loader=f,this.loaders[g.type]=f,f},w.getInternalLoader=function(g){return this.loaders[g.type]},w.resetInternalLoader=function(g){this.loaders[g]&&delete this.loaders[g]},w.destroyInternalLoaders=function(){for(var g in this.loaders){var m=this.loaders[g];m&&m.destroy(),this.resetInternalLoader(g)}},w.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},w.onManifestLoading=function(g,m){this.load({id:null,groupId:null,level:0,responseType:"text",type:U.PlaylistContextType.MANIFEST,url:m.url,deliveryDirectives:null})},w.onLevelLoading=function(g,m){this.load({id:m.id,groupId:null,level:m.level,responseType:"text",type:U.PlaylistContextType.LEVEL,url:m.url,deliveryDirectives:m.deliveryDirectives})},w.onAudioTrackLoading=function(g,m){this.load({id:m.id,groupId:m.groupId,level:null,responseType:"text",type:U.PlaylistContextType.AUDIO_TRACK,url:m.url,deliveryDirectives:m.deliveryDirectives})},w.onSubtitleTrackLoading=function(g,m){this.load({id:m.id,groupId:m.groupId,level:null,responseType:"text",type:U.PlaylistContextType.SUBTITLE_TRACK,url:m.url,deliveryDirectives:m.deliveryDirectives})},w.load=function(g){var m,f,_,A,E,T,h=this.hls.config,b=this.getInternalLoader(g);if(b){var C=b.context;if(C&&C.url===g.url)return void V.logger.trace("[playlist-loader]: playlist request ongoing");V.logger.log("[playlist-loader]: aborting previous loader for type: "+g.type),b.abort()}switch(g.type){case U.PlaylistContextType.MANIFEST:f=h.manifestLoadingMaxRetry,_=h.manifestLoadingTimeOut,A=h.manifestLoadingRetryDelay,E=h.manifestLoadingMaxRetryTimeout;break;case U.PlaylistContextType.LEVEL:case U.PlaylistContextType.AUDIO_TRACK:case U.PlaylistContextType.SUBTITLE_TRACK:f=0,_=h.levelLoadingTimeOut;break;default:f=h.levelLoadingMaxRetry,_=h.levelLoadingTimeOut,A=h.levelLoadingRetryDelay,E=h.levelLoadingMaxRetryTimeout}if(b=this.createInternalLoader(g),null!==(m=g.deliveryDirectives)&&void 0!==m&&m.part&&(g.type===U.PlaylistContextType.LEVEL&&null!==g.level?T=this.hls.levels[g.level].details:g.type===U.PlaylistContextType.AUDIO_TRACK&&null!==g.id?T=this.hls.audioTracks[g.id].details:g.type===U.PlaylistContextType.SUBTITLE_TRACK&&null!==g.id&&(T=this.hls.subtitleTracks[g.id].details),T)){var c=T.partTarget,d=T.targetduration;c&&d&&(_=Math.min(1e3*Math.max(3*c,.8*d),_))}var u={timeout:_,maxRetry:f,retryDelay:A,maxRetryDelay:E,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};b.load(g,u,p)},w.loadsuccess=function(g,m,h,b){void 0===b&&(b=null),this.resetInternalLoader(h.type);var C=g.data;0===C.indexOf("#EXTM3U")?(m.parsing.start=performance.now(),C.indexOf("#EXTINF:")>0||C.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(g,m,h,b):this.handleMasterPlaylist(g,m,h,b)):this.handleManifestParsingError(g,h,"no EXTM3U delimiter",b)},w.loaderror=function(g,m,h){void 0===h&&(h=null),this.handleNetworkError(m,h,!1,g)},w.loadtimeout=function(g,m,h){void 0===h&&(h=null),this.handleNetworkError(m,h,!0)},w.handleMasterPlaylist=function(g,m,h,b){var C=this.hls,f=g.data,_=R(g,h),A=Y.default.parseMasterPlaylist(f,_),E=A.levels,T=A.sessionData,c=A.sessionKeys;if(E.length){var d=E.map(function(j){return{id:j.attrs.AUDIO,audioCodec:j.audioCodec}}),u=E.map(function(j){return{id:j.attrs.SUBTITLES,textCodec:j.textCodec}}),p=Y.default.parseMasterPlaylistMedia(f,_,"AUDIO",d),M=Y.default.parseMasterPlaylistMedia(f,_,"SUBTITLES",u),S=Y.default.parseMasterPlaylistMedia(f,_,"CLOSED-CAPTIONS");p.length&&!p.some(function(j){return!j.url})&&E[0].audioCodec&&!E[0].attrs.AUDIO&&(V.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new F.AttrList({}),bitrate:0,url:""})),C.trigger(B.Events.MANIFEST_LOADED,{levels:E,audioTracks:p,subtitles:M,captions:S,url:_,stats:m,networkDetails:b,sessionData:T,sessionKeys:c})}else this.handleManifestParsingError(g,h,"no level found in manifest",b)},w.handleTrackOrLevelPlaylist=function(g,m,h,b){var C=this.hls,f=h.id,_=h.level,A=h.type,E=R(g,h),T=(0,z.isFiniteNumber)(f)?f:0,c=(0,z.isFiniteNumber)(_)?_:T,d=function L(x){switch(x.type){case U.PlaylistContextType.AUDIO_TRACK:return U.PlaylistLevelType.AUDIO;case U.PlaylistContextType.SUBTITLE_TRACK:return U.PlaylistLevelType.SUBTITLE;default:return U.PlaylistLevelType.MAIN}}(h),u=Y.default.parseLevelPlaylist(g.data,E,c,d,T);if(u.fragments.length){if(A===U.PlaylistContextType.MANIFEST){var p={attrs:new F.AttrList({}),bitrate:0,details:u,name:"",url:E};C.trigger(B.Events.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:E,stats:m,networkDetails:b,sessionData:null,sessionKeys:null})}m.parsing.end=performance.now(),h.levelDetails=u,this.handlePlaylistLoaded(g,m,h,b)}else C.trigger(B.Events.ERROR,{type:W.ErrorTypes.NETWORK_ERROR,details:W.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:E,reason:"no fragments found in level",level:"number"==typeof h.level?h.level:void 0})},w.handleManifestParsingError=function(g,m,h,b){this.hls.trigger(B.Events.ERROR,{type:W.ErrorTypes.NETWORK_ERROR,details:W.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:m.type===U.PlaylistContextType.MANIFEST,url:g.url,reason:h,response:g,context:m,networkDetails:b})},w.handleNetworkError=function(g,m,h,b){void 0===h&&(h=!1),V.logger.warn("[playlist-loader]: A network "+(h?"timeout":"error")+" occurred while loading "+g.type+" level: "+g.level+" id: "+g.id+' group-id: "'+g.groupId+'"');var C=W.ErrorDetails.UNKNOWN,f=!1,_=this.getInternalLoader(g);switch(g.type){case U.PlaylistContextType.MANIFEST:C=h?W.ErrorDetails.MANIFEST_LOAD_TIMEOUT:W.ErrorDetails.MANIFEST_LOAD_ERROR,f=!0;break;case U.PlaylistContextType.LEVEL:C=h?W.ErrorDetails.LEVEL_LOAD_TIMEOUT:W.ErrorDetails.LEVEL_LOAD_ERROR,f=!1;break;case U.PlaylistContextType.AUDIO_TRACK:C=h?W.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:W.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case U.PlaylistContextType.SUBTITLE_TRACK:C=h?W.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:W.ErrorDetails.SUBTITLE_LOAD_ERROR,f=!1}_&&this.resetInternalLoader(g.type);var A={type:W.ErrorTypes.NETWORK_ERROR,details:C,fatal:f,url:g.url,loader:_,context:g,networkDetails:m};b&&(A.response=b),this.hls.trigger(B.Events.ERROR,A)},w.handlePlaylistLoaded=function(g,m,h,b){var C=h.type,f=h.level,_=h.id,A=h.groupId,E=h.loader,T=h.levelDetails,c=h.deliveryDirectives;if(null!=T&&T.targetduration){if(E)switch(T.live&&(E.getCacheAge&&(T.ageHeader=E.getCacheAge()||0),(!E.getCacheAge||isNaN(T.ageHeader))&&(T.ageHeader=0)),C){case U.PlaylistContextType.MANIFEST:case U.PlaylistContextType.LEVEL:this.hls.trigger(B.Events.LEVEL_LOADED,{details:T,level:f||0,id:_||0,stats:m,networkDetails:b,deliveryDirectives:c});break;case U.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(B.Events.AUDIO_TRACK_LOADED,{details:T,id:_||0,groupId:A||"",stats:m,networkDetails:b,deliveryDirectives:c});break;case U.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(B.Events.SUBTITLE_TRACK_LOADED,{details:T,id:_||0,groupId:A||"",stats:m,networkDetails:b,deliveryDirectives:c})}}else this.handleManifestParsingError(g,h,"invalid target duration",b)},x}()},"./src/polyfills/number.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{MAX_SAFE_INTEGER:()=>B,isFiniteNumber:()=>z});var z=Number.isFinite||function(W){return"number"==typeof W&&isFinite(W)},B=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>B});const B=function(){function W(){}return W.getSilentFrame=function(Y,U){if("mp4a.40.2"===Y){if(1===U)return new Uint8Array([0,200,0,128,35,128]);if(2===U)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===U)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===U)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===U)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},W}()},"./src/remux/mp4-generator.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>W});var z=Math.pow(2,32)-1,B=function(){function V(){}return V.init=function(){var U;for(U in V.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})V.types.hasOwnProperty(U)&&(V.types[U]=[U.charCodeAt(0),U.charCodeAt(1),U.charCodeAt(2),U.charCodeAt(3)]);var F=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);V.HDLR_TYPES={video:F,audio:L};var R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]);V.STTS=V.STSC=V.STCO=P,V.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),V.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),V.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),V.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var D=new Uint8Array([105,115,111,109]),x=new Uint8Array([97,118,99,49]),w=new Uint8Array([0,0,0,1]);V.FTYP=V.box(V.types.ftyp,D,w,D,x),V.DINF=V.box(V.types.dinf,V.box(V.types.dref,R))},V.box=function(U){for(var F=8,L=arguments.length,R=new Array(L>1?L-1:0),P=1;P<L;P++)R[P-1]=arguments[P];for(var D=R.length,x=D;D--;)F+=R[D].byteLength;var w=new Uint8Array(F);for(w[0]=F>>24&255,w[1]=F>>16&255,w[2]=F>>8&255,w[3]=255&F,w.set(U,4),D=0,F=8;D<x;D++)w.set(R[D],F),F+=R[D].byteLength;return w},V.hdlr=function(U){return V.box(V.types.hdlr,V.HDLR_TYPES[U])},V.mdat=function(U){return V.box(V.types.mdat,U)},V.mdhd=function(U,F){F*=U;var L=Math.floor(F/(z+1)),R=Math.floor(F%(z+1));return V.box(V.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,255&U,L>>24,L>>16&255,L>>8&255,255&L,R>>24,R>>16&255,R>>8&255,255&R,85,196,0,0]))},V.mdia=function(U){return V.box(V.types.mdia,V.mdhd(U.timescale,U.duration),V.hdlr(U.type),V.minf(U))},V.mfhd=function(U){return V.box(V.types.mfhd,new Uint8Array([0,0,0,0,U>>24,U>>16&255,U>>8&255,255&U]))},V.minf=function(U){return V.box(V.types.minf,"audio"===U.type?V.box(V.types.smhd,V.SMHD):V.box(V.types.vmhd,V.VMHD),V.DINF,V.stbl(U))},V.moof=function(U,F,L){return V.box(V.types.moof,V.mfhd(U),V.traf(L,F))},V.moov=function(U){for(var F=U.length,L=[];F--;)L[F]=V.trak(U[F]);return V.box.apply(null,[V.types.moov,V.mvhd(U[0].timescale,U[0].duration)].concat(L).concat(V.mvex(U)))},V.mvex=function(U){for(var F=U.length,L=[];F--;)L[F]=V.trex(U[F]);return V.box.apply(null,[V.types.mvex].concat(L))},V.mvhd=function(U,F){F*=U;var L=Math.floor(F/(z+1)),R=Math.floor(F%(z+1)),P=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,255&U,L>>24,L>>16&255,L>>8&255,255&L,R>>24,R>>16&255,R>>8&255,255&R,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return V.box(V.types.mvhd,P)},V.sdtp=function(U){var R,P,F=U.samples||[],L=new Uint8Array(4+F.length);for(R=0;R<F.length;R++)L[R+4]=(P=F[R].flags).dependsOn<<4|P.isDependedOn<<2|P.hasRedundancy;return V.box(V.types.sdtp,L)},V.stbl=function(U){return V.box(V.types.stbl,V.stsd(U),V.box(V.types.stts,V.STTS),V.box(V.types.stsc,V.STSC),V.box(V.types.stsz,V.STSZ),V.box(V.types.stco,V.STCO))},V.avc1=function(U){var R,P,D,F=[],L=[];for(R=0;R<U.sps.length;R++)F.push((D=(P=U.sps[R]).byteLength)>>>8&255),F.push(255&D),F=F.concat(Array.prototype.slice.call(P));for(R=0;R<U.pps.length;R++)L.push((D=(P=U.pps[R]).byteLength)>>>8&255),L.push(255&D),L=L.concat(Array.prototype.slice.call(P));var x=V.box(V.types.avcC,new Uint8Array([1,F[3],F[4],F[5],255,224|U.sps.length].concat(F).concat([U.pps.length]).concat(L))),w=U.width,y=U.height,g=U.pixelRatio[0],m=U.pixelRatio[1];return V.box(V.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,w>>8&255,255&w,y>>8&255,255&y,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),x,V.box(V.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),V.box(V.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,255&g,m>>24,m>>16&255,m>>8&255,255&m])))},V.esds=function(U){var F=U.config.length;return new Uint8Array([0,0,0,0,3,23+F,0,1,0,4,15+F,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([F]).concat(U.config).concat([6,1,2]))},V.mp4a=function(U){var F=U.samplerate;return V.box(V.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,F>>8&255,255&F,0,0]),V.box(V.types.esds,V.esds(U)))},V.mp3=function(U){var F=U.samplerate;return V.box(V.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,F>>8&255,255&F,0,0]))},V.stsd=function(U){return V.box(V.types.stsd,V.STSD,"audio"===U.type?"mp3"===U.segmentCodec&&"mp3"===U.codec?V.mp3(U):V.mp4a(U):V.avc1(U))},V.tkhd=function(U){var F=U.id,L=U.duration*U.timescale,R=U.width,P=U.height,D=Math.floor(L/(z+1)),x=Math.floor(L%(z+1));return V.box(V.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,F>>24&255,F>>16&255,F>>8&255,255&F,0,0,0,0,D>>24,D>>16&255,D>>8&255,255&D,x>>24,x>>16&255,x>>8&255,255&x,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,R>>8&255,255&R,0,0,P>>8&255,255&P,0,0]))},V.traf=function(U,F){var L=V.sdtp(U),R=U.id,P=Math.floor(F/(z+1)),D=Math.floor(F%(z+1));return V.box(V.types.traf,V.box(V.types.tfhd,new Uint8Array([0,0,0,0,R>>24,R>>16&255,R>>8&255,255&R])),V.box(V.types.tfdt,new Uint8Array([1,0,0,0,P>>24,P>>16&255,P>>8&255,255&P,D>>24,D>>16&255,D>>8&255,255&D])),V.trun(U,L.length+16+20+8+16+8+8),L)},V.trak=function(U){return U.duration=U.duration||4294967295,V.box(V.types.trak,V.tkhd(U),V.mdia(U))},V.trex=function(U){var F=U.id;return V.box(V.types.trex,new Uint8Array([0,0,0,0,F>>24,F>>16&255,F>>8&255,255&F,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},V.trun=function(U,F){var x,w,y,g,m,h,L=U.samples||[],R=L.length,P=12+16*R,D=new Uint8Array(P);for(D.set(["video"===U.type?1:0,0,15,1,R>>>24&255,R>>>16&255,R>>>8&255,255&R,(F+=8+P)>>>24&255,F>>>16&255,F>>>8&255,255&F],0),x=0;x<R;x++)D.set([(y=(w=L[x]).duration)>>>24&255,y>>>16&255,y>>>8&255,255&y,(g=w.size)>>>24&255,g>>>16&255,g>>>8&255,255&g,(m=w.flags).isLeading<<2|m.dependsOn,m.isDependedOn<<6|m.hasRedundancy<<4|m.paddingValue<<1|m.isNonSync,61440&m.degradPrio,15&m.degradPrio,(h=w.cts)>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*x);return V.box(V.types.trun,D)},V.initSegment=function(U){V.types||V.init();var F=V.moov(U),L=new Uint8Array(V.FTYP.byteLength+F.byteLength);return L.set(V.FTYP),L.set(F,V.FTYP.byteLength),L},V}();B.types=void 0,B.HDLR_TYPES=void 0,B.STTS=void 0,B.STSC=void 0,B.STCO=void 0,B.STSZ=void 0,B.VMHD=void 0,B.SMHD=void 0,B.STSD=void 0,B.FTYP=void 0,B.DINF=void 0;const W=B},"./src/remux/mp4-remuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>g,flushTextTrackMetadataCueSamples:()=>b,flushTextTrackUserdataCueSamples:()=>C,normalizePts:()=>m});var z=O("./src/polyfills/number.ts"),B=O("./src/remux/aac-helper.ts"),W=O("./src/remux/mp4-generator.ts"),V=O("./src/events.ts"),Y=O("./src/errors.ts"),U=O("./src/utils/logger.ts"),F=O("./src/types/loader.ts"),L=O("./src/utils/timescale-conversion.ts");function R(){return R=Object.assign?Object.assign.bind():function(A){for(var E=1;E<arguments.length;E++){var T=arguments[E];for(var c in T)Object.prototype.hasOwnProperty.call(T,c)&&(A[c]=T[c])}return A},R.apply(this,arguments)}var w=null,y=null,g=function(){function A(T,c,d,u){if(void 0===u&&(u=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=T,this.config=c,this.typeSupported=d,this.ISGenerated=!1,null===w){var M=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);w=M?parseInt(M[1]):0}if(null===y){var S=navigator.userAgent.match(/Safari\/(\d+)/i);y=S?parseInt(S[1]):0}}var E=A.prototype;return E.destroy=function(){},E.resetTimeStamp=function(c){U.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=c},E.resetNextTimestamp=function(){U.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},E.resetInitSegment=function(){U.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},E.getVideoStartPts=function(c){var d=!1,u=c.reduce(function(p,M){var S=M.pts-p;return S<-4294967296?(d=!0,m(p,M.pts)):S>0?p:M.pts},c[0].pts);return d&&U.logger.debug("PTS rollover detected"),u},E.remux=function(c,d,u,p,M,S,k,j){var N,G,K,$,Z,te,q=M,ne=M,ue=d.pid>-1,ce=d.samples.length,fe=c.samples.length>0,ve=k&&ce>0||ce>1;if((!(c.pid>-1)||fe)&&(!ue||ve)||this.ISGenerated||k){this.ISGenerated||(K=this.generateIS(c,d,M));var Te,Ee=this.isVideoContiguous,ye=-1;if(ve&&(ye=function h(A){for(var E=0;E<A.length;E++)if(A[E].key)return E;return-1}(d.samples),!Ee&&this.config.forceKeyFrameOnDiscontinuity))if(te=!0,ye>0){U.logger.warn("[mp4-remuxer]: Dropped "+ye+" out of "+ce+" video samples due to a missing keyframe");var Ze=this.getVideoStartPts(d.samples);d.samples=d.samples.slice(ye),d.dropped+=ye,Te=ne+=(d.samples[0].pts-Ze)/d.inputTimeScale}else-1===ye&&(U.logger.warn("[mp4-remuxer]: No keyframe found out of "+ce+" video samples"),te=!1);if(this.ISGenerated){if(fe&&ve){var lt=this.getVideoStartPts(d.samples),gt=(m(c.samples[0].pts,lt)-lt)/d.inputTimeScale;q+=Math.max(0,gt),ne+=Math.max(0,-gt)}if(fe){if(c.samplerate||(U.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),K=this.generateIS(c,d,M)),G=this.remuxAudio(c,q,this.isAudioContiguous,S,ue||ve||j===F.PlaylistLevelType.AUDIO?ne:void 0),ve){var Lt=G?G.endPTS-G.startPTS:0;d.inputTimeScale||(U.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),K=this.generateIS(c,d,M)),N=this.remuxVideo(d,ne,Ee,Lt)}}else ve&&(N=this.remuxVideo(d,ne,Ee,0));N&&(N.firstKeyFrame=ye,N.independent=-1!==ye,N.firstKeyFramePTS=Te)}}return this.ISGenerated&&(u.samples.length&&(Z=b(u,M,this._initPTS,this._initDTS)),p.samples.length&&($=C(p,M,this._initPTS))),{audio:G,video:N,initSegment:K,independent:te,text:$,id3:Z}},E.generateIS=function(c,d,u){var G,K,$,p=c.samples,M=d.samples,S=this.typeSupported,k={},j=!(0,z.isFiniteNumber)(this._initPTS),N="audio/mp4";if(j&&(G=K=1/0),c.config&&p.length&&("mp3"===(c.timescale=c.samplerate,c.segmentCodec)&&(S.mpeg?(N="audio/mpeg",c.codec=""):S.mp3&&(c.codec="mp3")),k.audio={id:"audio",container:N,codec:c.codec,initSegment:"mp3"===c.segmentCodec&&S.mpeg?new Uint8Array(0):W.default.initSegment([c]),metadata:{channelCount:c.channelCount}},j&&($=c.inputTimeScale,G=K=p[0].pts-Math.round($*u))),d.sps&&d.pps&&M.length&&(d.timescale=d.inputTimeScale,k.video={id:"main",container:"video/mp4",codec:d.codec,initSegment:W.default.initSegment([d]),metadata:{width:d.width,height:d.height}},j)){$=d.inputTimeScale;var Z=this.getVideoStartPts(M),te=Math.round($*u);K=Math.min(K,m(M[0].dts,Z)-te),G=Math.min(G,Z-te)}if(Object.keys(k).length)return this.ISGenerated=!0,j&&(this._initPTS=G,this._initDTS=K),{tracks:k,initPTS:G,timescale:$}},E.remuxVideo=function(c,d,u,p){var Z,te,M=c.inputTimeScale,S=c.samples,k=[],j=S.length,N=this._initPTS,G=this.nextAvcDts,K=8,$=this.videoSampleDuration,q=Number.POSITIVE_INFINITY,ne=Number.NEGATIVE_INFINITY,se=!1;u&&null!==G||(G=d*M-(S[0].pts-m(S[0].dts,S[0].pts)));for(var fe=0;fe<j;fe++){var ve=S[fe];ve.pts=m(ve.pts-N,G),ve.dts=m(ve.dts-N,G),ve.dts<S[fe>0?fe-1:fe].dts&&(se=!0)}se&&S.sort(function(er,Ad){return er.dts-Ad.dts||er.pts-Ad.pts});var Re=S[S.length-1].dts-(Z=S[0].dts),Ee=Re?Math.round(Re/(j-1)):$||c.inputTimeScale/30;if(u){var ye=Z-G,Te=ye>Ee,Ze=ye<-1;if((Te||Ze)&&(U.logger.warn(Te?"AVC: "+(0,L.toMsFromMpegTsClock)(ye,!0)+" ms ("+ye+"dts) hole between fragments detected, filling it":"AVC: "+(0,L.toMsFromMpegTsClock)(-ye,!0)+" ms ("+ye+"dts) overlapping between fragments detected"),!Ze||G>S[0].pts)){var lt=S[0].pts-ye;S[0].dts=Z=G,S[0].pts=lt,U.logger.log("Video: First PTS/DTS adjusted: "+(0,L.toMsFromMpegTsClock)(lt,!0)+"/"+(0,L.toMsFromMpegTsClock)(Z,!0)+", delta: "+(0,L.toMsFromMpegTsClock)(ye,!0)+" ms")}}Z=Math.max(0,Z);for(var Pt=0,gt=0,Lt=0;Lt<j;Lt++){for(var dt=S[Lt],xt=dt.units,ft=xt.length,Xt=0,un=0;un<ft;un++)Xt+=xt[un].data.length;gt+=Xt,Pt+=ft,dt.length=Xt,dt.dts=Math.max(dt.dts,Z),q=Math.min(dt.pts,q),ne=Math.max(dt.pts,ne)}te=S[j-1].dts;var Dn,Et=gt+4*Pt+8;try{Dn=new Uint8Array(Et)}catch(er){return void this.observer.emit(V.Events.ERROR,V.Events.ERROR,{type:Y.ErrorTypes.MUX_ERROR,details:Y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Et,reason:"fail allocating video mdat "+Et})}var In=new DataView(Dn.buffer);In.setUint32(0,Et),Dn.set(W.default.types.mdat,4);for(var Zn=!1,jn=Number.POSITIVE_INFINITY,qn=Number.POSITIVE_INFINITY,vr=Number.NEGATIVE_INFINITY,Gn=Number.NEGATIVE_INFINITY,pn=0;pn<j;pn++){for(var Cn=S[pn],Kn=Cn.units,Wn=0,kt=0,Tn=Kn.length;kt<Tn;kt++){var zn=Kn[kt],cs=zn.data,yi=zn.data.byteLength;In.setUint32(K,yi),Dn.set(cs,K+=4),K+=yi,Wn+=4+yi}var _i=void 0;if(pn<j-1)$=S[pn+1].dts-Cn.dts,_i=S[pn+1].pts-Cn.pts;else{var ua=this.config,ds=pn>0?Cn.dts-S[pn-1].dts:Ee;if(_i=pn>0?Cn.pts-S[pn-1].pts:Ee,ua.stretchShortVideoTrack&&null!==this.nextAudioPts){var kl=Math.floor(ua.maxBufferHole*M),cn=(p?q+p*M:this.nextAudioPts)-Cn.pts;cn>kl?(($=cn-ds)<0?$=ds:Zn=!0,U.logger.log("[mp4-remuxer]: It is approximately "+cn/90+" ms to the next segment; using duration "+$/90+" ms for the last video frame.")):$=ds}else $=ds}var Td=Math.round(Cn.pts-Cn.dts);jn=Math.min(jn,$),vr=Math.max(vr,$),qn=Math.min(qn,_i),Gn=Math.max(Gn,_i),k.push(new f(Cn.key,$,Wn,Td))}if(k.length)if(w){if(w<70){var Fl=k[0].flags;Fl.dependsOn=2,Fl.isNonSync=0}}else if(y&&Gn-qn<vr-jn&&Ee/vr<.025&&0===k[0].cts){U.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ca=Z,Jn=0,da=k.length;Jn<da;Jn++){var Nl=ca+k[Jn].duration;k[Jn].duration=Jn<da-1?Nl+k[Jn+1].cts-(ca+k[Jn].cts):Jn?k[Jn-1].duration:Ee,k[Jn].cts=0,ca=Nl}}console.assert(null!==$,"mp4SampleDuration must be computed"),this.nextAvcDts=G=te+($=Zn||!$?Ee:$),this.videoSampleDuration=$,this.isVideoContiguous=!0;var fs={data1:W.default.moof(c.sequenceNumber++,Z,R({},c,{samples:k})),data2:Dn,startPTS:q/M,endPTS:(ne+$)/M,startDTS:Z/M,endDTS:G/M,type:"video",hasAudio:!1,hasVideo:!0,nb:k.length,dropped:c.dropped};return c.samples=[],c.dropped=0,console.assert(Dn.length,"MDAT length must not be zero"),fs},E.remuxAudio=function(c,d,u,p,M){var S=c.inputTimeScale,j=S/(c.samplerate?c.samplerate:S),N="aac"===c.segmentCodec?1024:1152,G=N*j,K=this._initPTS,$="mp3"===c.segmentCodec&&this.typeSupported.mpeg,Z=[],te=void 0!==M,q=c.samples,ne=$?0:8,se=this.nextAudioPts||-1,ue=d*S;if(this.isAudioContiguous=u=u||q.length&&se>0&&(p&&Math.abs(ue-se)<9e3||Math.abs(m(q[0].pts-K,ue)-se)<20*G),q.forEach(function(zn){zn.pts=m(zn.pts-K,ue)}),!u||se<0){if(!(q=q.filter(function(zn){return zn.pts>=0})).length)return;se=0===M?0:p&&!te?Math.max(0,ue):q[0].pts}if("aac"===c.segmentCodec)for(var ce=this.config.maxAudioFramesDrift,fe=0,ve=se;fe<q.length;fe++){var Re=q[fe],Ee=Re.pts,ye=Ee-ve,Te=Math.abs(1e3*ye/S);if(ye<=-ce*G&&te)0===fe&&(U.logger.warn("Audio frame @ "+(Ee/S).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*ye/S)+" ms."),this.nextAudioPts=se=ve=Ee);else if(ye>=ce*G&&Te<1e4&&te){var Ze=Math.round(ye/G);(ve=Ee-Ze*G)<0&&(Ze--,ve+=G),0===fe&&(this.nextAudioPts=se=ve),U.logger.warn("[mp4-remuxer]: Injecting "+Ze+" audio frame @ "+(ve/S).toFixed(3)+"s due to "+Math.round(1e3*ye/S)+" ms gap.");for(var lt=0;lt<Ze;lt++){var Pt=Math.max(ve,0),gt=B.default.getSilentFrame(c.manifestCodec||c.codec,c.channelCount);gt||(U.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),gt=Re.unit.subarray()),q.splice(fe,0,{unit:gt,pts:Pt}),ve+=G,fe++}}Re.pts=ve,ve+=G}for(var xt,Lt=null,dt=null,ft=0,Xt=q.length;Xt--;)ft+=q[Xt].unit.byteLength;for(var un=0,Et=q.length;un<Et;un++){var Dn=q[un],In=Dn.unit,Zn=Dn.pts;if(null!==dt)Z[un-1].duration=Math.round((Zn-dt)/j);else{if(u&&"aac"===c.segmentCodec&&(Zn=se),Lt=Zn,!(ft>0))return;ft+=ne;try{xt=new Uint8Array(ft)}catch(zn){return void this.observer.emit(V.Events.ERROR,V.Events.ERROR,{type:Y.ErrorTypes.MUX_ERROR,details:Y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ft,reason:"fail allocating audio mdat "+ft})}$||(new DataView(xt.buffer).setUint32(0,ft),xt.set(W.default.types.mdat,4))}xt.set(In,ne);var vr=In.byteLength;ne+=vr,Z.push(new f(!0,N,vr,0)),dt=Zn}var Gn=Z.length;if(Gn){this.nextAudioPts=se=dt+j*Z[Z.length-1].duration;var Cn=$?new Uint8Array(0):W.default.moof(c.sequenceNumber++,Lt/j,R({},c,{samples:Z}));c.samples=[];var Kn=Lt/S,Wn=se/S,Tn={data1:Cn,data2:xt,startPTS:Kn,endPTS:Wn,startDTS:Kn,endDTS:Wn,type:"audio",hasAudio:!0,hasVideo:!1,nb:Gn};return this.isAudioContiguous=!0,console.assert(xt.length,"MDAT length must not be zero"),Tn}},E.remuxEmptyAudio=function(c,d,u,p){var M=c.inputTimeScale,j=this.nextAudioPts,N=(null!==j?j:p.startDTS*M)+this._initDTS,K=M/(c.samplerate?c.samplerate:M)*1024,$=Math.ceil((p.endDTS*M+this._initDTS-N)/K),Z=B.default.getSilentFrame(c.manifestCodec||c.codec,c.channelCount);if(U.logger.warn("[mp4-remuxer]: remux empty Audio"),Z){for(var te=[],q=0;q<$;q++){var ne=N+q*K;te.push({unit:Z,pts:ne,dts:ne})}return c.samples=te,this.remuxAudio(c,d,u,!1)}U.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},A}();function m(A,E){var T;if(null===E)return A;for(T=E<A?-8589934592:8589934592;Math.abs(A-E)>4294967296;)A+=T;return A}function b(A,E,T,c){var d=A.samples.length;if(d){for(var u=A.inputTimeScale,p=0;p<d;p++){var M=A.samples[p];M.pts=m(M.pts-T,E*u)/u,M.dts=m(M.dts-c,E*u)/u}var S=A.samples;return A.samples=[],{samples:S}}}function C(A,E,T){var c=A.samples.length;if(c){for(var d=A.inputTimeScale,u=0;u<c;u++){var p=A.samples[u];p.pts=m(p.pts-T,E*d)/d}A.samples.sort(function(S,k){return S.pts-k.pts});var M=A.samples;return A.samples=[],{samples:M}}}var f=function(E,T,c,d){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=T,this.size=c,this.cts=d,this.flags=new _(E)},_=function(E){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=E?2:1,this.isNonSync=E?0:1}},"./src/remux/passthrough-remuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>L});var z=O("./src/polyfills/number.ts"),B=O("./src/remux/mp4-remuxer.ts"),W=O("./src/utils/mp4-tools.ts"),V=O("./src/loader/fragment.ts"),Y=O("./src/utils/logger.ts");function F(R,P){var D=null==R?void 0:R.codec;return D&&D.length>4?D:"hvc1"===D||"hev1"===D?"hvc1.1.c.L120.90":"av01"===D?"av01.0.04M.08":"avc1"===D||P===V.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const L=function(){function R(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var P=R.prototype;return P.destroy=function(){},P.resetTimeStamp=function(x){this.initPTS=x,this.lastEndTime=null},P.resetNextTimestamp=function(){this.lastEndTime=null},P.resetInitSegment=function(x,w,y,g){this.audioCodec=w,this.videoCodec=y,this.generateInitSegment((0,W.patchEncyptionData)(x,g)),this.emitInitSegment=!0},P.generateInitSegment=function(x){var w=this.audioCodec,y=this.videoCodec;if(!x||!x.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var g=this.initData=(0,W.parseInitSegment)(x);w||(w=F(g.audio,V.ElementaryStreamTypes.AUDIO)),y||(y=F(g.video,V.ElementaryStreamTypes.VIDEO));var m={};g.audio&&g.video?m.audiovideo={container:"video/mp4",codec:w+","+y,initSegment:x,id:"main"}:g.audio?m.audio={container:"audio/mp4",codec:w,initSegment:x,id:"audio"}:g.video?m.video={container:"video/mp4",codec:y,initSegment:x,id:"main"}:Y.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=m},P.remux=function(x,w,y,g,m){var h,b=this.initPTS,C=this.lastEndTime,f={audio:void 0,video:void 0,text:g,id3:y,initSegment:void 0};(0,z.isFiniteNumber)(C)||(C=this.lastEndTime=m||0);var _=w.samples;if(!_||!_.length)return f;var A={initPTS:void 0,timescale:1},E=this.initData;if((!E||!E.length)&&(this.generateInitSegment(_),E=this.initData),!E||!E.length)return Y.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(A.tracks=this.initTracks,this.emitInitSegment=!1);var T=(0,W.getStartDTS)(E,_);(0,z.isFiniteNumber)(b)||(this.initPTS=A.initPTS=b=T-m);var c=(0,W.getDuration)(_,E),d=x?T-b:C,u=d+c;(0,W.offsetStartDTS)(E,_,b),c>0?this.lastEndTime=u:(Y.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var p=!!E.audio,M=!!E.video,S="";p&&(S+="audio"),M&&(S+="video");var k={data1:_,startPTS:d,startDTS:d,endPTS:u,endDTS:u,type:S,hasAudio:p,hasVideo:M,nb:1,dropped:0};f.audio="audio"===k.type?k:void 0,f.video="audio"!==k.type?k:void 0,f.initSegment=A;var j=null!=(h=this.initPTS)?h:0;return f.id3=(0,B.flushTextTrackMetadataCueSamples)(y,m,j,j),g.samples.length&&(f.text=(0,B.flushTextTrackUserdataCueSamples)(g,m,j)),f},R}()},"./src/task-loop.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>z});var z=function(){function B(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var W=B.prototype;return W.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},W.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},W.onHandlerDestroyed=function(){},W.hasInterval=function(){return!!this._tickInterval},W.hasNextTick=function(){return!!this._tickTimer},W.setInterval=function(Y){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,Y),!0)},W.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},W.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},W.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},W.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},W.doTick=function(){},B}()},"./src/types/cmcd.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{CMCDObjectType:()=>B,CMCDStreamType:()=>V,CMCDStreamingFormat:()=>W,CMCDVersion:()=>z});var z=1,B=(()=>{return(Y=B||(B={})).MANIFEST="m",Y.AUDIO="a",Y.VIDEO="v",Y.MUXED="av",Y.INIT="i",Y.CAPTION="c",Y.TIMED_TEXT="tt",Y.KEY="k",Y.OTHER="o",B;var Y})(),W=(()=>{return(Y=W||(W={})).DASH="d",Y.HLS="h",Y.SMOOTH="s",Y.OTHER="o",W;var Y})(),V=(()=>{return(Y=V||(V={})).VOD="v",Y.LIVE="l",V;var Y})()},"./src/types/demuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{MetadataSchema:()=>z});var z=(()=>{return(B=z||(z={})).audioId3="org.id3",B.dateRange="com.apple.quicktime.HLS",B.emsg="https://aomedia.org/emsg/ID3",z;var B})()},"./src/types/level.ts":(he,J,O)=>{"use strict";function z(P,D){for(var x=0;x<D.length;x++){var w=D[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(P,W(w.key),w)}}function W(P){var D=function V(P,D){if("object"!=typeof P||null===P)return P;var x=P[Symbol.toPrimitive];if(void 0!==x){var w=x.call(P,D||"default");if("object"!=typeof w)return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===D?String:Number)(P)}(P,"string");return"symbol"==typeof D?D:String(D)}O.r(J),O.d(J,{HdcpLevels:()=>Y,HlsSkip:()=>U,HlsUrlParameters:()=>L,Level:()=>R,getSkipValue:()=>F});var Y=["NONE","TYPE-0","TYPE-1","TYPE-2",null],U=(()=>{return(P=U||(U={})).No="",P.Yes="YES",P.v2="v2",U;var P})();function F(P,D){var x=P.canSkipUntil;return x&&(void 0!==D?D-P.endSN:0)<x?P.canSkipDateRanges?U.v2:U.Yes:U.No}var L=function(){function P(x,w,y){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=x,this.part=w,this.skip=y}return P.prototype.addDirectives=function(w){var y=new self.URL(w);return void 0!==this.msn&&y.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&y.searchParams.set("_HLS_part",this.part.toString()),this.skip&&y.searchParams.set("_HLS_skip",this.skip),y.href},P}(),R=function(){function P(D){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[D.url],this.attrs=D.attrs,this.bitrate=D.bitrate,D.details&&(this.details=D.details),this.id=D.id||0,this.name=D.name,this.width=D.width||0,this.height=D.height||0,this.audioCodec=D.audioCodec,this.videoCodec=D.videoCodec,this.unknownCodecs=D.unknownCodecs,this.codecSet=[D.videoCodec,D.audioCodec].filter(function(x){return x}).join(",").replace(/\.[^.,]+/g,"")}return function B(P,D,x){D&&z(P.prototype,D),x&&z(P,x),Object.defineProperty(P,"prototype",{writable:!1})}(P,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(x){var w=x%this.url.length;this._urlId!==w&&(this.details=void 0,this._urlId=w)}}]),P}()},"./src/types/loader.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{PlaylistContextType:()=>z,PlaylistLevelType:()=>B});var z=(()=>{return(W=z||(z={})).MANIFEST="manifest",W.LEVEL="level",W.AUDIO_TRACK="audioTrack",W.SUBTITLE_TRACK="subtitleTrack",z;var W})(),B=(()=>{return(W=B||(B={})).MAIN="main",W.AUDIO="audio",W.SUBTITLE="subtitle",B;var W})()},"./src/types/transmuxer.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{ChunkMetadata:()=>z});var z=function(V,Y,U,F,L,R){void 0===F&&(F=0),void 0===L&&(L=-1),void 0===R&&(R=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=V,this.sn=Y,this.id=U,this.size=F,this.part=L,this.partial=R}},"./src/utils/attr-list.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{AttrList:()=>W});var z=/^(\d+)x(\d+)$/,B=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,W=function(){function V(U){for(var F in"string"==typeof U&&(U=V.parseAttrList(U)),U)U.hasOwnProperty(F)&&(this[F]=U[F])}var Y=V.prototype;return Y.decimalInteger=function(F){var L=parseInt(this[F],10);return L>Number.MAX_SAFE_INTEGER?1/0:L},Y.hexadecimalInteger=function(F){if(this[F]){var L=(this[F]||"0x").slice(2);L=(1&L.length?"0":"")+L;for(var R=new Uint8Array(L.length/2),P=0;P<L.length/2;P++)R[P]=parseInt(L.slice(2*P,2*P+2),16);return R}return null},Y.hexadecimalIntegerAsNumber=function(F){var L=parseInt(this[F],16);return L>Number.MAX_SAFE_INTEGER?1/0:L},Y.decimalFloatingPoint=function(F){return parseFloat(this[F])},Y.optionalFloat=function(F,L){var R=this[F];return R?parseFloat(R):L},Y.enumeratedString=function(F){return this[F]},Y.bool=function(F){return"YES"===this[F]},Y.decimalResolution=function(F){var L=z.exec(this[F]);if(null!==L)return{width:parseInt(L[1],10),height:parseInt(L[2],10)}},V.parseAttrList=function(F){var L,R={};for(B.lastIndex=0;null!==(L=B.exec(F));){var D=L[2];0===D.indexOf('"')&&D.lastIndexOf('"')===D.length-1&&(D=D.slice(1,-1)),R[L[1]]=D}return R},V}()},"./src/utils/binary-search.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>B});const B={search:function(V,Y){for(var U=0,F=V.length-1,L=null,R=null;U<=F;){var P=Y(R=V[L=(U+F)/2|0]);if(P>0)U=L+1;else{if(!(P<0))return R;F=L-1}}return null}}},"./src/utils/buffer-helper.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{BufferHelper:()=>W});var z=O("./src/utils/logger.ts"),B={length:0,start:function(){return 0},end:function(){return 0}},W=function(){function V(){}return V.isBuffered=function(U,F){try{if(U)for(var L=V.getBuffered(U),R=0;R<L.length;R++)if(F>=L.start(R)&&F<=L.end(R))return!0}catch(P){}return!1},V.bufferInfo=function(U,F,L){try{if(U){var D,R=V.getBuffered(U),P=[];for(D=0;D<R.length;D++)P.push({start:R.start(D),end:R.end(D)});return this.bufferedInfo(P,F,L)}}catch(x){}return{len:0,start:F,end:F,nextStart:void 0}},V.bufferedInfo=function(U,F,L){F=Math.max(0,F),U.sort(function(f,_){return f.start-_.start||_.end-f.end});var R=[];if(L)for(var P=0;P<U.length;P++){var D=R.length;if(D){var x=R[D-1].end;U[P].start-x<L?U[P].end>x&&(R[D-1].end=U[P].end):R.push(U[P])}else R.push(U[P])}else R=U;for(var y,w=0,g=F,m=F,h=0;h<R.length;h++){var b=R[h].start,C=R[h].end;if(F+L>=b&&F<C)g=b,w=(m=C)-F;else if(F+L<b){y=b;break}}return{len:w,start:g||0,end:m||0,nextStart:y}},V.getBuffered=function(U){try{return U.buffered}catch(F){return z.logger.log("failed to get media.buffered",F),B}},V}()},"./src/utils/cea-608-parser.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{CaptionScreen:()=>h,Row:()=>m,default:()=>E});var z=O("./src/utils/logger.ts"),B={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},W=function(c){var d=c;return B.hasOwnProperty(c)&&(d=B[c]),String.fromCharCode(d)},V=15,Y=100,U={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},F={17:2,18:4,21:6,22:8,23:10,19:13,20:15},L={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},R={25:2,26:4,29:6,30:8,31:10,27:13,28:15},P=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],D=(()=>{return(T=D||(D={}))[T.ERROR=0]="ERROR",T[T.TEXT=1]="TEXT",T[T.WARNING=2]="WARNING",T[T.INFO=2]="INFO",T[T.DEBUG=3]="DEBUG",T[T.DATA=3]="DATA",D;var T})(),x=function(){function T(){this.time=null,this.verboseLevel=D.ERROR}return T.prototype.log=function(u,p){if(this.verboseLevel>=u){var M="function"==typeof p?p():p;z.logger.log(this.time+" ["+u+"] "+M)}},T}(),w=function(c){for(var d=[],u=0;u<c.length;u++)d.push(c[u].toString(16));return d},y=function(){function T(d,u,p,M,S){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=d||"white",this.underline=u||!1,this.italics=p||!1,this.background=M||"black",this.flash=S||!1}var c=T.prototype;return c.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},c.setStyles=function(u){for(var p=["foreground","underline","italics","background","flash"],M=0;M<p.length;M++){var S=p[M];u.hasOwnProperty(S)&&(this[S]=u[S])}},c.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},c.equals=function(u){return this.foreground===u.foreground&&this.underline===u.underline&&this.italics===u.italics&&this.background===u.background&&this.flash===u.flash},c.copy=function(u){this.foreground=u.foreground,this.underline=u.underline,this.italics=u.italics,this.background=u.background,this.flash=u.flash},c.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},T}(),g=function(){function T(d,u,p,M,S,k){this.uchar=void 0,this.penState=void 0,this.uchar=d||" ",this.penState=new y(u,p,M,S,k)}var c=T.prototype;return c.reset=function(){this.uchar=" ",this.penState.reset()},c.setChar=function(u,p){this.uchar=u,this.penState.copy(p)},c.setPenState=function(u){this.penState.copy(u)},c.equals=function(u){return this.uchar===u.uchar&&this.penState.equals(u.penState)},c.copy=function(u){this.uchar=u.uchar,this.penState.copy(u.penState)},c.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},T}(),m=function(){function T(d){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var u=0;u<Y;u++)this.chars.push(new g);this.logger=d,this.pos=0,this.currPenState=new y}var c=T.prototype;return c.equals=function(u){for(var p=!0,M=0;M<Y;M++)if(!this.chars[M].equals(u.chars[M])){p=!1;break}return p},c.copy=function(u){for(var p=0;p<Y;p++)this.chars[p].copy(u.chars[p])},c.isEmpty=function(){for(var u=!0,p=0;p<Y;p++)if(!this.chars[p].isEmpty()){u=!1;break}return u},c.setCursor=function(u){this.pos!==u&&(this.pos=u),this.pos<0?(this.logger.log(D.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Y&&(this.logger.log(D.DEBUG,"Too large cursor position "+this.pos),this.pos=Y)},c.moveCursor=function(u){var p=this.pos+u;if(u>1)for(var M=this.pos+1;M<p+1;M++)this.chars[M].setPenState(this.currPenState);this.setCursor(p)},c.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},c.insertChar=function(u){var p=this;u>=144&&this.backSpace();var M=W(u);this.pos>=Y?this.logger.log(D.ERROR,function(){return"Cannot insert "+u.toString(16)+" ("+M+") at position "+p.pos+". Skipping it!"}):(this.chars[this.pos].setChar(M,this.currPenState),this.moveCursor(1))},c.clearFromPos=function(u){var p;for(p=u;p<Y;p++)this.chars[p].reset()},c.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},c.clearToEndOfRow=function(){this.clearFromPos(this.pos)},c.getTextString=function(){for(var u=[],p=!0,M=0;M<Y;M++){var S=this.chars[M].uchar;" "!==S&&(p=!1),u.push(S)}return p?"":u.join("")},c.setPenStyles=function(u){this.currPenState.setStyles(u),this.chars[this.pos].setPenState(this.currPenState)},T}(),h=function(){function T(d){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var u=0;u<V;u++)this.rows.push(new m(d));this.logger=d,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var c=T.prototype;return c.reset=function(){for(var u=0;u<V;u++)this.rows[u].clear();this.currRow=14},c.equals=function(u){for(var p=!0,M=0;M<V;M++)if(!this.rows[M].equals(u.rows[M])){p=!1;break}return p},c.copy=function(u){for(var p=0;p<V;p++)this.rows[p].copy(u.rows[p])},c.isEmpty=function(){for(var u=!0,p=0;p<V;p++)if(!this.rows[p].isEmpty()){u=!1;break}return u},c.backSpace=function(){this.rows[this.currRow].backSpace()},c.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},c.insertChar=function(u){this.rows[this.currRow].insertChar(u)},c.setPen=function(u){this.rows[this.currRow].setPenStyles(u)},c.moveCursor=function(u){this.rows[this.currRow].moveCursor(u)},c.setCursor=function(u){this.logger.log(D.INFO,"setCursor: "+u),this.rows[this.currRow].setCursor(u)},c.setPAC=function(u){this.logger.log(D.INFO,function(){return"pacData = "+JSON.stringify(u)});var p=u.row-1;if(this.nrRollUpRows&&p<this.nrRollUpRows-1&&(p=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==p){for(var M=0;M<V;M++)this.rows[M].clear();var S=this.currRow+1-this.nrRollUpRows,k=this.lastOutputScreen;if(k){var j=k.rows[S].cueStartTime,N=this.logger.time;if(j&&null!==N&&j<N)for(var G=0;G<this.nrRollUpRows;G++)this.rows[p-this.nrRollUpRows+G+1].copy(k.rows[S+G])}}this.currRow=p;var K=this.rows[this.currRow];if(null!==u.indent){var Z=Math.max(u.indent-1,0);K.setCursor(u.indent),u.color=K.chars[Z].penState.foreground}this.setPen({foreground:u.color,underline:u.underline,italics:u.italics,background:"black",flash:!1})},c.setBkgData=function(u){this.logger.log(D.INFO,function(){return"bkgData = "+JSON.stringify(u)}),this.backSpace(),this.setPen(u),this.insertChar(32)},c.setRollUpRows=function(u){this.nrRollUpRows=u},c.rollUp=function(){var u=this;if(null!==this.nrRollUpRows){this.logger.log(D.TEXT,function(){return u.getDisplayText()});var M=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];M.clear(),this.rows.splice(this.currRow,0,M),this.logger.log(D.INFO,"Rolling up")}else this.logger.log(D.DEBUG,"roll_up but nrRollUpRows not set yet")},c.getDisplayText=function(u){u=u||!1;for(var p=[],M="",k=0;k<V;k++){var j=this.rows[k].getTextString();j&&p.push(u?"Row "+(k+1)+": '"+j+"'":j.trim())}return p.length>0&&(M=u?"["+p.join(" | ")+"]":p.join("\n")),M},c.getTextAndFormat=function(){return this.rows},T}(),b=function(){function T(d,u,p){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=d,this.outputFilter=u,this.mode=null,this.verbose=0,this.displayedMemory=new h(p),this.nonDisplayedMemory=new h(p),this.lastOutputScreen=new h(p),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=p}var c=T.prototype;return c.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},c.getHandler=function(){return this.outputFilter},c.setHandler=function(u){this.outputFilter=u},c.setPAC=function(u){this.writeScreen.setPAC(u)},c.setBkgData=function(u){this.writeScreen.setBkgData(u)},c.setMode=function(u){u!==this.mode&&(this.mode=u,this.logger.log(D.INFO,function(){return"MODE="+u}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=u)},c.insertChars=function(u){for(var p=this,M=0;M<u.length;M++)this.writeScreen.insertChar(u[M]);var S=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(D.INFO,function(){return S+": "+p.writeScreen.getDisplayText(!0)}),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(D.TEXT,function(){return"DISPLAYED: "+p.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},c.ccRCL=function(){this.logger.log(D.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},c.ccBS=function(){this.logger.log(D.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},c.ccAOF=function(){},c.ccAON=function(){},c.ccDER=function(){this.logger.log(D.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},c.ccRU=function(u){this.logger.log(D.INFO,"RU("+u+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(u)},c.ccFON=function(){this.logger.log(D.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},c.ccRDC=function(){this.logger.log(D.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},c.ccTR=function(){this.logger.log(D.INFO,"TR"),this.setMode("MODE_TEXT")},c.ccRTD=function(){this.logger.log(D.INFO,"RTD"),this.setMode("MODE_TEXT")},c.ccEDM=function(){this.logger.log(D.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},c.ccCR=function(){this.logger.log(D.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},c.ccENM=function(){this.logger.log(D.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},c.ccEOC=function(){var u=this;if(this.logger.log(D.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var p=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=p,this.writeScreen=this.nonDisplayedMemory,this.logger.log(D.TEXT,function(){return"DISP: "+u.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},c.ccTO=function(u){this.logger.log(D.INFO,"TO("+u+") - Tab Offset"),this.writeScreen.moveCursor(u)},c.ccMIDROW=function(u){var p={flash:!1};if(p.underline=u%2==1,p.italics=u>=46,p.italics)p.foreground="white";else{var M=Math.floor(u/2)-16;p.foreground=["white","green","blue","cyan","red","yellow","magenta"][M]}this.logger.log(D.INFO,"MIDROW: "+JSON.stringify(p)),this.writeScreen.setPen(p)},c.outputDataUpdate=function(u){void 0===u&&(u=!1);var p=this.logger.time;null!==p&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,p,this.lastOutputScreen),u&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:p):this.cueStartTime=p,this.lastOutputScreen.copy(this.displayedMemory))},c.cueSplitAtTime=function(u){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,u,this.displayedMemory),this.cueStartTime=u))},T}();function f(T,c,d){d.a=T,d.b=c}function _(T,c,d){return d.a===T&&d.b===c}const E=function(){function T(d,u,p){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var M=new x;this.channels=[null,new b(d,u,M),new b(d+1,p,M)],this.cmdHistory={a:null,b:null},this.logger=M}var c=T.prototype;return c.getHandler=function(u){return this.channels[u].getHandler()},c.setHandler=function(u,p){this.channels[u].setHandler(p)},c.addData=function(u,p){var M,S,k,j=!1;this.logger.time=u;for(var N=0;N<p.length;N+=2)if(k=127&p[N+1],0!=(S=127&p[N])||0!==k){if(this.logger.log(D.DATA,"["+w([p[N],p[N+1]])+"] -> ("+w([S,k])+")"),(M=this.parseCmd(S,k))||(M=this.parseMidrow(S,k)),M||(M=this.parsePAC(S,k)),M||(M=this.parseBackgroundAttributes(S,k)),!M&&(j=this.parseChars(S,k))){var G=this.currentChannel;G&&G>0?this.channels[G].insertChars(j):this.logger.log(D.WARNING,"No channel found yet. TEXT-MODE?")}!M&&!j&&this.logger.log(D.WARNING,"Couldn't parse cleaned data "+w([S,k])+" orig: "+w([p[N],p[N+1]]))}},c.parseCmd=function(u,p){var M=this.cmdHistory;if(!((20===u||28===u||21===u||29===u)&&p>=32&&p<=47||(23===u||31===u)&&p>=33&&p<=35))return!1;if(_(u,p,M))return f(null,null,M),this.logger.log(D.DEBUG,"Repeated command ("+w([u,p])+") is dropped"),!0;var j=20===u||21===u||23===u?1:2,N=this.channels[j];return 20===u||21===u||28===u||29===u?32===p?N.ccRCL():33===p?N.ccBS():34===p?N.ccAOF():35===p?N.ccAON():36===p?N.ccDER():37===p?N.ccRU(2):38===p?N.ccRU(3):39===p?N.ccRU(4):40===p?N.ccFON():41===p?N.ccRDC():42===p?N.ccTR():43===p?N.ccRTD():44===p?N.ccEDM():45===p?N.ccCR():46===p?N.ccENM():47===p&&N.ccEOC():N.ccTO(p-32),f(u,p,M),this.currentChannel=j,!0},c.parseMidrow=function(u,p){var M=0;if((17===u||25===u)&&p>=32&&p<=47){if((M=17===u?1:2)!==this.currentChannel)return this.logger.log(D.ERROR,"Mismatch channel in midrow parsing"),!1;var S=this.channels[M];return!!S&&(S.ccMIDROW(p),this.logger.log(D.DEBUG,"MIDROW ("+w([u,p])+")"),!0)}return!1},c.parsePAC=function(u,p){var S=this.cmdHistory;if(!((u>=17&&u<=23||u>=25&&u<=31)&&p>=64&&p<=127||(16===u||24===u)&&p>=64&&p<=95))return!1;if(_(u,p,S))return f(null,null,S),!0;var N=u<=23?1:2,G=this.channels[N];return!!G&&(G.setPAC(this.interpretPAC(p>=64&&p<=95?1===N?U[u]:L[u]:1===N?F[u]:R[u],p)),f(u,p,S),this.currentChannel=N,!0)},c.interpretPAC=function(u,p){var M,S={color:null,italics:!1,indent:null,underline:!1,row:u};return S.underline=1==(1&(M=p>95?p-96:p-64)),M<=13?S.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(M/2)]:M<=15?(S.italics=!0,S.color="white"):S.indent=4*Math.floor((M-16)/2),S},c.parseChars=function(u,p){var M,j,S=null,k=null;if(u>=25?(M=2,k=u-8):(M=1,k=u),k>=17&&k<=19?(this.logger.log(D.INFO,"Special char '"+W(j=17===k?p+80:18===k?p+112:p+144)+"' in channel "+M),S=[j]):u>=32&&u<=127&&(S=0===p?[u]:[u,p]),S){var N=w(S);this.logger.log(D.DEBUG,"Char codes =  "+N.join(",")),f(u,p,this.cmdHistory)}return S},c.parseBackgroundAttributes=function(u,p){if(!((16===u||24===u)&&p>=32&&p<=47||(23===u||31===u)&&p>=45&&p<=47))return!1;var k,j={};return 16===u||24===u?(k=Math.floor((p-32)/2),j.background=P[k],p%2==1&&(j.background=j.background+"_semi")):45===p?j.background="transparent":(j.foreground="black",47===p&&(j.underline=!0)),this.channels[u<=23?1:2].setBkgData(j),f(u,p,this.cmdHistory),!0},c.reset=function(){for(var u=0;u<Object.keys(this.channels).length;u++){var p=this.channels[u];p&&p.reset()}this.cmdHistory={a:null,b:null}},c.cueSplitAtTime=function(u){for(var p=0;p<this.channels.length;p++){var M=this.channels[p];M&&M.cueSplitAtTime(u)}},T}()},"./src/utils/codecs.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{isCodecSupportedInMp4:()=>W,isCodecType:()=>B});var z={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function B(V,Y){var U=z[Y];return!!U&&!0===U[V.slice(0,4)]}function W(V,Y){return MediaSource.isTypeSupported((Y||"video")+'/mp4;codecs="'+V+'"')}},"./src/utils/cues.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>U});var z=O("./src/utils/vttparser.ts"),B=O("./src/utils/webvtt-parser.ts"),W=O("./src/utils/texttrack-utils.ts"),V=/\s/;const U={newCue:function(L,R,P,D){for(var w,y,g,m,h,x=[],b=self.VTTCue||self.TextTrackCue,C=0;C<D.rows.length;C++)if(g=!0,m=0,h="",!(w=D.rows[C]).isEmpty()){for(var f=0;f<w.chars.length;f++)V.test(w.chars[f].uchar)&&g?m++:(h+=w.chars[f].uchar,g=!1);w.cueStartTime=R,R===P&&(P+=1e-4),m>=16?m--:m++;var _=(0,z.fixLineBreaks)(h.trim()),A=(0,B.generateCueId)(R,P,_);(!L||!L.cues||!L.cues.getCueById(A))&&((y=new b(R,P,_)).id=A,y.line=C+1,y.align="left",y.position=10+Math.min(80,10*Math.floor(8*m/32)),x.push(y))}return L&&x.length&&(x.sort(function(E,T){return"auto"===E.line||"auto"===T.line?0:E.line>8&&T.line>8?T.line-E.line:E.line-T.line}),x.forEach(function(E){return(0,W.addCueToTrack)(L,E)})),x}}},"./src/utils/discontinuities.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{adjustSlidingStart:()=>L,alignMediaPlaylistByPDT:()=>x,alignPDT:()=>D,alignStream:()=>R,findDiscontinuousReferenceFrag:()=>U,findFirstFragWithCC:()=>V,shouldAlignOnDiscontinuities:()=>Y});var z=O("./src/polyfills/number.ts"),B=O("./src/utils/logger.ts"),W=O("./src/controller/level-helper.ts");function V(w,y){for(var g=null,m=0,h=w.length;m<h;m++){var b=w[m];if(b&&b.cc===y){g=b;break}}return g}function Y(w,y,g){return!(!y.details||!(g.endCC>g.startCC||w&&w.cc<g.startCC))}function U(w,y,g){void 0===g&&(g=0);var m=w.fragments,h=y.fragments;if(h.length&&m.length){var b=V(m,h[0].cc);if(b&&(!b||b.startPTS))return b;B.logger.log("No frag in previous level to align on")}else B.logger.log("No fragments to align")}function F(w,y){if(w){var g=w.start+y;w.start=w.startPTS=g,w.endPTS=g+w.duration}}function L(w,y){for(var g=y.fragments,m=0,h=g.length;m<h;m++)F(g[m],w);y.fragmentHint&&F(y.fragmentHint,w),y.alignedSliding=!0}function R(w,y,g){!y||(function P(w,y,g){if(Y(w,g,y)){var m=U(g.details,y);m&&(0,z.isFiniteNumber)(m.start)&&(B.logger.log("Adjusting PTS using last level due to CC increase within current level "+y.url),L(m.start,y))}}(w,g,y),!g.alignedSliding&&y.details&&D(g,y.details),!g.alignedSliding&&y.details&&!g.skippedSegments&&(0,W.adjustSliding)(y.details,g))}function D(w,y){if(y.fragments.length&&w.hasProgramDateTime&&y.hasProgramDateTime){var g=y.fragments[0].programDateTime,m=w.fragments[0].programDateTime,h=(m-g)/1e3+y.fragments[0].start;h&&(0,z.isFiniteNumber)(h)&&(B.logger.log("Adjusting PTS using programDateTime delta "+(m-g)+"ms, sliding:"+h.toFixed(3)+" "+w.url+" "),L(h,w))}}function x(w,y){if(w.hasProgramDateTime&&y.hasProgramDateTime){var g=w.fragments,m=y.fragments;if(g.length&&m.length){var b=m[Math.round(m.length/2)-1],C=V(g,b.cc)||g[Math.round(g.length/2)-1],f=b.programDateTime,_=C.programDateTime;null!==f&&null!==_&&L((_-f)/1e3-(C.start-b.start),w)}}}},"./src/utils/ewma-bandwidth-estimator.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>W});var z=O("./src/utils/ewma.ts");const W=function(){function V(U,F,L){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=L,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new z.default(U),this.fast_=new z.default(F)}var Y=V.prototype;return Y.update=function(F,L){var R=this.slow_,P=this.fast_;this.slow_.halfLife!==F&&(this.slow_=new z.default(F,R.getEstimate(),R.getTotalWeight())),this.fast_.halfLife!==L&&(this.fast_=new z.default(L,P.getEstimate(),P.getTotalWeight()))},Y.sample=function(F,L){var P=(F=Math.max(F,this.minDelayMs_))/1e3,D=8*L/P;this.fast_.sample(P,D),this.slow_.sample(P,D)},Y.canEstimate=function(){var F=this.fast_;return F&&F.getTotalWeight()>=this.minWeight_},Y.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Y.destroy=function(){},V}()},"./src/utils/ewma.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>B});const B=function(){function W(Y,U,F){void 0===U&&(U=0),void 0===F&&(F=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=Y,this.alpha_=Y?Math.exp(Math.log(.5)/Y):0,this.estimate_=U,this.totalWeight_=F}var V=W.prototype;return V.sample=function(U,F){var L=Math.pow(this.alpha_,U);this.estimate_=F*(1-L)+L*this.estimate_,this.totalWeight_+=U},V.getTotalWeight=function(){return this.totalWeight_},V.getEstimate=function(){if(this.alpha_){var U=1-Math.pow(this.alpha_,this.totalWeight_);if(U)return this.estimate_/U}return this.estimate_},W}()},"./src/utils/fetch-loader.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>h,fetchSupported:()=>x});var z=O("./src/polyfills/number.ts"),B=O("./src/loader/load-stats.ts"),W=O("./src/demux/chunk-cache.ts");function Y(b){var C="function"==typeof Map?new Map:void 0;return Y=function(_){if(null===_||!function L(b){return-1!==Function.toString.call(b).indexOf("[native code]")}(_))return _;if("function"!=typeof _)throw new TypeError("Super expression must either be null or a function");if(void 0!==C){if(C.has(_))return C.get(_);C.set(_,A)}function A(){return U(_,arguments,P(this).constructor)}return A.prototype=Object.create(_.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),R(A,_)},Y(b)}function U(b,C,f){return(U=F()?Reflect.construct.bind():function(A,E,T){var c=[null];c.push.apply(c,E);var u=new(Function.bind.apply(A,c));return T&&R(u,T.prototype),u}).apply(null,arguments)}function F(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}function R(b,C){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,A){return _.__proto__=A,_})(b,C)}function P(b){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)})(b)}function D(){return D=Object.assign?Object.assign.bind():function(b){for(var C=1;C<arguments.length;C++){var f=arguments[C];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(b[_]=f[_])}return b},D.apply(this,arguments)}function x(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(b){}return!1}var w=function(){function b(f){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=f.fetchSetup||g,this.controller=new self.AbortController,this.stats=new B.LoadStats}var C=b.prototype;return C.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},C.abortInternal=function(){var _=this.response;(!_||!_.ok)&&(this.stats.aborted=!0,this.controller.abort())},C.abort=function(){var _;this.abortInternal(),null!==(_=this.callbacks)&&void 0!==_&&_.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},C.load=function(_,A,E){var T=this,c=this.stats;if(c.loading.start)throw new Error("Loader can only be used once.");c.loading.start=self.performance.now();var d=function y(b,C){var f={method:"GET",mode:"cors",credentials:"same-origin",signal:C,headers:new self.Headers(D({},b.headers))};return b.rangeEnd&&f.headers.set("Range","bytes="+b.rangeStart+"-"+String(b.rangeEnd-1)),f}(_,this.controller.signal),u=E.onProgress,p="arraybuffer"===_.responseType,M=p?"byteLength":"length";this.context=_,this.config=A,this.callbacks=E,this.request=this.fetchSetup(_,d),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){T.abortInternal(),E.onTimeout(c,_,T.response)},A.timeout),self.fetch(this.request).then(function(S){if(T.response=T.loader=S,!S.ok)throw new m(S.statusText||"fetch, bad network response",S.status,S);return c.loading.first=Math.max(self.performance.now(),c.loading.start),c.total=parseInt(S.headers.get("Content-Length")||"0"),u&&(0,z.isFiniteNumber)(A.highWaterMark)?T.loadProgressively(S,c,_,A.highWaterMark,u):p?S.arrayBuffer():S.text()}).then(function(S){var k=T.response;self.clearTimeout(T.requestTimeout),c.loading.end=Math.max(self.performance.now(),c.loading.first);var j=S[M];j&&(c.loaded=c.total=j);var N={url:k.url,data:S};u&&!(0,z.isFiniteNumber)(A.highWaterMark)&&u(c,_,S,k),E.onSuccess(N,c,_,k)}).catch(function(S){self.clearTimeout(T.requestTimeout),c.aborted||E.onError({code:S&&S.code||0,text:S?S.message:null},_,S?S.details:null)})},C.getCacheAge=function(){var _=null;if(this.response){var A=this.response.headers.get("age");_=A?parseFloat(A):null}return _},C.loadProgressively=function(_,A,E,T,c){void 0===T&&(T=0);var d=new W.default,u=_.body.getReader();return function M(){return u.read().then(function(S){if(S.done)return d.dataLength&&c(A,E,d.flush(),_),Promise.resolve(new ArrayBuffer(0));var k=S.value,j=k.length;return A.loaded+=j,j<T||d.dataLength?(d.push(k),d.dataLength>=T&&c(A,E,d.flush(),_)):c(A,E,k,_),M()}).catch(function(){return Promise.reject()})}()},b}();function g(b,C){return new self.Request(b.url,C)}var m=function(b){function C(f,_,A){var E;return(E=b.call(this,f)||this).code=void 0,E.details=void 0,E.code=_,E.details=A,E}return function V(b,C){b.prototype=Object.create(C.prototype),b.prototype.constructor=b,R(b,C)}(C,b),C}(Y(Error));const h=w},"./src/utils/hex.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>B});const B={hexDump:function(V){for(var Y="",U=0;U<V.length;U++){var F=V[U].toString(16);F.length<2&&(F="0"+F),Y+=F}return Y}}},"./src/utils/imsc1-ttml-parser.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{IMSC1_CODEC:()=>L,parseIMSC1:()=>x});var z=O("./src/utils/mp4-tools.ts"),B=O("./src/utils/vttparser.ts"),W=O("./src/utils/vttcue.ts"),V=O("./src/demux/id3.ts"),Y=O("./src/utils/timescale-conversion.ts"),U=O("./src/utils/webvtt-parser.ts");function F(){return F=Object.assign?Object.assign.bind():function(E){for(var T=1;T<arguments.length;T++){var c=arguments[T];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(E[d]=c[d])}return E},F.apply(this,arguments)}var L="stpp.ttml.im1t",R=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,P=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,D={left:"start",center:"center",right:"end",start:"start",end:"end"};function x(E,T,c,d,u){var p=(0,z.findBox)(new Uint8Array(E),["mdat"]);if(0!==p.length){var M=p.map(function(k){return(0,V.utf8ArrayToStr)(k)}),S=(0,Y.toTimescaleFromScale)(T,1,c);try{M.forEach(function(k){return d(function w(E,T){var u=(new DOMParser).parseFromString(E,"text/xml").getElementsByTagName("tt")[0];if(!u)throw new Error("Invalid ttml");var p={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},M=Object.keys(p).reduce(function(G,K){return G[K]=u.getAttribute("ttp:"+K)||p[K],G},{}),S="preserve"!==u.getAttribute("xml:space"),k=g(y(u,"styling","style")),j=g(y(u,"layout","region")),N=y(u,"body","[begin]");return[].map.call(N,function(G){var K=m(G,S);if(!K||!G.hasAttribute("begin"))return null;var $=f(G.getAttribute("begin"),M),Z=f(G.getAttribute("dur"),M),te=f(G.getAttribute("end"),M);if(null===$)throw C(G);if(null===te){if(null===Z)throw C(G);te=$+Z}var q=new W.default($-T,te-T,K);q.id=(0,U.generateCueId)(q.startTime,q.endTime,q.text);var ue=function h(E,T,c){var d="http://www.w3.org/ns/ttml#styling",u=null,M=null!=E&&E.hasAttribute("style")?E.getAttribute("style"):null;return M&&c.hasOwnProperty(M)&&(u=c[M]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(S,k){var j=b(T,d,k)||b(E,d,k)||b(u,d,k);return j&&(S[k]=j),S},{})}(j[G.getAttribute("region")],k[G.getAttribute("style")],k),ce=ue.textAlign;if(ce){var fe=D[ce];fe&&(q.lineAlign=fe),q.align=ce}return F(q,ue),q}).filter(function(G){return null!==G})}(k,S))})}catch(k){u(k)}}else u(new Error("Could not parse IMSC1 mdat"))}function y(E,T,c){var d=E.getElementsByTagName(T)[0];return d?[].slice.call(d.querySelectorAll(c)):[]}function g(E){return E.reduce(function(T,c){var d=c.getAttribute("xml:id");return d&&(T[d]=c),T},{})}function m(E,T){return[].slice.call(E.childNodes).reduce(function(c,d,u){var p;return"br"===d.nodeName&&u?c+"\n":null!==(p=d.childNodes)&&void 0!==p&&p.length?m(d,T):T?c+d.textContent.trim().replace(/\s+/g," "):c+d.textContent},"")}function b(E,T,c){return E&&E.hasAttributeNS(T,c)?E.getAttributeNS(T,c):null}function C(E){return new Error("Could not parse ttml timestamp "+E)}function f(E,T){if(!E)return null;var c=(0,B.parseTimeStamp)(E);return null===c&&(R.test(E)?c=function _(E,T){var c=R.exec(E);return 3600*(0|c[1])+60*(0|c[2])+(0|c[3])+((0|c[4])+(0|c[5])/T.subFrameRate)/T.frameRate}(E,T):P.test(E)&&(c=function A(E,T){var c=P.exec(E),d=Number(c[1]);switch(c[2]){case"h":return 3600*d;case"m":return 60*d;case"ms":return 1e3*d;case"f":return d/T.frameRate;case"t":return d/T.tickRate}return d}(E,T))),c}},"./src/utils/keysystem-util.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{changeEndianness:()=>W,convertDataUriToArrayBytes:()=>V,strToUtf8array:()=>Y});var z=O("./src/utils/numeric-encoding-utils.ts");function W(U){var F=function(R,P,D){var x=R[P];R[P]=R[D],R[D]=x};F(U,0,3),F(U,1,2),F(U,4,5),F(U,6,7)}function V(U){var F=U.split(":"),L=null;if("data"===F[0]&&2===F.length){var R=F[1].split(";"),P=R[R.length-1].split(",");if(2===P.length){var x=P[1];"base64"===P[0]?(R.splice(-1,1),L=(0,z.base64Decode)(x)):L=function B(U){var F=Y(U).subarray(0,16),L=new Uint8Array(16);return L.set(F,16-F.length),L}(x)}}return L}function Y(U){return Uint8Array.from(unescape(encodeURIComponent(U)),function(F){return F.charCodeAt(0)})}},"./src/utils/logger.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{enableLogs:()=>U,logger:()=>F});var z=function(){},B={trace:z,debug:z,log:z,warn:z,info:z,error:z},W=B;function V(L){var R=self.console[L];return R?R.bind(self.console,"["+L+"] >"):z}function U(L,R){if(self.console&&!0===L||"object"==typeof L){!function Y(L){for(var R=arguments.length,P=new Array(R>1?R-1:0),D=1;D<R;D++)P[D-1]=arguments[D];P.forEach(function(x){W[x]=L[x]?L[x].bind(L):V(x)})}(L,"debug","log","info","warn","error");try{W.log('Debug logs enabled for "'+R+'"')}catch(P){W=B}}else W=B}var F=B},"./src/utils/mediakeys-helper.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{KeySystemFormats:()=>B,KeySystemIds:()=>V,KeySystems:()=>z,getKeySystemsForConfig:()=>F,getSupportedMediaKeySystemConfigurations:()=>R,keySystemDomainToKeySystemFormat:()=>U,keySystemFormatToKeySystemDomain:()=>W,keySystemIdToKeySystemDomain:()=>Y,requestMediaKeySystemAccess:()=>L});var z=(()=>{return(D=z||(z={})).CLEARKEY="org.w3.clearkey",D.FAIRPLAY="com.apple.fps",D.PLAYREADY="com.microsoft.playready",D.WIDEVINE="com.widevine.alpha",z;var D})(),B=(()=>{return(D=B||(B={})).CLEARKEY="org.w3.clearkey",D.FAIRPLAY="com.apple.streamingkeydelivery",D.PLAYREADY="com.microsoft.playready",D.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",B;var D})();function W(D){switch(D){case B.FAIRPLAY:return z.FAIRPLAY;case B.PLAYREADY:return z.PLAYREADY;case B.WIDEVINE:return z.WIDEVINE;case B.CLEARKEY:return z.CLEARKEY}}var V=(()=>((V||(V={})).WIDEVINE="edef8ba979d64acea3c827dcd51d21ed",V))();function Y(D){if(D===V.WIDEVINE)return z.WIDEVINE}function U(D){switch(D){case z.FAIRPLAY:return B.FAIRPLAY;case z.PLAYREADY:return B.PLAYREADY;case z.WIDEVINE:return B.WIDEVINE;case z.CLEARKEY:return B.CLEARKEY}}function F(D){var x=D.drmSystems,w=D.widevineLicenseUrl,y=x?[z.FAIRPLAY,z.WIDEVINE,z.PLAYREADY,z.CLEARKEY].filter(function(g){return!!x[g]}):[];return!y[z.WIDEVINE]&&w&&y.push(z.WIDEVINE),y}var L="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function R(D,x,w,y){var g;switch(D){case z.FAIRPLAY:g=["cenc","sinf"];break;case z.WIDEVINE:case z.PLAYREADY:g=["cenc"];break;case z.CLEARKEY:g=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+D)}return function P(D,x,w,y){return[{initDataTypes:D,persistentState:y.persistentState||"not-allowed",distinctiveIdentifier:y.distinctiveIdentifier||"not-allowed",sessionTypes:y.sessionTypes||[y.sessionType||"temporary"],audioCapabilities:x.map(function(m){return{contentType:'audio/mp4; codecs="'+m+'"',robustness:y.audioRobustness||"",encryptionScheme:y.audioEncryptionScheme||null}}),videoCapabilities:w.map(function(m){return{contentType:'video/mp4; codecs="'+m+'"',robustness:y.videoRobustness||"",encryptionScheme:y.videoEncryptionScheme||null}})}]}(g,x,w,y)}},"./src/utils/mediasource-helper.ts":(he,J,O)=>{"use strict";function z(){return self.MediaSource||self.WebKitMediaSource}O.r(J),O.d(J,{getMediaSource:()=>z})},"./src/utils/mp4-tools.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{RemuxerTrackIdConfig:()=>L,appendUint8Array:()=>T,bin2str:()=>R,computeRawDurationFromSamples:()=>_,discardEPB:()=>M,findBox:()=>y,getDuration:()=>f,getStartDTS:()=>C,mp4Box:()=>k,mp4pssh:()=>j,offsetStartDTS:()=>A,parseEmsg:()=>S,parseInitSegment:()=>m,parsePssh:()=>N,parseSEIMessageFromNALu:()=>p,parseSamples:()=>c,parseSegmentIndex:()=>g,parseSinf:()=>b,patchEncyptionData:()=>h,readSint32:()=>x,readUint16:()=>P,readUint32:()=>D,segmentValidRange:()=>E,writeUint32:()=>w});var z=O("./src/loader/fragment.ts"),B=O("./src/utils/typed-array.ts"),W=O("./src/demux/id3.ts"),V=O("./src/utils/logger.ts"),Y=O("./src/utils/hex.ts"),U=Math.pow(2,32)-1,F=[].push,L={video:1,audio:2,id3:3,text:4};function R(G){return String.fromCharCode.apply(null,G)}function P(G,K){var $=G[K]<<8|G[K+1];return $<0?65536+$:$}function D(G,K){var $=x(G,K);return $<0?4294967296+$:$}function x(G,K){return G[K]<<24|G[K+1]<<16|G[K+2]<<8|G[K+3]}function w(G,K,$){G[K]=$>>24,G[K+1]=$>>16&255,G[K+2]=$>>8&255,G[K+3]=255&$}function y(G,K){var $=[];if(!K.length)return $;for(var Z=G.byteLength,te=0;te<Z;){var q=D(G,te),se=q>1?te+q:Z;if(R(G.subarray(te+4,te+8))===K[0])if(1===K.length)$.push(G.subarray(te+8,se));else{var ue=y(G.subarray(te+8,se),K.slice(1));ue.length&&F.apply($,ue)}te=se}return $}function g(G){var K=[],$=G[0],Z=8,te=D(G,Z);Z+=4,Z+=0===$?8:16;var se=G.length+0,ue=P(G,Z+=2);Z+=2;for(var ce=0;ce<ue;ce++){var fe=Z,ve=D(G,fe);fe+=4;var Re=2147483647&ve;if(1==(2147483648&ve)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var ye=D(G,fe);fe+=4,K.push({referenceSize:Re,subsegmentDuration:ye,info:{duration:ye/te,start:se,end:se+Re-1}}),se+=Re,Z=fe+=4}return{earliestPresentationTime:0,timescale:te,version:$,referencesCount:ue,references:K}}function m(G){for(var K=[],$=y(G,["moov","trak"]),Z=0;Z<$.length;Z++){var te=$[Z],q=y(te,["tkhd"])[0];if(q){var ne=q[0],se=0===ne?12:20,ue=D(q,se),ce=y(te,["mdia","mdhd"])[0];if(ce){var fe=D(ce,se=0===(ne=ce[0])?12:20),ve=y(te,["mdia","hdlr"])[0];if(ve){var Re=R(ve.subarray(8,12)),Ee={soun:z.ElementaryStreamTypes.AUDIO,vide:z.ElementaryStreamTypes.VIDEO}[Re];if(Ee){var ye=y(te,["mdia","minf","stbl","stsd"])[0],Te=void 0;ye&&(Te=R(ye.subarray(12,16))),K[ue]={timescale:fe,type:Ee},K[Ee]={timescale:fe,id:ue,codec:Te}}}}}}return y(G,["moov","mvex","trex"]).forEach(function(lt){var Pt=D(lt,4),gt=K[Pt];gt&&(gt.default={duration:D(lt,12),flags:D(lt,20)})}),K}function h(G,K){if(!G||!K)return G;var $=K.keyId;return $&&K.isCommonEncryption&&y(G,["moov","trak"]).forEach(function(te){var ne=y(te,["mdia","minf","stbl","stsd"])[0].subarray(8),se=y(ne,["enca"]),ue=se.length>0;ue||(se=y(ne,["encv"])),se.forEach(function(ce){y(ce.subarray(ue?28:78),["sinf"]).forEach(function(Re){var Ee=b(Re);if(Ee){var ye=Ee.subarray(8,24);ye.some(function(Te){return 0!==Te})||(V.logger.log("[eme] Patching keyId in 'enc"+(ue?"a":"v")+">sinf>>tenc' box: "+Y.default.hexDump(ye)+" -> "+Y.default.hexDump($)),Ee.set($,8))}})})}),G}function b(G){var K=y(G,["schm"])[0];if(K){var $=R(K.subarray(4,8));if("cbcs"===$||"cenc"===$)return y(G,["schi","tenc"])[0]}return V.logger.error("[eme] missing 'schm' box"),null}function C(G,K){return y(K,["moof","traf"]).reduce(function($,Z){var te=y(Z,["tfdt"])[0],q=te[0],ne=y(Z,["tfhd"]).reduce(function(se,ue){var ce=D(ue,4),fe=G[ce];if(fe){var ve=D(te,4);1===q&&(ve*=Math.pow(2,32),ve+=D(te,8));var Ee=ve/(fe.timescale||9e4);if(isFinite(Ee)&&(null===se||Ee<se))return Ee}return se},null);return null!==ne&&isFinite(ne)&&(null===$||ne<$)?ne:$},null)||0}function f(G,K){for(var $=0,Z=0,te=0,q=y(G,["moof","traf"]),ne=0;ne<q.length;ne++){var se=q[ne],ue=y(se,["tfhd"])[0],fe=K[D(ue,4)];if(fe){var ve=fe.default,Re=D(ue,0)|(null==ve?void 0:ve.flags),Ee=null==ve?void 0:ve.duration;8&Re&&(Ee=D(ue,2&Re?12:8));for(var ye=fe.timescale||9e4,Te=y(se,["trun"]),Ze=0;Ze<Te.length;Ze++)!($=_(Te[Ze]))&&Ee&&($=Ee*D(Te[Ze],4)),fe.type===z.ElementaryStreamTypes.VIDEO?Z+=$/ye:fe.type===z.ElementaryStreamTypes.AUDIO&&(te+=$/ye)}}if(0===Z&&0===te){for(var Pt=0,gt=y(G,["sidx"]),Lt=0;Lt<gt.length;Lt++){var dt=g(gt[Lt]);null!=dt&&dt.references&&(Pt+=dt.references.reduce(function(xt,ft){return xt+ft.info.duration||0},0))}return Pt}return Z||te}function _(G){var K=D(G,0),$=8;1&K&&($+=4),4&K&&($+=4);for(var Z=0,te=D(G,4),q=0;q<te;q++)256&K&&(Z+=D(G,$),$+=4),512&K&&($+=4),1024&K&&($+=4),2048&K&&($+=4);return Z}function A(G,K,$){y(K,["moof","traf"]).forEach(function(Z){y(Z,["tfhd"]).forEach(function(te){var q=D(te,4),ne=G[q];if(ne){var se=ne.timescale||9e4;y(Z,["tfdt"]).forEach(function(ue){var ce=ue[0],fe=D(ue,4);if(0===ce)fe-=$*se,w(ue,4,fe=Math.max(fe,0));else{fe*=Math.pow(2,32),fe+=D(ue,8),fe-=$*se,fe=Math.max(fe,0);var ve=Math.floor(fe/(U+1)),Re=Math.floor(fe%(U+1));w(ue,4,ve),w(ue,8,Re)}})}})})}function E(G){var K={valid:null,remainder:null},$=y(G,["moof"]);if(!$)return K;if($.length<2)return K.remainder=G,K;var Z=$[$.length-1];return K.valid=(0,B.sliceUint8)(G,0,Z.byteOffset-8),K.remainder=(0,B.sliceUint8)(G,Z.byteOffset-8),K}function T(G,K){var $=new Uint8Array(G.length+K.length);return $.set(G),$.set(K,G.length),$}function c(G,K){var $=[],Z=K.samples,te=K.timescale,q=K.id,ne=!1;return y(Z,["moof"]).map(function(ue){var ce=ue.byteOffset-8;y(ue,["traf"]).map(function(ve){var Re=y(ve,["tfdt"]).map(function(Ee){var ye=Ee[0],Te=D(Ee,4);return 1===ye&&(Te*=Math.pow(2,32),Te+=D(Ee,8)),Te/te})[0];return void 0!==Re&&(G=Re),y(ve,["tfhd"]).map(function(Ee){var ye=D(Ee,4),Te=16777215&D(Ee,0),gt=0,Lt=0!=(16&Te),dt=0,xt=0!=(32&Te),ft=8;ye===q&&(0!=(1&Te)&&(ft+=8),0!=(2&Te)&&(ft+=4),0!=(8&Te)&&(gt=D(Ee,ft),ft+=4),Lt&&(dt=D(Ee,ft),ft+=4),xt&&(ft+=4),"video"===K.type&&(ne=function d(G){if(!G)return!1;var K=G.indexOf("."),$=K<0?G:G.substring(0,K);return"hvc1"===$||"hev1"===$||"dvh1"===$||"dvhe"===$}(K.codec)),y(ve,["trun"]).map(function(Xt){var un=Xt[0],Et=16777215&D(Xt,0),Dn=0!=(1&Et),In=0,Zn=0!=(4&Et),jn=0!=(256&Et),qn=0,vr=0!=(512&Et),Gn=0,pn=0!=(1024&Et),Cn=0!=(2048&Et),Kn=0,Wn=D(Xt,4),kt=8;Dn&&(In=D(Xt,kt),kt+=4),Zn&&(kt+=4);for(var Tn=In+ce,zn=0;zn<Wn;zn++){if(jn?(qn=D(Xt,kt),kt+=4):qn=gt,vr?(Gn=D(Xt,kt),kt+=4):Gn=dt,pn&&(kt+=4),Cn&&(Kn=0===un?D(Xt,kt):x(Xt,kt),kt+=4),K.type===z.ElementaryStreamTypes.VIDEO)for(var cs=0;cs<Gn;){var yi=D(Z,Tn);u(ne,Z[Tn+=4])&&p(Z.subarray(Tn,Tn+yi),ne?2:1,G+Kn/te,$),Tn+=yi,cs+=yi+4}G+=qn/te}}))})})}),$}function u(G,K){if(G){var $=K>>1&63;return 39===$||40===$}return 6==(31&K)}function p(G,K,$,Z){var te=M(G),q=0;q+=K;for(var ne=0,se=0,ue=!1,ce=0;q<te.length;){ne=0;do{if(q>=te.length)break;ne+=ce=te[q++]}while(255===ce);se=0;do{if(q>=te.length)break;se+=ce=te[q++]}while(255===ce);var fe=te.length-q;if(!ue&&4===ne&&q<te.length){if(ue=!0,181===te[q++]){var Re=P(te,q);if(q+=2,49===Re){var Ee=D(te,q);if(q+=4,1195456820===Ee){var ye=te[q++];if(3===ye){var Te=te[q++],lt=64&Te,Pt=lt?2+3*(31&Te):0,gt=new Uint8Array(Pt);if(lt){gt[0]=Te;for(var Lt=1;Lt<Pt;Lt++)gt[Lt]=te[q++]}Z.push({type:ye,payloadType:ne,pts:$,bytes:gt})}}}}}else if(5===ne&&se<fe){if(ue=!0,se>16){for(var dt=[],xt=0;xt<16;xt++){var ft=te[q++].toString(16);dt.push(1==ft.length?"0"+ft:ft),(3===xt||5===xt||7===xt||9===xt)&&dt.push("-")}for(var Xt=se-16,un=new Uint8Array(Xt),Et=0;Et<Xt;Et++)un[Et]=te[q++];Z.push({payloadType:ne,pts:$,uuid:dt.join(""),userData:(0,W.utf8ArrayToStr)(un),userDataBytes:un})}}else if(se<fe)q+=se;else if(se>fe)break}}function M(G){for(var K=G.byteLength,$=[],Z=1;Z<K-2;)0===G[Z]&&0===G[Z+1]&&3===G[Z+2]?($.push(Z+2),Z+=2):Z++;if(0===$.length)return G;var te=K-$.length,q=new Uint8Array(te),ne=0;for(Z=0;Z<te;ne++,Z++)ne===$[0]&&(ne++,$.shift()),q[Z]=G[ne];return q}function S(G){var K=G[0],$="",Z="",te=0,q=0,ne=0,se=0,ue=0,ce=0;if(0===K){for(;"\0"!==R(G.subarray(ce,ce+1));)$+=R(G.subarray(ce,ce+1)),ce+=1;for($+=R(G.subarray(ce,ce+1)),ce+=1;"\0"!==R(G.subarray(ce,ce+1));)Z+=R(G.subarray(ce,ce+1)),ce+=1;Z+=R(G.subarray(ce,ce+1)),ce+=1,te=D(G,12),q=D(G,16),se=D(G,20),ue=D(G,24),ce=28}else if(1===K){te=D(G,ce+=4);var fe=D(G,ce+=4),ve=D(G,ce+=4);for(ce+=4,ne=Math.pow(2,32)*fe+ve,Number.isSafeInteger(ne)||(ne=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),se=D(G,ce),ue=D(G,ce+=4),ce+=4;"\0"!==R(G.subarray(ce,ce+1));)$+=R(G.subarray(ce,ce+1)),ce+=1;for($+=R(G.subarray(ce,ce+1)),ce+=1;"\0"!==R(G.subarray(ce,ce+1));)Z+=R(G.subarray(ce,ce+1)),ce+=1;Z+=R(G.subarray(ce,ce+1)),ce+=1}return{schemeIdUri:$,value:Z,timeScale:te,presentationTime:ne,presentationTimeDelta:q,eventDuration:se,id:ue,payload:G.subarray(ce,G.byteLength)}}function k(G){for(var K=arguments.length,$=new Array(K>1?K-1:0),Z=1;Z<K;Z++)$[Z-1]=arguments[Z];for(var te=$.length,q=8,ne=te;ne--;)q+=$[ne].byteLength;var se=new Uint8Array(q);for(se[0]=q>>24&255,se[1]=q>>16&255,se[2]=q>>8&255,se[3]=255&q,se.set(G,4),ne=0,q=8;ne<te;ne++)se.set($[ne],q),q+=$[ne].byteLength;return se}function j(G,K,$){if(16!==G.byteLength)throw new RangeError("Invalid system id");var Z,te,se;if(K){Z=1,te=new Uint8Array(16*K.length);for(var q=0;q<K.length;q++){var ne=K[q];if(16!==ne.byteLength)throw new RangeError("Invalid key");te.set(ne,16*q)}}else Z=0,te=new Uint8Array;Z>0?(se=new Uint8Array(4),K.length>0&&new DataView(se.buffer).setUint32(0,K.length,!1)):se=new Uint8Array;var ue=new Uint8Array(4);return $&&$.byteLength>0&&new DataView(ue.buffer).setUint32(0,$.byteLength,!1),k([112,115,115,104],new Uint8Array([Z,0,0,0]),G,se,te,ue,$||new Uint8Array)}function N(G){if(!(G instanceof ArrayBuffer)||G.byteLength<32)return null;var K={version:0,systemId:"",kids:null,data:null},$=new DataView(G),Z=$.getUint32(0);if(G.byteLength!==Z&&Z>44)return null;if(1886614376!==$.getUint32(4)||(K.version=$.getUint32(8)>>>24,K.version>1))return null;K.systemId=Y.default.hexDump(new Uint8Array(G,12,16));var q=$.getUint32(28);if(0===K.version){if(Z-32<q)return null;K.data=new Uint8Array(G,32,q)}else if(1===K.version){K.kids=[];for(var ne=0;ne<q;ne++)K.kids.push(new Uint8Array(G,32+16*ne,16))}return K}},"./src/utils/numeric-encoding-utils.ts":(he,J,O)=>{"use strict";function z(F){return F.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function B(F){return btoa(F)}function W(F){return atob(F)}function V(F){return btoa(String.fromCharCode.apply(String,F))}function Y(F){return z(V(F))}function U(F){return Uint8Array.from(atob(F),function(L){return L.charCodeAt(0)})}O.r(J),O.d(J,{base64Decode:()=>U,base64DecodeToStr:()=>W,base64Encode:()=>V,base64ToBase64Url:()=>z,base64UrlEncode:()=>Y,strToBase64Encode:()=>B})},"./src/utils/output-filter.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>z});var z=function(){function B(V,Y){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=V,this.trackName=Y}var W=B.prototype;return W.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},W.newCue=function(Y,U,F){(null===this.startTime||this.startTime>Y)&&(this.startTime=Y),this.endTime=U,this.screen=F,this.timelineController.createCaptionsTrack(this.trackName)},W.reset=function(){this.cueRanges=[],this.startTime=null},B}()},"./src/utils/texttrack-utils.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{addCueToTrack:()=>W,clearCurrentCues:()=>V,getCuesInRange:()=>F,removeCuesInRange:()=>Y,sendAddTrackEvent:()=>B});var z=O("./src/utils/logger.ts");function B(L,R){var P;try{P=new Event("addtrack")}catch(D){(P=document.createEvent("Event")).initEvent("addtrack",!1,!1)}P.track=L,R.dispatchEvent(P)}function W(L,R){var P=L.mode;if("disabled"===P&&(L.mode="hidden"),L.cues&&!L.cues.getCueById(R.id))try{if(L.addCue(R),!L.cues.getCueById(R.id))throw new Error("addCue is failed for: "+R)}catch(x){z.logger.debug("[texttrack-utils]: "+x);var D=new self.TextTrackCue(R.startTime,R.endTime,R.text);D.id=R.id,L.addCue(D)}"disabled"===P&&(L.mode=P)}function V(L){var R=L.mode;if("disabled"===R&&(L.mode="hidden"),L.cues)for(var P=L.cues.length;P--;)L.removeCue(L.cues[P]);"disabled"===R&&(L.mode=R)}function Y(L,R,P,D){var x=L.mode;if("disabled"===x&&(L.mode="hidden"),L.cues&&L.cues.length>0)for(var w=F(L.cues,R,P),y=0;y<w.length;y++)(!D||D(w[y]))&&L.removeCue(w[y]);"disabled"===x&&(L.mode=x)}function F(L,R,P){var D=[],x=function U(L,R){if(R<L[0].startTime)return 0;var P=L.length-1;if(R>L[P].endTime)return-1;for(var D=0,x=P;D<=x;){var w=Math.floor((x+D)/2);if(R<L[w].startTime)x=w-1;else{if(!(R>L[w].startTime&&D<P))return w;D=w+1}}return L[D].startTime-R<R-L[x].startTime?D:x}(L,R);if(x>-1)for(var w=x,y=L.length;w<y;w++){var g=L[w];if(g.startTime>=R&&g.endTime<=P)D.push(g);else if(g.startTime>P)return D}return D}},"./src/utils/time-ranges.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>B});const B={toString:function(V){for(var Y="",U=V.length,F=0;F<U;F++)Y+="["+V.start(F).toFixed(3)+"-"+V.end(F).toFixed(3)+"]";return Y}}},"./src/utils/timescale-conversion.ts":(he,J,O)=>{"use strict";function B(U,F,L,R){void 0===L&&(L=1),void 0===R&&(R=!1);var P=U*F*L;return R?Math.round(P):P}function W(U,F,L,R){return void 0===L&&(L=1),void 0===R&&(R=!1),B(U,F,1/L,R)}function V(U,F){return void 0===F&&(F=!1),B(U,1e3,1/9e4,F)}function Y(U,F){return void 0===F&&(F=1),B(U,9e4,1/F)}O.r(J),O.d(J,{toMpegTsClockFromTimescale:()=>Y,toMsFromMpegTsClock:()=>V,toTimescaleFromBase:()=>B,toTimescaleFromScale:()=>W})},"./src/utils/typed-array.ts":(he,J,O)=>{"use strict";function z(B,W,V){return Uint8Array.prototype.slice?B.slice(W,V):new Uint8Array(Array.prototype.slice.call(B,W,V))}O.r(J),O.d(J,{sliceUint8:()=>z})},"./src/utils/vttcue.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>z});const z=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var B=["","lr","rl"],W=["start","middle","end","left","right"];function V(R,P){if("string"!=typeof P||!Array.isArray(R))return!1;var D=P.toLowerCase();return!!~R.indexOf(D)&&D}function U(R){return V(W,R)}function F(R){for(var P=arguments.length,D=new Array(P>1?P-1:0),x=1;x<P;x++)D[x-1]=arguments[x];for(var w=1;w<arguments.length;w++){var y=arguments[w];for(var g in y)R[g]=y[g]}return R}function L(R,P,D){var x=this,w={enumerable:!0};x.hasBeenReset=!1;var y="",g=!1,m=R,h=P,b=D,C=null,f="",_=!0,A="auto",E="start",T=50,c="middle",d=50,u="middle";Object.defineProperty(x,"id",F({},w,{get:function(){return y},set:function(M){y=""+M}})),Object.defineProperty(x,"pauseOnExit",F({},w,{get:function(){return g},set:function(M){g=!!M}})),Object.defineProperty(x,"startTime",F({},w,{get:function(){return m},set:function(M){if("number"!=typeof M)throw new TypeError("Start time must be set to a number.");m=M,this.hasBeenReset=!0}})),Object.defineProperty(x,"endTime",F({},w,{get:function(){return h},set:function(M){if("number"!=typeof M)throw new TypeError("End time must be set to a number.");h=M,this.hasBeenReset=!0}})),Object.defineProperty(x,"text",F({},w,{get:function(){return b},set:function(M){b=""+M,this.hasBeenReset=!0}})),Object.defineProperty(x,"region",F({},w,{get:function(){return C},set:function(M){C=M,this.hasBeenReset=!0}})),Object.defineProperty(x,"vertical",F({},w,{get:function(){return f},set:function(M){var S=function Y(R){return V(B,R)}(M);if(!1===S)throw new SyntaxError("An invalid or illegal string was specified.");f=S,this.hasBeenReset=!0}})),Object.defineProperty(x,"snapToLines",F({},w,{get:function(){return _},set:function(M){_=!!M,this.hasBeenReset=!0}})),Object.defineProperty(x,"line",F({},w,{get:function(){return A},set:function(M){if("number"!=typeof M&&"auto"!==M)throw new SyntaxError("An invalid number or illegal string was specified.");A=M,this.hasBeenReset=!0}})),Object.defineProperty(x,"lineAlign",F({},w,{get:function(){return E},set:function(M){var S=U(M);if(!S)throw new SyntaxError("An invalid or illegal string was specified.");E=S,this.hasBeenReset=!0}})),Object.defineProperty(x,"position",F({},w,{get:function(){return T},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");T=M,this.hasBeenReset=!0}})),Object.defineProperty(x,"positionAlign",F({},w,{get:function(){return c},set:function(M){var S=U(M);if(!S)throw new SyntaxError("An invalid or illegal string was specified.");c=S,this.hasBeenReset=!0}})),Object.defineProperty(x,"size",F({},w,{get:function(){return d},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");d=M,this.hasBeenReset=!0}})),Object.defineProperty(x,"align",F({},w,{get:function(){return u},set:function(M){var S=U(M);if(!S)throw new SyntaxError("An invalid or illegal string was specified.");u=S,this.hasBeenReset=!0}})),x.displayState=void 0}return L.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},L}()},"./src/utils/vttparser.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{VTTParser:()=>P,fixLineBreaks:()=>R,parseTimeStamp:()=>W});var z=O("./src/utils/vttcue.ts"),B=function(){function D(){}return D.prototype.decode=function(y,g){if(!y)return"";if("string"!=typeof y)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(y))},D}();function W(D){function x(y,g,m,h){return 3600*(0|y)+60*(0|g)+(0|m)+parseFloat(h||0)}var w=D.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return w?parseFloat(w[2])>59?x(w[2],w[3],0,w[4]):x(w[1],w[2],w[3],w[4]):null}var V=function(){function D(){this.values=Object.create(null)}var x=D.prototype;return x.set=function(y,g){!this.get(y)&&""!==g&&(this.values[y]=g)},x.get=function(y,g,m){return m?this.has(y)?this.values[y]:g[m]:this.has(y)?this.values[y]:g},x.has=function(y){return y in this.values},x.alt=function(y,g,m){for(var h=0;h<m.length;++h)if(g===m[h]){this.set(y,g);break}},x.integer=function(y,g){/^-?\d+$/.test(g)&&this.set(y,parseInt(g,10))},x.percent=function(y,g){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(g)){var m=parseFloat(g);if(m>=0&&m<=100)return this.set(y,m),!0}return!1},D}();function Y(D,x,w,y){var g=y?D.split(y):[D];for(var m in g)if("string"==typeof g[m]){var h=g[m].split(w);2===h.length&&x(h[0],h[1])}}var U=new z.default(0,0,""),F="middle"===U.align?"middle":"center";function L(D,x,w){var y=D;function g(){var b=W(D);if(null===b)throw new Error("Malformed timestamp: "+y);return D=D.replace(/^[^\sa-zA-Z-]+/,""),b}function h(){D=D.replace(/^\s+/,"")}if(h(),x.startTime=g(),h(),"--\x3e"!==D.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+y);D=D.slice(3),h(),x.endTime=g(),h(),function m(b,C){var f=new V;Y(b,function(E,T){var c;switch(E){case"region":for(var d=w.length-1;d>=0;d--)if(w[d].id===T){f.set(E,w[d].region);break}break;case"vertical":f.alt(E,T,["rl","lr"]);break;case"line":c=T.split(","),f.integer(E,c[0]),f.percent(E,c[0])&&f.set("snapToLines",!1),f.alt(E,c[0],["auto"]),2===c.length&&f.alt("lineAlign",c[1],["start",F,"end"]);break;case"position":c=T.split(","),f.percent(E,c[0]),2===c.length&&f.alt("positionAlign",c[1],["start",F,"end","line-left","line-right","auto"]);break;case"size":f.percent(E,T);break;case"align":f.alt(E,T,["start",F,"end","left","right"])}},/:/,/\s/),C.region=f.get("region",null),C.vertical=f.get("vertical","");var _=f.get("line","auto");"auto"===_&&-1===U.line&&(_=-1),C.line=_,C.lineAlign=f.get("lineAlign","start"),C.snapToLines=f.get("snapToLines",!0),C.size=f.get("size",100),C.align=f.get("align",F);var A=f.get("position","auto");"auto"===A&&50===U.position&&(A="start"===C.align||"left"===C.align?0:"end"===C.align||"right"===C.align?100:50),C.position=A}(D,x)}function R(D){return D.replace(/<br(?: \/)?>/gi,"\n")}var P=function(){function D(){this.state="INITIAL",this.buffer="",this.decoder=new B,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var x=D.prototype;return x.parse=function(y){var g=this;function m(){var A=g.buffer,E=0;for(A=R(A);E<A.length&&"\r"!==A[E]&&"\n"!==A[E];)++E;var T=A.slice(0,E);return"\r"===A[E]&&++E,"\n"===A[E]&&++E,g.buffer=A.slice(E),T}y&&(g.buffer+=g.decoder.decode(y,{stream:!0}));try{var b="";if("INITIAL"===g.state){if(!/\r\n|\n/.test(g.buffer))return this;var C=(b=m()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!C||!C[0])throw new Error("Malformed WebVTT signature.");g.state="HEADER"}for(var f=!1;g.buffer;){if(!/\r\n|\n/.test(g.buffer))return this;switch(f?f=!1:b=m(),g.state){case"HEADER":/:/.test(b)?Y(b,function(E,T){},/:/):b||(g.state="ID");continue;case"NOTE":b||(g.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(b)){g.state="NOTE";break}if(!b)continue;if(g.cue=new z.default(0,0,""),g.state="CUE",-1===b.indexOf("--\x3e")){g.cue.id=b;continue}case"CUE":if(!g.cue){g.state="BADCUE";continue}try{L(b,g.cue,g.regionList)}catch(A){g.cue=null,g.state="BADCUE";continue}g.state="CUETEXT";continue;case"CUETEXT":var _=-1!==b.indexOf("--\x3e");if(!b||_&&(f=!0)){g.oncue&&g.cue&&g.oncue(g.cue),g.cue=null,g.state="ID";continue}if(null===g.cue)continue;g.cue.text&&(g.cue.text+="\n"),g.cue.text+=b;continue;case"BADCUE":b||(g.state="ID")}}}catch(A){"CUETEXT"===g.state&&g.cue&&g.oncue&&g.oncue(g.cue),g.cue=null,g.state="INITIAL"===g.state?"BADWEBVTT":"BADCUE"}return this},x.flush=function(){var y=this;try{if((y.cue||"HEADER"===y.state)&&(y.buffer+="\n\n",y.parse()),"INITIAL"===y.state||"BADWEBVTT"===y.state)throw new Error("Malformed WebVTT signature.")}catch(g){y.onparsingerror&&y.onparsingerror(g)}return y.onflush&&y.onflush(),this},D}()},"./src/utils/webvtt-parser.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{generateCueId:()=>P,parseWebVTT:()=>x});var z=O("./src/polyfills/number.ts"),B=O("./src/utils/vttparser.ts"),W=O("./src/demux/id3.ts"),V=O("./src/utils/timescale-conversion.ts"),Y=O("./src/remux/mp4-remuxer.ts"),U=/\r\n|\n\r|\n|\r/g,F=function(y,g,m){return void 0===m&&(m=0),y.slice(m,m+g.length)===g},R=function(y){for(var g=5381,m=y.length;m;)g=33*g^y.charCodeAt(--m);return(g>>>0).toString()};function P(w,y,g){return R(w.toString())+R(y.toString())+R(g)}function x(w,y,g,m,h,b,C,f){var p,_=new B.VTTParser,A=(0,W.utf8ArrayToStr)(new Uint8Array(w)).trim().replace(U,"\n").split("\n"),E=[],T=(0,V.toMpegTsClockFromTimescale)(y,g),c="00:00.000",d=0,u=0,M=!0;_.oncue=function(S){var k=m[h],j=m.ccOffset,N=(d-T)/9e4;null!=k&&k.new&&(void 0!==u?j=m.ccOffset=k.start:function(y,g,m){var h=y[g],b=y[h.prevCC];if(!b||!b.new&&h.new)return y.ccOffset=y.presentationOffset=h.start,void(h.new=!1);for(;null!==(C=b)&&void 0!==C&&C.new;){var C;y.ccOffset+=h.start-b.start,h.new=!1,b=y[(h=b).prevCC]}y.presentationOffset=m}(m,h,N)),N&&(j=N-m.presentationOffset);var G=S.endTime-S.startTime,K=(0,Y.normalizePts)(9e4*(S.startTime+j-u),9e4*b)/9e4;S.startTime=Math.max(K,0),S.endTime=Math.max(K+G,0);var $=S.text.trim();S.text=decodeURIComponent(encodeURIComponent($)),S.id||(S.id=P(S.startTime,S.endTime,$)),S.endTime>0&&E.push(S)},_.onparsingerror=function(S){p=S},_.onflush=function(){p?f(p):C(E)},A.forEach(function(S){if(M){if(F(S,"X-TIMESTAMP-MAP=")){M=!1,S.slice(16).split(",").forEach(function(k){F(k,"LOCAL:")?c=k.slice(6):F(k,"MPEGTS:")&&(d=parseInt(k.slice(7)))});try{u=function(y){var g=parseInt(y.slice(-3)),m=parseInt(y.slice(-6,-4)),h=parseInt(y.slice(-9,-7)),b=y.length>9?parseInt(y.substring(0,y.indexOf(":"))):0;if(!((0,z.isFiniteNumber)(g)&&(0,z.isFiniteNumber)(m)&&(0,z.isFiniteNumber)(h)&&(0,z.isFiniteNumber)(b)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+y);return g+=1e3*m,(g+=6e4*h)+36e5*b}(c)/1e3}catch(k){p=k}return}""===S&&(M=!1)}_.parse(S+"\n")}),_.flush()}},"./src/utils/xhr-loader.ts":(he,J,O)=>{"use strict";O.r(J),O.d(J,{default:()=>Y});var z=O("./src/utils/logger.ts"),B=O("./src/loader/load-stats.ts"),W=/^age:\s*[\d.]+\s*$/m;const Y=function(){function U(L){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=L?L.xhrSetup:null,this.stats=new B.LoadStats,this.retryDelay=0}var F=U.prototype;return F.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},F.abortInternal=function(){var R=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),R&&(R.onreadystatechange=null,R.onprogress=null,4!==R.readyState&&(this.stats.aborted=!0,R.abort()))},F.abort=function(){var R;this.abortInternal(),null!==(R=this.callbacks)&&void 0!==R&&R.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},F.load=function(R,P,D){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=R,this.config=P,this.callbacks=D,this.retryDelay=P.retryDelay,this.loadInternal()},F.loadInternal=function(){var R=this.config,P=this.context;if(R){var D=this.loader=new self.XMLHttpRequest,x=this.stats;x.loading.first=0,x.loaded=0;var w=this.xhrSetup;try{if(w)try{w(D,P.url)}catch(m){D.open("GET",P.url,!0),w(D,P.url)}D.readyState||D.open("GET",P.url,!0);var y=this.context.headers;if(y)for(var g in y)D.setRequestHeader(g,y[g])}catch(m){return void this.callbacks.onError({code:D.status,text:m.message},P,D)}P.rangeEnd&&D.setRequestHeader("Range","bytes="+P.rangeStart+"-"+(P.rangeEnd-1)),D.onreadystatechange=this.readystatechange.bind(this),D.onprogress=this.loadprogress.bind(this),D.responseType=P.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),R.timeout),D.send()}},F.readystatechange=function(){var R=this.context,P=this.loader,D=this.stats;if(R&&P){var x=P.readyState,w=this.config;if(!D.aborted&&x>=2)if(self.clearTimeout(this.requestTimeout),0===D.loading.first&&(D.loading.first=Math.max(self.performance.now(),D.loading.start)),4===x){P.onreadystatechange=null,P.onprogress=null;var y=P.status,g="arraybuffer"===P.responseType;if(y>=200&&y<300&&(g&&P.response||null!==P.responseText)){var m,h;if(D.loading.end=Math.max(self.performance.now(),D.loading.first),h=g?(m=P.response).byteLength:(m=P.responseText).length,D.loaded=D.total=h,!this.callbacks)return;var b=this.callbacks.onProgress;if(b&&b(D,R,m,P),!this.callbacks)return;this.callbacks.onSuccess({url:P.responseURL,data:m},D,R,P)}else D.retry>=w.maxRetry||y>=400&&y<499?(z.logger.error(y+" while loading "+R.url),this.callbacks.onError({code:y,text:P.statusText},R,P)):(z.logger.warn(y+" while loading "+R.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,w.maxRetryDelay),D.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),w.timeout)}},F.loadtimeout=function(){z.logger.warn("timeout while loading "+this.context.url);var R=this.callbacks;R&&(this.abortInternal(),R.onTimeout(this.stats,this.context,this.loader))},F.loadprogress=function(R){var P=this.stats;P.loaded=R.loaded,R.lengthComputable&&(P.total=R.total)},F.getCacheAge=function(){var R=null;if(this.loader&&W.test(this.loader.getAllResponseHeaders())){var P=this.loader.getResponseHeader("age");R=P?parseFloat(P):null}return R},U}()},"./node_modules/eventemitter3/index.js":he=>{"use strict";var J=Object.prototype.hasOwnProperty,O="~";function z(){}function B(U,F,L){this.fn=U,this.context=F,this.once=L||!1}function W(U,F,L,R,P){if("function"!=typeof L)throw new TypeError("The listener must be a function");var D=new B(L,R||U,P),x=O?O+F:F;return U._events[x]?U._events[x].fn?U._events[x]=[U._events[x],D]:U._events[x].push(D):(U._events[x]=D,U._eventsCount++),U}function V(U,F){0==--U._eventsCount?U._events=new z:delete U._events[F]}function Y(){this._events=new z,this._eventsCount=0}Object.create&&(z.prototype=Object.create(null),(new z).__proto__||(O=!1)),Y.prototype.eventNames=function(){var L,R,F=[];if(0===this._eventsCount)return F;for(R in L=this._events)J.call(L,R)&&F.push(O?R.slice(1):R);return Object.getOwnPropertySymbols?F.concat(Object.getOwnPropertySymbols(L)):F},Y.prototype.listeners=function(F){var R=this._events[O?O+F:F];if(!R)return[];if(R.fn)return[R.fn];for(var P=0,D=R.length,x=new Array(D);P<D;P++)x[P]=R[P].fn;return x},Y.prototype.listenerCount=function(F){var R=this._events[O?O+F:F];return R?R.fn?1:R.length:0},Y.prototype.emit=function(F,L,R,P,D,x){var w=O?O+F:F;if(!this._events[w])return!1;var m,h,y=this._events[w],g=arguments.length;if(y.fn){switch(y.once&&this.removeListener(F,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,L),!0;case 3:return y.fn.call(y.context,L,R),!0;case 4:return y.fn.call(y.context,L,R,P),!0;case 5:return y.fn.call(y.context,L,R,P,D),!0;case 6:return y.fn.call(y.context,L,R,P,D,x),!0}for(h=1,m=new Array(g-1);h<g;h++)m[h-1]=arguments[h];y.fn.apply(y.context,m)}else{var C,b=y.length;for(h=0;h<b;h++)switch(y[h].once&&this.removeListener(F,y[h].fn,void 0,!0),g){case 1:y[h].fn.call(y[h].context);break;case 2:y[h].fn.call(y[h].context,L);break;case 3:y[h].fn.call(y[h].context,L,R);break;case 4:y[h].fn.call(y[h].context,L,R,P);break;default:if(!m)for(C=1,m=new Array(g-1);C<g;C++)m[C-1]=arguments[C];y[h].fn.apply(y[h].context,m)}}return!0},Y.prototype.on=function(F,L,R){return W(this,F,L,R,!1)},Y.prototype.once=function(F,L,R){return W(this,F,L,R,!0)},Y.prototype.removeListener=function(F,L,R,P){var D=O?O+F:F;if(!this._events[D])return this;if(!L)return V(this,D),this;var x=this._events[D];if(x.fn)x.fn===L&&(!P||x.once)&&(!R||x.context===R)&&V(this,D);else{for(var w=0,y=[],g=x.length;w<g;w++)(x[w].fn!==L||P&&!x[w].once||R&&x[w].context!==R)&&y.push(x[w]);y.length?this._events[D]=1===y.length?y[0]:y:V(this,D)}return this},Y.prototype.removeAllListeners=function(F){var L;return F?this._events[L=O?O+F:F]&&V(this,L):(this._events=new z,this._eventsCount=0),this},Y.prototype.off=Y.prototype.removeListener,Y.prototype.addListener=Y.prototype.on,Y.prefixed=O,Y.EventEmitter=Y,he.exports=Y},"./node_modules/url-toolkit/src/url-toolkit.js":function(he){var O,z,B,W,V;O=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,z=/^(?=([^\/?#]*))\1([^]*)$/,B=/(?:\/|^)\.(?=\/)/g,W=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,he.exports=V={buildAbsoluteURL:function(Y,U,F){if(F=F||{},Y=Y.trim(),!(U=U.trim())){if(!F.alwaysNormalize)return Y;var L=V.parseURL(Y);if(!L)throw new Error("Error trying to parse base URL.");return L.path=V.normalizePath(L.path),V.buildURLFromParts(L)}var R=V.parseURL(U);if(!R)throw new Error("Error trying to parse relative URL.");if(R.scheme)return F.alwaysNormalize?(R.path=V.normalizePath(R.path),V.buildURLFromParts(R)):U;var P=V.parseURL(Y);if(!P)throw new Error("Error trying to parse base URL.");if(!P.netLoc&&P.path&&"/"!==P.path[0]){var D=z.exec(P.path);P.netLoc=D[1],P.path=D[2]}P.netLoc&&!P.path&&(P.path="/");var x={scheme:P.scheme,netLoc:R.netLoc,path:null,params:R.params,query:R.query,fragment:R.fragment};if(!R.netLoc&&(x.netLoc=P.netLoc,"/"!==R.path[0]))if(R.path){var w=P.path,y=w.substring(0,w.lastIndexOf("/")+1)+R.path;x.path=V.normalizePath(y)}else x.path=P.path,R.params||(x.params=P.params,R.query||(x.query=P.query));return null===x.path&&(x.path=F.alwaysNormalize?V.normalizePath(R.path):R.path),V.buildURLFromParts(x)},parseURL:function(Y){var U=O.exec(Y);return U?{scheme:U[1]||"",netLoc:U[2]||"",path:U[3]||"",params:U[4]||"",query:U[5]||"",fragment:U[6]||""}:null},normalizePath:function(Y){for(Y=Y.split("").reverse().join("").replace(B,"");Y.length!==(Y=Y.replace(W,"")).length;);return Y.split("").reverse().join("")},buildURLFromParts:function(Y){return Y.scheme+Y.netLoc+Y.path+Y.params+Y.query+Y.fragment}}}},ls={};function Be(he){var J=ls[he];if(void 0!==J)return J.exports;var O=ls[he]={exports:{}};return Js[he].call(O.exports,O,O.exports,Be),O.exports}Be.m=Js,Be.n=he=>{var J=he&&he.__esModule?()=>he.default:()=>he;return Be.d(J,{a:J}),J},Be.d=(he,J)=>{for(var O in J)Be.o(J,O)&&!Be.o(he,O)&&Object.defineProperty(he,O,{enumerable:!0,get:J[O]})},Be.o=(he,J)=>Object.prototype.hasOwnProperty.call(he,J),Be.r=he=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(he,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(he,"__esModule",{value:!0})};var us=Be("./src/hls.ts");return us.default})(),la.exports=Be())}},la=>{la(la.s=954)}]);