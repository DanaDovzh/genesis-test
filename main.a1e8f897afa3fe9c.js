(self.webpackChunkgenesis_test=self.webpackChunkgenesis_test||[]).push([[179],{435:(fa,io,ys)=>{"use strict";function He(n){return"function"==typeof n}function Es(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const pe=Es(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function q(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class O{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(He(r))try{r()}catch(s){t=s instanceof pe?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{z(s)}catch(o){t=t??[],o instanceof pe?t=[...t,...o.errors]:t.push(o)}}if(t)throw new pe(t)}}add(t){var e;if(t&&t!==this)if(this.closed)z(t);else{if(t instanceof O){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&q(e,t)}remove(t){const{_finalizers:e}=this;e&&q(e,t),t instanceof O&&t._removeParent(this)}}O.EMPTY=(()=>{const n=new O;return n.closed=!0,n})();const W=O.EMPTY;function B(n){return n instanceof O||n&&"closed"in n&&He(n.remove)&&He(n.add)&&He(n.unsubscribe)}function z(n){He(n)?n():n.unsubscribe()}const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Y={setTimeout(n,t,...e){const{delegate:r}=Y;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Y;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function U(n){Y.setTimeout(()=>{const{onUnhandledError:t}=V;if(!t)throw n;t(n)})}function N(){}const L=D("C",void 0,void 0);function D(n,t,e){return{kind:n,value:t,error:e}}let I=null;function M(n){if(V.useDeprecatedSynchronousErrorHandling){const t=!I;if(t&&(I={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=I;if(I=null,e)throw r}}else n()}class m extends O{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,B(t)&&t.add(this)):this.destination=E}static create(t,e,r){return new C(t,e,r)}next(t){this.isStopped?w(function P(n){return D("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?w(function R(n){return D("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?w(L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const v=Function.prototype.bind;function f(n,t){return v.call(n,t)}class b{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){h(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){h(r)}else h(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){h(e)}}}class C extends m{constructor(t,e,r){let i;if(super(),He(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let s;this&&V.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&f(t.next,s),error:t.error&&f(t.error,s),complete:t.complete&&f(t.complete,s)}):i=t}this.destination=new b(i)}}function h(n){V.useDeprecatedSynchronousErrorHandling?function _(n){V.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=n)}(n):U(n)}function w(n,t){const{onStoppedNotification:e}=V;e&&Y.setTimeout(()=>e(n,t))}const E={closed:!0,next:N,error:function y(n){throw n},complete:N},S="function"==typeof Symbol&&Symbol.observable||"@@observable";function u(n){return n}function c(n){return 0===n.length?u:1===n.length?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}let p=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){const s=function k(n){return n&&n instanceof m||function T(n){return n&&He(n.next)&&He(n.error)&&He(n.complete)}(n)&&B(n)}(e)?e:new C(e,r,i);return M(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=x(r))((i,s)=>{const o=new C({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[S](){return this}pipe(...e){return c(e)(this)}toPromise(e){return new(e=x(e))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=t=>new n(t),n})();function x(n){var t;return null!==(t=n??V.Promise)&&void 0!==t?t:Promise}const H=Es(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let F=(()=>{class n extends p{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new G(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new H}next(e){M(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){M(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){M(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:s}=this;return r||i?W:(this.currentObservers=null,s.push(e),new O(()=>{this.currentObservers=null,q(s,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:s}=this;r?e.error(i):s&&e.complete()}asObservable(){const e=new p;return e.source=this,e}}return n.create=(t,e)=>new G(t,e),n})();class G extends F{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:W}}function K(n){return He(n?.lift)}function $(n){return t=>{if(K(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(n,t,e,r,i){return new te(n,t,e,r,i)}class te extends m{constructor(t,e,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Q(n,t){return $((e,r)=>{let i=0;e.subscribe(Z(r,s=>{r.next(n.call(t,s,i++))}))})}function At(n){return this instanceof At?(this.v=n,this):new At(n)}function ar(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function gt(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(g){s({value:g,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Zn=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function jt(n){return He(n?.then)}function wn(n){return He(n[S])}function qn(n){return Symbol.asyncIterator&&He(n?.[Symbol.asyncIterator])}function bs(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Mi=function Ti(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pa(n){return He(n?.[Mi])}function Ds(n){return function Tn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(n,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(X){r[X]&&(i[X]=function(J){return new Promise(function(ee,ie){s.push([X,J,ee,ie])>1||a(X,J)})})}function a(X,J){try{!function l(X){X.value instanceof At?Promise.resolve(X.value.v).then(g,A):j(s[0][2],X)}(r[X](J))}catch(ee){j(s[0][3],ee)}}function g(X){a("next",X)}function A(X){a("throw",X)}function j(X,J){X(J),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:i}=yield At(e.read());if(i)return yield At(void 0);yield yield At(r)}}finally{e.releaseLock()}})}function Jl(n){return He(n?.getReader)}function vn(n){if(n instanceof p)return n;if(null!=n){if(wn(n))return function ch(n){return new p(t=>{const e=n[S]();if(He(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Zn(n))return function ec(n){return new p(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(jt(n))return function ga(n){return new p(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,U)})}(n);if(qn(n))return ma(n);if(pa(n))return function cr(n){return new p(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(Jl(n))return function tc(n){return ma(Ds(n))}(n)}throw bs(n)}function ma(n){return new p(t=>{(function uh(n,t){var e,r,i,s;return function ct(n,t,e,r){return new(e||(e=Promise))(function(s,o){function a(A){try{g(r.next(A))}catch(j){o(j)}}function l(A){try{g(r.throw(A))}catch(j){o(j)}}function g(A){A.done?s(A.value):function i(s){return s instanceof e?s:new e(function(o){o(s)})}(A.value).then(a,l)}g((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=ar(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Kr(n,t,e,r=0,i=!1){const s=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Qt(n,t,e=1/0){return He(t)?Qt((r,i)=>Q((s,o)=>t(r,s,i,o))(vn(n(r,i))),e):("number"==typeof t&&(e=t),$((r,i)=>function dh(n,t,e,r,i,s,o,a){const l=[];let g=0,A=0,j=!1;const X=()=>{j&&!l.length&&!g&&t.complete()},J=ie=>g<r?ee(ie):l.push(ie),ee=ie=>{s&&t.next(ie),g++;let ae=!1;vn(e(ie,A++)).subscribe(Z(t,le=>{i?.(le),s?J(le):t.next(le)},()=>{ae=!0},void 0,()=>{if(ae)try{for(g--;l.length&&g<r;){const le=l.shift();o?Kr(t,o,()=>ee(le)):ee(le)}X()}catch(le){t.error(le)}}))};return n.subscribe(Z(t,J,()=>{j=!0,X()})),()=>{a?.()}}(r,i,n,e)))}function es(n=1/0){return Qt(u,n)}const Jn=new p(n=>n.complete());function nc(n){return n&&He(n.schedule)}function ph(n){return n[n.length-1]}function Ev(n){return He(ph(n))?n.pop():void 0}function va(n){return nc(ph(n))?n.pop():void 0}function bv(n,t=0){return $((e,r)=>{e.subscribe(Z(r,i=>Kr(r,n,()=>r.next(i),t),()=>Kr(r,n,()=>r.complete(),t),i=>Kr(r,n,()=>r.error(i),t)))})}function Dv(n,t=0){return $((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Cv(n,t){if(!n)throw new Error("Iterable cannot be null");return new p(e=>{Kr(e,t,()=>{const r=n[Symbol.asyncIterator]();Kr(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function nn(n,t){return t?function xx(n,t){if(null!=n){if(wn(n))return function Cx(n,t){return vn(n).pipe(Dv(t),bv(t))}(n,t);if(Zn(n))return function Tx(n,t){return new p(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(jt(n))return function Sx(n,t){return vn(n).pipe(Dv(t),bv(t))}(n,t);if(qn(n))return Cv(n,t);if(pa(n))return function Mx(n,t){return new p(e=>{let r;return Kr(e,t,()=>{r=n[Mi](),Kr(e,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void e.error(o)}s?e.complete():e.next(i)},0,!0)}),()=>He(r?.return)&&r.return()})}(n,t);if(Jl(n))return function wx(n,t){return Cv(Ds(n),t)}(n,t)}throw bs(n)}(n,t):vn(n)}function ii(...n){const t=va(n),e=function Dx(n,t){return"number"==typeof ph(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?vn(r[0]):es(e)(nn(r,t)):Jn}function Sv(n={}){const{connector:t=(()=>new F),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,g=0,A=!1,j=!1;const X=()=>{a?.unsubscribe(),a=void 0},J=()=>{X(),o=l=void 0,A=j=!1},ee=()=>{const ie=o;J(),ie?.unsubscribe()};return $((ie,ae)=>{g++,!j&&!A&&X();const le=l=l??t();ae.add(()=>{g--,0===g&&!j&&!A&&(a=gh(ee,i))}),le.subscribe(ae),!o&&g>0&&(o=new C({next:ve=>le.next(ve),error:ve=>{j=!0,X(),a=gh(J,e,ve),le.error(ve)},complete:()=>{A=!0,X(),a=gh(J,r),le.complete()}}),vn(ie).subscribe(o))})(s)}}function gh(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new C({next:()=>{r.unsubscribe(),n()}});return t(...e).subscribe(r)}function It(n){for(let t in n)if(n[t]===It)return t;throw Error("Could not find renamed property on target object.")}function mh(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Ot(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ot).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function vh(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Ax=It({__forward_ref__:It});function Pt(n){return n.__forward_ref__=Pt,n.toString=function(){return Ot(this())},n}function Ne(n){return _h(n)?n():n}function _h(n){return"function"==typeof n&&n.hasOwnProperty(Ax)&&n.__forward_ref__===Pt}function yh(n){return n&&!!n.\u0275providers}const rc="https://g.co/ng/security#xss";class fe extends Error{constructor(t,e){super(ic(t,e)),this.code=t}}function ic(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function je(n){return"string"==typeof n?n:null==n?"":String(n)}function sc(n,t){throw new fe(-201,!1)}function Mr(n,t){null==n&&function Mt(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Je(n){return{providers:n.providers||[],imports:n.imports||[]}}function oc(n){return Tv(n,ac)||Tv(n,wv)}function Tv(n,t){return n.hasOwnProperty(t)?n[t]:null}function Mv(n){return n&&(n.hasOwnProperty(Eh)||n.hasOwnProperty(Bx))?n[Eh]:null}const ac=It({\u0275prov:It}),Eh=It({\u0275inj:It}),wv=It({ngInjectableDef:It}),Bx=It({ngInjectorDef:It});var ke=(()=>((ke=ke||{})[ke.Default=0]="Default",ke[ke.Host=1]="Host",ke[ke.Self=2]="Self",ke[ke.SkipSelf=4]="SkipSelf",ke[ke.Optional=8]="Optional",ke))();let bh;function wr(n){const t=bh;return bh=n,t}function xv(n,t,e){const r=oc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&ke.Optional?null:void 0!==t?t:void sc(Ot(n))}const Ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_a={},Dh="__NG_DI_FLAG__",lc="ngTempTokenPath",Vx="ngTokenPath",Hx=/\n/gm,jx="\u0275",Av="__source";let ya;function so(n){const t=ya;return ya=n,t}function Gx(n,t=ke.Default){if(void 0===ya)throw new fe(-203,!1);return null===ya?xv(n,void 0,t):ya.get(n,t&ke.Optional?null:void 0,t)}function oe(n,t=ke.Default){return(function Ux(){return bh}()||Gx)(Ne(n),t)}function Qe(n,t=ke.Default){return oe(n,cc(t))}function cc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ch(n){const t=[];for(let e=0;e<n.length;e++){const r=Ne(n[e]);if(Array.isArray(r)){if(0===r.length)throw new fe(900,!1);let i,s=ke.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Kx(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(oe(i,s))}else t.push(oe(r))}return t}function Ea(n,t){return n[Dh]=t,n.prototype[Dh]=t,n}function Kx(n){return n[Dh]}function wi(n){return{toString:n}.toString()}var si=(()=>((si=si||{})[si.OnPush=0]="OnPush",si[si.Default=1]="Default",si))(),zr=(()=>{return(n=zr||(zr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",zr;var n})();const xi={},vt=[],uc=It({\u0275cmp:It}),Sh=It({\u0275dir:It}),Th=It({\u0275pipe:It}),Rv=It({\u0275mod:It}),Ai=It({\u0275fac:It}),ba=It({__NG_ELEMENT_ID__:It});let $x=0;function Lt(n){return wi(()=>{const t=Pv(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===si.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||zr.Emulated,id:"c"+$x++,styles:n.styles||vt,_:null,schemas:n.schemas||null,tView:null};Lv(e);const r=n.dependencies;return e.directiveDefs=dc(r,!1),e.pipeDefs=dc(r,!0),e})}function Xx(n){return wt(n)||xn(n)}function Qx(n){return null!==n}function rt(n){return wi(()=>({type:n.type,bootstrap:n.bootstrap||vt,declarations:n.declarations||vt,imports:n.imports||vt,exports:n.exports||vt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ov(n,t){if(null==n)return xi;const e={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),e[i]=r,t&&(t[i]=s)}return e}function xe(n){return wi(()=>{const t=Pv(n);return Lv(t),t})}function er(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function wt(n){return n[uc]||null}function xn(n){return n[Sh]||null}function tr(n){return n[Th]||null}function dr(n,t){const e=n[Rv]||null;if(!e&&!0===t)throw new Error(`Type ${Ot(n)} does not have '\u0275mod' property.`);return e}function Pv(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||vt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ov(n.inputs,t),outputs:Ov(n.outputs)}}function Lv(n){n.features?.forEach(t=>t(n))}function dc(n,t){if(!n)return null;const e=t?tr:Xx;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(Qx)}const Ii=0,Ie=1,Ze=2,Wt=3,Wr=4,Cs=5,An=6,ao=7,Zt=8,hc=9,fc=10,et=11,Mh=12,Da=13,kv=14,lo=15,In=16,Ca=17,co=18,oi=19,Sa=20,Fv=21,Vt=22,wh=1,Nv=2,pc=7,gc=8,uo=9,Nn=10;function hr(n){return Array.isArray(n)&&"object"==typeof n[wh]}function $r(n){return Array.isArray(n)&&!0===n[wh]}function xh(n){return 0!=(4&n.flags)}function Ta(n){return n.componentOffset>-1}function mc(n){return 1==(1&n.flags)}function Yr(n){return!!n.template}function qx(n){return 0!=(256&n[Ze])}function Ss(n,t){return n.hasOwnProperty(Ai)?n[Ai]:null}class tA{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Bn(){return Vv}function Vv(n){return n.type.prototype.ngOnChanges&&(n.setInput=rA),nA}function nA(){const n=jv(this),t=n?.current;if(t){const e=n.previous;if(e===xi)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function rA(n,t,e,r){const i=this.declaredInputs[e],s=jv(n)||function iA(n,t){return n[Hv]=t}(n,{previous:xi,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new tA(l&&l.currentValue,t,a===xi),n[r]=t}Bn.ngInherit=!0;const Hv="__ngSimpleChanges__";function jv(n){return n[Hv]||null}const xr=function(n,t,e){},Gv="svg";function bn(n){for(;Array.isArray(n);)n=n[Ii];return n}function vc(n,t){return bn(t[n])}function fr(n,t){return bn(t[n.index])}function zv(n,t){return n.data[t]}function ho(n,t){return n[t]}function pr(n,t){const e=t[n];return hr(e)?e:e[Ii]}function _c(n){return 64==(64&n[Ze])}function ns(n,t){return null==t?null:n[t]}function Wv(n){n[co]=0}function Ih(n,t){n[Cs]+=t;let e=n,r=n[Wt];for(;null!==r&&(1===t&&1===e[Cs]||-1===t&&0===e[Cs]);)r[Cs]+=t,e=r,r=r[Wt]}const Ge={lFrame:n_(null),bindingsEnabled:!0};function Yv(){return Ge.bindingsEnabled}function ge(){return Ge.lFrame.lView}function ut(){return Ge.lFrame.tView}function Un(n){return Ge.lFrame.contextLView=n,n[Zt]}function Vn(n){return Ge.lFrame.contextLView=null,n}function Dn(){let n=Xv();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xv(){return Ge.lFrame.currentTNode}function ai(n,t){const e=Ge.lFrame;e.currentTNode=n,e.isParent=t}function Rh(){return Ge.lFrame.isParent}function Oh(){Ge.lFrame.isParent=!1}function Hn(){const n=Ge.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function fo(){return Ge.lFrame.bindingIndex++}function Oi(n){const t=Ge.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function vA(n,t){const e=Ge.lFrame;e.bindingIndex=e.bindingRootIndex=n,Ph(t)}function Ph(n){Ge.lFrame.currentDirectiveIndex=n}function Lh(n){const t=Ge.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function Jv(){return Ge.lFrame.currentQueryIndex}function kh(n){Ge.lFrame.currentQueryIndex=n}function yA(n){const t=n[Ie];return 2===t.type?t.declTNode:1===t.type?n[An]:null}function e_(n,t,e){if(e&ke.SkipSelf){let i=t,s=n;for(;!(i=i.parent,null!==i||e&ke.Host||(i=yA(s),null===i||(s=s[lo],10&i.type))););if(null===i)return!1;t=i,n=s}const r=Ge.lFrame=t_();return r.currentTNode=t,r.lView=n,!0}function Fh(n){const t=t_(),e=n[Ie];Ge.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function t_(){const n=Ge.lFrame,t=null===n?null:n.child;return null===t?n_(n):t}function n_(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function r_(){const n=Ge.lFrame;return Ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const i_=r_;function Nh(){const n=r_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jn(){return Ge.lFrame.selectedIndex}function Ts(n){Ge.lFrame.selectedIndex=n}function Gt(){const n=Ge.lFrame;return zv(n.tView,n.selectedIndex)}function Pi(){Ge.lFrame.currentNamespace=Gv}function Bh(){!function CA(){Ge.lFrame.currentNamespace=null}()}function yc(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:g,ngOnDestroy:A}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-e,o),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),g&&((n.viewHooks||(n.viewHooks=[])).push(e,g),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,g)),null!=A&&(n.destroyHooks||(n.destroyHooks=[])).push(e,A)}}function Ec(n,t,e){s_(n,t,3,e)}function bc(n,t,e,r){(3&n[Ze])===e&&s_(n,t,e,r)}function Uh(n,t){let e=n[Ze];(3&e)===t&&(e&=2047,e+=1,n[Ze]=e)}function s_(n,t,e,r){const s=r??-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&n[co]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[co]+=65536),(a<s||-1==s)&&(MA(n,e,t,l),n[co]=(4294901760&n[co])+l+2),l++}function MA(n,t,e,r){const i=e[r]<0,s=e[r+1],a=n[i?-e[r]:e[r]];if(i){if(n[Ze]>>11<n[co]>>16&&(3&n[Ze])===t){n[Ze]+=2048,xr(4,a,s);try{s.call(a)}finally{xr(5,a,s)}}}else{xr(4,a,s);try{s.call(a)}finally{xr(5,a,s)}}}const po=-1;class wa{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Hh(n,t,e){let r=0;for(;r<e.length;){const i=e[r];if("number"==typeof i){if(0!==i)break;r++;const s=e[r++],o=e[r++],a=e[r++];n.setAttribute(t,o,a,s)}else{const s=i,o=e[++r];a_(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),r++}}return r}function o_(n){return 3===n||4===n||6===n}function a_(n){return 64===n.charCodeAt(0)}function xa(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?e=i:0===e||l_(n,e,i,null,-1===e||2===e?t[++r]:null)}}return n}function l_(n,t,e,r,i){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function c_(n){return n!==po}function Dc(n){return 32767&n}function Cc(n,t){let e=function IA(n){return n>>16}(n),r=t;for(;e>0;)r=r[lo],e--;return r}let jh=!0;function Sc(n){const t=jh;return jh=n,t}const u_=255,d_=5;let RA=0;const li={};function Tc(n,t){const e=h_(n,t);if(-1!==e)return e;const r=t[Ie];r.firstCreatePass&&(n.injectorIndex=t.length,Gh(r.data,n),Gh(t,null),Gh(r.blueprint,null));const i=Kh(n,t),s=n.injectorIndex;if(c_(i)){const o=Dc(i),a=Cc(i,t),l=a[Ie].data;for(let g=0;g<8;g++)t[s+g]=a[o+g]|l[o+g]}return t[s+8]=i,s}function Gh(n,t){n.push(0,0,0,0,0,0,0,0,t)}function h_(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Kh(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;null!==i;){if(r=y_(i),null===r)return po;if(e++,i=i[lo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return po}function zh(n,t,e){!function OA(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(ba)&&(r=e[ba]),null==r&&(r=e[ba]=RA++);const i=r&u_;t.data[n+(i>>d_)]|=1<<i}(n,t,e)}function f_(n,t,e){if(e&ke.Optional||void 0!==n)return n;sc()}function p_(n,t,e,r){if(e&ke.Optional&&void 0===r&&(r=null),!(e&(ke.Self|ke.Host))){const i=n[hc],s=wr(void 0);try{return i?i.get(t,r,e&ke.Optional):xv(t,r,e&ke.Optional)}finally{wr(s)}}return f_(r,0,e)}function g_(n,t,e,r=ke.Default,i){if(null!==n){if(1024&t[Ze]){const o=function NA(n,t,e,r,i){let s=n,o=t;for(;null!==s&&null!==o&&1024&o[Ze]&&!(256&o[Ze]);){const a=m_(s,o,e,r|ke.Self,li);if(a!==li)return a;let l=s.parent;if(!l){const g=o[Fv];if(g){const A=g.get(e,li,r);if(A!==li)return A}l=y_(o),o=o[lo]}s=l}return i}(n,t,e,r,li);if(o!==li)return o}const s=m_(n,t,e,r,li);if(s!==li)return s}return p_(t,e,r,i)}function m_(n,t,e,r,i){const s=function kA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(ba)?n[ba]:void 0;return"number"==typeof t?t>=0?t&u_:FA:t}(e);if("function"==typeof s){if(!e_(t,n,r))return r&ke.Host?f_(i,0,r):p_(t,e,r,i);try{const o=s(r);if(null!=o||r&ke.Optional)return o;sc()}finally{i_()}}else if("number"==typeof s){let o=null,a=h_(n,t),l=po,g=r&ke.Host?t[In][An]:null;for((-1===a||r&ke.SkipSelf)&&(l=-1===a?Kh(n,t):t[a+8],l!==po&&__(r,!1)?(o=t[Ie],a=Dc(l),t=Cc(l,t)):a=-1);-1!==a;){const A=t[Ie];if(v_(s,a,A.data)){const j=LA(a,t,e,o,r,g);if(j!==li)return j}l=t[a+8],l!==po&&__(r,t[Ie].data[a+8]===g)&&v_(s,a,t)?(o=A,a=Dc(l),t=Cc(l,t)):a=-1}}return i}function LA(n,t,e,r,i,s){const o=t[Ie],a=o.data[n+8],A=Mc(a,o,e,null==r?Ta(a)&&jh:r!=o&&0!=(3&a.type),i&ke.Host&&s===a);return null!==A?Ms(t,o,A,a):li}function Mc(n,t,e,r,i){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,A=s>>20,X=i?a+A:n.directiveEnd;for(let J=r?a:a+A;J<X;J++){const ee=o[J];if(J<l&&e===ee||J>=l&&ee.type===e)return J}if(i){const J=o[l];if(J&&Yr(J)&&J.type===e)return l}return null}function Ms(n,t,e,r){let i=n[e];const s=t.data;if(function wA(n){return n instanceof wa}(i)){const o=i;o.resolving&&function Ix(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new fe(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Tt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():je(n)}(s[e]));const a=Sc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?wr(o.injectImpl):null;e_(n,r,ke.Default);try{i=n[e]=o.factory(void 0,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&function TA(n,t,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=Vv(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o)}i&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,i),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s))}(e,s[e],t)}finally{null!==l&&wr(l),Sc(a),o.resolving=!1,i_()}}return i}function v_(n,t,e){return!!(e[t+(n>>d_)]&1<<n)}function __(n,t){return!(n&ke.Self||n&ke.Host&&t)}class go{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return g_(this._tNode,this._lView,t,cc(r),e)}}function FA(){return new go(Dn(),ge())}function un(n){return wi(()=>{const t=n.prototype.constructor,e=t[Ai]||Wh(t),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ai]||Wh(i);if(s&&s!==e)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Wh(n){return _h(n)?()=>{const t=Wh(Ne(n));return t&&t()}:Ss(n)}function y_(n){const t=n[Ie],e=t.type;return 2===e?t.declTNode:1===e?n[An]:null}function ws(n){return function PA(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let i=0;for(;i<r;){const s=e[i];if(o_(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof e[i];)i++;else{if(s===t)return e[i+1];i+=2}}}return null}(Dn(),n)}const vo="__parameters__";function yo(n,t,e){return wi(()=>{const r=function $h(n){return function(...e){if(n){const r=n(...e);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,g,A){const j=l.hasOwnProperty(vo)?l[vo]:Object.defineProperty(l,vo,{value:[]})[vo];for(;j.length<=A;)j.push(null);return(j[A]=j[A]||[]).push(o),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class me{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ye({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xs(n,t){n.forEach(e=>Array.isArray(e)?xs(e,t):t(e))}function b_(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function wc(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Ra(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function gr(n,t,e){let r=Eo(n,t);return r>=0?n[1|r]=e:(r=~r,function HA(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(1===i)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;)n[i]=n[i-2],i--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function Xh(n,t){const e=Eo(n,t);if(e>=0)return n[1|e]}function Eo(n,t){return function D_(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<e];if(t===o)return s<<e;o>t?i=s:r=s+1}return~(i<<e)}(n,t,1)}const Li=Ea(yo("Optional"),8),As=Ea(yo("SkipSelf"),4);var nr=(()=>((nr=nr||{})[nr.Important=1]="Important",nr[nr.DashCase=2]="DashCase",nr))();const tf=new Map;let cI=0;const rf="__ngContext__";function Rn(n,t){hr(t)?(n[rf]=t[Sa],function dI(n){tf.set(n[Sa],n)}(t)):n[rf]=t}let sf;function af(n,t){return sf(n,t)}function ka(n){const t=n[Wt];return $r(t)?t[Wt]:t}function lf(n){return j_(n[Da])}function cf(n){return j_(n[Wr])}function j_(n){for(;null!==n&&!$r(n);)n=n[Wr];return n}function Do(n,t,e,r,i){if(null!=r){let s,o=!1;$r(r)?s=r:hr(r)&&(o=!0,r=r[Ii]);const a=bn(r);0===n&&null!==e?null==i?Y_(t,e,a):Is(t,e,a,i||null,!0):1===n&&null!==e?Is(t,e,a,i||null,!0):2===n?function mf(n,t,e){const r=Rc(n,t);r&&function RI(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function LI(n,t,e,r,i){const s=e[pc];s!==bn(e)&&Do(t,n,r,s,i);for(let a=Nn;a<e.length;a++){const l=e[a];Fa(l[Ie],l,n,t,r,s)}}(t,n,s,e,i)}}function df(n,t,e){return n.createElement(t,e)}function K_(n,t){const e=n[uo],r=e.indexOf(t),i=t[Wt];512&t[Ze]&&(t[Ze]&=-513,Ih(i,-1)),e.splice(r,1)}function hf(n,t){if(n.length<=Nn)return;const e=Nn+t,r=n[e];if(r){const i=r[Ca];null!==i&&i!==n&&K_(i,r),t>0&&(n[e-1][Wr]=r[Wr]);const s=wc(n,Nn+t);!function CI(n,t){Fa(n,t,t[et],2,null,null),t[Ii]=null,t[An]=null}(r[Ie],r);const o=s[oi];null!==o&&o.detachView(s[Ie]),r[Wt]=null,r[Wr]=null,r[Ze]&=-65}return r}function z_(n,t){if(!(128&t[Ze])){const e=t[et];e.destroyNode&&Fa(n,t,e,3,null,null),function MI(n){let t=n[Da];if(!t)return ff(n[Ie],n);for(;t;){let e=null;if(hr(t))e=t[Da];else{const r=t[Nn];r&&(e=r)}if(!e){for(;t&&!t[Wr]&&t!==n;)hr(t)&&ff(t[Ie],t),t=t[Wt];null===t&&(t=n),hr(t)&&ff(t[Ie],t),e=t&&t[Wr]}t=e}}(t)}}function ff(n,t){if(!(128&t[Ze])){t[Ze]&=-65,t[Ze]|=128,function II(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const i=t[e[r]];if(!(i instanceof wa)){const s=e[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];xr(4,a,l);try{l.call(a)}finally{xr(5,a,l)}}else{xr(4,i,s);try{s.call(i)}finally{xr(5,i,s)}}}}}(n,t),function AI(n,t){const e=n.cleanup,r=t[ao];let i=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=e[s+1]];e[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();t[ao]=null}}(n,t),1===t[Ie].type&&t[et].destroy();const e=t[Ca];if(null!==e&&$r(t[Wt])){e!==t[Wt]&&K_(e,t);const r=t[oi];null!==r&&r.detachView(n)}!function hI(n){tf.delete(n[Sa])}(t)}}function W_(n,t,e){return function $_(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[Ii];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===zr.None||s===zr.Emulated)return null}return fr(r,e)}}(n,t.parent,e)}function Is(n,t,e,r,i){n.insertBefore(t,e,r,i)}function Y_(n,t,e){n.appendChild(t,e)}function X_(n,t,e,r,i){null!==r?Is(n,t,e,r,i):Y_(n,t,e)}function Rc(n,t){return n.parentNode(t)}function Q_(n,t,e){return q_(n,t,e)}let pf,Lc,yf,kc,q_=function Z_(n,t,e){return 40&n.type?fr(n,e):null};function Oc(n,t,e,r){const i=W_(n,r,t),s=t[et],a=Q_(r.parent||t[An],r,t);if(null!=i)if(Array.isArray(e))for(let l=0;l<e.length;l++)X_(s,i,e[l],a,!1);else X_(s,i,e,a,!1);void 0!==pf&&pf(s,r,t,e,i)}function Pc(n,t){if(null!==t){const e=t.type;if(3&e)return fr(t,n);if(4&e)return gf(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return Pc(n,r);{const i=n[t.index];return $r(i)?gf(-1,i):bn(i)}}if(32&e)return af(t,n)()||bn(n[t.index]);{const r=ey(n,t);return null!==r?Array.isArray(r)?r[0]:Pc(ka(n[In]),r):Pc(n,t.next)}}return null}function ey(n,t){return null!==t?n[In][An].projection[t.projection]:null}function gf(n,t){const e=Nn+n+1;if(e<t.length){const r=t[e],i=r[Ie].firstChild;if(null!==i)return Pc(r,i)}return t[pc]}function vf(n,t,e,r,i,s,o){for(;null!=e;){const a=r[e.index],l=e.type;if(o&&0===t&&(a&&Rn(bn(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)vf(n,t,e.child,r,i,s,!1),Do(t,n,i,a,s);else if(32&l){const g=af(e,r);let A;for(;A=g();)Do(t,n,i,A,s);Do(t,n,i,a,s)}else 16&l?ty(n,t,r,e,i,s):Do(t,n,i,a,s);e=o?e.projectionNext:e.next}}function Fa(n,t,e,r,i,s){vf(e,r,n.firstChild,t,i,s,!1)}function ty(n,t,e,r,i,s){const o=e[In],l=o[An].projection[r.projection];if(Array.isArray(l))for(let g=0;g<l.length;g++)Do(t,n,i,l[g],s);else vf(n,t,l,o[Wt],i,s,!0)}function ny(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function ry(n,t,e){const{mergedAttrs:r,classes:i,styles:s}=e;null!==r&&Hh(n,t,r),null!==i&&ny(n,t,i),null!==s&&function FI(n,t,e){n.setAttribute(t,"style",e)}(n,t,s)}function Co(n){return function _f(){if(void 0===Lc&&(Lc=null,Ut.trustedTypes))try{Lc=Ut.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lc}()?.createHTML(n)||n}function ay(n){return function Ef(){if(void 0===kc&&(kc=null,Ut.trustedTypes))try{kc=Ut.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return kc}()?.createScriptURL(n)||n}class Rs{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rc})`}}class HI extends Rs{getTypeName(){return"HTML"}}class jI extends Rs{getTypeName(){return"Style"}}class GI extends Rs{getTypeName(){return"Script"}}class KI extends Rs{getTypeName(){return"URL"}}class zI extends Rs{getTypeName(){return"ResourceURL"}}function mr(n){return n instanceof Rs?n.changingThisBreaksApplicationSecurity:n}function ci(n,t){const e=function WI(n){return n instanceof Rs&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${rc})`)}return e===t}class qI{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Co(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class JI{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Co(t),e}}const tR=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Fc(n){return(n=String(n)).match(tR)?n:"unsafe:"+n}function ki(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Na(...n){const t={};for(const e of n)for(const r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}const cy=ki("area,br,col,hr,img,wbr"),uy=ki("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dy=ki("rp,rt"),bf=Na(cy,Na(uy,ki("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Na(dy,ki("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Na(dy,uy)),Df=ki("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hy=Na(Df,ki("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ki("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nR=ki("script,style,template");class rR{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!bf.hasOwnProperty(e))return this.sanitizedSomething=!0,!nR.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=t.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!hy.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Df[a]&&(l=Fc(l)),this.buf.push(" ",o,'="',fy(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();bf.hasOwnProperty(e)&&!cy.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(fy(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const iR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sR=/([^\#-~ |!])/g;function fy(n){return n.replace(/&/g,"&amp;").replace(iR,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(sR,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nc;function py(n,t){let e=null;try{Nc=Nc||function ly(n){const t=new JI(n);return function eR(){try{return!!(new window.DOMParser).parseFromString(Co(""),"text/html")}catch{return!1}}()?new qI(t):t}(n);let r=t?String(t):"";e=Nc.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=e.innerHTML,e=Nc.getInertBodyElement(r)}while(r!==s);return Co((new rR).sanitizeChildren(Cf(e)||e))}finally{if(e){const r=Cf(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Cf(n){return"content"in n&&function oR(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var _t=(()=>((_t=_t||{})[_t.NONE=0]="NONE",_t[_t.HTML=1]="HTML",_t[_t.STYLE=2]="STYLE",_t[_t.SCRIPT=3]="SCRIPT",_t[_t.URL=4]="URL",_t[_t.RESOURCE_URL=5]="RESOURCE_URL",_t))();function Ba(n){const t=Ua();return t?t.sanitize(_t.URL,n)||"":ci(n,"URL")?mr(n):Fc(je(n))}function gy(n){const t=Ua();if(t)return ay(t.sanitize(_t.RESOURCE_URL,n)||"");if(ci(n,"ResourceURL"))return ay(mr(n));throw new fe(904,!1)}function Ua(){const n=ge();return n&&n[Mh]}const Bc=new me("ENVIRONMENT_INITIALIZER"),vy=new me("INJECTOR",-1),_y=new me("INJECTOR_DEF_TYPES");class yy{get(t,e=_a){if(e===_a){const r=new Error(`NullInjectorError: No provider for ${Ot(t)}!`);throw r.name="NullInjectorError",r}return e}}function pR(...n){return{\u0275providers:Ey(0,n),\u0275fromNgModule:!0}}function Ey(n,...t){const e=[],r=new Set;let i;return xs(t,s=>{const o=s;Sf(o,e,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&by(i,e),e}function by(n,t){for(let e=0;e<n.length;e++){const{providers:i}=n[e];Tf(i,s=>{t.push(s)})}}function Sf(n,t,e,r){if(!(n=Ne(n)))return!1;let i=null,s=Mv(n);const o=!s&&wt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Mv(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const g of l)Sf(g,t,e,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let g;r.add(i);try{xs(s.imports,A=>{Sf(A,t,e,r)&&(g||(g=[]),g.push(A))})}finally{}void 0!==g&&by(g,t)}if(!a){const g=Ss(i)||(()=>new i);t.push({provide:i,useFactory:g,deps:vt},{provide:_y,useValue:i,multi:!0},{provide:Bc,useValue:()=>oe(i),multi:!0})}const l=s.providers;null==l||a||Tf(l,A=>{t.push(A)})}}return i!==n&&void 0!==n.providers}function Tf(n,t){for(let e of n)yh(e)&&(e=e.\u0275providers),Array.isArray(e)?Tf(e,t):t(e)}const gR=It({provide:String,useValue:It});function Mf(n){return null!==n&&"object"==typeof n&&gR in n}function Os(n){return"function"==typeof n}const wf=new me("Set Injector scope."),Uc={},vR={};let xf;function Vc(){return void 0===xf&&(xf=new yy),xf}class ui{}class Sy extends ui{get destroyed(){return this._destroyed}constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,If(t,o=>this.processProvider(o)),this.records.set(vy,So(void 0,this)),i.has("environment")&&this.records.set(ui,So(void 0,this));const s=this.records.get(wf);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_y.multi,vt,ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=so(this),r=wr(void 0);try{return t()}finally{so(e),wr(r)}}get(t,e=_a,r=ke.Default){this.assertNotDestroyed(),r=cc(r);const i=so(this),s=wr(void 0);try{if(!(r&ke.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function DR(n){return"function"==typeof n||"object"==typeof n&&n instanceof me}(t)&&oc(t);a=l&&this.injectableDefInScope(l)?So(Af(t),Uc):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&ke.Self?Vc():this.parent).get(t,e=r&ke.Optional&&e===_a?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[lc]=o[lc]||[]).unshift(Ot(t)),i)throw o;return function zx(n,t,e,r){const i=n[lc];throw t[Av]&&i.unshift(t[Av]),n.message=function Wx(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==jx?n.slice(2):n;let i=Ot(t);if(Array.isArray(t))i=t.map(Ot).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ot(a)))}i=`{${s.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(Hx,"\n  ")}`}("\n"+n.message,i,e,r),n[Vx]=i,n[lc]=null,n}(o,t,"R3InjectorError",this.source)}throw o}finally{wr(s),so(i)}}resolveInjectorInitializers(){const t=so(this),e=wr(void 0);try{const r=this.get(Bc.multi,vt,ke.Self);for(const i of r)i()}finally{so(t),wr(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push(Ot(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(t){let e=Os(t=Ne(t))?t:Ne(t&&t.provide);const r=function yR(n){return Mf(n)?So(void 0,n.useValue):So(Ty(n),Uc)}(t);if(Os(t)||!0!==t.multi)this.records.get(e);else{let i=this.records.get(e);i||(i=So(void 0,Uc,!0),i.factory=()=>Ch(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===Uc&&(e.value=vR,e.value=e.factory()),"object"==typeof e.value&&e.value&&function bR(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Ne(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Af(n){const t=oc(n),e=null!==t?t.factory:Ss(n);if(null!==e)return e;if(n instanceof me)throw new fe(204,!1);if(n instanceof Function)return function _R(n){const t=n.length;if(t>0)throw Ra(t,"?"),new fe(204,!1);const e=function Fx(n){const t=n&&(n[ac]||n[wv]);return t?(function Nx(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),t):null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new fe(204,!1)}function Ty(n,t,e){let r;if(Os(n)){const i=Ne(n);return Ss(i)||Af(i)}if(Mf(n))r=()=>Ne(n.useValue);else if(function Cy(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ch(n.deps||[]));else if(function Dy(n){return!(!n||!n.useExisting)}(n))r=()=>oe(Ne(n.useExisting));else{const i=Ne(n&&(n.useClass||n.provide));if(!function ER(n){return!!n.deps}(n))return Ss(i)||Af(i);r=()=>new i(...Ch(n.deps))}return r}function So(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function If(n,t){for(const e of n)Array.isArray(e)?If(e,t):e&&yh(e)?If(e.\u0275providers,t):t(e)}class CR{}class My{}class TR{resolveComponentFactory(t){throw function SR(n){const t=Error(`No component factory found for ${Ot(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let Ps=(()=>{class n{}return n.NULL=new TR,n})();function MR(){return To(Dn(),ge())}function To(n,t){return new dt(fr(n,t))}let dt=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=MR,n})();function wR(n){return n instanceof dt?n.nativeElement:n}class Va{}let Fi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function xR(){const n=ge(),e=pr(Dn().index,n);return(hr(e)?e:n)[et]}(),n})(),AR=(()=>{class n{}return n.\u0275prov=ye({token:n,providedIn:"root",factory:()=>null}),n})();class Ls{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IR=new Ls("15.2.3"),Rf={},Of="ngOriginalError";function Pf(n){return n[Of]}class Ni{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Pf(t);for(;e&&Pf(e);)e=Pf(e);return e||null}}function xy(n){return n.ownerDocument.defaultView}function Bi(n){return n instanceof Function?n():n}function Iy(n,t,e){let r=n.length;for(;;){const i=n.indexOf(t,e);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}e=i+1}}const Ry="ng-template";function VR(n,t,e){let r=0;for(;r<n.length;){let i=n[r++];if(e&&"class"===i){if(i=n[r],-1!==Iy(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Oy(n){return 4===n.type&&n.value!==Ry}function HR(n,t,e){return t===(4!==n.type||e?n.value:Ry)}function jR(n,t,e){let r=4;const i=n.attrs||[],s=function zR(n){for(let t=0;t<n.length;t++)if(o_(n[t]))return t;return n.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!HR(n,l,e)||""===l&&1===t.length){if(Xr(r))return!1;o=!0}}else{const g=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!VR(n.attrs,g,e)){if(Xr(r))return!1;o=!0}continue}const j=GR(8&r?"class":l,i,Oy(n),e);if(-1===j){if(Xr(r))return!1;o=!0;continue}if(""!==g){let X;X=j>s?"":i[j+1].toLowerCase();const J=8&r?X:null;if(J&&-1!==Iy(J,g,0)||2&r&&g!==X){if(Xr(r))return!1;o=!0}}}}else{if(!o&&!Xr(r)&&!Xr(l))return!1;if(o&&Xr(l))continue;o=!1,r=l|1&r}}return Xr(r)||o}function Xr(n){return 0==(1&n)}function GR(n,t,e,r){if(null===t)return-1;let i=0;if(r||!e){let s=!1;for(;i<t.length;){const o=t[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function WR(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function Py(n,t,e=!1){for(let r=0;r<t.length;r++)if(jR(n,t[r],e))return!0;return!1}function $R(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Ly(n,t){return n?":not("+t.trim()+")":t}function YR(n){let t=n[0],e=1,r=2,i="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&r){const a=n[++e];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Xr(o)&&(t+=Ly(s,i),i=""),r=o,s=s||!Xr(r);e++}return""!==i&&(t+=Ly(s,i)),t}const Ke={};function Ce(n){ky(ut(),ge(),jn()+n,!1)}function ky(n,t,e,r){if(!r)if(3==(3&t[Ze])){const s=n.preOrderCheckHooks;null!==s&&Ec(t,s,e)}else{const s=n.preOrderHooks;null!==s&&bc(t,s,0,e)}Ts(e)}function Uy(n,t=null,e=null,r){const i=Vy(n,t,e,r);return i.resolveInjectorInitializers(),i}function Vy(n,t=null,e=null,r,i=new Set){const s=[e||vt,pR(n)];return r=r||("object"==typeof n?void 0:Ot(n)),new Sy(s,t||Vc(),r||null,i)}let qt=(()=>{class n{static create(e,r){if(Array.isArray(e))return Uy({name:""},r,e,"");{const i=e.name??"";return Uy({name:i},e.parent,e.providers,i)}}}return n.THROW_IF_NOT_FOUND=_a,n.NULL=new yy,n.\u0275prov=ye({token:n,providedIn:"any",factory:()=>oe(vy)}),n.__NG_ELEMENT_ID__=-1,n})();function ne(n,t=ke.Default){const e=ge();return null===e?oe(n,t):g_(Dn(),e,Ne(n),t)}function xo(){throw new Error("invalid")}function $y(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const s=e[r+1];if(-1!==s){const o=n.data[s];kh(e[r]),o.contentQueries(2,t[s],s)}}}function jc(n,t,e,r,i,s,o,a,l,g,A){const j=t.blueprint.slice();return j[Ii]=i,j[Ze]=76|r,(null!==A||n&&1024&n[Ze])&&(j[Ze]|=1024),Wv(j),j[Wt]=j[lo]=n,j[Zt]=e,j[fc]=o||n&&n[fc],j[et]=a||n&&n[et],j[Mh]=l||n&&n[Mh]||null,j[hc]=g||n&&n[hc]||null,j[An]=s,j[Sa]=function uI(){return cI++}(),j[Fv]=A,j[In]=2==t.type?n[In]:j,j}function Ao(n,t,e,r,i){let s=n.data[t];if(null===s)s=function Bf(n,t,e,r,i){const s=Xv(),o=Rh(),l=n.data[t]=function EO(n,t,e,r,i,s){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,t,e,r,i),function mA(){return Ge.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=r,s.attrs=i;const o=function Ma(){const n=Ge.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ai(s,!0),s}function Ha(n,t,e,r){if(0===e)return-1;const i=t.length;for(let s=0;s<e;s++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Uf(n,t,e){Fh(t);try{const r=n.viewQuery;null!==r&&Xf(1,r,e);const i=n.template;null!==i&&Yy(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&$y(n,t),n.staticViewQueries&&Xf(2,n.viewQuery,e);const s=n.components;null!==s&&function vO(n,t){for(let e=0;e<t.length;e++)UO(n,t[e])}(t,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[Ze]&=-5,Nh()}}function Gc(n,t,e,r){const i=t[Ze];if(128!=(128&i)){Fh(t);try{Wv(t),function Zv(n){return Ge.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&Yy(n,t,e,2,r);const o=3==(3&i);if(o){const g=n.preOrderCheckHooks;null!==g&&Ec(t,g,null)}else{const g=n.preOrderHooks;null!==g&&bc(t,g,0,null),Uh(t,0)}if(function NO(n){for(let t=lf(n);null!==t;t=cf(t)){if(!t[Nv])continue;const e=t[uo];for(let r=0;r<e.length;r++){const i=e[r];512&i[Ze]||Ih(i[Wt],1),i[Ze]|=512}}}(t),function FO(n){for(let t=lf(n);null!==t;t=cf(t))for(let e=Nn;e<t.length;e++){const r=t[e],i=r[Ie];_c(r)&&Gc(i,r,i.template,r[Zt])}}(t),null!==n.contentQueries&&$y(n,t),o){const g=n.contentCheckHooks;null!==g&&Ec(t,g)}else{const g=n.contentHooks;null!==g&&bc(t,g,1),Uh(t,1)}!function gO(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const i=e[r];if(i<0)Ts(~i);else{const s=i,o=e[++r],a=e[++r];vA(o,s),a(2,t[s])}}}finally{Ts(-1)}}(n,t);const a=n.components;null!==a&&function mO(n,t){for(let e=0;e<t.length;e++)BO(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&Xf(2,l,r),o){const g=n.viewCheckHooks;null!==g&&Ec(t,g)}else{const g=n.viewHooks;null!==g&&bc(t,g,2),Uh(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[Ze]&=-41,512&t[Ze]&&(t[Ze]&=-513,Ih(t[Wt],-1))}finally{Nh()}}}function Yy(n,t,e,r,i){const s=jn(),o=2&r;try{Ts(-1),o&&t.length>Vt&&ky(n,t,Vt,!1),xr(o?2:0,i),e(r,i)}finally{Ts(s),xr(o?3:1,i)}}function Vf(n,t,e){if(xh(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function Hf(n,t,e){Yv()&&(function MO(n,t,e,r){const i=e.directiveStart,s=e.directiveEnd;Ta(e)&&function PO(n,t,e){const r=fr(t,n),i=Xy(e),s=n[fc],o=Kc(n,jc(n,i,null,e.onPush?32:16,r,t,s,s.createRenderer(r,e),null,null,null));n[t.index]=o}(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||Tc(e,t),Rn(r,t);const o=e.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],g=Ms(t,n,a,e);Rn(g,t),null!==o&&LO(0,a-i,g,l,0,o),Yr(l)&&(pr(e.index,t)[Zt]=Ms(t,n,a,e))}}(n,t,e,fr(e,t)),64==(64&e.flags)&&t0(n,t,e))}function jf(n,t,e=fr){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?e(t,n):n[o];n[i++]=a}}}function Xy(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Gf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Gf(n,t,e,r,i,s,o,a,l,g){const A=Vt+r,j=A+i,X=function _O(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:Ke);return e}(A,j),J="function"==typeof g?g():g;return X[Ie]={type:n,blueprint:X,template:e,queries:null,viewQuery:a,declTNode:t,data:X.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:J,incompleteFirstPass:!1}}function Qy(n,t,e,r){const i=r0(t);null===e?i.push(r):(i.push(e),n.firstCreatePass&&s0(n).push(r,i.length-1))}function Zy(n,t,e,r){for(let i in n)if(n.hasOwnProperty(i)){e=null===e?{}:e;const s=n[i];null===r?qy(e,t,i,s):r.hasOwnProperty(i)&&qy(e,t,r[i],s)}return e}function qy(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function vr(n,t,e,r,i,s,o,a){const l=fr(t,e);let A,g=t.inputs;!a&&null!=g&&(A=g[r])?(Qf(n,e,A,r,i),Ta(t)&&Jy(e,t.index)):3&t.type&&(r=function DO(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(l,r,i))}function Jy(n,t){const e=pr(t,n);16&e[Ze]||(e[Ze]|=32)}function Kf(n,t,e,r){if(Yv()){const i=null===r?null:{"":-1},s=function xO(n,t){const e=n.directiveRegistry;let r=null,i=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Py(t,o.selectors,!1))if(r||(r=[]),Yr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),zf(n,t,a.length)}else r.unshift(o),zf(n,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&e0(n,t,e,o,i,a),i&&function AO(n,t,e){if(t){const r=n.localNames=[];for(let i=0;i<t.length;i+=2){const s=e[t[i+1]];if(null==s)throw new fe(-301,!1);r.push(t[i],s)}}}(e,r,i)}e.mergedAttrs=xa(e.mergedAttrs,e.attrs)}function e0(n,t,e,r,i,s){for(let g=0;g<r.length;g++)zh(Tc(e,t),n,r[g].type);!function RO(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let g=0;g<r.length;g++){const A=r[g];A.providersResolver&&A.providersResolver(A)}let o=!1,a=!1,l=Ha(n,t,r.length,null);for(let g=0;g<r.length;g++){const A=r[g];e.mergedAttrs=xa(e.mergedAttrs,A.hostAttrs),OO(n,e,t,l,A),IO(l,A,i),null!==A.contentQueries&&(e.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(e.flags|=64);const j=A.type.prototype;!o&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),o=!0),!a&&(j.ngOnChanges||j.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function bO(n,t,e){const i=t.directiveEnd,s=n.data,o=t.attrs,a=[];let l=null,g=null;for(let A=t.directiveStart;A<i;A++){const j=s[A],X=e?e.get(j):null,ee=X?X.outputs:null;l=Zy(j.inputs,A,l,X?X.inputs:null),g=Zy(j.outputs,A,g,ee);const ie=null===l||null===o||Oy(t)?null:kO(l,A,o);a.push(ie)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=g}(n,e,s)}function t0(n,t,e){const r=e.directiveStart,i=e.directiveEnd,s=e.index,o=function _A(){return Ge.lFrame.currentDirectiveIndex}();try{Ts(s);for(let a=r;a<i;a++){const l=n.data[a],g=t[a];Ph(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&wO(l,g)}}finally{Ts(-1),Ph(o)}}function wO(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function zf(n,t,e){t.componentOffset=e,(n.components||(n.components=[])).push(t.index)}function IO(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Yr(t)&&(e[""]=n)}}function OO(n,t,e,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ss(i.type)),o=new wa(s,Yr(i),ne);n.blueprint[r]=o,e[r]=o,function SO(n,t,e,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~t.index;(function TO(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,r,s)}}(n,t,r,Ha(n,e,i.hostVars,Ke),i)}function di(n,t,e,r,i,s){const o=fr(n,t);!function Wf(n,t,e,r,i,s,o){if(null==s)n.removeAttribute(t,i,e);else{const a=null==o?je(s):o(s,r||"",i);n.setAttribute(t,i,a,e)}}(t[et],o,s,n.value,e,r,i)}function LO(n,t,e,r,i,s){const o=s[t];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const g=o[l++],A=o[l++],j=o[l++];null!==a?r.setInput(e,j,g,A):e[A]=j}}}function kO(n,t,e){let r=null,i=0;for(;i<e.length;){const s=e[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],e[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function n0(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null]}function BO(n,t){const e=pr(t,n);if(_c(e)){const r=e[Ie];48&e[Ze]?Gc(r,e,r.template,e[Zt]):e[Cs]>0&&$f(e)}}function $f(n){for(let r=lf(n);null!==r;r=cf(r))for(let i=Nn;i<r.length;i++){const s=r[i];if(_c(s))if(512&s[Ze]){const o=s[Ie];Gc(o,s,o.template,s[Zt])}else s[Cs]>0&&$f(s)}const e=n[Ie].components;if(null!==e)for(let r=0;r<e.length;r++){const i=pr(e[r],n);_c(i)&&i[Cs]>0&&$f(i)}}function UO(n,t){const e=pr(t,n),r=e[Ie];(function VO(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Uf(r,e,e[Zt])}function Kc(n,t){return n[Da]?n[kv][Wr]=t:n[Da]=t,n[kv]=t,t}function Yf(n){for(;n;){n[Ze]|=32;const t=ka(n);if(qx(n)&&!t)return n;n=t}return null}function zc(n,t,e,r=!0){const i=t[fc];i.begin&&i.begin();try{Gc(n,t,n.template,e)}catch(o){throw r&&a0(t,o),o}finally{i.end&&i.end()}}function Xf(n,t,e){kh(0),t(n,e)}function r0(n){return n[ao]||(n[ao]=[])}function s0(n){return n.cleanup||(n.cleanup=[])}function o0(n,t,e){return(null===n||Yr(n))&&(e=function oA(n){for(;Array.isArray(n);){if("object"==typeof n[wh])return n;n=n[Ii]}return null}(e[t.index])),e[et]}function a0(n,t){const e=n[hc],r=e?e.get(Ni,null):null;r&&r.handleError(t)}function Qf(n,t,e,r,i){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],g=n.data[o];null!==g.setInput?g.setInput(l,i,r,a):l[a]=i}}function Wc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=vh(i,a):2==s&&(r=vh(r,a+": "+t[++o]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function $c(n,t,e,r,i=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&r.push(bn(s)),$r(s))for(let a=Nn;a<s.length;a++){const l=s[a],g=l[Ie].firstChild;null!==g&&$c(l[Ie],l,g,r)}const o=e.type;if(8&o)$c(n,t,e.child,r);else if(32&o){const a=af(e,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=ey(t,e);if(Array.isArray(a))r.push(...a);else{const l=ka(t[In]);$c(l[Ie],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}class ja{get rootNodes(){const t=this._lView,e=t[Ie];return $c(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zt]}set context(t){this._lView[Zt]=t}get destroyed(){return 128==(128&this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Wt];if($r(t)){const e=t[gc],r=e?e.indexOf(this):-1;r>-1&&(hf(t,r),wc(e,r))}this._attachedToViewContainer=!1}z_(this._lView[Ie],this._lView)}onDestroy(t){Qy(this._lView[Ie],this._lView,null,t)}markForCheck(){Yf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-65}reattach(){this._lView[Ze]|=64}detectChanges(){zc(this._lView[Ie],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function TI(n,t){Fa(n,t,t[et],2,null,null)}(this._lView[Ie],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=t}}class HO extends ja{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;zc(t[Ie],t,t[Zt],!1)}checkNoChanges(){}get context(){return null}}class l0 extends Ps{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=wt(t);return new Ga(e,this.ngModule)}}function c0(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class GO{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=cc(r);const i=this.injector.get(t,Rf,r);return i!==Rf||e===Rf?i:this.parentInjector.get(t,e,r)}}class Ga extends My{get inputs(){return c0(this.componentDef.inputs)}get outputs(){return c0(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function XR(n){return n.map(YR).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,i){let s=(i=i||this.ngModule)instanceof ui?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new GO(t,s):t,a=o.get(Va,null);if(null===a)throw new fe(407,!1);const l=o.get(AR,null),g=a.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",j=r?function yO(n,t,e){return n.selectRootElement(t,e===zr.ShadowDom)}(g,r,this.componentDef.encapsulation):df(g,A,function jO(n){const t=n.toLowerCase();return"svg"===t?Gv:"math"===t?"math":null}(A)),X=this.componentDef.onPush?288:272,J=Gf(0,null,null,1,0,null,null,null,null,null),ee=jc(null,J,null,X,null,null,a,g,l,o,null);let ie,ae;Fh(ee);try{const le=this.componentDef;let ve,de=null;le.findHostDirectiveDefs?(ve=[],de=new Map,le.findHostDirectiveDefs(le,ve,de),ve.push(le)):ve=[le];const Ae=function zO(n,t){const e=n[Ie],r=Vt;return n[r]=t,Ao(e,r,2,"#host",null)}(ee,j),ht=function WO(n,t,e,r,i,s,o,a){const l=i[Ie];!function $O(n,t,e,r){for(const i of n)t.mergedAttrs=xa(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Wc(t,t.mergedAttrs,!0),null!==e&&ry(r,e,t))}(r,n,t,o);const g=s.createRenderer(t,e),A=jc(i,Xy(e),null,e.onPush?32:16,i[n.index],n,s,g,a||null,null,null);return l.firstCreatePass&&zf(l,n,r.length-1),Kc(i,A),i[n.index]=A}(Ae,j,le,ve,ee,a,g);ae=zv(J,Vt),j&&function XO(n,t,e,r){if(r)Hh(n,e,["ng-version",IR.full]);else{const{attrs:i,classes:s}=function QR(n){const t=[],e=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&t.push(s,n[++r]):8===i&&e.push(s);else{if(!Xr(i))break;i=s}r++}return{attrs:t,classes:e}}(t.selectors[0]);i&&Hh(n,e,i),s&&s.length>0&&ny(n,e,s.join(" "))}}(g,le,j,r),void 0!==e&&function QO(n,t,e){const r=n.projection=[];for(let i=0;i<t.length;i++){const s=e[i];r.push(null!=s?Array.from(s):null)}}(ae,this.ngContentSelectors,e),ie=function YO(n,t,e,r,i,s){const o=Dn(),a=i[Ie],l=fr(o,i);e0(a,i,o,e,null,r);for(let A=0;A<e.length;A++)Rn(Ms(i,a,o.directiveStart+A,o),i);t0(a,i,o),l&&Rn(l,i);const g=Ms(i,a,o.directiveStart+o.componentOffset,o);if(n[Zt]=i[Zt]=g,null!==s)for(const A of s)A(g,t);return Vf(a,o,n),g}(ht,le,ve,de,ee,[ZO]),Uf(J,ee,null)}finally{Nh()}return new KO(this.componentType,ie,To(ae,ee),ee,ae)}}class KO extends CR{constructor(t,e,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new HO(i),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const s=this._rootLView;Qf(s[Ie],s,i,t,e),Jy(s,this._tNode.index)}}get injector(){return new go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function ZO(){const n=Dn();yc(ge()[Ie],n)}function Ve(n){let t=function u0(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let i;if(Yr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new fe(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);const o=n;o.inputs=Zf(n.inputs),o.declaredInputs=Zf(n.declaredInputs),o.outputs=Zf(n.outputs);const a=i.hostBindings;a&&tP(n,a);const l=i.viewQuery,g=i.contentQueries;if(l&&JO(n,l),g&&eP(n,g),mh(n.inputs,i.inputs),mh(n.declaredInputs,i.declaredInputs),mh(n.outputs,i.outputs),Yr(i)&&i.data.animation){const A=n.data;A.animation=(A.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ve&&(e=!1)}}t=Object.getPrototypeOf(t)}!function qO(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=xa(i.hostAttrs,e=xa(e,i.hostAttrs))}}(r)}function Zf(n){return n===xi?{}:n===vt?[]:n}function JO(n,t){const e=n.viewQuery;n.viewQuery=e?(r,i)=>{t(r,i),e(r,i)}:t}function eP(n,t){const e=n.contentQueries;n.contentQueries=e?(r,i,s)=>{t(r,i,s),e(r,i,s)}:t}function tP(n,t){const e=n.hostBindings;n.hostBindings=e?(r,i)=>{t(r,i),e(r,i)}:t}function Yc(n){return!!qf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function qf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function hi(n,t,e){return n[t]=e}function On(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function lt(n,t,e,r){const i=ge();return On(i,fo(),t)&&(ut(),di(Gt(),i,n,t,e,r)),lt}function Ro(n,t,e,r){return On(n,fo(),e)?t+je(e)+r:Ke}function $e(n,t,e,r,i,s,o,a){const l=ge(),g=ut(),A=n+Vt,j=g.firstCreatePass?function dP(n,t,e,r,i,s,o,a,l){const g=t.consts,A=Ao(t,n,4,o||null,ns(g,a));Kf(t,e,A,ns(g,l)),yc(t,A);const j=A.tView=Gf(2,A,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,g);return null!==t.queries&&(t.queries.template(t,A),j.queries=t.queries.embeddedTView(A)),A}(A,g,l,t,e,r,i,s,o):g.data[A];ai(j,!1);const X=l[et].createComment("");Oc(g,l,X,j),Rn(X,l),Kc(l,l[A]=n0(X,l,X,j)),mc(j)&&Hf(g,l,j),null!=o&&jf(l,j,a)}function Qc(n){return ho(function gA(){return Ge.lFrame.contextLView}(),Vt+n)}function Te(n,t,e){const r=ge();return On(r,fo(),t)&&vr(ut(),Gt(),r,n,t,r[et],e,!1),Te}function Jf(n,t,e,r,i){const o=i?"class":"style";Qf(n,e,t.inputs[o],o,r)}function _e(n,t,e,r){const i=ge(),s=ut(),o=Vt+n,a=i[et],l=s.firstCreatePass?function fP(n,t,e,r,i,s){const o=t.consts,l=Ao(t,n,2,r,ns(o,i));return Kf(t,e,l,ns(o,s)),null!==l.attrs&&Wc(l,l.attrs,!1),null!==l.mergedAttrs&&Wc(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,t,e,r):s.data[o],g=i[o]=df(a,t,function SA(){return Ge.lFrame.currentNamespace}()),A=mc(l);return ai(l,!0),ry(a,g,l),32!=(32&l.flags)&&Oc(s,i,g,l),0===function uA(){return Ge.lFrame.elementDepthCount}()&&Rn(g,i),function dA(){Ge.lFrame.elementDepthCount++}(),A&&(Hf(s,i,l),Vf(s,l,i)),null!==r&&jf(i,l),_e}function Ee(){let n=Dn();Rh()?Oh():(n=n.parent,ai(n,!1));const t=n;!function hA(){Ge.lFrame.elementDepthCount--}();const e=ut();return e.firstCreatePass&&(yc(e,n),xh(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function xA(n){return 0!=(8&n.flags)}(t)&&Jf(e,t,ge(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function AA(n){return 0!=(16&n.flags)}(t)&&Jf(e,t,ge(),t.stylesWithoutHost,!1),Ee}function yt(n,t,e,r){return _e(n,t,e,r),Ee(),yt}function za(n,t,e){const r=ge(),i=ut(),s=n+Vt,o=i.firstCreatePass?function pP(n,t,e,r,i){const s=t.consts,o=ns(s,r),a=Ao(t,n,8,"ng-container",o);return null!==o&&Wc(a,o,!0),Kf(t,e,a,ns(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,e):i.data[s];ai(o,!0);const a=r[s]=r[et].createComment("");return Oc(i,r,a,o),Rn(a,r),mc(o)&&(Hf(i,r,o),Vf(i,o,r)),null!=e&&jf(r,o),za}function Wa(){let n=Dn();const t=ut();return Rh()?Oh():(n=n.parent,ai(n,!1)),t.firstCreatePass&&(yc(t,n),xh(n)&&t.queries.elementEnd(n)),Wa}function Rr(){return ge()}function $a(n){return!!n&&"function"==typeof n.then}function S0(n){return!!n&&"function"==typeof n.subscribe}const ep=S0;function st(n,t,e,r){const i=ge(),s=ut(),o=Dn();return T0(s,i,i[et],o,n,t,r),st}function Zc(n,t){const e=Dn(),r=ge(),i=ut();return T0(i,r,o0(Lh(i.data),e,r),e,n,t),Zc}function T0(n,t,e,r,i,s,o){const a=mc(r),g=n.firstCreatePass&&s0(n),A=t[Zt],j=r0(t);let X=!0;if(3&r.type||o){const ie=fr(r,t),ae=o?o(ie):ie,le=j.length,ve=o?Ae=>o(bn(Ae[r.index])):r.index;let de=null;if(!o&&a&&(de=function gP(n,t,e,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===e&&i[s+1]===r){const a=t[ao],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,i,r.index)),null!==de)(de.__ngLastListenerFn__||de).__ngNextListenerFn__=s,de.__ngLastListenerFn__=s,X=!1;else{s=w0(r,t,A,s,!1);const Ae=e.listen(ae,i,s);j.push(s,Ae),g&&g.push(i,ve,le,le+1)}}else s=w0(r,t,A,s,!1);const J=r.outputs;let ee;if(X&&null!==J&&(ee=J[i])){const ie=ee.length;if(ie)for(let ae=0;ae<ie;ae+=2){const ht=t[ee[ae]][ee[ae+1]].subscribe(s),pt=j.length;j.push(s,ht),g&&g.push(i,r.index,pt,-(pt+1))}}}function M0(n,t,e,r){try{return xr(6,t,e),!1!==e(r)}catch(i){return a0(n,i),!1}finally{xr(7,t,e)}}function w0(n,t,e,r,i){return function s(o){if(o===Function)return r;Yf(n.componentOffset>-1?pr(n.index,t):t);let l=M0(t,e,r,o),g=s.__ngNextListenerFn__;for(;g;)l=M0(t,e,g,o)&&l,g=g.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function tt(n=1){return function EA(n){return(Ge.lFrame.contextLView=function bA(n,t){for(;n>0;)t=t[lo],n--;return t}(n,Ge.lFrame.contextLView))[Zt]}(n)}function mP(n,t){let e=null;const r=function KR(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?Py(n,s,!0):$R(r,s))return i}else e=i}return e}function Qr(n){const t=ge()[In][An];if(!t.projection){const r=t.projection=Ra(n?n.length:1,null),i=r.slice();let s=t.child;for(;null!==s;){const o=n?mP(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function $t(n,t=0,e){const r=ge(),i=ut(),s=Ao(i,Vt+n,16,null,e||null);null===s.projection&&(s.projection=t),Oh(),32!=(32&s.flags)&&function PI(n,t,e){ty(t[et],0,t,e,W_(n,e,t),Q_(e.parent||t[An],e,t))}(i,r,s)}function qc(n,t){return n<<17|t<<2}function rs(n){return n>>17&32767}function np(n){return 2|n}function Fs(n){return(131068&n)>>2}function rp(n,t){return-131069&n|t<<2}function ip(n){return 1|n}function N0(n,t,e,r,i){const s=n[e+1],o=null===t;let a=r?rs(s):Fs(s),l=!1;for(;0!==a&&(!1===l||o);){const A=n[a+1];DP(n[a],t)&&(l=!0,n[a+1]=r?ip(A):np(A)),a=r?rs(A):Fs(A)}l&&(n[e+1]=r?np(s):ip(s))}function DP(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Eo(n,t)>=0}const hn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function B0(n){return n.substring(hn.key,hn.keyEnd)}function U0(n,t){const e=hn.textEnd;return e===t?-1:(t=hn.keyEnd=function MP(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,hn.key=t,e),Uo(n,t,e))}function Uo(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function is(n,t,e){return Zr(n,t,e,!1),is}function rn(n,t){return Zr(n,t,null,!0),rn}function pi(n,t){for(let e=function SP(n){return function H0(n){hn.key=0,hn.keyEnd=0,hn.value=0,hn.valueEnd=0,hn.textEnd=n.length}(n),U0(n,Uo(n,0,hn.textEnd))}(t);e>=0;e=U0(t,e))gr(n,B0(t),!0)}function Zr(n,t,e,r){const i=ge(),s=ut(),o=Oi(2);s.firstUpdatePass&&z0(s,n,o,r),t!==Ke&&On(i,o,t)&&$0(s,s.data[jn()],i,i[et],n,i[o+1]=function NP(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Ot(mr(n)))),n}(t,e),r,o)}function K0(n,t){return t>=n.expandoStartIndex}function z0(n,t,e,r){const i=n.data;if(null===i[e+1]){const s=i[jn()],o=K0(n,e);X0(s,r)&&null===t&&!o&&(t=!1),t=function RP(n,t,e,r){const i=Lh(n);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(e=Ya(e=sp(null,n,t,e,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==i)if(e=sp(i,n,t,e,r),null===s){let l=function OP(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Fs(r))return n[rs(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=sp(null,n,t,l[1],r),l=Ya(l,t.attrs,r),function PP(n,t,e,r){n[rs(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else s=function LP(n,t,e){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Ya(r,n[s].hostAttrs,e);return Ya(r,t.attrs,e)}(n,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),e}(i,s,t,r),function EP(n,t,e,r,i,s){let o=s?t.classBindings:t.styleBindings,a=rs(o),l=Fs(o);n[r]=e;let A,g=!1;if(Array.isArray(e)?(A=e[1],(null===A||Eo(e,A)>0)&&(g=!0)):A=e,i)if(0!==l){const X=rs(n[a+1]);n[r+1]=qc(X,a),0!==X&&(n[X+1]=rp(n[X+1],r)),n[a+1]=function _P(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=qc(a,0),0!==a&&(n[a+1]=rp(n[a+1],r)),a=r;else n[r+1]=qc(l,0),0===a?a=r:n[l+1]=rp(n[l+1],r),l=r;g&&(n[r+1]=np(n[r+1])),N0(n,A,r,!0),N0(n,A,r,!1),function bP(n,t,e,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&Eo(s,t)>=0&&(e[r+1]=ip(e[r+1]))}(t,A,n,r,s),o=qc(a,l),s?t.classBindings=o:t.styleBindings=o}(i,s,t,e,o,r)}}function sp(n,t,e,r,i){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],r=Ya(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Ya(n,t,e){const r=e?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gr(n,o,!!e||t[++s]))}return void 0===n?null:n}function $0(n,t,e,r,i,s,o,a){if(!(3&t.type))return;const l=n.data,g=l[a+1],A=function yP(n){return 1==(1&n)}(g)?Y0(l,t,e,i,Fs(g),o):void 0;Jc(A)||(Jc(s)||function vP(n){return 2==(2&n)}(g)&&(s=Y0(l,null,e,i,a,o)),function kI(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let s=-1===r.indexOf("-")?void 0:nr.DashCase;null==i?n.removeStyle(e,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=nr.Important),n.setStyle(e,r,i,s))}}(r,o,vc(jn(),e),i,s))}function Y0(n,t,e,r,i,s){const o=null===t;let a;for(;i>0;){const l=n[i],g=Array.isArray(l),A=g?l[1]:l,j=null===A;let X=e[i+1];X===Ke&&(X=j?vt:void 0);let J=j?Xh(X,r):A===r?X:void 0;if(g&&!Jc(J)&&(J=Xh(l,r)),Jc(J)&&(a=J,o))return a;const ee=n[i+1];i=o?rs(ee):Fs(ee)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=Xh(l,r))}return a}function Jc(n){return void 0!==n}function X0(n,t){return 0!=(n.flags&(t?8:16))}function nt(n,t=""){const e=ge(),r=ut(),i=n+Vt,s=r.firstCreatePass?Ao(r,i,1,t,null):r.data[i],o=e[i]=function uf(n,t){return n.createText(t)}(e[et],t);Oc(r,e,o,s),ai(s,!1)}function Or(n){return _r("",n,""),Or}function _r(n,t,e){const r=ge(),i=Ro(r,n,t,e);return i!==Ke&&function Ui(n,t,e){const r=vc(t,n);!function G_(n,t,e){n.setValue(t,e)}(n[et],r,e)}(r,jn(),i),_r}function iE(n,t,e){!function qr(n,t,e,r){const i=ut(),s=Oi(2);i.firstUpdatePass&&z0(i,null,s,r);const o=ge();if(e!==Ke&&On(o,s,e)){const a=i.data[jn()];if(X0(a,r)&&!K0(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=vh(l,e||"")),Jf(i,a,o,e,r)}else!function FP(n,t,e,r,i,s,o,a){i===Ke&&(i=vt);let l=0,g=0,A=0<i.length?i[0]:null,j=0<s.length?s[0]:null;for(;null!==A||null!==j;){const X=l<i.length?i[l+1]:void 0,J=g<s.length?s[g+1]:void 0;let ie,ee=null;A===j?(l+=2,g+=2,X!==J&&(ee=j,ie=J)):null===j||null!==A&&A<j?(l+=2,ee=A):(g+=2,ee=j,ie=J),null!==ee&&$0(n,t,e,r,ee,ie,o,a),A=l<i.length?i[l]:null,j=g<s.length?s[g]:null}}(i,a,o,o[et],o[s+1],o[s+1]=function kP(n,t,e){if(null==e||""===e)return vt;const r=[],i=mr(e);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(n,t,e),r,s)}}(gr,pi,Ro(ge(),n,t,e),!0)}function Vo(n,t,e){const r=ge();return On(r,fo(),t)&&vr(ut(),Gt(),r,n,t,r[et],e,!0),Vo}function eu(n,t,e){const r=ge();if(On(r,fo(),t)){const s=ut(),o=Gt();vr(s,o,r,n,t,o0(Lh(s.data),o,r),e,!0)}return eu}const jo="en-US";let mE=jo;function lp(n,t,e,r,i){if(n=Ne(n),Array.isArray(n))for(let s=0;s<n.length;s++)lp(n[s],t,e,r,i);else{const s=ut(),o=ge();let a=Os(n)?n:Ne(n.provide),l=Ty(n);const g=Dn(),A=1048575&g.providerIndexes,j=g.directiveStart,X=g.providerIndexes>>20;if(Os(n)||!n.multi){const J=new wa(l,i,ne),ee=up(a,t,i?A:A+X,j);-1===ee?(zh(Tc(g,o),s,a),cp(s,n,t.length),t.push(a),g.directiveStart++,g.directiveEnd++,i&&(g.providerIndexes+=1048576),e.push(J),o.push(J)):(e[ee]=J,o[ee]=J)}else{const J=up(a,t,A+X,j),ee=up(a,t,A,A+X),ae=ee>=0&&e[ee];if(i&&!ae||!i&&!(J>=0&&e[J])){zh(Tc(g,o),s,a);const le=function ek(n,t,e,r,i){const s=new wa(n,e,ne);return s.multi=[],s.index=t,s.componentProviders=0,HE(s,i,r&&!e),s}(i?JL:qL,e.length,i,r,l);!i&&ae&&(e[ee].providerFactory=le),cp(s,n,t.length,0),t.push(a),g.directiveStart++,g.directiveEnd++,i&&(g.providerIndexes+=1048576),e.push(le),o.push(le)}else cp(s,n,J>-1?J:ee,HE(e[i?ee:J],l,!i&&r));!i&&r&&ae&&e[ee].componentProviders++}}}function cp(n,t,e,r){const i=Os(t),s=function mR(n){return!!n.useClass}(t);if(i||s){const l=(s?Ne(t.useClass):t).prototype.ngOnDestroy;if(l){const g=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){const A=g.indexOf(e);-1===A?g.push(e,[r,l]):g[A+1].push(r,l)}else g.push(e,l)}}}function HE(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function up(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function qL(n,t,e,r){return dp(this.multi,[])}function JL(n,t,e,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ms(e,e[Ie],this.providerFactory.index,r);s=a.slice(0,o),dp(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],dp(i,s);return s}function dp(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Et(n,t=[]){return e=>{e.providersResolver=(r,i)=>function ZL(n,t,e){const r=ut();if(r.firstCreatePass){const i=Yr(n);lp(e,r.data,r.blueprint,i,!0),lp(t,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,t)}}class Go{}class jE{}class GE extends Go{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new l0(this);const r=dr(t);this._bootstrapComponents=Bi(r.bootstrap),this._r3Injector=Vy(t,e,[{provide:Go,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],Ot(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class hp extends jE{constructor(t){super(),this.moduleType=t}create(t){return new GE(this.moduleType,t)}}class nk extends Go{constructor(t,e,r){super(),this.componentFactoryResolver=new l0(this),this.instance=null;const i=new Sy([...t,{provide:Go,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],e||Vc(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function su(n,t,e=null){return new nk(n,t,e).injector}let rk=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=Ey(0,e.type),i=r.length>0?su([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,i)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ye({token:n,providedIn:"environment",factory:()=>new n(oe(ui))}),n})();function KE(n){n.getStandaloneInjector=t=>t.get(rk).getOrCreateStandaloneInjector(n)}function JE(n,t,e,r,i,s){const o=t+e;return On(n,o,i)?hi(n,o+1,s?r.call(s,i):r(i)):function el(n,t){const e=n[t];return e===Ke?void 0:e}(n,o+1)}function sb(n,t,e){const r=n+Vt,i=ge(),s=ho(i,r);return function tl(n,t){return n[Ie].data[t].pure}(i,r)?JE(i,Hn(),t,s.transform,e,s):s.transform(e)}function pp(n){return t=>{setTimeout(n,void 0,t)}}const ze=class Tk extends F{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let i=t,s=e||(()=>null),o=r;if(t&&"object"==typeof t){const l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=pp(s),i&&(i=pp(i)),o&&(o=pp(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof O&&t.add(a),a}};function Mk(){return this._results[Symbol.iterator]()}class nl{get changes(){return this._changes||(this._changes=new ze)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=nl.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=Mk)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const i=function Ar(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function UA(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=t[r];if(e&&(i=e(i),s=e(s)),s!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pr=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ak,n})();const wk=Pr,xk=class extends wk{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tView,i=jc(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);i[Ca]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[oi];return null!==o&&(i[oi]=o.createEmbeddedView(r)),Uf(r,i,t),new ja(i)}};function Ak(){return ou(Dn(),ge())}function ou(n,t){return 4&n.type?new xk(t,n,To(n,t)):null}let ir=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ik,n})();function Ik(){return lb(Dn(),ge())}const Rk=ir,ob=class extends Rk{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return To(this._hostTNode,this._hostLView)}get injector(){return new go(this._hostTNode,this._hostLView)}get parentInjector(){const t=Kh(this._hostTNode,this._hostLView);if(c_(t)){const e=Cc(t,this._hostLView),r=Dc(t);return new go(e[Ie].data[r+8],e)}return new go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ab(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Nn}createEmbeddedView(t,e,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,i),o}createComponent(t,e,r,i,s){const o=t&&!function Ia(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const j=e||{};a=j.index,r=j.injector,i=j.projectableNodes,s=j.environmentInjector||j.ngModuleRef}const l=o?t:new Ga(wt(t)),g=r||this.parentInjector;if(!s&&null==l.ngModule){const X=(o?g:this.parentInjector).get(ui,null);X&&(s=X)}const A=l.create(g,i,void 0,s);return this.insert(A.hostView,a),A}insert(t,e){const r=t._lView,i=r[Ie];if(function cA(n){return $r(n[Wt])}(r)){const A=this.indexOf(t);if(-1!==A)this.detach(A);else{const j=r[Wt],X=new ob(j,j[An],j[Wt]);X.detach(X.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function wI(n,t,e,r){const i=Nn+r,s=e.length;r>0&&(e[i-1][Wr]=t),r<s-Nn?(t[Wr]=e[i],b_(e,Nn+r,t)):(e.push(t),t[Wr]=null),t[Wt]=e;const o=t[Ca];null!==o&&e!==o&&function xI(n,t){const e=n[uo];t[In]!==t[Wt][Wt][In]&&(n[Nv]=!0),null===e?n[uo]=[t]:e.push(t)}(o,t);const a=t[oi];null!==a&&a.insertView(n),t[Ze]|=64}(i,r,o,s);const a=gf(s,o),l=r[et],g=Rc(l,o[pc]);return null!==g&&function SI(n,t,e,r,i,s){r[Ii]=i,r[An]=t,Fa(n,r,e,1,i,s)}(i,o[An],l,r,g,a),t.attachToViewContainerRef(),b_(gp(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ab(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=hf(this._lContainer,e);r&&(wc(gp(this._lContainer),e),z_(r[Ie],r))}detach(t){const e=this._adjustIndex(t,-1),r=hf(this._lContainer,e);return r&&null!=wc(gp(this._lContainer),e)?new ja(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function ab(n){return n[gc]}function gp(n){return n[gc]||(n[gc]=[])}function lb(n,t){let e;const r=t[n.index];if($r(r))e=r;else{let i;if(8&n.type)i=bn(r);else{const s=t[et];i=s.createComment("");const o=fr(n,t);Is(s,Rc(s,o),i,function OI(n,t){return n.nextSibling(t)}(s,o),!1)}t[n.index]=e=n0(r,t,i,n),Kc(t,e)}return new ob(e,n,t)}class mp{constructor(t){this.queryList=t,this.matches=null}clone(){return new mp(this.queryList)}setDirty(){this.queryList.setDirty()}}class vp{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let s=0;s<r;s++){const o=e.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new vp(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==fb(t,e).matches&&this.queries[e].setDirty()}}class cb{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class _p{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,null!==e?e.push(s):e=[s])}return null!==e?new _p(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class yp{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new yp(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(t,e,Ok(e,s)),this.matchTNodeWithReadOption(t,e,Mc(e,t,s,!1,!1))}else r===Pr?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Mc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===dt||i===ir||i===Pr&&4&e.type)this.addMatch(e.index,-2);else{const s=Mc(e,t,i,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ok(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function Lk(n,t,e,r){return-1===e?function Pk(n,t){return 11&n.type?To(n,t):4&n.type?ou(n,t):null}(t,n):-2===e?function kk(n,t,e){return e===dt?To(t,n):e===Pr?ou(t,n):e===ir?lb(t,n):void 0}(n,t,r):Ms(n,n[Ie],e,t)}function ub(n,t,e,r){const i=t[oi].queries[r];if(null===i.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const g=o[l];a.push(g<0?null:Lk(t,s[g],o[l+1],e.metadata.read))}i.matches=a}return i.matches}function Ep(n,t,e,r){const i=n.queries.getByIndex(e),s=i.matches;if(null!==s){const o=ub(n,t,i,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const g=s[a+1],A=t[-l];for(let j=Nn;j<A.length;j++){const X=A[j];X[Ca]===X[Wt]&&Ep(X[Ie],X,g,r)}if(null!==A[uo]){const j=A[uo];for(let X=0;X<j.length;X++){const J=j[X];Ep(J[Ie],J,g,r)}}}}}return r}function bt(n){const t=ge(),e=ut(),r=Jv();kh(r+1);const i=fb(e,r);if(n.dirty&&function lA(n){return 4==(4&n[Ze])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Ep(e,t,r,[]):ub(e,t,i,r);n.reset(s,wR),n.notifyOnChanges()}return!0}return!1}function yr(n,t,e){const r=ut();r.firstCreatePass&&(hb(r,new cb(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),db(r,ge(),t)}function fn(n,t,e,r){const i=ut();if(i.firstCreatePass){const s=Dn();hb(i,new cb(t,e,r),s.index),function Nk(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(i,n),2==(2&e)&&(i.staticContentQueries=!0)}db(i,ge(),e)}function Dt(){return function Fk(n,t){return n[oi].queries[t].queryList}(ge(),Jv())}function db(n,t,e){const r=new nl(4==(4&e));Qy(n,t,r,r.destroy),null===t[oi]&&(t[oi]=new vp),t[oi].queries.push(new mp(r))}function hb(n,t,e){null===n.queries&&(n.queries=new _p),n.queries.track(new yp(t,e))}function fb(n,t){return n.queries.getByIndex(t)}function lu(...n){}const cu=new me("Application Initializer");let uu=(()=>{class n{constructor(e){this.appInits=e,this.resolve=lu,this.reject=lu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if($a(s))e.push(s);else if(ep(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(oe(cu,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const il=new me("AppId",{providedIn:"root",factory:function Rb(){return`${Mp()}${Mp()}${Mp()}`}});function Mp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ob=new me("Platform Initializer"),du=new me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Lr=new me("AnimationModuleType");let iF=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const gi=new me("LocaleId",{providedIn:"root",factory:()=>Qe(gi,ke.Optional|ke.SkipSelf)||function sF(){return typeof $localize<"u"&&$localize.locale||jo}()});class aF{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let Pb=(()=>{class n{compileModuleSync(e){return new hp(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),s=Bi(dr(e).declarations).reduce((o,a)=>{const l=wt(a);return l&&o.push(new Ga(l)),o},[]);return new aF(r,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uF=(()=>Promise.resolve(0))();function wp(n){typeof Zone>"u"?uF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ye{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function dF(){let n=Ut.requestAnimationFrame,t=Ut.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function pF(n){const t=()=>{!function fF(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ut,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ap(n),n.isCheckStableRunning=!0,xp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ap(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,s,o,a)=>{try{return Fb(n),e.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),Nb(n)}},onInvoke:(e,r,i,s,o,a,l)=>{try{return Fb(n),e.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),Nb(n)}},onHasTask:(e,r,i,s)=>{e.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Ap(n),xp(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,r,i,s)=>(e.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ye.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Ye.isInAngularZone())throw new fe(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,hF,lu,lu);try{return s.runTask(o,e,r)}finally{s.cancelTask(o)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const hF={};function xp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ap(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Fb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Nb(n){n._nesting--,xp(n)}class gF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}}const Bb=new me(""),hu=new me("");let Op,Ip=(()=>{class n{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Op||(function mF(n){Op=n}(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ye.assertNotInAngularZone(),wp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wp(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}}return n.\u0275fac=function(e){return new(e||n)(oe(Ye),oe(Rp),oe(hu))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),Rp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return Op?.findTestabilityInTree(this,e,r)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Vi=!1;let ss=null;const Ub=new me("AllowMultipleToken"),Pp=new me("PlatformDestroyListeners"),Vb=new me("appBootstrapListener");class Hb{constructor(t,e){this.name=t,this.token=e}}function Gb(n,t,e=[]){const r=`Platform: ${t}`,i=new me(r);return(s=[])=>{let o=Lp();if(!o||o.injector.get(Ub,!1)){const a=[...e,...s,{provide:i,useValue:!0}];n?n(a):function yF(n){if(ss&&!ss.get(Ub,!1))throw new fe(400,!1);ss=n;const t=n.get(zb);(function jb(n){const t=n.get(Ob,null);t&&t.forEach(e=>e())})(n)}(function Kb(n=[],t){return qt.create({name:t,providers:[{provide:wf,useValue:"platform"},{provide:Pp,useValue:new Set([()=>ss=null])},...n]})}(a,r))}return function bF(n){const t=Lp();if(!t)throw new fe(401,!1);return t}()}}function Lp(){return ss?.get(zb)??null}let zb=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const i=function $b(n,t){let e;return e="noop"===n?new gF:("zone.js"===n?void 0:n)||new Ye(t),e}(r?.ngZone,function Wb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Ye,useValue:i}];return i.run(()=>{const o=qt.create({providers:s,parent:this.injector,name:e.moduleType.name}),a=e.create(o),l=a.injector.get(Ni,null);if(!l)throw new fe(402,!1);return i.runOutsideAngular(()=>{const g=i.onError.subscribe({next:A=>{l.handleError(A)}});a.onDestroy(()=>{fu(this._modules,a),g.unsubscribe()})}),function Yb(n,t,e){try{const r=e();return $a(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const g=a.injector.get(uu);return g.runInitializers(),g.donePromise.then(()=>(function vE(n){Mr(n,"Expected localeId to be defined"),"string"==typeof n&&(mE=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(gi,jo)||jo),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const i=Xb({},r);return function vF(n,t,e){const r=new hp(e);return Promise.resolve(r)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(e){const r=e.injector.get(Wo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new fe(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Pp,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(oe(qt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Xb(n,t){return Array.isArray(t)?t.reduce(Xb,n):{...n,...t}}let Wo=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,i){this._zone=e,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new p(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new p(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ye.assertNotInAngularZone(),wp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const g=this._zone.onUnstable.subscribe(()=>{Ye.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),g.unsubscribe()}});this.isStable=ii(s,o.pipe(Sv()))}bootstrap(e,r){const i=e instanceof My;if(!this._injector.get(uu).done){!i&&function oo(n){const t=wt(n)||xn(n)||tr(n);return null!==t&&t.standalone}(e);throw new fe(405,Vi)}let o;o=i?e:this._injector.get(Ps).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function _F(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Go),g=o.create(qt.NULL,[],r||o.selector,a),A=g.location.nativeElement,j=g.injector.get(Bb,null);return j?.registerApplication(A),g.onDestroy(()=>{this.detachView(g.hostView),fu(this.components,g),j?.unregisterApplication(A)}),this._loadComponent(g),g}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;fu(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(Vb,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>fu(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new fe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(oe(Ye),oe(ui),oe(Ni))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fu(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let zn=(()=>{class n{}return n.__NG_ELEMENT_ID__=CF,n})();function CF(n){return function SF(n,t,e){if(Ta(n)&&!e){const r=pr(n.index,t);return new ja(r,r)}return 47&n.type?new ja(t[In],t):null}(Dn(),ge(),16==(16&n))}class eD{constructor(){}supports(t){return Yc(t)}create(t){return new IF(t)}}const AF=(n,t)=>t;class IF{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||AF}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,s=null;for(;e||r;){const o=!r||e&&e.currentIndex<nD(r,i,s)?e:r,a=nD(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{s||(s=[]);const g=a-i,A=l-i;if(g!=A){for(let X=0;X<g;X++){const J=X<s.length?s[X]:s[X]=0,ee=J+X;A<=ee&&ee<g&&(s[X]=J+1)}s[o.previousIndex]=A-g}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Yc(t))throw new fe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),r=!0),e=e._next}else i=0,function lP(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,a,o,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,i)):t=this._addAfter(new RF(e,r),s,i),t}_verifyReinsertion(t,e,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new tD),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tD),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class RF{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OF{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class tD{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new OF,this.map.set(e,r)),r.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nD(n,t,e){const r=n.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}class rD{constructor(){}supports(t){return t instanceof Map||qf(t)}create(){return new PF}}class PF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||qf(t)))throw new fe(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,e);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new LF(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class LF{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iD(){return new mu([new eD])}let mu=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||iD()),deps:[[n,new As,new Li]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new fe(901,!1)}}return n.\u0275prov=ye({token:n,providedIn:"root",factory:iD}),n})();function sD(){return new sl([new rD])}let sl=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||sD()),deps:[[n,new As,new Li]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(r)return r;throw new fe(901,!1)}}return n.\u0275prov=ye({token:n,providedIn:"root",factory:sD}),n})();const NF=Gb(null,"core",[]);let BF=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(oe(Wo))},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({}),n})();function $o(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Up=null;function Hi(){return Up}class HF{}const We=new me("DocumentToken");let Vp=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(){return function jF(){return oe(oD)}()},providedIn:"platform"}),n})();const GF=new me("Location Initialized");let oD=(()=>{class n extends Vp{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hi().getBaseHref(this._doc)}onPopState(e){const r=Hi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Hi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){aD()?this._history.pushState(e,r,i):this._location.hash=i}replaceState(e,r,i){aD()?this._history.replaceState(e,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:function(){return function KF(){return new oD(oe(We))}()},providedIn:"platform"}),n})();function aD(){return!!window.history.pushState}function Hp(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function lD(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ji(n){return n&&"?"!==n[0]?"?"+n:n}let Us=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(){return Qe(uD)},providedIn:"root"}),n})();const cD=new me("appBaseHref");let uD=(()=>{class n extends Us{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Qe(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Hp(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+ji(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,s){const o=this.prepareExternalUrl(i+ji(s));this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){const o=this.prepareExternalUrl(i+ji(s));this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(oe(Vp),oe(cD,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zF=(()=>{class n extends Us{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Hp(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+ji(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+ji(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(oe(Vp),oe(cD,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),ol=(()=>{class n{constructor(e){this._subject=new ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function YF(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(lD(dD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+ji(r))}normalize(e){return n.stripTrailingSlash(function $F(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,dD(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ji(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ji(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=ji,n.joinWithSlash=Hp,n.stripTrailingSlash=lD,n.\u0275fac=function(e){return new(e||n)(oe(Us))},n.\u0275prov=ye({token:n,factory:function(){return function WF(){return new ol(oe(Us))}()},providedIn:"root"}),n})();function dD(n){return n.replace(/\/index.html$/,"")}function ED(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,s]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}const Zp=/\s+/,bD=[];let Mu=(()=>{class n{constructor(e,r,i,s){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=bD,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Zp):bD}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Zp):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Zp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(ne(mu),ne(sl),ne(dt),ne(Fi))},n.\u0275dir=xe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class P1{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cl=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new P1(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),SD(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{SD(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(ne(ir),ne(Pr),ne(mu))},n.\u0275dir=xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function SD(n,t){n.context.$implicit=t.item}let Vs=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new k1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){TD("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){TD("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(ne(ir),ne(Pr))},n.\u0275dir=xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class k1{constructor(){this.$implicit=null,this.ngIf=null}}function TD(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ot(t)}'.`)}class qp{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Yo=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),wu=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new qp(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(ne(ir),ne(Pr),ne(Yo,9))},n.\u0275dir=xe({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),MD=(()=>{class n{constructor(e,r,i){i._addDefault(new qp(e,r))}}return n.\u0275fac=function(e){return new(e||n)(ne(ir),ne(Pr),ne(Yo,9))},n.\u0275dir=xe({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),xD=(()=>{class n{constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[i,s]=e.split("."),o=-1===i.indexOf("-")?void 0:nr.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(sl),ne(Fi))},n.\u0275dir=xe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class N1{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class B1{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}}const U1=new B1,V1=new N1;let AD=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if($a(e))return U1;if(S0(e))return V1;throw function ti(n,t){return new fe(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(ne(zn,16))},n.\u0275pipe=er({name:"async",type:n,pure:!1,standalone:!0}),n})(),mi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({}),n})();const RD="browser";let lN=(()=>{class n{}return n.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new cN(oe(We),window)}),n})();class cN{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function uN(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=OD(this.window.history)||OD(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function OD(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class PD{}class NN extends HF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rg extends NN{static makeCurrent(){!function VF(n){Up||(Up=n)}(new rg)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function BN(){return dl=dl||document.querySelector("base"),dl?dl.getAttribute("href"):null}();return null==e?null:function UN(n){Iu=Iu||document.createElement("a"),Iu.setAttribute("href",n);const t=Iu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ED(document.cookie,t)}}let Iu,dl=null;const BD=new me("TRANSITION_ID"),HN=[{provide:cu,useFactory:function VN(n,t,e){return()=>{e.get(uu).donePromise.then(()=>{const r=Hi(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[BD,We,qt],multi:!0}];let GN=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const Ru=new me("EventManagerPlugins");let Ou=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(oe(Ru),oe(Ye))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class UD{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=Hi().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let VD=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const i=this.usageCount;let s=i.get(e)??0;return s+=r,s>0?i.set(e,s):i.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),hl=(()=>{class n extends VD{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(s=>s.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const i=this.doc.createElement("style");i.textContent=r,e.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const ig={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sg=/%COMP%/g,GD=new me("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function KD(n,t){return t.flat(100).map(e=>e.replace(sg,n))}function zD(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Pu=(()=>{class n{constructor(e,r,i,s){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new og(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(e,r);return i instanceof YD?i.applyToHost(e):i instanceof ag&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case zr.Emulated:s=new YD(o,a,r,this.appId,l);break;case zr.ShadowDom:return new QN(o,a,e,r);default:s=new ag(o,a,r,l)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(oe(Ou),oe(hl),oe(il),oe(GD))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class og{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(ig[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){($D(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&($D(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const s=ig[i];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=ig[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(nr.DashCase|nr.Important)?t.style.setProperty(e,r,i&nr.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&nr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,zD(r)):this.eventManager.addEventListener(t,e,zD(r))}}function $D(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class QN extends og{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=KD(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ag extends og{constructor(t,e,r,i,s=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=KD(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class YD extends ag{constructor(t,e,r,i,s){const o=i+"-"+r.id;super(t,e,r,s,o),this.contentAttr=function $N(n){return"_ngcontent-%COMP%".replace(sg,n)}(o),this.hostAttr=function YN(n){return"_nghost-%COMP%".replace(sg,n)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let ZN=(()=>{class n extends UD{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const XD=["alt","control","meta","shift"],qN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eB=(()=>{class n extends UD{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hi().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),XD.forEach(g=>{const A=r.indexOf(g);A>-1&&(r.splice(A,1),o+=g+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(e,r){let i=qN[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(i=e.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),XD.forEach(o=>{o!==i&&(0,JN[o])(e)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(e,r,i){return s=>{n.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const iB=Gb(NF,"browser",[{provide:du,useValue:RD},{provide:Ob,useValue:function tB(){rg.makeCurrent()},multi:!0},{provide:We,useFactory:function rB(){return function VI(n){yf=n}(document),document},deps:[]}]),qD=new me(""),JD=[{provide:hu,useClass:class jN{addToWindow(t){Ut.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Ut.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ut.getAllAngularRootElements=()=>t.getAllRootElements(),Ut.frameworkStabilizers||(Ut.frameworkStabilizers=[]),Ut.frameworkStabilizers.push(r=>{const i=Ut.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?Hi().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:Bb,useClass:Ip,deps:[Ye,Rp,hu]},{provide:Ip,useClass:Ip,deps:[Ye,Rp,hu]}],eC=[{provide:wf,useValue:"root"},{provide:Ni,useFactory:function nB(){return new Ni},deps:[]},{provide:Ru,useClass:ZN,multi:!0,deps:[We,Ye,du]},{provide:Ru,useClass:eB,multi:!0,deps:[We]},{provide:Pu,useClass:Pu,deps:[Ou,hl,il,GD]},{provide:Va,useExisting:Pu},{provide:VD,useExisting:hl},{provide:hl,useClass:hl,deps:[We]},{provide:Ou,useClass:Ou,deps:[Ru,Ye]},{provide:PD,useClass:GN,deps:[]},[]];let tC=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:il,useValue:e.appId},{provide:BD,useExisting:il},HN]}}}return n.\u0275fac=function(e){return new(e||n)(oe(qD,12))},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[...eC,...JD],imports:[mi,BF]}),n})(),nC=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:function(e){let r=null;return r=e?new e:function oB(){return new nC(oe(We))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let ug=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(e){let r=null;return r=e?new(e||n):oe(sC),r},providedIn:"root"}),n})(),sC=(()=>{class n extends ug{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case _t.NONE:return r;case _t.HTML:return ci(r,"HTML")?mr(r):py(this._doc,String(r)).toString();case _t.STYLE:return ci(r,"Style")?mr(r):r;case _t.SCRIPT:if(ci(r,"Script"))return mr(r);throw new Error("unsafe value used in a script context");case _t.URL:return ci(r,"URL")?mr(r):Fc(String(r));case _t.RESOURCE_URL:if(ci(r,"ResourceURL"))return mr(r);throw new Error(`unsafe value used in a resource URL context (see ${rc})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${rc})`)}}bypassSecurityTrustHtml(e){return function $I(n){return new HI(n)}(e)}bypassSecurityTrustStyle(e){return function YI(n){return new jI(n)}(e)}bypassSecurityTrustScript(e){return function XI(n){return new GI(n)}(e)}bypassSecurityTrustUrl(e){return function QI(n){return new KI(n)}(e)}bypassSecurityTrustResourceUrl(e){return function ZI(n){return new zI(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:function(e){let r=null;return r=e?new e:function dB(n){return new sC(n.get(We))}(oe(qt)),r},providedIn:"root"}),n})();function Pe(...n){return nn(n,va(n))}function as(n,t){return He(t)?Qt(n,t,1):Qt(n,1)}function _n(n,t){return $((e,r)=>{let i=0;e.subscribe(Z(r,s=>n.call(t,s,i++)&&r.next(s)))})}class Lu{}class dg{}class ni{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),s=i.toLowerCase(),o=e.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ni?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ni;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ni?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class hB{encodeKey(t){return oC(t)}encodeValue(t){return oC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const pB=/%(\d[a-f0-9])/gi,gB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oC(n){return encodeURIComponent(n).replace(pB,(t,e)=>gB[e]??t)}function ku(n){return`${n}`}class ls{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new hB,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fB(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,s)),t.decodeValue(i.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],i=Array.isArray(r)?r.map(ku):[ku(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(s=>{e.push({param:r,value:s,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ls({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ku(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(ku(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class mB{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function aC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function lC(n){return typeof Blob<"u"&&n instanceof Blob}function cC(n){return typeof FormData<"u"&&n instanceof FormData}class fl{constructor(t,e,r,i){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function vB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ni),this.context||(this.context=new mB),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new ls,this.urlWithParams=e}serializeBody(){return null===this.body?null:aC(this.body)||lC(this.body)||cC(this.body)||function _B(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ls?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cC(this.body)?null:lC(this.body)?this.body.type||null:aC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ls?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,g=t.params||this.params;const A=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((j,X)=>j.set(X,t.setHeaders[X]),l)),t.setParams&&(g=Object.keys(t.setParams).reduce((j,X)=>j.set(X,t.setParams[X]),g)),new fl(e,r,s,{params:g,headers:l,context:A,reportProgress:a,responseType:i,withCredentials:o})}}var an=(()=>((an=an||{})[an.Sent=0]="Sent",an[an.UploadProgress=1]="UploadProgress",an[an.ResponseHeader=2]="ResponseHeader",an[an.DownloadProgress=3]="DownloadProgress",an[an.Response=4]="Response",an[an.User=5]="User",an))();class hg{constructor(t,e=200,r="OK"){this.headers=t.headers||new ni,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class fg extends hg{constructor(t={}){super(t),this.type=an.ResponseHeader}clone(t={}){return new fg({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Fu extends hg{constructor(t={}){super(t),this.type=an.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Fu({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class uC extends hg{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function pg(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let pl=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let s;if(e instanceof fl)s=e;else{let l,g;l=i.headers instanceof ni?i.headers:new ni(i.headers),i.params&&(g=i.params instanceof ls?i.params:new ls({fromObject:i.params})),s=new fl(e,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:g,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Pe(s).pipe(as(l=>this.handler.handle(l)));if(e instanceof fl||"events"===i.observe)return o;const a=o.pipe(_n(l=>l instanceof Fu));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Q(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Q(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new ls).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,pg(i,r))}post(e,r,i={}){return this.request("POST",e,pg(i,r))}put(e,r,i={}){return this.request("PUT",e,pg(i,r))}}return n.\u0275fac=function(e){return new(e||n)(oe(Lu))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();function dC(n,t){return t(n)}function yB(n,t){return(e,r)=>t.intercept(e,{handle:i=>n(i,r)})}const bB=new me("HTTP_INTERCEPTORS"),gl=new me("HTTP_INTERCEPTOR_FNS");function DB(){let n=null;return(t,e)=>(null===n&&(n=(Qe(bB,{optional:!0})??[]).reduceRight(yB,dC)),n(t,e))}let hC=(()=>{class n extends Lu{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(gl)));this.chain=r.reduceRight((i,s)=>function EB(n,t,e){return(r,i)=>e.runInContext(()=>t(r,s=>n(s,i)))}(i,s,this.injector),dC)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(oe(dg),oe(ui))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const MB=/^\)\]\}',?\n/;let pC=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new p(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((J,ee)=>i.setRequestHeader(J,ee.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const J=e.detectContentTypeHeader();null!==J&&i.setRequestHeader("Content-Type",J)}if(e.responseType){const J=e.responseType.toLowerCase();i.responseType="json"!==J?J:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const J=i.statusText||"OK",ee=new ni(i.getAllResponseHeaders()),ie=function wB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return o=new fg({headers:ee,status:i.status,statusText:J,url:ie}),o},l=()=>{let{headers:J,status:ee,statusText:ie,url:ae}=a(),le=null;204!==ee&&(le=typeof i.response>"u"?i.responseText:i.response),0===ee&&(ee=le?200:0);let ve=ee>=200&&ee<300;if("json"===e.responseType&&"string"==typeof le){const de=le;le=le.replace(MB,"");try{le=""!==le?JSON.parse(le):null}catch(Ae){le=de,ve&&(ve=!1,le={error:Ae,text:le})}}ve?(r.next(new Fu({body:le,headers:J,status:ee,statusText:ie,url:ae||void 0})),r.complete()):r.error(new uC({error:le,headers:J,status:ee,statusText:ie,url:ae||void 0}))},g=J=>{const{url:ee}=a(),ie=new uC({error:J,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ee||void 0});r.error(ie)};let A=!1;const j=J=>{A||(r.next(a()),A=!0);let ee={type:an.DownloadProgress,loaded:J.loaded};J.lengthComputable&&(ee.total=J.total),"text"===e.responseType&&i.responseText&&(ee.partialText=i.responseText),r.next(ee)},X=J=>{let ee={type:an.UploadProgress,loaded:J.loaded};J.lengthComputable&&(ee.total=J.total),r.next(ee)};return i.addEventListener("load",l),i.addEventListener("error",g),i.addEventListener("timeout",g),i.addEventListener("abort",g),e.reportProgress&&(i.addEventListener("progress",j),null!==s&&i.upload&&i.upload.addEventListener("progress",X)),i.send(s),r.next({type:an.Sent}),()=>{i.removeEventListener("error",g),i.removeEventListener("abort",g),i.removeEventListener("load",l),i.removeEventListener("timeout",g),e.reportProgress&&(i.removeEventListener("progress",j),null!==s&&i.upload&&i.upload.removeEventListener("progress",X)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(oe(PD))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const gg=new me("XSRF_ENABLED"),gC=new me("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),mC=new me("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class vC{}let IB=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ED(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(oe(We),oe(du),oe(gC))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();function RB(n,t){const e=n.url.toLowerCase();if(!Qe(gg)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=Qe(vC).getToken(),i=Qe(mC);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var tn=(()=>((tn=tn||{})[tn.Interceptors=0]="Interceptors",tn[tn.LegacyInterceptors=1]="LegacyInterceptors",tn[tn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",tn[tn.NoXsrfProtection=3]="NoXsrfProtection",tn[tn.JsonpSupport=4]="JsonpSupport",tn[tn.RequestsMadeViaParent=5]="RequestsMadeViaParent",tn))();function Xo(n,t){return{\u0275kind:n,\u0275providers:t}}function OB(...n){const t=[pl,pC,hC,{provide:Lu,useExisting:hC},{provide:dg,useExisting:pC},{provide:gl,useValue:RB,multi:!0},{provide:gg,useValue:!0},{provide:vC,useClass:IB}];for(const e of n)t.push(...e.\u0275providers);return function fR(n){return{\u0275providers:n}}(t)}const _C=new me("LEGACY_INTERCEPTOR_FN");let LB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[OB(Xo(tn.LegacyInterceptors,[{provide:_C,useFactory:DB},{provide:gl,useExisting:_C,multi:!0}]))]}),n})();class yC{}class kB{}const Ki="*";function cs(n,t){return{type:7,name:n,definitions:t,options:{}}}function ri(n,t=null){return{type:4,styles:t,timings:n}}function EC(n,t=null){return{type:3,steps:n,options:t}}function bC(n,t=null){return{type:2,steps:n,options:t}}function Ht(n){return{type:6,styles:n,offset:null}}function or(n,t,e){return{type:0,name:n,styles:t,options:e}}function Nr(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function mg(n=null){return{type:9,options:n}}function vg(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function DC(n){Promise.resolve().then(n)}class ml{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){DC(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class CC{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const s=this.players.length;0==s?DC(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const _g="!";function SC(n){return new fe(3e3,!1)}function vU(){return typeof window<"u"&&typeof window.document<"u"}function yg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function us(n){switch(n.length){case 0:return new ml;case 1:return n[0];default:return new CC(n)}}function TC(n,t,e,r,i=new Map,s=new Map){const o=[],a=[];let l=-1,g=null;if(r.forEach(A=>{const j=A.get("offset"),X=j==l,J=X&&g||new Map;A.forEach((ee,ie)=>{let ae=ie,le=ee;if("offset"!==ie)switch(ae=t.normalizePropertyName(ae,o),le){case _g:le=i.get(ie);break;case Ki:le=s.get(ie);break;default:le=t.normalizeStyleValue(ie,ae,le,o)}J.set(ae,le)}),X||a.push(J),g=J,l=j}),o.length)throw function sU(n){return new fe(3502,!1)}();return a}function Eg(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&bg(e,"start",n)));break;case"done":n.onDone(()=>r(e&&bg(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&bg(e,"destroy",n)))}}function bg(n,t,e){const s=Dg(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function Dg(n,t,e,r,i="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Er(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function MC(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let Cg=(n,t)=>!1,wC=(n,t,e)=>[],xC=null;function Sg(n){const t=n.parentNode||n.host;return t===xC?null:t}(yg()||typeof Element<"u")&&(vU()?(xC=(()=>document.documentElement)(),Cg=(n,t)=>{for(;t;){if(t===n)return!0;t=Sg(t)}return!1}):Cg=(n,t)=>n.contains(t),wC=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let Hs=null,AC=!1;const IC=Cg,RC=wC;let OC=(()=>{class n{validateStyleProperty(e){return function yU(n){Hs||(Hs=function EU(){return typeof document<"u"?document.body:null}()||{},AC=!!Hs.style&&"WebkitAppearance"in Hs.style);let t=!0;return Hs.style&&!function _U(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Hs.style,!t&&AC&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Hs.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return IC(e,r)}getParentElement(e){return Sg(e)}query(e,r,i){return RC(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,s,o,a=[],l){return new ml(i,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),Tg=(()=>{class n{}return n.NOOP=new OC,n})();const bU=1e3,Mg="ng-enter",Nu="ng-leave",Bu="ng-trigger",Uu=".ng-trigger",LC="ng-animating",wg=".ng-animating";function zi(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:xg(parseFloat(t[1]),t[2])}function xg(n,t){return"s"===t?n*bU:n}function Vu(n,t,e){return n.hasOwnProperty("duration")?n:function CU(n,t,e){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(SC()),{duration:0,delay:0,easing:""};i=xg(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=xg(parseFloat(l),a[4]));const g=a[5];g&&(o=g)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(function NB(){return new fe(3100,!1)}()),a=!0),s<0&&(t.push(function BB(){return new fe(3101,!1)}()),a=!0),a&&t.splice(l,0,SC())}return{duration:i,delay:s,easing:o}}(n,t,e)}function vl(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function kC(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function ds(n,t=new Map,e){if(e)for(let[r,i]of e)t.set(r,i);for(let[r,i]of n)t.set(r,i);return t}function NC(n,t,e){return e?t+":"+e+";":""}function BC(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=NC(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=NC(0,wU(e),n.style[e]));n.setAttribute("style",t)}function vi(n,t,e){n.style&&(t.forEach((r,i)=>{const s=Ig(i);e&&!e.has(i)&&e.set(i,n.style[s]),n.style[s]=r}),yg()&&BC(n))}function js(n,t){n.style&&(t.forEach((e,r)=>{const i=Ig(r);n.style[i]=""}),yg()&&BC(n))}function _l(n){return Array.isArray(n)?1==n.length?n[0]:bC(n):n}const Ag=new RegExp("{{\\s*(.+?)\\s*}}","g");function UC(n){let t=[];if("string"==typeof n){let e;for(;e=Ag.exec(n);)t.push(e[1]);Ag.lastIndex=0}return t}function yl(n,t,e){const r=n.toString(),i=r.replace(Ag,(s,o)=>{let a=t[o];return null==a&&(e.push(function VB(n){return new fe(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Hu(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const MU=/-+([a-z0-9])/g;function Ig(n){return n.replace(MU,(...t)=>t[1].toUpperCase())}function wU(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function br(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function HB(n){return new fe(3004,!1)}()}}function VC(n,t){return window.getComputedStyle(n)[t]}const Ku="*";function PU(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function LU(n,t,e){if(":"==n[0]){const l=function kU(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function tU(n){return new fe(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function eU(n){return new fe(3015,!1)}()),t;const i=r[1],s=r[2],o=r[3];t.push(HC(i,o));"<"==s[0]&&!(i==Ku&&o==Ku)&&t.push(HC(o,i))}(r,e,t)):e.push(n),e}const zu=new Set(["true","1"]),Wu=new Set(["false","0"]);function HC(n,t){const e=zu.has(n)||Wu.has(n),r=zu.has(t)||Wu.has(t);return(i,s)=>{let o=n==Ku||n==i,a=t==Ku||t==s;return!o&&e&&"boolean"==typeof i&&(o=i?zu.has(n):Wu.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?zu.has(t):Wu.has(t)),o&&a}}const FU=new RegExp("s*:selfs*,?","g");function Rg(n,t,e,r){return new NU(n).build(t,e,r)}class NU{constructor(t){this._driver=t}build(t,e,r){const i=new VU(e);return this._resetContextStyleTimingState(i),br(this,_l(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function GB(){return new fe(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,g=l.name;g.toString().split(/\s*,\s*/).forEach(A=>{l.name=A,s.push(this.visitState(l,e))}),l.name=g}else if(1==a.type){const l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,o.push(l)}else e.errors.push(function KB(){return new fe(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{UC(l).forEach(g=>{o.hasOwnProperty(g)||s.add(g)})})}),s.size&&(Hu(s.values()),e.errors.push(function zB(n,t){return new fe(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=br(this,_l(t.animation),e);return{type:1,matchers:PU(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Gs(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>br(this,r,e)),options:Gs(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const s=t.steps.map(o=>{e.currentTime=r;const a=br(this,o,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:s,options:Gs(t.options)}}visitAnimate(t,e){const r=function jU(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Og(Vu(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Og(0,0,"");return s.dynamic=!0,s.strValue=e,s}const i=Vu(e,t);return Og(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,s=t.styles?t.styles:Ht({});if(5==s.type)i=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const g={};r.easing&&(g.easing=r.easing),o=Ht(g)}e.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)"string"==typeof a?a===Ki?r.push(a):e.errors.push(new fe(3002,!1)):r.push(kC(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,s=e.currentTime;r&&s>0&&(s-=r.duration+r.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const g=e.collectedStyles.get(e.currentQuerySelector),A=g.get(l);let j=!0;A&&(s!=i&&s>=A.startTime&&i<=A.endTime&&(e.errors.push(function $B(n,t,e,r,i){return new fe(3010,!1)}()),j=!1),s=A.startTime),j&&g.set(l,{startTime:s,endTime:i}),e.options&&function TU(n,t,e){const r=t.params||{},i=UC(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||e.push(function UB(n){return new fe(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function YB(){return new fe(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,g=0;const A=t.steps.map(le=>{const ve=this._makeStyleAst(le,e);let de=null!=ve.offset?ve.offset:function HU(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(ve.styles),Ae=0;return null!=de&&(s++,Ae=ve.offset=de),l=l||Ae<0||Ae>1,a=a||Ae<g,g=Ae,o.push(Ae),ve});l&&e.errors.push(function XB(){return new fe(3012,!1)}()),a&&e.errors.push(function QB(){return new fe(3200,!1)}());const j=t.steps.length;let X=0;s>0&&s<j?e.errors.push(function ZB(){return new fe(3202,!1)}()):0==s&&(X=1/(j-1));const J=j-1,ee=e.currentTime,ie=e.currentAnimateTimings,ae=ie.duration;return A.forEach((le,ve)=>{const de=X>0?ve==J?1:X*ve:o[ve],Ae=de*ae;e.currentTime=ee+ie.delay+Ae,ie.duration=Ae,this._validateStyleAst(le,e),le.offset=de,r.styles.push(le)}),r}visitReference(t,e){return{type:8,animation:br(this,_l(t.animation),e),options:Gs(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Gs(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Gs(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function BU(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(FU,"")),n=n.replace(/@\*/g,Uu).replace(/@\w+/g,e=>Uu+"-"+e.slice(1)).replace(/:animating/g,wg),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+s:s,Er(e.collectedStyles,e.currentQuerySelector,new Map);const a=br(this,_l(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Gs(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function qB(){return new fe(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Vu(t.timings,e.errors,!0);return{type:12,animation:br(this,_l(t.animation),e),timings:r,options:null}}}class VU{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gs(n){return n?(n=vl(n)).params&&(n.params=function UU(n){return n?vl(n):null}(n.params)):n={},n}function Og(n,t,e){return{duration:n,delay:t,easing:e}}function Pg(n,t,e,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class $u{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const zU=new RegExp(":enter","g"),$U=new RegExp(":leave","g");function Lg(n,t,e,r,i,s=new Map,o=new Map,a,l,g=[]){return(new YU).buildKeyframes(n,t,e,r,i,s,o,a,l,g)}class YU{buildKeyframes(t,e,r,i,s,o,a,l,g,A=[]){g=g||new $u;const j=new kg(t,e,g,i,s,A,[]);j.options=l;const X=l.delay?zi(l.delay):0;j.currentTimeline.delayNextStep(X),j.currentTimeline.setStyles([o],null,j.errors,l),br(this,r,j);const J=j.timelines.filter(ee=>ee.containsAnimation());if(J.length&&a.size){let ee;for(let ie=J.length-1;ie>=0;ie--){const ae=J[ie];if(ae.element===e){ee=ae;break}}ee&&!ee.allowOnlyTimelineStyles()&&ee.setStyles([a],null,j.errors,l)}return J.length?J.map(ee=>ee.buildKeyframes()):[Pg(e,[],[],[],0,X,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const i of t){const s=i?.delay;if(s){const o="number"==typeof s?s:zi(yl(s,i?.params??{},e.errors));r.delayNextStep(o)}}}_visitSubInstructions(t,e,r){let s=e.currentTimeline.currentTime;const o=null!=r.duration?zi(r.duration):null,a=null!=r.delay?zi(r.delay):null;return 0!==o&&t.forEach(l=>{const g=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,g.duration+g.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),br(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const s=t.options;if(s&&(s.params||s.delay)&&(i=e.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Yu);const o=zi(s.delay);i.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>br(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?zi(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),br(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Vu(e.params?yl(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(r.duration),this.visitStyle(s,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(s):r.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,s=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+s),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},s=i.delay?zi(i.delay):0;s&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Yu);let o=r;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((g,A)=>{e.currentQueryIndex=A;const j=e.createSubContext(t.options,g);s&&j.delayNextStep(s),g===e.element&&(l=j.currentTimeline),br(this,t.animation,j),j.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,j.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const A=e.currentTimeline;l&&A.delayNextStep(l);const j=A.currentTime;br(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-j+(i.startTime-r.currentTimeline.startTime)}}const Yu={};class kg{constructor(t,e,r,i,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Yu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Xu(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=zi(r.duration)),null!=r.delay&&(i.delay=zi(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=yl(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,s=new kg(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Yu,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},s=new XU(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,s,o){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(zU,"."+this._enterClassName)).replace($U,"."+this._leaveClassName);let g=this._driver.query(this.element,t,1!=r);0!==r&&(g=r<0?g.slice(g.length+r,g.length):g.slice(0,r)),a.push(...g)}return!s&&0==a.length&&o.push(function JB(n){return new fe(3014,!1)}()),a}}class Xu{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Xu(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Ki),this._currentKeyframe.set(e,Ki);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);const s=i&&i.params||{},o=function QU(n,t){const e=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||t.keys();for(let s of r)e.set(s,Ki)}else ds(i,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const g=yl(l,s,r);this._pendingStyles.set(a,g),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ki),this._updateStyle(a,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const g=ds(a,new Map,this._backFill);g.forEach((A,j)=>{A===_g?t.add(j):A===Ki&&e.add(j)}),r||g.set("offset",l/this.duration),i.push(g)});const s=t.size?Hu(t.values()):[],o=e.size?Hu(e.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return Pg(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class XU extends Xu{constructor(t,e,r,i,s,o,a=!1){super(t,e,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=r+e,a=e/o,l=ds(t[0]);l.set("offset",0),s.push(l);const g=ds(t[0]);g.set("offset",KC(a)),s.push(g);const A=t.length-1;for(let j=1;j<=A;j++){let X=ds(t[j]);const J=X.get("offset");X.set("offset",KC((e+J*r)/o)),s.push(X)}r=o,e=0,i="",t=s}return Pg(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function KC(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Fg{}const ZU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qU extends Fg{normalizePropertyName(t,e){return Ig(t)}normalizeStyleValue(t,e,r,i){let s="";const o=r.toString().trim();if(ZU.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function jB(n,t){return new fe(3005,!1)}())}return o+s}}function zC(n,t,e,r,i,s,o,a,l,g,A,j,X){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:g,postStyleProps:A,totalTime:j,errors:X}}const Ng={};class WC{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function JU(n,t,e,r,i){return n.some(s=>s(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,s,o,a,l,g,A){const j=[],X=this.ast.options&&this.ast.options.params||Ng,ee=this.buildStyles(r,a&&a.params||Ng,j),ie=l&&l.params||Ng,ae=this.buildStyles(i,ie,j),le=new Set,ve=new Map,de=new Map,Ae="void"===i,ht={params:eV(ie,X),delay:this.ast.options?.delay},pt=A?[]:Lg(t,e,this.ast.animation,s,o,ee,ae,ht,g,j);let Ln=0;if(pt.forEach(qi=>{Ln=Math.max(qi.duration+qi.delay,Ln)}),j.length)return zC(e,this._triggerName,r,i,Ae,ee,ae,[],[],ve,de,Ln,j);pt.forEach(qi=>{const Ji=qi.element,_x=Er(ve,Ji,new Set);qi.preStyleProps.forEach(no=>_x.add(no));const ql=Er(de,Ji,new Set);qi.postStyleProps.forEach(no=>ql.add(no)),Ji!==e&&le.add(Ji)});const Zi=Hu(le.values());return zC(e,this._triggerName,r,i,Ae,ee,ae,pt,Zi,ve,de,Ln)}}function eV(n,t){const e=vl(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class tV{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,i=vl(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=yl(o,i,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),r.set(a,o)})}),r}}class rV{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new tV(i.style,i.options&&i.options.params||{},r))}),$C(this.states,"true","1"),$C(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new WC(t,i,this.states))}),this.fallbackTransition=function iV(n,t,e){return new WC(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(o=>o.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function $C(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const sV=new $u;class oV{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],i=[],s=Rg(this._driver,e,r,i);if(r.length)throw function oU(n){return new fe(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,r){const i=t.element,s=TC(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=Lg(this._driver,e,s,Mg,Nu,new Map,new Map,r,sV,i),o.forEach(A=>{const j=Er(a,A.element,new Map);A.postStyleProps.forEach(X=>j.set(X,null))})):(i.push(function aU(){return new fe(3300,!1)}()),o=[]),i.length)throw function lU(n){return new fe(3504,!1)}();a.forEach((A,j)=>{A.forEach((X,J)=>{A.set(J,this._driver.computeStyle(j,J,Ki))})});const g=us(o.map(A=>{const j=a.get(A.element);return this._buildPlayer(A,new Map,j)}));return this._playersById.set(t,g),g.onDestroy(()=>this.destroy(t)),this.players.push(g),g}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function cU(n){return new fe(3301,!1)}();return e}listen(t,e,r,i){const s=Dg(e,"","","");return Eg(this._getPlayer(t),r,s,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const s=this._getPlayer(t);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const YC="ng-animate-queued",Bg="ng-animate-disabled",dV=[],XC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Br="__ng_removed";class Ug{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function mV(n){return n??null}(r?t.value:t),r){const s=vl(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const El="void",Vg=new Ug(El);class fV{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ur(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw function uU(n,t){return new fe(3302,!1)}();if(null==r||0==r.length)throw function dU(n){return new fe(3303,!1)}();if(!function vV(n){return"start"==n||"done"==n}(r))throw function hU(n,t){return new fe(3400,!1)}();const s=Er(this._elementListeners,t,[]),o={name:e,phase:r,callback:i};s.push(o);const a=Er(this._engine.statesByElement,t,new Map);return a.has(e)||(Ur(t,Bu),Ur(t,Bu+"-"+e),a.set(e,Vg)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function fU(n){return new fe(3401,!1)}();return e}trigger(t,e,r,i=!0){const s=this._getTrigger(e),o=new Hg(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Ur(t,Bu),Ur(t,Bu+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const g=new Ug(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&g.absorbOptions(l.options),a.set(e,g),l||(l=Vg),g.value!==El&&l.value===g.value){if(!function EV(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const s=e[i];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,g.params)){const ie=[],ae=s.matchStyles(l.value,l.params,ie),le=s.matchStyles(g.value,g.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{js(t,ae),vi(t,le)})}return}const X=Er(this._engine.playersByElement,t,[]);X.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==e&&ie.queued&&ie.destroy()});let J=s.matchTransition(l.value,g.value,t,g.params),ee=!1;if(!J){if(!i)return;J=s.fallbackTransition,ee=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:J,fromState:l,toState:g,player:o,isFallbackTransition:ee}),ee||(Ur(t,YC),o.onStart(()=>{Qo(t,YC)})),o.onDone(()=>{let ie=this.players.indexOf(o);ie>=0&&this.players.splice(ie,1);const ae=this._engine.playersByElement.get(t);if(ae){let le=ae.indexOf(o);le>=0&&ae.splice(le,1)}}),this.players.push(o),X.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Uu,!0);r.forEach(i=>{if(i[Br])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,g)=>{if(o.set(g,l.value),this._triggers.has(g)){const A=this.trigger(t,g,El,i);A&&a.push(A)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),r&&us(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,g=r.get(o)||Vg,A=new Ug(El),j=new Hg(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:g,toState:A,player:j,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(t):[];if(s&&s.length)i=!0;else{let o=t;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Br];(!s||s===XC)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Ur(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=Dg(s,r.triggerName,r.fromState.value,r.toState.value);l._data=t,Eg(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class pV{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new fV(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=i.get(a);if(l){const g=r.indexOf(l);r.splice(g+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&e.add(s)}return e}trigger(t,e,r,i){if(Qu(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!Qu(e))return;const s=e[Br];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ur(t,Bg)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Qo(t,Bg))}removeNode(t,e,r,i){if(Qu(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,s){this.collectedLeaveElements.push(e),e[Br]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,r,i,s){return Qu(e)?this._fetchNamespace(t).listen(e,r,i,s):()=>{}}_buildInstruction(t,e,r,i,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,Uu,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,wg,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return us(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Br];if(e&&e.setForRemoval){if(t[Br]=XC,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Bg)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ur(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?us(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function pU(n){return new fe(3402,!1)}()}_flushAnimations(t,e){const r=new $u,i=[],s=new Map,o=[],a=new Map,l=new Map,g=new Map,A=new Set;this.disabledNodes.forEach(Oe=>{A.add(Oe);const Le=this.driver.query(Oe,".ng-animate-queued",!0);for(let Ue=0;Ue<Le.length;Ue++)A.add(Le[Ue])});const j=this.bodyNode,X=Array.from(this.statesByElement.keys()),J=qC(X,this.collectedEnterElements),ee=new Map;let ie=0;J.forEach((Oe,Le)=>{const Ue=Mg+ie++;ee.set(Le,Ue),Oe.forEach(ft=>Ur(ft,Ue))});const ae=[],le=new Set,ve=new Set;for(let Oe=0;Oe<this.collectedLeaveElements.length;Oe++){const Le=this.collectedLeaveElements[Oe],Ue=Le[Br];Ue&&Ue.setForRemoval&&(ae.push(Le),le.add(Le),Ue.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(ft=>le.add(ft)):ve.add(Le))}const de=new Map,Ae=qC(X,Array.from(le));Ae.forEach((Oe,Le)=>{const Ue=Nu+ie++;de.set(Le,Ue),Oe.forEach(ft=>Ur(ft,Ue))}),t.push(()=>{J.forEach((Oe,Le)=>{const Ue=ee.get(Le);Oe.forEach(ft=>Qo(ft,Ue))}),Ae.forEach((Oe,Le)=>{const Ue=de.get(Le);Oe.forEach(ft=>Qo(ft,Ue))}),ae.forEach(Oe=>{this.processLeaveNode(Oe)})});const ht=[],pt=[];for(let Oe=this._namespaceList.length-1;Oe>=0;Oe--)this._namespaceList[Oe].drainQueuedTransitions(e).forEach(Ue=>{const ft=Ue.player,yn=Ue.element;if(ht.push(ft),this.collectedEnterElements.length){const kn=yn[Br];if(kn&&kn.setForMove){if(kn.previousTriggersValues&&kn.previousTriggersValues.has(Ue.triggerName)){const ro=kn.previousTriggersValues.get(Ue.triggerName),Gr=this.statesByElement.get(Ue.element);if(Gr&&Gr.has(Ue.triggerName)){const lh=Gr.get(Ue.triggerName);lh.value=ro,Gr.set(Ue.triggerName,lh)}}return void ft.destroy()}}const Si=!j||!this.driver.containsElement(j,yn),Sr=de.get(yn),_s=ee.get(yn),zt=this._buildInstruction(Ue,r,_s,Sr,Si);if(zt.errors&&zt.errors.length)return void pt.push(zt);if(Si)return ft.onStart(()=>js(yn,zt.fromStyles)),ft.onDestroy(()=>vi(yn,zt.toStyles)),void i.push(ft);if(Ue.isFallbackTransition)return ft.onStart(()=>js(yn,zt.fromStyles)),ft.onDestroy(()=>vi(yn,zt.toStyles)),void i.push(ft);const bx=[];zt.timelines.forEach(kn=>{kn.stretchStartingKeyframe=!0,this.disabledNodes.has(kn.element)||bx.push(kn)}),zt.timelines=bx,r.append(yn,zt.timelines),o.push({instruction:zt,player:ft,element:yn}),zt.queriedElements.forEach(kn=>Er(a,kn,[]).push(ft)),zt.preStyleProps.forEach((kn,ro)=>{if(kn.size){let Gr=l.get(ro);Gr||l.set(ro,Gr=new Set),kn.forEach((lh,yv)=>Gr.add(yv))}}),zt.postStyleProps.forEach((kn,ro)=>{let Gr=g.get(ro);Gr||g.set(ro,Gr=new Set),kn.forEach((lh,yv)=>Gr.add(yv))})});if(pt.length){const Oe=[];pt.forEach(Le=>{Oe.push(function gU(n,t){return new fe(3505,!1)}())}),ht.forEach(Le=>Le.destroy()),this.reportError(Oe)}const Ln=new Map,Zi=new Map;o.forEach(Oe=>{const Le=Oe.element;r.has(Le)&&(Zi.set(Le,Le),this._beforeAnimationBuild(Oe.player.namespaceId,Oe.instruction,Ln))}),i.forEach(Oe=>{const Le=Oe.element;this._getPreviousPlayers(Le,!1,Oe.namespaceId,Oe.triggerName,null).forEach(ft=>{Er(Ln,Le,[]).push(ft),ft.destroy()})});const qi=ae.filter(Oe=>eS(Oe,l,g)),Ji=new Map;ZC(Ji,this.driver,ve,g,Ki).forEach(Oe=>{eS(Oe,l,g)&&qi.push(Oe)});const ql=new Map;J.forEach((Oe,Le)=>{ZC(ql,this.driver,new Set(Oe),l,_g)}),qi.forEach(Oe=>{const Le=Ji.get(Oe),Ue=ql.get(Oe);Ji.set(Oe,new Map([...Array.from(Le?.entries()??[]),...Array.from(Ue?.entries()??[])]))});const no=[],yx=[],Ex={};o.forEach(Oe=>{const{element:Le,player:Ue,instruction:ft}=Oe;if(r.has(Le)){if(A.has(Le))return Ue.onDestroy(()=>vi(Le,ft.toStyles)),Ue.disabled=!0,Ue.overrideTotalTime(ft.totalTime),void i.push(Ue);let yn=Ex;if(Zi.size>1){let Sr=Le;const _s=[];for(;Sr=Sr.parentNode;){const zt=Zi.get(Sr);if(zt){yn=zt;break}_s.push(Sr)}_s.forEach(zt=>Zi.set(zt,yn))}const Si=this._buildAnimation(Ue.namespaceId,ft,Ln,s,ql,Ji);if(Ue.setRealPlayer(Si),yn===Ex)no.push(Ue);else{const Sr=this.playersByElement.get(yn);Sr&&Sr.length&&(Ue.parentPlayer=us(Sr)),i.push(Ue)}}else js(Le,ft.fromStyles),Ue.onDestroy(()=>vi(Le,ft.toStyles)),yx.push(Ue),A.has(Le)&&i.push(Ue)}),yx.forEach(Oe=>{const Le=s.get(Oe.element);if(Le&&Le.length){const Ue=us(Le);Oe.setRealPlayer(Ue)}}),i.forEach(Oe=>{Oe.parentPlayer?Oe.syncPlayerEvents(Oe.parentPlayer):Oe.destroy()});for(let Oe=0;Oe<ae.length;Oe++){const Le=ae[Oe],Ue=Le[Br];if(Qo(Le,Nu),Ue&&Ue.hasAnimation)continue;let ft=[];if(a.size){let Si=a.get(Le);Si&&Si.length&&ft.push(...Si);let Sr=this.driver.query(Le,wg,!0);for(let _s=0;_s<Sr.length;_s++){let zt=a.get(Sr[_s]);zt&&zt.length&&ft.push(...zt)}}const yn=ft.filter(Si=>!Si.destroyed);yn.length?_V(this,Le,yn):this.processLeaveNode(Le)}return ae.length=0,no.forEach(Oe=>{this.players.push(Oe),Oe.onDone(()=>{Oe.destroy();const Le=this.players.indexOf(Oe);this.players.splice(Le,1)}),Oe.play()}),no}elementContainsData(t,e){let r=!1;const i=e[Br];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==El;a.forEach(g=>{g.queued||!l&&g.triggerName!=i||o.push(g)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(t,e,r){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const g=l.element,A=g!==s,j=Er(r,g,[]);this._getPreviousPlayers(g,A,o,a,e.toState).forEach(J=>{const ee=J.getRealPlayer();ee.beforeDestroy&&ee.beforeDestroy(),J.destroy(),j.push(J)})}js(s,e.fromStyles)}_buildAnimation(t,e,r,i,s,o){const a=e.triggerName,l=e.element,g=[],A=new Set,j=new Set,X=e.timelines.map(ee=>{const ie=ee.element;A.add(ie);const ae=ie[Br];if(ae&&ae.removedBeforeQueried)return new ml(ee.duration,ee.delay);const le=ie!==l,ve=function yV(n){const t=[];return JC(n,t),t}((r.get(ie)||dV).map(Ln=>Ln.getRealPlayer())).filter(Ln=>!!Ln.element&&Ln.element===ie),de=s.get(ie),Ae=o.get(ie),ht=TC(0,this._normalizer,0,ee.keyframes,de,Ae),pt=this._buildPlayer(ee,ht,ve);if(ee.subTimeline&&i&&j.add(ie),le){const Ln=new Hg(t,a,ie);Ln.setRealPlayer(pt),g.push(Ln)}return pt});g.forEach(ee=>{Er(this.playersByQueriedElement,ee.element,[]).push(ee),ee.onDone(()=>function gV(n,t,e){let r=n.get(t);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,ee.element,ee))}),A.forEach(ee=>Ur(ee,LC));const J=us(X);return J.onDestroy(()=>{A.forEach(ee=>Qo(ee,LC)),vi(l,e.toStyles)}),j.forEach(ee=>{Er(i,ee,[]).push(J)}),J}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new ml(t.duration,t.delay)}}class Hg{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new ml,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Eg(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Er(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Qu(n){return n&&1===n.nodeType}function QC(n,t){const e=n.style.display;return n.style.display=t??"none",e}function ZC(n,t,e,r,i){const s=[];e.forEach(l=>s.push(QC(l)));const o=[];r.forEach((l,g)=>{const A=new Map;l.forEach(j=>{const X=t.computeStyle(g,j,i);A.set(j,X),(!X||0==X.length)&&(g[Br]=hV,o.push(g))}),n.set(g,A)});let a=0;return e.forEach(l=>QC(l,s[a++])),o}function qC(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=1,i=new Set(t),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;const g=a.parentNode;return l=e.has(g)?g:i.has(g)?r:o(g),s.set(a,l),l}return t.forEach(a=>{const l=o(a);l!==r&&e.get(l).push(a)}),e}function Ur(n,t){n.classList?.add(t)}function Qo(n,t){n.classList?.remove(t)}function _V(n,t,e){us(e).onDone(()=>n.processLeaveNode(t))}function JC(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof CC?JC(r.players,t):t.push(r)}}function eS(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(s=>i.add(s)):t.set(n,r),e.delete(n),!0}class Zu{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new pV(t,e,r),this._timelineEngine=new oV(t,e,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(t,e,r,i,s){const o=t+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],g=[],A=Rg(this._driver,s,l,g);if(l.length)throw function iU(n,t){return new fe(3404,!1)}();a=function nV(n,t,e){return new rV(n,t,e)}(i,A,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[s,o]=MC(r);this._timelineEngine.command(s,e,o,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,s){if("@"==r.charAt(0)){const[o,a]=MC(r);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,r,i,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let DV=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&vi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vi(this._element,this._initialStyles),this._endStyles&&(vi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(js(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(js(this._element,this._endStyles),this._endStyles=null),vi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function jg(n){let t=null;return n.forEach((e,r)=>{(function CV(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class tS{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:VC(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class SV{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return IC(t,e)}getParentElement(t){return Sg(t)}query(t,e,r){return RC(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const g=new Map,A=o.filter(J=>J instanceof tS);(function xU(n,t){return 0===n||0===t})(r,i)&&A.forEach(J=>{J.currentSnapshot.forEach((ee,ie)=>g.set(ie,ee))});let j=function SU(n){return n.length?n[0]instanceof Map?n:n.map(t=>kC(t)):[]}(e).map(J=>ds(J));j=function AU(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<t.length;s++){let o=t[s];i.forEach(a=>o.set(a,VC(n,a)))}}return t}(t,j,g);const X=function bV(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=jg(t[0]),t.length>1&&(r=jg(t[t.length-1]))):t instanceof Map&&(e=jg(t)),e||r?new DV(n,e,r):null}(t,j);return new tS(t,j,l,X)}}let TV=(()=>{class n extends yC{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:zr.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?bC(e):e;return nS(this._renderer,null,r,"register",[i]),new MV(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(oe(Va),oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class MV extends kB{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new wV(this._id,t,e||{},this._renderer)}}class wV{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return nS(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function nS(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const rS="@.disabled";let xV=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,r){const s=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(s);return A||(A=new iS("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,A)),A}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=A=>{Array.isArray(A)?A.forEach(l):this.engine.registerTrigger(o,a,e,A.name,A)};return r.data.animation.forEach(l),new AV(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(oe(Va),oe(Zu),oe(Ye))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class iS{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==rS?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class AV extends iS{constructor(t,e,r,i,s){super(e,r,i,s),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==rS?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function IV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function RV(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,e,r)}}const sS=[{provide:yC,useClass:TV},{provide:Fg,useFactory:function PV(){return new qU}},{provide:Zu,useClass:(()=>{class n extends Zu{constructor(e,r,i,s){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(oe(We),oe(Tg),oe(Fg),oe(Wo))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})()},{provide:Va,useFactory:function LV(n,t,e){return new xV(n,t,e)},deps:[Pu,Zu,Ye]}],Gg=[{provide:Tg,useFactory:()=>new SV},{provide:Lr,useValue:"BrowserAnimations"},...sS],oS=[{provide:Tg,useClass:OC},{provide:Lr,useValue:"NoopAnimations"},...sS];let kV=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?oS:Gg}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:Gg,imports:[tC]}),n})();class Vr extends F{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Ju=Es(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:FV}=Array,{getPrototypeOf:NV,prototype:BV,keys:UV}=Object;function aS(n){if(1===n.length){const t=n[0];if(FV(t))return{args:t,keys:null};if(function VV(n){return n&&"object"==typeof n&&NV(n)===BV}(t)){const e=UV(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:HV}=Array;function Kg(n){return Q(t=>function jV(n,t){return HV(t)?n(...t):n(t)}(n,t))}function lS(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function zg(...n){const t=va(n),e=Ev(n),{args:r,keys:i}=aS(n);if(0===r.length)return nn([],t);const s=new p(function GV(n,t,e=u){return r=>{cS(t,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)cS(t,()=>{const g=nn(n[l],t);let A=!1;g.subscribe(Z(r,j=>{s[l]=j,A||(A=!0,a--),a||r.next(e(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,t,i?o=>lS(i,o):u));return e?s.pipe(Kg(e)):s}function cS(n,t,e){n?Kr(e,n,t):t()}function ed(...n){return function KV(){return es(1)}()(nn(n,va(n)))}function td(n){return new p(t=>{vn(n()).subscribe(t)})}function Zo(n,t){const e=He(n)?n:()=>n,r=i=>i.error(e());return new p(t?i=>t.schedule(r,0,i):r)}function Wg(){return $((n,t)=>{let e=null;n._refCount++;const r=Z(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,s=e;e=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class uS extends p{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,K(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new O;const e=this.getSubject();t.add(this.source.subscribe(Z(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=O.EMPTY)}return t}refCount(){return Wg()(this)}}function Hr(n,t){return $((e,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();e.subscribe(Z(r,l=>{i?.unsubscribe();let g=0;const A=s++;vn(n(l,A)).subscribe(i=Z(r,j=>r.next(t?t(l,j,A,g++):j),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function gn(n){return n<=0?()=>Jn:$((t,e)=>{let r=0;t.subscribe(Z(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Wi(...n){const t=va(n);return $((e,r)=>{(t?ed(n,e,t):ed(n,e)).subscribe(r)})}function nd(n){return $((t,e)=>{let r=!1;t.subscribe(Z(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function dS(n=zV){return $((t,e)=>{let r=!1;t.subscribe(Z(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function zV(){return new Ju}function hs(n,t){const e=arguments.length>=2;return r=>r.pipe(n?_n((i,s)=>n(i,s,r)):u,gn(1),e?nd(t):dS(()=>new Ju))}function ln(n,t,e){const r=He(n)||t||e?{next:n,error:t,complete:e}:n;return r?$((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Z(s,l=>{var g;null===(g=r.next)||void 0===g||g.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var g;a=!1,null===(g=r.error)||void 0===g||g.call(r,l),s.error(l)},()=>{var l,g;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):u}function $i(n){return $((t,e)=>{let s,r=null,i=!1;r=t.subscribe(Z(e,void 0,void 0,o=>{s=vn(n(o,$i(n)(t))),r?(r.unsubscribe(),r=null,s.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(e))})}function hS(n,t){return $(function WV(n,t,e,r,i){return(s,o)=>{let a=e,l=t,g=0;s.subscribe(Z(o,A=>{const j=g++;l=a?n(l,A,j):(a=!0,A),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,t,arguments.length>=2,!0))}function $g(n){return n<=0?()=>Jn:$((t,e)=>{let r=[];t.subscribe(Z(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function fS(n,t){const e=arguments.length>=2;return r=>r.pipe(n?_n((i,s)=>n(i,s,r)):u,$g(1),e?nd(t):dS(()=>new Ju))}function pS(n,t=!1){return $((e,r)=>{let i=0;e.subscribe(Z(r,s=>{const o=n(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}function rd(n){return $((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Xe="primary",bl=Symbol("RouteTitle");class YV{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qo(n){return new YV(n)}function XV(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _i(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!gS(n[i],t[i]))return!1;return!0}function gS(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,s)=>r[s]===i)}return n===t}function mS(n){return Array.prototype.concat.apply([],n)}function vS(n){return n.length>0?n[n.length-1]:null}function Cn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function fs(n){return ep(n)?n:$a(n)?nn(Promise.resolve(n)):Pe(n)}const id=!1,ZV={exact:function ES(n,t,e){if(!Ks(n.segments,t.segments)||!sd(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!ES(n.children[r],t.children[r],e))return!1;return!0},subset:bS},_S={exact:function qV(n,t){return _i(n,t)},subset:function JV(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>gS(n[e],t[e]))},ignored:()=>!0};function yS(n,t,e){return ZV[e.paths](n.root,t.root,e.matrixParams)&&_S[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function bS(n,t,e){return DS(n,t,t.segments,e)}function DS(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Ks(i,e)||t.hasChildren()||!sd(i,e,r))}if(n.segments.length===e.length){if(!Ks(n.segments,e)||!sd(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!bS(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Ks(n.segments,i)&&sd(n.segments,i,r)&&n.children[Xe])&&DS(n.children[Xe],t,s,r)}}function sd(n,t,e){return t.every((r,i)=>_S[e](n[i].parameters,r.parameters))}class ps{constructor(t=new ot([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qo(this.queryParams)),this._queryParamMap}toString(){return n2.serialize(this)}}class ot{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Cn(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return od(this)}}class Dl{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qo(this.parameters)),this._parameterMap}toString(){return TS(this)}}function Ks(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let Cl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(){return new Yg},providedIn:"root"}),n})();class Yg{parse(t){const e=new h2(t);return new ps(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Sl(t.root,!0)}`,r=function o2(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${ad(e)}=${ad(i)}`).join("&"):`${ad(e)}=${ad(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function r2(n){return encodeURI(n)}(t.fragment)}`:""}`}}const n2=new Yg;function od(n){return n.segments.map(t=>TS(t)).join("/")}function Sl(n,t){if(!n.hasChildren())return od(n);if(t){const e=n.children[Xe]?Sl(n.children[Xe],!1):"",r=[];return Cn(n.children,(i,s)=>{s!==Xe&&r.push(`${s}:${Sl(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function t2(n,t){let e=[];return Cn(n.children,(r,i)=>{i===Xe&&(e=e.concat(t(r,i)))}),Cn(n.children,(r,i)=>{i!==Xe&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Xe?[Sl(n.children[Xe],!1)]:[`${i}:${Sl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xe]?`${od(n)}/${e[0]}`:`${od(n)}/(${e.join("//")})`}}function CS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(n){return CS(n).replace(/%3B/gi,";")}function Xg(n){return CS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ld(n){return decodeURIComponent(n)}function SS(n){return ld(n.replace(/\+/g,"%20"))}function TS(n){return`${Xg(n.path)}${function s2(n){return Object.keys(n).map(t=>`;${Xg(t)}=${Xg(n[t])}`).join("")}(n.parameters)}`}const a2=/^[^\/()?;=#]+/;function cd(n){const t=n.match(a2);return t?t[0]:""}const l2=/^[^=?&#]+/,u2=/^[^&#]+/;class h2{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Xe]=new ot(t,e)),r}parseSegment(){const t=cd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new fe(4009,id);return this.capture(t),new Dl(ld(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=cd(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=cd(this.remaining);i&&(r=i,this.capture(r))}t[ld(e)]=ld(r)}parseQueryParam(t){const e=function c2(n){const t=n.match(l2);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=function d2(n){const t=n.match(u2);return t?t[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=SS(e),s=SS(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new fe(4010,id);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Xe);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Xe]:new ot([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new fe(4011,id)}}function Qg(n){return n.segments.length>0?new ot([],{[Xe]:n}):n}function ud(n){const t={};for(const r of Object.keys(n.children)){const s=ud(n.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function f2(n){if(1===n.numberOfChildren&&n.children[Xe]){const t=n.children[Xe];return new ot(n.segments.concat(t.segments),t.children)}return n}(new ot(n.segments,t))}function zs(n){return n instanceof ps}const Zg=!1;function p2(n,t,e,r,i){if(0===e.length)return Jo(t.root,t.root,t.root,r,i);const s=function IS(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new AS(!0,0,n);let t=0,e=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Cn(s.outlets,(l,g)=>{a[g]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new AS(e,t,r)}(e);return s.toRoot()?Jo(t.root,t.root,new ot([],{}),r,i):function o(l){const g=function m2(n,t,e,r){if(n.isAbsolute)return new ea(t.root,!0,0);if(-1===r)return new ea(e,e===t.root,0);return function RS(n,t,e){let r=n,i=t,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new fe(4005,Zg&&"Invalid number of '../'");i=r.segments.length}return new ea(r,!1,i-s)}(e,r+(Tl(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,l),A=g.processChildren?ta(g.segmentGroup,g.index,s.commands):qg(g.segmentGroup,g.index,s.commands);return Jo(t.root,g.segmentGroup,A,r,i)}(n.snapshot?._lastPathIndex)}function Tl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ml(n){return"object"==typeof n&&null!=n&&n.outlets}function Jo(n,t,e,r,i){let o,s={};r&&Cn(r,(l,g)=>{s[g]=Array.isArray(l)?l.map(A=>`${A}`):`${l}`}),o=n===t?e:xS(n,t,e);const a=Qg(ud(o));return new ps(a,s,i)}function xS(n,t,e){const r={};return Cn(n.children,(i,s)=>{r[s]=i===t?e:xS(i,t,e)}),new ot(n.segments,r)}class AS{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Tl(r[0]))throw new fe(4003,Zg&&"Root segment cannot have matrix parameters");const i=r.find(Ml);if(i&&i!==vS(r))throw new fe(4004,Zg&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ea{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function qg(n,t,e){if(n||(n=new ot([],{})),0===n.segments.length&&n.hasChildren())return ta(n,t,e);const r=function _2(n,t,e){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return s;const o=n.segments[i],a=e[r];if(Ml(a))break;const l=`${a}`,g=r<e.length-1?e[r+1]:null;if(i>0&&void 0===l)break;if(l&&g&&"object"==typeof g&&void 0===g.outlets){if(!PS(l,g,o))return s;r+=2}else{if(!PS(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new ot(n.segments.slice(0,r.pathIndex),{});return s.children[Xe]=new ot(n.segments.slice(r.pathIndex),n.children),ta(s,0,i)}return r.match&&0===i.length?new ot(n.segments,{}):r.match&&!n.hasChildren()?Jg(n,t,e):r.match?ta(n,0,i):Jg(n,t,e)}function ta(n,t,e){if(0===e.length)return new ot(n.segments,{});{const r=function v2(n){return Ml(n[0])?n[0].outlets:{[Xe]:n}}(e),i={};return!r[Xe]&&n.children[Xe]&&1===n.numberOfChildren&&0===n.children[Xe].segments.length?ta(n.children[Xe],t,e):(Cn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=qg(n.children[o],t,s))}),Cn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ot(n.segments,i))}}function Jg(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const s=e[i];if(Ml(s)){const l=y2(s.outlets);return new ot(r,l)}if(0===i&&Tl(e[0])){r.push(new Dl(n.segments[t].path,OS(e[0]))),i++;continue}const o=Ml(s)?s.outlets[Xe]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&Tl(a)?(r.push(new Dl(o,OS(a))),i+=2):(r.push(new Dl(o,{})),i++)}return new ot(r,{})}function y2(n){const t={};return Cn(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Jg(new ot([],{}),0,e))}),t}function OS(n){const t={};return Cn(n,(e,r)=>t[r]=`${e}`),t}function PS(n,t,e){return n==e.path&&_i(t,e.parameters)}const wl="imperative";class yi{constructor(t,e){this.id=t,this.url=e}}class em extends yi{constructor(t,e,r="imperative",i=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ws extends yi{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dd extends yi{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hd extends yi{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=16}}class tm extends yi{constructor(t,e,r,i){super(t,e),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class E2 extends yi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b2 extends yi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D2 extends yi{constructor(t,e,r,i,s){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class C2 extends yi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S2 extends yi{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T2{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class M2{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class w2{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x2{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A2{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I2{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LS{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let P2=(()=>{class n{createUrlTree(e,r,i,s,o,a){return p2(e||r.root,i,s,o,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),k2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(t){return P2.\u0275fac(t)},providedIn:"root"}),n})();class kS{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=nm(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=nm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=rm(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return rm(t,this._root).map(e=>e.value)}}function nm(n,t){if(n===t.value)return t;for(const e of t.children){const r=nm(n,e);if(r)return r}return null}function rm(n,t){if(n===t.value)return[t];for(const e of t.children){const r=rm(n,e);if(r.length)return r.unshift(t),r}return[]}class Yi{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function na(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class FS extends kS{constructor(t,e){super(t),this.snapshot=e,im(this,t)}toString(){return this.snapshot.toString()}}function NS(n,t){const e=function F2(n,t){const o=new fd([],{},{},"",{},Xe,t,null,n.root,-1,{});return new US("",new Yi(o,[]))}(n,t),r=new Vr([new Dl("",{})]),i=new Vr({}),s=new Vr({}),o=new Vr({}),a=new Vr(""),l=new $s(r,i,o,a,s,Xe,t,e.root);return l.snapshot=e.root,new FS(new Yi(l,[]),e)}class $s{constructor(t,e,r,i,s,o,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Q(g=>g[bl]))??Pe(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Q(t=>qo(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Q(t=>qo(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function BS(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],s=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function N2(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class fd{get title(){return this.data?.[bl]}constructor(t,e,r,i,s,o,a,l,g,A,j){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=g,this._lastPathIndex=A,this._resolve=j}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class US extends kS{constructor(t,e){super(e),this.url=t,im(this,e)}toString(){return VS(this._root)}}function im(n,t){t.value._routerState=n,t.children.forEach(e=>im(n,e))}function VS(n){const t=n.children.length>0?` { ${n.children.map(VS).join(", ")} } `:"";return`${n.value}${t}`}function sm(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,_i(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),_i(t.params,e.params)||n.params.next(e.params),function QV(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!_i(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),_i(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function om(n,t){const e=_i(n.params,t.params)&&function e2(n,t){return Ks(n,t)&&n.every((e,r)=>_i(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||om(n.parent,t.parent))}function xl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function U2(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xl(n,r,i);return xl(n,r)})}(n,t,e);return new Yi(r,i)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>xl(n,a)),o}}const r=function V2(n){return new $s(new Vr(n.url),new Vr(n.params),new Vr(n.queryParams),new Vr(n.fragment),new Vr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(s=>xl(n,s));return new Yi(r,i)}}const am="ngNavigationCancelingError";function HS(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=zs(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=jS(!1,0,t);return i.url=e,i.navigationBehaviorOptions=r,i}function jS(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[am]=!0,r.cancellationCode=t,e&&(r.url=e),r}function GS(n){return KS(n)&&zs(n.url)}function KS(n){return n&&n[am]}class H2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Al,this.attachRef=null}}let Al=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new H2,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pd=!1;let lm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xe,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.parentContexts=Qe(Al),this.location=Qe(ir),this.changeDetector=Qe(zn),this.environmentInjector=Qe(ui)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,pd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,pd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,pd);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new fe(4013,pd);this._activatedRoute=e;const i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new j2(e,a,i.injector);if(r&&function G2(n){return!!n.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(o);this.activated=i.createComponent(g,i.length,l)}else this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bn]}),n})();class j2{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===$s?this.route:t===Al?this.childContexts:this.parent.get(t,e)}}let cm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Lt({type:n,selectors:[["ng-component"]],standalone:!0,features:[KE],decls:1,vars:0,template:function(e,r){1&e&&yt(0,"router-outlet")},dependencies:[lm],encapsulation:2}),n})();function zS(n,t){return n.providers&&!n._injector&&(n._injector=su(n.providers,t,`Route: ${n.path}`)),n._injector??t}function dm(n){const t=n.children&&n.children.map(dm),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Xe&&(e.component=cm),e}function jr(n){return n.outlet||Xe}function WS(n,t){const e=n.filter(r=>jr(r)===t);return e.push(...n.filter(r=>jr(r)!==t)),e}function Il(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Y2{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),sm(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=na(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Cn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){const i=t.value,s=e?e.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=na(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=na(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=na(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new I2(s.value.snapshot))}),t.children.length&&this.forwardEvent(new x2(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,s=e?e.value:null;if(sm(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),sm(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=Il(i.snapshot),l=a?.get(Ps)??null;o.attachRef=null,o.route=i,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,r)}}class $S{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gd{constructor(t,e){this.component=t,this.route=e}}function X2(n,t,e){const r=n._root;return Rl(r,t?t._root:null,e,[r.value])}function ra(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function kx(n){return null!==oc(n)}(n)?t.get(n):n:r}function Rl(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=na(t);return n.children.forEach(o=>{(function Z2(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function q2(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ks(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ks(n.url,t.url)||!_i(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!om(n,t)||!_i(n.queryParams,t.queryParams);default:return!om(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new $S(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Rl(n,t,s.component?a?a.children:null:e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gd(a.outlet.component,o))}else o&&Ol(t,a,i),i.canActivateChecks.push(new $S(r)),Rl(n,null,s.component?a?a.children:null:e,r,i)})(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),Cn(s,(o,a)=>Ol(o,e.getContext(a),i)),i}function Ol(n,t,e){const r=na(n),i=n.value;Cn(r,(s,o)=>{Ol(s,i.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new gd(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Pl(n){return"function"==typeof n}function hm(n){return n instanceof Ju||"EmptyError"===n?.name}const md=Symbol("INITIAL_VALUE");function ia(){return Hr(n=>zg(n.map(t=>t.pipe(gn(1),Wi(md)))).pipe(Q(t=>{for(const e of t)if(!0!==e){if(e===md)return md;if(!1===e||e instanceof ps)return e}return!0}),_n(t=>t!==md),gn(1)))}function YS(n){return function d(...n){return c(n)}(ln(t=>{if(zs(t))throw HS(0,t)}),Q(t=>!0===t))}const fm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XS(n,t,e,r,i){const s=pm(n,t,e);return s.matched?function gH(n,t,e,r){const i=t.canMatch;return i&&0!==i.length?Pe(i.map(o=>{const a=ra(o,n);return fs(function iH(n){return n&&Pl(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(ia(),YS()):Pe(!0)}(r=zS(t,r),t,e).pipe(Q(o=>!0===o?s:{...fm})):Pe(s)}function pm(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...fm}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const i=(t.matcher||XV)(e,n,t);if(!i)return{...fm};const s={};Cn(i.posParams,(a,l)=>{s[l]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function vd(n,t,e,r){if(e.length>0&&function _H(n,t,e){return e.some(r=>_d(n,t,r)&&jr(r)!==Xe)}(n,e,r)){const s=new ot(t,function vH(n,t,e,r){const i={};i[Xe]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&jr(s)!==Xe){const o=new ot([],{});o._sourceSegment=n,o._segmentIndexShift=t.length,i[jr(s)]=o}return i}(n,t,r,new ot(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function yH(n,t,e){return e.some(r=>_d(n,t,r))}(n,e,r)){const s=new ot(n.segments,function mH(n,t,e,r,i){const s={};for(const o of r)if(_d(n,e,o)&&!i[jr(o)]){const a=new ot([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,s[jr(o)]=a}return{...i,...s}}(n,t,e,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const i=new ot(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}function _d(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function QS(n,t,e,r){return!!(jr(n)===r||r!==Xe&&_d(t,e,n))&&("**"===n.path||pm(t,n,e).matched)}function ZS(n,t,e){return 0===t.length&&!n.children[e]}const yd=!1;class Ed{constructor(t){this.segmentGroup=t||null}}class qS{constructor(t){this.urlTree=t}}function Ll(n){return Zo(new Ed(n))}function JS(n){return Zo(new qS(n))}class CH{constructor(t,e,r,i,s){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const t=vd(this.urlTree.root,[],[],this.config).segmentGroup,e=new ot(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Xe).pipe(Q(s=>this.createUrlTree(ud(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe($i(s=>{if(s instanceof qS)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Ed?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Xe).pipe(Q(i=>this.createUrlTree(ud(i),t.queryParams,t.fragment))).pipe($i(i=>{throw i instanceof Ed?this.noMatchError(i):i}))}noMatchError(t){return new fe(4002,yd)}createUrlTree(t,e,r){const i=Qg(t);return new ps(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(Q(s=>new ot([],s))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return nn(i).pipe(as(s=>{const o=r.children[s],a=WS(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(Q(l=>({segment:l,outlet:s})))}),hS((s,o)=>(s[o.outlet]=o.segment,s),{}),fS())}expandSegment(t,e,r,i,s,o){return nn(r).pipe(as(a=>this.expandSegmentAgainstRoute(t,e,r,a,i,s,o).pipe($i(g=>{if(g instanceof Ed)return Pe(null);throw g}))),hs(a=>!!a),$i((a,l)=>{if(hm(a))return ZS(e,i,s)?Pe(new ot([],{})):Ll(e);throw a}))}expandSegmentAgainstRoute(t,e,r,i,s,o,a){return QS(i,e,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o):Ll(e):Ll(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?JS(s):this.lineralizeSegments(r,s).pipe(Qt(o=>{const a=new ot(o,{});return this.expandSegment(t,a,e,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:g,positionalParamSegments:A}=pm(e,i,s);if(!a)return Ll(e);const j=this.applyRedirectCommands(l,i.redirectTo,A);return i.redirectTo.startsWith("/")?JS(j):this.lineralizeSegments(i,j).pipe(Qt(X=>this.expandSegment(t,e,r,X.concat(g),o,!1)))}matchSegmentAgainstRoute(t,e,r,i,s){return"**"===r.path?(t=zS(r,t),r.loadChildren?(r._loadedRoutes?Pe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(Q(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ot(i,{})))):Pe(new ot(i,{}))):XS(e,r,i,t).pipe(Hr(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=r._injector??t,r,i).pipe(Qt(A=>{const j=A.injector??t,X=A.routes,{segmentGroup:J,slicedSegments:ee}=vd(e,a,l,X),ie=new ot(J.segments,J.children);if(0===ee.length&&ie.hasChildren())return this.expandChildren(j,X,ie).pipe(Q(de=>new ot(a,de)));if(0===X.length&&0===ee.length)return Pe(new ot(a,{}));const ae=jr(r)===s;return this.expandSegment(j,ie,X,ee,ae?Xe:s,!0).pipe(Q(ve=>new ot(a.concat(ve.segments),ve.children)))})):Ll(e)))}getChildConfig(t,e,r){return e.children?Pe({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Pe({routes:e._loadedRoutes,injector:e._loadedInjector}):function pH(n,t,e,r){const i=t.canLoad;return void 0===i||0===i.length?Pe(!0):Pe(i.map(o=>{const a=ra(o,n);return fs(function eH(n){return n&&Pl(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(ia(),YS())}(t,e,r).pipe(Qt(i=>i?this.configLoader.loadChildren(t,e).pipe(ln(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function bH(n){return Zo(jS(yd,3))}())):Pe({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Pe(r);if(i.numberOfChildren>1||!i.children[Xe])return t.redirectTo,Zo(new fe(4e3,yd));i=i.children[Xe]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,i){const s=this.createSegmentGroup(t,e.root,r,i);return new ps(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Cn(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=e[a]}else r[s]=i}),r}createSegmentGroup(t,e,r,i){const s=this.createSegments(t,e.segments,r,i);let o={};return Cn(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,r,i)}),new ot(s,o)}createSegments(t,e,r,i){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new fe(4001,yd);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}class TH{}class xH{constructor(t,e,r,i,s,o,a){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=vd(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Xe).pipe(Q(e=>{if(null===e)return null;const r=new fd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Yi(r,e),s=new US(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,r=BS(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,i)}processChildren(t,e,r){return nn(Object.keys(r.children)).pipe(as(i=>{const s=r.children[i],o=WS(e,i);return this.processSegmentGroup(t,o,s,i)}),hS((i,s)=>i&&s?(i.push(...s),i):null),pS(i=>null!==i),nd(null),fS(),Q(i=>{if(null===i)return null;const s=tT(i);return function AH(n){n.sort((t,e)=>t.value.outlet===Xe?-1:e.value.outlet===Xe?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,r,i,s){return nn(e).pipe(as(o=>this.processSegmentAgainstRoute(o._injector??t,o,r,i,s)),hs(o=>!!o),$i(o=>{if(hm(o))return ZS(r,i,s)?Pe([]):Pe(null);throw o}))}processSegmentAgainstRoute(t,e,r,i,s){if(e.redirectTo||!QS(e,r,i,s))return Pe(null);let o;if("**"===e.path){const a=i.length>0?vS(i).parameters:{},l=rT(r)+i.length;o=Pe({snapshot:new fd(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iT(e),jr(e),e.component??e._loadedComponent??null,e,nT(r),l,sT(e)),consumedSegments:[],remainingSegments:[]})}else o=XS(r,e,i,t).pipe(Q(({matched:a,consumedSegments:l,remainingSegments:g,parameters:A})=>{if(!a)return null;const j=rT(r)+l.length;return{snapshot:new fd(l,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iT(e),jr(e),e.component??e._loadedComponent??null,e,nT(r),j,sT(e)),consumedSegments:l,remainingSegments:g}}));return o.pipe(Hr(a=>{if(null===a)return Pe(null);const{snapshot:l,consumedSegments:g,remainingSegments:A}=a;t=e._injector??t;const j=e._loadedInjector??t,X=function IH(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:J,slicedSegments:ee}=vd(r,g,A,X.filter(ae=>void 0===ae.redirectTo));if(0===ee.length&&J.hasChildren())return this.processChildren(j,X,J).pipe(Q(ae=>null===ae?null:[new Yi(l,ae)]));if(0===X.length&&0===ee.length)return Pe([new Yi(l,[])]);const ie=jr(e)===s;return this.processSegment(j,X,J,ee,ie?Xe:s).pipe(Q(ae=>null===ae?null:[new Yi(l,ae)]))}))}}function RH(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function tT(n){const t=[],e=new Set;for(const r of n){if(!RH(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=tT(r.children);t.push(new Yi(r.value,i))}return t.filter(r=>!e.has(r))}function nT(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function rT(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function iT(n){return n.data||{}}function sT(n){return n.resolve||{}}function oT(n){return"string"==typeof n.title||null===n.title}function gm(n){return Hr(t=>{const e=n(t);return e?nn(e).pipe(Q(()=>t)):Pe(t)})}const sa=new me("ROUTES");let mm=(()=>{class n{constructor(e,r){this.injector=e,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Pe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=fs(e.loadComponent()).pipe(Q(lT),ln(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),rd(()=>{this.componentLoaders.delete(e)})),i=new uS(r,()=>new F).pipe(Wg());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Q(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,g,A=!1;Array.isArray(a)?g=a:(l=a.create(e).injector,g=mS(l.get(sa,[],ke.Self|ke.Optional)));return{routes:g.map(dm),injector:l}}),rd(()=>{this.childrenLoaders.delete(r)})),o=new uS(s,()=>new F).pipe(Wg());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(e){return fs(e()).pipe(Q(lT),Qt(i=>i instanceof jE||Array.isArray(i)?Pe(i):nn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(oe(qt),oe(Pb))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lT(n){return function VH(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Dd=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new F,this.configLoader=Qe(mm),this.environmentInjector=Qe(ui),this.urlSerializer=Qe(Cl),this.rootContexts=Qe(Al),this.navigationId=0,this.afterPreactivation=()=>Pe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new M2(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new T2(i))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new Vr({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wl,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_n(r=>0!==r.id),Q(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),Hr(r=>{let i=!1,s=!1;return Pe(r).pipe(ln(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hr(o=>{const a=e.browserUrlTree.toString(),l=!e.navigated||o.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const A="";return this.events.next(new hd(o.id,e.serializeUrl(r.rawUrl),A,0)),e.rawUrlTree=o.rawUrl,o.resolve(null),Jn}if(e.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return cT(o.source)&&(e.browserUrlTree=o.extractedUrl),Pe(o).pipe(Hr(A=>{const j=this.transitions?.getValue();return this.events.next(new em(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),j!==this.transitions?.getValue()?Jn:Promise.resolve(A)}),function SH(n,t,e,r){return Hr(i=>function DH(n,t,e,r,i){return new CH(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe(Q(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),ln(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function PH(n,t,e,r,i){return Qt(s=>function wH(n,t,e,r,i,s,o="emptyOnly"){return new xH(n,t,e,r,i,o,s).recognize().pipe(Hr(a=>null===a?function MH(n){return new p(t=>t.error(n))}(new TH):Pe(a)))}(n,t,e,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(Q(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),ln(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!A.extras.skipLocationChange){const X=e.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);e.setBrowserUrl(X,A)}e.browserUrlTree=A.urlAfterRedirects}const j=new E2(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(j)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:A,extractedUrl:j,source:X,restoredState:J,extras:ee}=o,ie=new em(A,this.urlSerializer.serialize(j),X,J);this.events.next(ie);const ae=NS(j,this.rootComponentType).snapshot;return Pe(r={...o,targetSnapshot:ae,urlAfterRedirects:j,extras:{...ee,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new hd(o.id,e.serializeUrl(r.extractedUrl),A,1)),e.rawUrlTree=o.rawUrl,o.resolve(null),Jn}}),ln(o=>{const a=new b2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Q(o=>r={...o,guards:X2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function oH(n,t){return Qt(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Pe({...e,guardsResult:!0}):function aH(n,t,e,r){return nn(n).pipe(Qt(i=>function fH(n,t,e,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Pe(s.map(a=>{const l=Il(t)??i,g=ra(a,l);return fs(function rH(n){return n&&Pl(n.canDeactivate)}(g)?g.canDeactivate(n,t,e,r):l.runInContext(()=>g(n,t,e,r))).pipe(hs())})).pipe(ia()):Pe(!0)}(i.component,i.route,e,t,r)),hs(i=>!0!==i,!0))}(o,r,i,n).pipe(Qt(a=>a&&function J2(n){return"boolean"==typeof n}(a)?function lH(n,t,e,r){return nn(t).pipe(as(i=>ed(function uH(n,t){return null!==n&&t&&t(new w2(n)),Pe(!0)}(i.route.parent,r),function cH(n,t){return null!==n&&t&&t(new A2(n)),Pe(!0)}(i.route,r),function hH(n,t,e){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Q2(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>td(()=>Pe(o.guards.map(l=>{const g=Il(o.node)??e,A=ra(l,g);return fs(function nH(n){return n&&Pl(n.canActivateChild)}(A)?A.canActivateChild(r,n):g.runInContext(()=>A(r,n))).pipe(hs())})).pipe(ia())));return Pe(s).pipe(ia())}(n,i.path,e),function dH(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Pe(!0);const i=r.map(s=>td(()=>{const o=Il(t)??e,a=ra(s,o);return fs(function tH(n){return n&&Pl(n.canActivate)}(a)?a.canActivate(t,n):o.runInContext(()=>a(t,n))).pipe(hs())}));return Pe(i).pipe(ia())}(n,i.route,e))),hs(i=>!0!==i,!0))}(r,s,n,t):Pe(a)),Q(a=>({...e,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),ln(o=>{if(r.guardsResult=o.guardsResult,zs(o.guardsResult))throw HS(0,o.guardsResult);const a=new D2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),_n(o=>!!o.guardsResult||(e.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),gm(o=>{if(o.guards.canActivateChecks.length)return Pe(o).pipe(ln(a=>{const l=new C2(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Hr(a=>{let l=!1;return Pe(a).pipe(function LH(n,t){return Qt(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Pe(e);let s=0;return nn(i).pipe(as(o=>function kH(n,t,e,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!oT(i)&&(s[bl]=i.title),function FH(n,t,e,r){const i=function NH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Pe({});const s={};return nn(i).pipe(Qt(o=>function BH(n,t,e,r){const i=Il(t)??r,s=ra(n,i);return fs(s.resolve?s.resolve(t,e):i.runInContext(()=>s(t,e)))}(n[o],t,e,r).pipe(hs(),ln(a=>{s[o]=a}))),$g(1),function $V(n){return Q(()=>n)}(s),$i(o=>hm(o)?Jn:Zo(o)))}(s,n,t,r).pipe(Q(o=>(n._resolvedData=o,n.data=BS(n,e).resolve,i&&oT(i)&&(n.data[bl]=i.title),null)))}(o.route,r,n,t)),ln(()=>s++),$g(1),Qt(o=>s===i.length?Pe(e):Jn))})}(e.paramsInheritanceStrategy,this.environmentInjector),ln({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ln(a=>{const l=new S2(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),gm(o=>{const a=l=>{const g=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(l.routeConfig).pipe(ln(A=>{l.component=A}),Q(()=>{})));for(const A of l.children)g.push(...a(A));return g};return zg(a(o.targetSnapshot.root)).pipe(nd(),gn(1))}),gm(()=>this.afterPreactivation()),Q(o=>{const a=function B2(n,t,e){const r=xl(n,t._root,e?e._root:void 0);return new FS(r,t)}(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),ln(o=>{e.currentUrlTree=o.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),e.routerState=o.targetRouterState,"deferred"===e.urlUpdateStrategy&&(o.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,o),e.browserUrlTree=o.urlAfterRedirects)}),((n,t,e)=>Q(r=>(new Y2(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o)),ln({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Ws(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),rd(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),$i(o=>{if(s=!0,KS(o)){GS(o)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new dd(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),GS(o)){const l=e.urlHandlingStrategy.merge(o.url,e.rawUrlTree),g={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||cT(r.source)};e.scheduleNavigation(l,wl,null,g,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new tm(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(o))}catch(l){r.reject(l)}}return Jn}))}))}cancelNavigationTransition(e,r,i){const s=new dd(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(s),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cT(n){return n!==wl}let uT=(()=>{class n{buildTitle(e){let r,i=e.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Xe);return r}getResolvedTitleForRoute(e){return e.data[bl]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(){return Qe(HH)},providedIn:"root"}),n})(),HH=(()=>{class n extends uT{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(oe(nC))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(){return Qe(KH)},providedIn:"root"}),n})();class GH{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let KH=(()=>{class n extends GH{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=un(n)))(r||n)}}(),n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cd=new me("",{providedIn:"root",factory:()=>({})});let WH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:function(){return Qe($H)},providedIn:"root"}),n})(),$H=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YH(n){throw n}function XH(n,t,e){return t.parse("/")}const QH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Dr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Qe(iF),this.isNgZoneEnabled=!1,this.options=Qe(Cd,{optional:!0})||{},this.errorHandler=this.options.errorHandler||YH,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||XH,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Qe(WH),this.routeReuseStrategy=Qe(jH),this.urlCreationStrategy=Qe(k2),this.titleStrategy=Qe(uT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=mS(Qe(sa,{optional:!0})??[]),this.navigationTransitions=Qe(Dd),this.urlSerializer=Qe(Cl),this.location=Qe(ol),this.isNgZoneEnabled=Qe(Ye)instanceof Ye&&Ye.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ps,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),wl,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(dm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,g=l?this.currentUrlTree.fragment:o;let A=null;switch(a){case"merge":A={...this.currentUrlTree.queryParams,...s};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=s||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,e,A,g??null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=zs(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,wl,null,r)}navigate(e,r={skipLocationChange:!1}){return function qH(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new fe(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?{...QH}:!1===r?{...ZH}:r,zs(e))return yS(this.currentUrlTree,e,i);const s=this.parseUrl(e);return yS(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const s=e[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(e,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,g,A;return o?(a=o.resolve,l=o.reject,g=o.promise):g=new Promise((j,X)=>{a=j,l=X}),A="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(j=>Promise.reject(j))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kl=(()=>{class n{constructor(e,r,i,s,o,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new F;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(g=>{g instanceof Ws&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=$o(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=$o(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=$o(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function my(n,t,e){return function hR(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?gy:Ba}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,e,r):i.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(ne(Dr),ne($s),ws("tabindex"),ne(Fi),ne(dt),ne(Us))},n.\u0275dir=xe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&st("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&lt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Bn]}),n})();class dT{}let tj=(()=>{class n{constructor(e,r,i,s,o){this.router=e,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_n(e=>e instanceof Ws),as(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=su(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return nn(i).pipe(es())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Pe(null);const s=i.pipe(Qt(o=>null===o?Pe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return r.loadComponent&&!r._loadedComponent?nn([s,this.loader.loadComponent(r)]).pipe(es()):s})}}return n.\u0275fac=function(e){return new(e||n)(oe(Dr),oe(Pb),oe(ui),oe(dT),oe(mm))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _m=new me("");let hT=(()=>{class n{constructor(e,r,i,s,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof em?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ws&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof LS&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new LS(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){xo()},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();var Cr=(()=>((Cr=Cr||{})[Cr.COMPLETE=0]="COMPLETE",Cr[Cr.FAILED=1]="FAILED",Cr[Cr.REDIRECTING=2]="REDIRECTING",Cr))();const oa=!1;function gs(n,t){return{\u0275kind:n,\u0275providers:t}}const ym=new me("",{providedIn:"root",factory:()=>!1});function pT(){const n=Qe(qt);return t=>{const e=n.get(Wo);if(t!==e.components[0])return;const r=n.get(Dr),i=n.get(gT);1===n.get(Em)&&r.initialNavigation(),n.get(mT,null,ke.Optional)?.setUpPreloading(),n.get(_m,null,ke.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const gT=new me(oa?"bootstrap done indicator":"",{factory:()=>new F}),Em=new me(oa?"initial navigation":"",{providedIn:"root",factory:()=>1});function oj(){let n=[];return n=oa?[{provide:Bc,multi:!0,useFactory:()=>{const t=Qe(Dr);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function R2(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],gs(1,n)}const mT=new me(oa?"router preloader":"");function aj(n){return gs(0,[{provide:mT,useExisting:tj},{provide:dT,useExisting:n}])}const Fl=!1,vT=new me(Fl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),lj=[ol,{provide:Cl,useClass:Yg},Dr,Al,{provide:$s,useFactory:function fT(n){return n.routerState.root},deps:[Dr]},mm,Fl?{provide:ym,useValue:!0}:[]];function cj(){return new Hb("Router",Dr)}let _T=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[lj,Fl&&r?.enableTracing?oj().\u0275providers:[],{provide:sa,multi:!0,useValue:e},{provide:vT,useFactory:fj,deps:[[Dr,new Li,new As]]},{provide:Cd,useValue:r||{}},r?.useHash?{provide:Us,useClass:zF}:{provide:Us,useClass:uD},{provide:_m,useFactory:()=>{const n=Qe(lN),t=Qe(Ye),e=Qe(Cd),r=Qe(Dd),i=Qe(Cl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new hT(i,r,n,t,e)}},r?.preloadingStrategy?aj(r.preloadingStrategy).\u0275providers:[],{provide:Hb,multi:!0,useFactory:cj},r?.initialNavigation?pj(r):[],[{provide:yT,useFactory:pT},{provide:Vb,multi:!0,useExisting:yT}]]}}static forChild(e){return{ngModule:n,providers:[{provide:sa,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(oe(vT,8))},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[cm]}),n})();function fj(n){if(Fl&&n)throw new fe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function pj(n){return["disabled"===n.initialNavigation?gs(3,[{provide:cu,multi:!0,useFactory:()=>{const t=Qe(Dr);return()=>{t.setUpLocationChangeListener()}}},{provide:Em,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?gs(2,[{provide:Em,useValue:0},{provide:cu,multi:!0,deps:[qt],useFactory:t=>{const e=t.get(GF,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const i=t.get(Dr),s=t.get(gT);(function nj(n,t){n.events.pipe(_n(e=>e instanceof Ws||e instanceof dd||e instanceof tm||e instanceof hd),Q(e=>e instanceof Ws||e instanceof hd?Cr.COMPLETE:e instanceof dd&&(0===e.code||1===e.code)?Cr.REDIRECTING:Cr.FAILED),_n(e=>e!==Cr.REDIRECTING),gn(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(Dd).afterPreactivation=()=>(r(!0),s.closed?Pe(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const yT=new me(Fl?"Router Initializer":"");var mj=ys(70),ET=ys.n(mj);let bT=(()=>{class n{constructor(e){this.http=e,this.URL="https://api.wisey.app/api/v1/core/preview-courses"}getCourses(){return this.http.get(`${this.URL}`,{headers:new ni({Authorization:`Bearer ${localStorage.getItem("token")}`})})}getCourse(e){return this.http.get(`${this.URL}/${e}`,{headers:new ni({Authorization:`Bearer ${localStorage.getItem("token")}`})})}}return n.\u0275fac=function(e){return new(e||n)(oe(pl))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xt(n){return null!=n&&"false"!=`${n}`}function Wn(n,t=0){return function vj(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Sd(n){return Array.isArray(n)?n:[n]}function cn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ys(n){return n instanceof dt?n.nativeElement:n}const _j=["addListener","removeListener"],yj=["addEventListener","removeEventListener"],Ej=["on","off"];function Td(n,t,e,r){if(He(e)&&(r=e,e=void 0),r)return Td(n,t,e).pipe(Kg(r));const[i,s]=function Cj(n){return He(n.addEventListener)&&He(n.removeEventListener)}(n)?yj.map(o=>a=>n[o](t,a,e)):function bj(n){return He(n.addListener)&&He(n.removeListener)}(n)?_j.map(DT(n,t)):function Dj(n){return He(n.on)&&He(n.off)}(n)?Ej.map(DT(n,t)):[];if(!i&&Zn(n))return Qt(o=>Td(o,t,e))(vn(n));if(!i)throw new TypeError("Invalid event target");return new p(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function DT(n,t){return e=>r=>n[e](t,r)}class Sj extends O{constructor(t,e){super()}schedule(t,e=0){return this}}const Md={setInterval(n,t,...e){const{delegate:r}=Md;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=Md;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class bm extends Sj{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,r=0){return Md.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&Md.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,r=!1;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,q(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Nl={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=Nl;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(s=>{e=void 0,n(s)});return new O(()=>e?.(i))},requestAnimationFrame(...n){const{delegate:t}=Nl;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Nl;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},CT={now:()=>(CT.delegate||Date).now(),delegate:void 0};class Bl{constructor(t,e=Bl.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}Bl.now=CT.now;class Dm extends Bl{constructor(t,e=Bl.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}new class Mj extends Dm{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class Tj extends bm{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Nl.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:s}=t;null!=e&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==e&&(Nl.cancelAnimationFrame(e),t._scheduled=void 0)}});let Cm,xj=1;const wd={};function ST(n){return n in wd&&(delete wd[n],!0)}const Aj={setImmediate(n){const t=xj++;return wd[t]=!0,Cm||(Cm=Promise.resolve()),Cm.then(()=>ST(t)&&n()),t},clearImmediate(n){ST(n)}},{setImmediate:Ij,clearImmediate:Rj}=Aj,xd={setImmediate(...n){const{delegate:t}=xd;return(t?.setImmediate||Ij)(...n)},clearImmediate(n){const{delegate:t}=xd;return(t?.clearImmediate||Rj)(n)},delegate:void 0},Sm=(new class Pj extends Dm{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class Oj extends bm{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=xd.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:s}=t;null!=e&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==e&&(xd.clearImmediate(e),t._scheduled=void 0)}}),new Dm(bm)),kj=Sm;function TT(n,t=Sm){return function Fj(n){return $((t,e)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const g=i;i=null,e.next(g)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Z(e,g=>{r=!0,i=g,s||vn(n(g)).subscribe(s=Z(e,a,l))},()=>{o=!0,(!r||!s||s.closed)&&e.complete()}))})}(()=>function Bj(n=0,t,e=kj){let r=-1;return null!=t&&(nc(t)?e=t:r=t),new p(i=>{let s=function Nj(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,t))}let Tm;try{Tm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Tm=!1}let Ul,Xs,Mm,Sn=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function aN(n){return n===RD}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Tm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(oe(du))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ad(n){return function Uj(){if(null==Ul&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ul=!0}))}finally{Ul=Ul||!1}return Ul}()?n:!!n.capture}function Vj(){if(null==Xs){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Xs=!1,Xs;if("scrollBehavior"in document.documentElement.style)Xs=!0;else{const n=Element.prototype.scrollTo;Xs=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Xs}function wT(n){if(function Hj(){if(null==Mm){const n=typeof document<"u"?document.head:null;Mm=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Mm}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function wm(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Qs(n){return n.composedPath?n.composedPath()[0]:n.target}function xm(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const jj=new me("cdk-dir-doc",{providedIn:"root",factory:function Gj(){return Qe(We)}}),Kj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Xi=(()=>{class n{constructor(e){this.value="ltr",this.change=new ze,e&&(this.value=function zj(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Kj.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(oe(jj,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({}),n})(),xT=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new F,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new p(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(TT(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Pe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(_n(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,e)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=Ys(r),s=e.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Td(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(oe(Ye),oe(Sn),oe(We,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rd=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new F,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,s=i.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(TT(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(oe(Sn),oe(Ye),oe(We,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Od=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({}),n})(),AT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Vl,Od],Vl,Od]}),n})();class Am{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class la extends Am{constructor(t,e,r,i){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i}}class Pd extends Am{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Yj extends Am{constructor(t){super(),this.element=t instanceof dt?t.nativeElement:t}}class Ld{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof la?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Pd?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Yj?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Xj extends Ld{constructor(t,e,r,i,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||qt.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let kd=(()=>{class n extends Ld{constructor(e,r,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ze,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=r.createComponent(s,r.length,e.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(ne(Ps),ne(ir),ne(We))},n.\u0275dir=xe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ve]}),n})(),Fd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({}),n})();function Ft(n){return $((t,e)=>{vn(n).subscribe(Z(e,()=>e.complete(),N)),!e.closed&&t.subscribe(e)})}function Qi(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}const LT=Vj();class l3{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=cn(-this._previousScrollPosition.left),t.style.top=cn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),LT&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),LT&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class c3{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class kT{enable(){}disable(){}attach(){}}function Lm(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function FT(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class u3{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Lm(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let d3=(()=>{class n{constructor(e,r,i,s){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new kT,this.close=o=>new c3(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new l3(this._viewportRuler,this._document),this.reposition=o=>new u3(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(oe(xT),oe(Rd),oe(Ye),oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ud{constructor(t){if(this.scrollStrategy=new kT,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class h3{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let NT=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f3=(()=>{class n extends NT{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(oe(We),oe(Ye,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),p3=(()=>{class n extends NT{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Qs(s)},this._clickListener=s=>{const o=Qs(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let g=l.length-1;g>-1;g--){const A=l[g];if(A._outsidePointerEvents.observers.length<1||!A.hasAttached())continue;if(A.overlayElement.contains(o)||A.overlayElement.contains(a))break;const j=A._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>j.next(s)):j.next(s)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(oe(We),oe(Sn),oe(Ye,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),km=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||xm()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(e),xm()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(oe(We),oe(Sn))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class g3{constructor(t,e,r,i,s,o,a,l,g){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=g,this._backdropElement=null,this._backdropClick=new F,this._attachments=new F,this._detachments=new F,this._locationChanges=O.EMPTY,this._backdropClickHandler=A=>this._backdropClick.next(A),this._backdropTransitionendHandler=A=>{this._disposeBackdrop(A.target)},this._keydownEvents=new F,this._outsidePointerEvents=new F,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(gn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=cn(this._config.width),t.height=cn(this._config.height),t.minWidth=cn(this._config.minWidth),t.minHeight=cn(this._config.minHeight),t.maxWidth=cn(this._config.maxWidth),t.maxHeight=cn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;t&&(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,r){const i=Sd(e||[]).filter(s=>!!s);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ft(ii(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const BT="cdk-overlay-connected-position-bounding-box",m3=/([A-Za-z%]+)$/;class v3{constructor(t,e,r,i,s){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new F,this._resizeSubscription=O.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(BT),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,i,a),g=this._getOverlayPoint(l,e,a),A=this._getOverlayFit(g,e,r,a);if(A.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(A,g,r)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<A.visibleArea)&&(o={overlayFit:A,overlayPoint:g,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const g of s){const A=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);A>l&&(l=A,a=g)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Zs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BT),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i,s;if("center"==r.originX)i=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i="start"==r.originX?o:a}return e.left<0&&(i-=e.left),s="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:i,y:s}}_getOverlayPoint(t,e,r){let i,s;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+s}}_getOverlayFit(t,e,r,i){const s=VT(e);let{x:o,y:a}=t,l=this._getOffset(i,"x"),g=this._getOffset(i,"y");l&&(o+=l),g&&(a+=g);let X=0-a,J=a+s.height-r.height,ee=this._subtractOverflows(s.width,0-o,o+s.width-r.width),ie=this._subtractOverflows(s.height,X,J),ae=ee*ie;return{visibleArea:ae,isCompletelyWithinViewport:s.width*s.height===ae,fitsInViewportVertically:ie===s.height,fitsInViewportHorizontally:ee==s.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,s=r.right-e.x,o=UT(this._overlayRef.getConfig().minHeight),a=UT(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=i)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=VT(e),s=this._viewportRect,o=Math.max(t.x+i.width-s.width,0),a=Math.max(t.y+i.height-s.height,0),l=Math.max(s.top-r.top-t.y,0),g=Math.max(s.left-r.left-t.x,0);let A=0,j=0;return A=i.width<=s.width?g||-o:t.x<this._viewportMargin?s.left-r.left-t.x:0,j=i.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-r.top-t.y:0,this._previousPushAmount={x:A,y:j},{x:t.x+A,y:t.y+j}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new h3(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let s,o,a,A,j,X;if("top"===e.overlayY)o=t.y,s=r.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=r.height-t.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const J=Math.min(r.bottom-t.y+r.top,t.y),ee=this._lastBoundingBoxSize.height;s=2*J,o=t.y-J,s>ee&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-ee/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)X=r.width-t.x+this._viewportMargin,A=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)j=t.x,A=r.right-t.x;else{const J=Math.min(r.right-t.x+r.left,t.x),ee=this._lastBoundingBoxSize.width;A=2*J,j=t.x-J,A>ee&&!this._isInitialRender&&!this._growAfterOpen&&(j=t.x-ee/2)}return{top:o,left:j,bottom:a,right:X,width:A,height:s}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=cn(r.height),i.top=cn(r.top),i.bottom=cn(r.bottom),i.width=cn(r.width),i.left=cn(r.left),i.right=cn(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=cn(s)),o&&(i.maxWidth=cn(o))}this._lastBoundingBoxSize=r,Zs(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Zs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Zs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const A=this._viewportRuler.getViewportScrollPosition();Zs(r,this._getExactOverlayY(e,t,A)),Zs(r,this._getExactOverlayX(e,t,A))}else r.position="static";let a="",l=this._getOffset(e,"x"),g=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),g&&(a+=`translateY(${g}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=cn(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=cn(o.maxWidth):s&&(r.maxWidth="")),Zs(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=cn(s.y),i}_getExactOverlayX(t,e,r){let o,i={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=cn(s.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:FT(t,r),isOriginOutsideView:Lm(t,r),isOverlayClipped:FT(e,r),isOverlayOutsideView:Lm(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Sd(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof dt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function Zs(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function UT(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(m3);return e&&"px"!==e?null:parseFloat(t)}return n||null}function VT(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const HT="cdk-global-overlay-wrapper";class _3{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(HT),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),g=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=g?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(HT),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let y3=(()=>{class n{constructor(e,r,i,s){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new _3}flexibleConnectedTo(e){return new v3(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(oe(Rd),oe(We),oe(Sn),oe(km))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E3=0,Ei=(()=>{class n{constructor(e,r,i,s,o,a,l,g,A,j,X){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=g,this._directionality=A,this._location=j,this._outsideClickDispatcher=X}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new Ud(e);return o.direction=o.direction||this._directionality.value,new g3(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+E3++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Wo)),new Xj(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(oe(d3),oe(km),oe(Ps),oe(y3),oe(f3),oe(qt),oe(Ye),oe(We),oe(Xi),oe(ol),oe(p3))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const b3=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],jT=new me("cdk-connected-overlay-scroll-strategy");let GT=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(ne(dt))},n.\u0275dir=xe({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),KT=(()=>{class n{constructor(e,r,i,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=O.EMPTY,this._attachSubscription=O.EMPTY,this._detachSubscription=O.EMPTY,this._positionSubscription=O.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new ze,this.positionChange=new ze,this.attach=new ze,this.detach=new ze,this.overlayKeydown=new ze,this.overlayOutsideClick=new ze,this._templatePortal=new Pd(r,i),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=xt(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=xt(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=xt(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=xt(e)}get push(){return this._push}set push(e){this._push=xt(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=b3);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!Qi(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new Ud({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof GT?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(pS(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ne(Ei),ne(Pr),ne(ir),ne(jT),ne(Xi,8))},n.\u0275dir=xe({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Bn]}),n})();const C3={provide:jT,deps:[Ei],useFactory:function D3(n){return()=>n.scrollStrategies.reposition()}};let Vd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[Ei,C3],imports:[[Vl,Fd,AT],AT]}),n})();function Fm(n,t=Sm){return $((e,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,r.next(g)}};function l(){const g=o+n,A=t.now();if(A<g)return i=this.schedule(void 0,g-A),void r.add(i);a()}e.subscribe(Z(r,g=>{s=g,o=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function zT(n){return _n((t,e)=>n<=e)}function WT(n,t=u){return n=n??S3,$((e,r)=>{let i,s=!0;e.subscribe(Z(r,o=>{const a=t(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function S3(n,t){return n===t}let $T=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T3=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=Ys(e);return new p(i=>{const o=this._observeElement(r).subscribe(i);return()=>{o.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new F,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:i}=this._observedElements.get(e);r&&r.disconnect(),i.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(oe($T))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M3=(()=>{class n{constructor(e,r,i){this._contentObserver=e,this._elementRef=r,this._ngZone=i,this.event=new ze,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=xt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Wn(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Fm(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ne(T3),ne(dt),ne(Ye))},n.\u0275dir=xe({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),YT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[$T]}),n})();function Hd(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const QT="cdk-describedby-message",jd="cdk-describedby-host";let ZT=0,A3=(()=>{class n{constructor(e,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+ZT++,this._document=e}describe(e,r,i){if(!this._canBeDescribed(e,r))return;const s=Nm(r,i);"string"!=typeof r?(qT(r),this._messageRegistry.set(s,{messageElement:r,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(r,i),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,r,i){if(!r||!this._isElementNode(e))return;const s=Nm(r,i);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof r){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${jd}="${this._id}"]`);for(let r=0;r<e.length;r++)this._removeCdkDescribedByReferenceIds(e[r]),e[r].removeAttribute(jd);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,r){const i=this._document.createElement("div");qT(i),i.textContent=e,r&&i.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(Nm(e,r),{messageElement:i,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<r.length;s++)r[s].remove();const i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(e),i.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(e){const r=Hd(e,"aria-describedby").filter(i=>0!=i.indexOf(QT));e.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(e,r){const i=this._messageRegistry.get(r);(function w3(n,t,e){const r=Hd(n,t);r.some(i=>i.trim()==e.trim())||(r.push(e.trim()),n.setAttribute(t,r.join(" ")))})(e,"aria-describedby",i.messageElement.id),e.setAttribute(jd,this._id),i.referenceCount++}_removeMessageReference(e,r){const i=this._messageRegistry.get(r);i.referenceCount--,function x3(n,t,e){const i=Hd(n,t).filter(s=>s!=e.trim());i.length?n.setAttribute(t,i.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",i.messageElement.id),e.removeAttribute(jd)}_isElementDescribedByMessage(e,r){const i=Hd(e,"aria-describedby"),s=this._messageRegistry.get(r),o=s&&s.messageElement.id;return!!o&&-1!=i.indexOf(o)}_canBeDescribed(e,r){if(!this._isElementNode(e))return!1;if(r&&"object"==typeof r)return!0;const i=null==r?"":`${r}`.trim(),s=e.getAttribute("aria-label");return!(!i||s&&s.trim()===i)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(oe(We),oe(Sn))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nm(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function qT(n){n.id||(n.id=`${QT}-${ZT++}`)}class JT{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new F,this._typeaheadSubscription=O.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new F,this.change=new F,t instanceof nl&&t.changes.subscribe(e=>{if(this._activeItem){const i=e.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ln(e=>this._pressedLetters.push(e)),Fm(t),_n(()=>this._pressedLetters.length>0),Q(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,o=r[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Qi(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t);this._activeItem=e[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const i=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof nl?this._items.toArray():this._items}}class I3 extends JT{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class R3 extends JT{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let eM=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function P3(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function O3(n){try{return n.frameElement}catch{return null}}(function H3(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(r&&(-1===nM(r)||!this.isVisible(r)))return!1;let i=e.nodeName.toLowerCase(),s=nM(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function U3(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function V3(n){return!function k3(n){return function N3(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function L3(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function F3(n){return function B3(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||tM(n))}(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(oe(Sn))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tM(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function nM(n){if(!tM(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class j3{constructor(t,e,r,i,s=!1){this._element=t,this._checker=e,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return r?.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=0;r<e.length;r++){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(i)return i}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=e.length-1;r>=0;r--){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(i)return i}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(gn(1)).subscribe(t)}}let G3=(()=>{class n{constructor(e,r,i){this._checker=e,this._ngZone=r,this._document=i}create(e,r=!1){return new j3(e,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(e){return new(e||n)(oe(eM),oe(Ye),oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rM(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function iM(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const K3=new me("cdk-input-modality-detector-options"),z3={ignoreKeys:[18,17,224,91,16]},ca=Ad({passive:!0,capture:!0});let W3=(()=>{class n{constructor(e,r,i,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Vr(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Qs(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(rM(o)?"keyboard":"mouse"),this._mostRecentTarget=Qs(o))},this._onTouchstart=o=>{iM(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Qs(o))},this._options={...z3,...s},this.modalityDetected=this._modality.pipe(zT(1)),this.modalityChanged=this.modalityDetected.pipe(WT()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ca),i.addEventListener("mousedown",this._onMousedown,ca),i.addEventListener("touchstart",this._onTouchstart,ca)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ca),document.removeEventListener("mousedown",this._onMousedown,ca),document.removeEventListener("touchstart",this._onTouchstart,ca))}}return n.\u0275fac=function(e){return new(e||n)(oe(Sn),oe(Ye),oe(We),oe(K3,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $3=new me("liveAnnouncerElement",{providedIn:"root",factory:function Y3(){return null}}),X3=new me("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Bm=(()=>{class n{constructor(e,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=e||this._createLiveElement()}announce(e,...r){const i=this._defaultOptions;let s,o;return 1===r.length&&"number"==typeof r[0]?o=r[0]:[s,o]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==o&&i&&(o=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",r=this._document.getElementsByClassName(e),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(e),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(e){return new(e||n)(oe($3,8),oe(Ye),oe(We),oe(X3,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Q3=new me("cdk-focus-monitor-default-options"),Gd=Ad({passive:!0,capture:!0});let Um=(()=>{class n{constructor(e,r,i,s,o){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new F,this._rootNodeFocusAndBlurListener=a=>{const l=Qs(a),g="focus"===a.type?this._onFocus:this._onBlur;for(let A=l;A;A=A.parentElement)g.call(this,a,A)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,r=!1){const i=Ys(e);if(!this._platform.isBrowser||1!==i.nodeType)return Pe(null);const s=wT(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new F,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const r=Ys(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const s=Ys(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),s=Qs(e);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Gd),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Gd)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ft(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Gd),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Gd),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,s)=>{(s===e||i.checkChildren&&s.contains(e))&&r.push([s,i])}),r}}return n.\u0275fac=function(e){return new(e||n)(oe(Ye),oe(Sn),oe(W3),oe(We,8),oe(Q3,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oM="cdk-high-contrast-black-on-white",aM="cdk-high-contrast-white-on-black",Vm="cdk-high-contrast-active";let lM=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Vm),e.remove(oM),e.remove(aM),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(Vm),e.add(oM)):2===r&&(e.add(Vm),e.add(aM))}}}return n.\u0275fac=function(e){return new(e||n)(oe(Sn),oe(We))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Z3=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(oe(lM))},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[YT]]}),n})();function q3(n,t){if(1&n&&yt(0,"mat-pseudo-checkbox",4),2&n){const e=tt();Te("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function J3(n,t){if(1&n&&(_e(0,"span",5),nt(1),Ee()),2&n){const e=tt();Ce(1),_r("(",e.group.label,")")}}const eG=["*"],nG=new me("mat-sanity-checks",{providedIn:"root",factory:function tG(){return!0}});let Ct=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!xm()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(oe(lM),oe(nG,8),oe(We))},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Vl],Vl]}),n})();function Hm(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=xt(t)}}}function Hl(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function jm(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=xt(t)}}}function dM(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Wn(e):this.defaultTabIndex}}}function hM(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new F,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}function rG(n){return class extends n{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new p(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}let Gm=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct],Ct]}),n})();class sG{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const pM={enterDuration:225,exitDuration:150},Km=Ad({passive:!0}),gM=["mousedown","touchstart"],mM=["mouseup","mouseleave","touchend","touchcancel"];class vM{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ys(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...pM,...r.animation};r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const o=r.radius||function lG(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),a=t-i.left,l=e-i.top,g=s.enterDuration,A=document.createElement("div");A.classList.add("mat-ripple-element"),A.style.left=a-o+"px",A.style.top=l-o+"px",A.style.height=2*o+"px",A.style.width=2*o+"px",null!=r.color&&(A.style.backgroundColor=r.color),A.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(A),function aG(n){window.getComputedStyle(n).getPropertyValue("opacity")}(A),A.style.transform="scale(1)";const j=new sG(this,A,r);return j.state=0,this._activeRipples.add(j),r.persistent||(this._mostRecentTransientRipple=j),this._runTimeoutOutsideZone(()=>{const X=j===this._mostRecentTransientRipple;j.state=1,!r.persistent&&(!X||!this._isPointerDown)&&j.fadeOut()},g),j}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,i={...pM,...t.config.animation};r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Ys(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(gM))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(mM),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=rM(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!iM(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Km)})})}_removeTriggerEvents(){this._triggerElement&&(gM.forEach(t=>{this._triggerElement.removeEventListener(t,this,Km)}),this._pointerUpEventsRegistered&&mM.forEach(t=>{this._triggerElement.removeEventListener(t,this,Km)}))}}const _M=new me("mat-ripple-global-options");let zm=(()=>{class n{constructor(e,r,i,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new vM(this,r,e,i)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(Ye),ne(Sn),ne(_M,8),ne(Lr,8))},n.\u0275dir=xe({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&rn("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),yM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct],Ct]}),n})(),cG=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(ne(Lr,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,r){2&e&&rn("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),uG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct]]}),n})();const EM=new me("MAT_OPTION_PARENT_COMPONENT"),bM=new me("MatOptgroup");let dG=0;class hG{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let fG=(()=>{class n{constructor(e,r,i,s){this._element=e,this._changeDetectorRef=r,this._parent=i,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+dG++,this.onSelectionChange=new ze,this._stateChanges=new F}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=xt(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Qi(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new hG(this,e))}}return n.\u0275fac=function(e){xo()},n.\u0275dir=xe({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),DM=(()=>{class n extends fG{constructor(e,r,i,s){super(e,r,i,s)}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(zn),ne(EM,8),ne(bM,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,r){1&e&&st("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),2&e&&(Vo("id",r.id),lt("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),rn("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[Ve],ngContentSelectors:eG,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,r){1&e&&(Qr(),$e(0,q3,1,2,"mat-pseudo-checkbox",0),_e(1,"span",1),$t(2),Ee(),$e(3,J3,2,1,"span",2),yt(4,"div",3)),2&e&&(Te("ngIf",r.multiple),Ce(3),Te("ngIf",r.group&&r.group._inert),Ce(1),Te("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[cG,Vs,zm],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function CM(n,t,e){if(e.length){let r=t.toArray(),i=e.toArray(),s=0;for(let o=0;o<n+1;o++)r[o].group&&r[o].group===i[s]&&s++;return s}return 0}let SM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[yM,mi,Ct,uG]]}),n})();const gG=["mat-button",""],mG=["*"],_G=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],yG=Hl(Hm(jm(class{constructor(n){this._elementRef=n}})));let Kd=(()=>{class n extends yG{constructor(e,r,i){super(e),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of _G)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(Um),ne(Lr,8))},n.\u0275cmp=Lt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&yr(zm,5),2&e){let i;bt(i=Dt())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(lt("disabled",r.disabled||null),rn("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ve],attrs:gG,ngContentSelectors:mG,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(Qr(),_e(0,"span",0),$t(1),Ee(),yt(2,"span",1)(3,"span",2)),2&e&&(Ce(2),rn("mat-button-ripple-round",r.isRoundButton||r.isIconButton),Te("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[zm],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Wm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[yM,Ct],Ct]}),n})();const TM=new Set;let ua,EG=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):DG}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function bG(n){if(!TM.has(n))try{ua||(ua=document.createElement("style"),ua.setAttribute("type","text/css"),document.head.appendChild(ua)),ua.sheet&&(ua.sheet.insertRule(`@media ${n} {body{ }}`,0),TM.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(oe(Sn))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DG(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let $m=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new F}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return MM(Sd(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let s=zg(MM(Sd(e)).map(o=>this._registerQuery(o).observable));return s=ed(s.pipe(gn(1)),s.pipe(zT(1),Fm(0))),s.pipe(Q(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:g})=>{a.matches=a.matches||l,a.breakpoints[g]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),s={observable:new p(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Wi(r),Q(({matches:o})=>({query:e,matches:o})),Ft(this._destroySubject)),mql:r};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(oe(EG),oe(Ye))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MM(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function CG(n,t){if(1&n){const e=Rr();_e(0,"div",2)(1,"button",3),st("click",function(){return Un(e),Vn(tt().action())}),nt(2),Ee()()}if(2&n){const e=tt();Ce(2),Or(e.data.action)}}function SG(n,t){}const xM=new me("MatSnackBarData");class zd{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const TG=Math.pow(2,31)-1;class Ym{constructor(t,e){this._overlayRef=e,this._afterDismissed=new F,this._afterOpened=new F,this._onAction=new F,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,TG))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let MG=(()=>{class n{constructor(e,r){this.snackBarRef=e,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(ne(Ym),ne(xM))},n.\u0275cmp=Lt({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,r){1&e&&(_e(0,"span",0),nt(1),Ee(),$e(2,CG,3,1,"div",1)),2&e&&(Ce(1),Or(r.data.message),Ce(1),Te("ngIf",r.hasAction))},dependencies:[Kd,Vs],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const wG={snackBarState:cs("state",[or("void, hidden",Ht({transform:"scale(0.8)",opacity:0})),or("visible",Ht({transform:"scale(1)",opacity:1})),Nr("* => visible",ri("150ms cubic-bezier(0, 0, 0.2, 1)")),Nr("* => void, * => hidden",ri("75ms cubic-bezier(0.4, 0.0, 1, 1)",Ht({opacity:0})))])};let xG=(()=>{class n extends Ld{constructor(e,r,i,s,o){super(),this._ngZone=e,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new F,this._onExit=new F,this._onEnter=new F,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:r,toState:i}=e;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(gn(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>e.classList.add(i)):e.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(i=document.activeElement),e.removeAttribute("aria-hidden"),r.appendChild(e),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(ne(Ye),ne(dt),ne(zn),ne(Sn),ne(zd))},n.\u0275cmp=Lt({type:n,selectors:[["snack-bar-container"]],viewQuery:function(e,r){if(1&e&&yr(kd,7),2&e){let i;bt(i=Dt())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,r){1&e&&Zc("@state.done",function(s){return r.onAnimationEnd(s)}),2&e&&eu("@state",r._animationState)},features:[Ve],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,r){1&e&&(_e(0,"div",0),$e(1,SG,0,0,"ng-template",1),Ee(),yt(2,"div")),2&e&&(Ce(2),lt("aria-live",r._live)("role",r._role))},dependencies:[kd],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[wG.snackBarState]}}),n})(),AM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Vd,Fd,mi,Wm,Ct],Ct]}),n})();const IM=new me("mat-snack-bar-default-options",{providedIn:"root",factory:function AG(){return new zd}});let IG=(()=>{class n{constructor(e,r,i,s,o,a){this._overlay=e,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,r){return this._attach(e,r)}openFromTemplate(e,r){return this._attach(e,r)}open(e,r="",i){const s={...this._defaultConfig,...i};return s.data={message:e,action:r},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,r){const s=qt.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:zd,useValue:r}]}),o=new la(this.snackBarContainerComponent,r.viewContainerRef,s),a=e.attach(o);return a.instance.snackBarConfig=r,a.instance}_attach(e,r){const i={...new zd,...this._defaultConfig,...r},s=this._createOverlay(i),o=this._attachSnackBarContainer(s,i),a=new Ym(o,s);if(e instanceof Pr){const l=new Pd(e,null,{$implicit:i.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(i,a),g=new la(e,void 0,l),A=o.attachComponentPortal(g);a.instance=A.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Ft(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),i.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(a,i),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,r){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),r.duration&&r.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(r.duration))}_createOverlay(e){const r=new Ud;r.direction=e.direction;let i=this._overlay.position().global();const s="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,a=!o&&"center"!==e.horizontalPosition;return o?i.left("0"):a?i.right("0"):i.centerHorizontally(),"top"===e.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(e,r){return qt.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Ym,useValue:r},{provide:xM,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(oe(Ei),oe(Bm),oe(qt),oe($m),oe(n,12),oe(IM))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),RM=(()=>{class n extends IG{constructor(e,r,i,s,o,a){super(e,r,i,s,o,a),this.simpleSnackBarComponent=MG,this.snackBarContainerComponent=xG,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(oe(Ei),oe(Bm),oe(qt),oe($m),oe(n,12),oe(IM))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:AM}),n})();function RG(n,t){}class Xm{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const OG={dialogContainer:cs("dialogContainer",[or("void, exit",Ht({opacity:0,transform:"scale(0.7)"})),or("enter",Ht({transform:"none"})),Nr("* => enter",EC([ri("150ms cubic-bezier(0, 0, 0.2, 1)",Ht({transform:"none",opacity:1})),vg("@*",mg(),{optional:!0})])),Nr("* => void, * => exit",EC([ri("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Ht({opacity:0})),vg("@*",mg(),{optional:!0})]))])};let PG=(()=>{class n extends Ld{constructor(e,r,i,s,o,a,l,g){super(),this._elementRef=e,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=g,this._animationStateChanged=new ze,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=A=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(A)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=wm())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(r)}_focusByCssSelector(e,r){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,r)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const r=wm(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,r=wm();return e===r||e.contains(r)}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(G3),ne(zn),ne(We,8),ne(Xm),ne(eM),ne(Ye),ne(Um))},n.\u0275dir=xe({type:n,viewQuery:function(e,r){if(1&e&&yr(kd,7),2&e){let i;bt(i=Dt())&&(r._portalOutlet=i.first)}},features:[Ve]}),n})(),LG=(()=>{class n extends PG{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:r}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:e,totalTime:r}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=un(n)))(r||n)}}(),n.\u0275cmp=Lt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,r){1&e&&Zc("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&e&&(Vo("id",r._id),lt("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),eu("@dialogContainer",r._state))},features:[Ve],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,r){1&e&&$e(0,RG,0,0,"ng-template",0)},dependencies:[kd],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[OG.dialogContainer]}}),n})(),kG=0;class FG{constructor(t,e,r="mat-dialog-"+kG++){this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new F,this._afterClosed=new F,this._beforeClosed=new F,this._state=0,e._id=r,e._animationStateChanged.pipe(_n(i=>"opened"===i.state),gn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(_n(i=>"closed"===i.state),gn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(_n(i=>27===i.keyCode&&!this.disableClose&&!Qi(i))).subscribe(i=>{i.preventDefault(),OM(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():OM(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(_n(e=>"closing"===e.state),gn(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function OM(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const NG=new me("MatDialogData"),BG=new me("mat-dialog-default-options"),PM=new me("mat-dialog-scroll-strategy"),VG={provide:PM,deps:[Ei],useFactory:function UG(n){return()=>n.scrollStrategies.block()}};let HG=(()=>{class n{constructor(e,r,i,s,o,a,l,g,A,j){this._overlay=e,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=g,this._dialogDataToken=A,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new F,this._afterOpenedAtThisLevel=new F,this._ariaHiddenElements=new Map,this.afterAllClosed=td(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Wi(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,r){r=function jG(n,t){return{...t,...n}}(r,this._defaultOptions||new Xm),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),s=this._attachDialogContainer(i,r),o=this._attachDialogContent(e,s,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const r=this._getOverlayConfig(e);return this._overlay.create(r)}_getOverlayConfig(e){const r=new Ud({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachDialogContainer(e,r){const s=qt.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:Xm,useValue:r}]}),o=new la(this._dialogContainerType,r.viewContainerRef,s,r.componentFactoryResolver);return e.attach(o).instance}_attachDialogContent(e,r,i,s){const o=new this._dialogRefConstructor(i,r,s.id);if(e instanceof Pr)r.attachTemplatePortal(new Pd(e,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,r),l=r.attachComponentPortal(new la(e,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(e,r,i){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:r}];return e.direction&&(!s||!s.get(Xi,null,ke.Optional))&&o.push({provide:Xi,useValue:{value:e.direction,change:Pe()}}),qt.create({parent:s||this._injector,providers:o})}_removeOpenDialog(e){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const r=e.parentElement.children;for(let i=r.length-1;i>-1;i--){let s=r[i];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let r=e.length;for(;r--;)e[r].close()}}return n.\u0275fac=function(e){xo()},n.\u0275dir=xe({type:n}),n})(),LM=(()=>{class n extends HG{constructor(e,r,i,s,o,a,l,g){super(e,r,s,a,l,o,FG,LG,NG,g)}}return n.\u0275fac=function(e){return new(e||n)(oe(Ei),oe(qt),oe(ol,8),oe(BG,8),oe(PM),oe(n,12),oe(km),oe(Lr,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),GG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[LM,VG],imports:[[Vd,Fd,Ct],Ct]}),n})();function KG(n,t){if(1&n){const e=Rr();_e(0,"div",3),st("click",function(i){const o=Un(e).$implicit,a=tt();return Vn(a.readonly?a.noop():a.onStarClick(i,o))})("mousemove",function(i){const o=Un(e).$implicit,a=tt();return Vn(a.readonly?a.noop():a.onStarHover(i,o))}),yt(1,"span",4),Ee()}if(2&n){const e=t.$implicit,r=tt();Te("ngStyle",r.starPadding()),Ce(1),Te("ngClass",e.classname)("ngStyle",r.starColorAndSize())}}let kM=(()=>{class n{constructor(){this.maxStars=5,this.initialStars=0,this.animationSpeed=100,this.wholeStars=!1,this.ratingOutput=new ze,this.customClassIdentifier=Math.random().toString(36).substring(2),this.safeSize=()=>Number.isInteger(this.size)&&this.size>0&&this.size<6?this.size:1}ngOnInit(){this.setupStarImages(),this.editableStars=Array.from(new Array(this.maxStars)).map((e,r)=>new zG(r)),this.setRating(this.initialStars),this.animation&&(this.animationInterval=setInterval(this.starAnimation.bind(this),this.animationSpeed))}ngOnDestroy(){this.customCssClasses&&this.customCssClasses.forEach(e=>{e&&e.parentNode&&e.parentNode.removeChild(e)})}setupStarImages(){this.customStarIcons&&(this.customCssClasses=[],Object.keys(this.customStarIcons).map(e=>e).forEach(e=>{const r=this.getStarClass(e);this.createCssClass(r,e)}))}createCssClass(e,r){const i=document.createElement("style");i.type="text/css",i.innerHTML=`.${e} {\n      -webkit-mask-image: url(${this.customStarIcons[r]});\n      mask-image: url(${this.customStarIcons[r]});\n    }`,document.getElementsByTagName("head")[0].appendChild(i),this.customCssClasses.push(i)}starPadding(){return{"margin-right":this.customPadding||`calc(${this.starSize().width} / 10)`}}starColorAndSize(){return Object.assign({},this.starColor(),this.starSize())}starColor(){return{"background-color":this.color||"crimson"}}starSize(){return{height:this.customSize||15*this.safeSize()+"px",width:this.customSize||16*this.safeSize()+"px"}}starAnimation(){this.animationRunning=!0,this.setRating(this.rating<this.maxStars?this.rating+=.5:0)}cancelStarAnimation(){this.animationRunning&&(clearInterval(this.animationInterval),this.rating=0,this.animationRunning=!1)}setRating(e){this.rating=Math.round(2*e)/2,this.onStarsUnhover()}onStarHover(e,r){this.cancelStarAnimation();const i=this.clickedInFirstHalf(e);r.classname=this.getStarClass(!this.wholeStars&&i?"half":"full"),this.editableStars.forEach(s=>{s.position>r.position?s.classname=this.getStarClass("empty"):s.position<r.position&&(s.classname=this.getStarClass("full"))})}onStarClick(e,r){this.cancelStarAnimation();const i=this.clickedInFirstHalf(e);this.rating=r.position+(!this.wholeStars&&i?.5:1),this.ratingOutput.emit(this.rating)}onZeroStarClick(){this.setRating(0),this.ratingOutput.emit(this.rating)}onZeroStarHover(){this.editableStars.forEach(e=>e.classname=this.getStarClass("empty"))}onStarsUnhover(){this.editableStars.forEach(e=>{const r=e.position+1;e.classname=this.getStarClass(this.rating>=r?"full":this.rating>r-1&&this.rating<r?"half":"empty")})}clickedInFirstHalf(e){const r=e.target;return e.pageX<r.getBoundingClientRect().left+r.offsetWidth/2}noop(){}getStarClass(e){return this.customCssClasses?`ngx-stars-star-${e}-${this.customClassIdentifier}`:`star-${e}`}getAriaLabel(){return`Rating: ${this.rating} out of ${this.maxStars} stars ${this.readonly?"":". Can be edited."}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Lt({type:n,selectors:[["ngx-stars"]],inputs:{maxStars:"maxStars",initialStars:"initialStars",readonly:"readonly",size:"size",customSize:"customSize",color:"color",animation:"animation",animationSpeed:"animationSpeed",customPadding:"customPadding",wholeStars:"wholeStars",customStarIcons:"customStarIcons"},outputs:{ratingOutput:"ratingOutput"},decls:3,vars:3,consts:[["role","img",1,"stars-line",3,"mouseleave"],["aria-hidden","true",1,"star","zero-star",3,"ngStyle","click","mousemove"],["aria-hidden","true",3,"ngStyle","click","mousemove",4,"ngFor","ngForOf"],["aria-hidden","true",3,"ngStyle","click","mousemove"],["aria-hidden","true",1,"star",3,"ngClass","ngStyle"]],template:function(e,r){1&e&&(_e(0,"div",0),st("mouseleave",function(){return r.readonly?r.noop():r.onStarsUnhover()}),_e(1,"span",1),st("click",function(){return r.readonly?r.noop():r.onZeroStarClick()})("mousemove",function(){return r.readonly?r.noop():r.onZeroStarHover()}),Ee(),$e(2,KG,2,3,"div",2),Ee()),2&e&&(lt("aria-label",r.getAriaLabel()),Ce(1),Te("ngStyle",r.starSize()),Ce(1),Te("ngForOf",r.editableStars))},dependencies:[Mu,cl,xD],styles:[".stars-line[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.stars-line[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:999}.zero-star[_ngcontent-%COMP%]{color:transparent;position:absolute;left:-16px}.star[_ngcontent-%COMP%]{display:inline-block;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.star-empty[_ngcontent-%COMP%]{-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='far' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z'%3E%3C/path%3E%3C/svg%3E%0A\");mask-image:url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='far' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z'%3E%3C/path%3E%3C/svg%3E%0A\")}.star-half[_ngcontent-%COMP%]{-webkit-mask-image:url(\"data:image/svg+xml,%3C!-- had to hack this one's viewbox otherwise it didn't line up with the other two --%3E%3C!-- changed viewbox from '0 0 536 512' to '-20 0 576 512' --%3E%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star-half-alt' class='svg-inline--fa fa-star-half-alt fa-w-17' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='-20 0 576 512'%3E%3Cpath fill='currentColor' d='M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z'%3E%3C/path%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3C!-- had to hack this one's viewbox otherwise it didn't line up with the other two --%3E%3C!-- changed viewbox from '0 0 536 512' to '-20 0 576 512' --%3E%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star-half-alt' class='svg-inline--fa fa-star-half-alt fa-w-17' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='-20 0 576 512'%3E%3Cpath fill='currentColor' d='M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z'%3E%3C/path%3E%3C/svg%3E\")}.star-full[_ngcontent-%COMP%]{-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z'%3E%3C/path%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z'%3E%3C/path%3E%3C/svg%3E\")}"]}),n})();class zG{constructor(t){this.position=t}}let WG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[mi]}),n})();function $G(n,t){if(1&n&&(Pi(),yt(0,"circle",4)),2&n){const e=tt(),r=Qc(1);is("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(r)),lt("r",e._getCircleRadius())}}function YG(n,t){if(1&n&&(Pi(),yt(0,"circle",4)),2&n){const e=tt(),r=Qc(1);is("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(r)),lt("r",e._getCircleRadius())}}const QG=Hl(class{constructor(n){this._elementRef=n}},"primary"),ZG=new me("mat-progress-spinner-default-options",{providedIn:"root",factory:function qG(){return{diameter:100}}});class bi extends QG{constructor(t,e,r,i,s,o,a,l){super(t),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=O.EMPTY,this.mode="determinate";const g=bi._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),g.has(r.head)||g.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Wn(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Wn(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Wn(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=wT(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,r=bi._diameters;let i=r.get(t);if(!i||!i.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),i||(i=new Set,r.set(t,i)),i.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}bi._diameters=new WeakMap,bi.\u0275fac=function(t){return new(t||bi)(ne(dt),ne(Sn),ne(We,8),ne(Lr,8),ne(ZG),ne(zn),ne(Rd),ne(Ye))},bi.\u0275cmp=Lt({type:bi,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(lt("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),is("width",e.diameter,"px")("height",e.diameter,"px"),rn("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Ve],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Pi(),_e(0,"svg",0,1),$e(2,$G,1,11,"circle",2),$e(3,YG,1,9,"circle",3),Ee()),2&t&&(is("width",e.diameter,"px")("height",e.diameter,"px"),Te("ngSwitch","indeterminate"===e.mode),lt("viewBox",e._getViewBox()),Ce(2),Te("ngSwitchCase",!0),Ce(1),Te("ngSwitchCase",!1))},dependencies:[Yo,wu],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let e4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct,mi],Ct]}),n})();const t4=["tooltip"],FM="tooltip-panel",NM=Ad({passive:!0}),BM=new me("mat-tooltip-scroll-strategy"),s4={provide:BM,deps:[Ei],useFactory:function i4(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},o4=new me("mat-tooltip-default-options",{providedIn:"root",factory:function a4(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let l4=(()=>{class n{constructor(e,r,i,s,o,a,l,g,A,j,X,J){this._overlay=e,this._elementRef=r,this._scrollDispatcher=i,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=g,this._dir=j,this._defaultOptions=X,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new F,this._scrollStrategy=A,this._document=J,X&&(X.position&&(this.position=X.position),X.touchGestures&&(this.touchGestures=X.touchGestures)),j.change.pipe(Ft(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=xt(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Wn(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Wn(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ft(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,i])=>{e.removeEventListener(r,i,NM)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const r=this._createOverlay();this._detach(),this._portal=this._portal||new la(this._tooltipComponent,this._viewContainerRef);const i=this._tooltipInstance=r.attach(this._portal).instance;i._triggerElement=this._elementRef.nativeElement,i._mouseLeaveHideDelay=this._hideDelay,i.afterHidden().pipe(Ft(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),i.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return r.positionChanges.pipe(Ft(this._destroyed)).subscribe(i=>{this._updateCurrentPositionClass(i.connectionPair),this._tooltipInstance&&i.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${FM}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ft(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ft(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ft(this._destroyed)).subscribe(i=>{this._isTooltipVisible()&&27===i.keyCode&&!Qi(i)&&(i.preventDefault(),i.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const r=e.getConfig().positionStrategy,i=this._getOrigin(),s=this._getOverlayPosition();r.withPositions([this._addOffset({...i.main,...s.main}),this._addOffset({...i.fallback,...s.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r||"below"==r?i={originX:"center",originY:"above"==r?"top":"bottom"}:"before"==r||"left"==r&&e||"right"==r&&!e?i={originX:"start",originY:"center"}:("after"==r||"right"==r&&e||"left"==r&&!e)&&(i={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r?i={overlayX:"center",overlayY:"bottom"}:"below"==r?i={overlayX:"center",overlayY:"top"}:"before"==r||"left"==r&&e||"right"==r&&!e?i={overlayX:"end",overlayY:"center"}:("after"==r||"right"==r&&e||"left"==r&&!e)&&(i={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(gn(1),Ft(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,r){return"above"===this.position||"below"===this.position?"top"===r?r="bottom":"bottom"===r&&(r="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:r}}_updateCurrentPositionClass(e){const{overlayY:r,originX:i,originY:s}=e;let o;if(o="center"===r?this._dir&&"rtl"===this._dir.value?"end"===i?"left":"right":"start"===i?"left":"right":"bottom"===r&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${FM}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",r=>{const i=r.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",r],["touchcancel",r])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([r,i])=>{this._elementRef.nativeElement.addEventListener(r,i,NM)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const r=this._document.elementFromPoint(e.clientX,e.clientY),i=this._elementRef.nativeElement;r!==i&&!i.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const r=this._elementRef.nativeElement,i=r.style;("on"===e||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),("on"===e||!r.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(e){xo()},n.\u0275dir=xe({type:n,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),Zm=(()=>{class n extends l4{constructor(e,r,i,s,o,a,l,g,A,j,X,J){super(e,r,i,s,o,a,l,g,A,j,X,J),this._tooltipComponent=u4}}return n.\u0275fac=function(e){return new(e||n)(ne(Ei),ne(dt),ne(xT),ne(ir),ne(Ye),ne(Sn),ne(A3),ne(Um),ne(BM),ne(Xi,8),ne(o4,8),ne(We))},n.\u0275dir=xe({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[Ve]}),n})(),c4=(()=>{class n{constructor(e,r){this._changeDetectorRef=e,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new F,this._animationsDisabled="NoopAnimations"===r}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const r=this._tooltip.nativeElement,i=this._showAnimation,s=this._hideAnimation;if(r.classList.remove(e?s:i),r.classList.add(e?i:s),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(r);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(r.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return n.\u0275fac=function(e){return new(e||n)(ne(zn),ne(Lr,8))},n.\u0275dir=xe({type:n}),n})(),u4=(()=>{class n extends c4{constructor(e,r,i){super(e,i),this._breakpointObserver=r,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return n.\u0275fac=function(e){return new(e||n)(ne(zn),ne($m),ne(Lr,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(e,r){if(1&e&&yr(t4,7),2&e){let i;bt(i=Dt())&&(r._tooltip=i.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,r){1&e&&st("mouseleave",function(s){return r._handleMouseLeave(s)}),2&e&&is("zoom",r.isVisible()?1:null)},features:[Ve],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(e,r){if(1&e&&(_e(0,"div",0,1),st("animationend",function(s){return r._handleAnimationEnd(s)}),function ib(n,t){const e=ut();let r;const i=n+Vt;e.firstCreatePass?(r=function Ek(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(i,r.onDestroy)):r=e.data[i];const s=r.factory||(r.factory=Ss(r.type)),o=wr(ne);try{const a=Sc(!1),l=s();return Sc(a),function hP(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,ge(),i,l),l}finally{wr(o)}}(2,"async"),nt(3),Ee()),2&e){let i;rn("mat-tooltip-handset",null==(i=sb(2,4,r._isHandset))?null:i.matches),Te("ngClass",r.tooltipClass),Ce(3),Or(r.message)}},dependencies:[Mu,AD],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),n})(),UM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[s4],imports:[[Z3,mi,Vd,Ct],Ct,Od]}),n})();function VM(...n){const t=Ev(n),{args:e,keys:r}=aS(n),i=new p(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,g=o;for(let A=0;A<o;A++){let j=!1;vn(e[A]).subscribe(Z(s,X=>{j||(j=!0,g--),a[A]=X},()=>l--,void 0,()=>{(!l||!j)&&(g||s.next(r?lS(r,a):a),s.complete())}))}});return t?i.pipe(Kg(t)):i}const d4=["*"];let Wd;function Gl(n){return function h4(){if(void 0===Wd&&(Wd=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Wd=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Wd}()?.createHTML(n)||n}function HM(n){return Error(`Unable to find icon with the name "${n}"`)}function jM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function GM(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class qs{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let $d=(()=>{class n{constructor(e,r,i,s){this._httpClient=e,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,s){return this._addSvgIconConfig(e,r,new qs(i,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,s){const o=this._sanitizer.sanitize(_t.HTML,i);if(!o)throw GM(i);const a=Gl(o);return this._addSvgIconConfig(e,r,new qs("",a,s))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new qs(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){const s=this._sanitizer.sanitize(_t.HTML,r);if(!s)throw GM(r);const o=Gl(s);return this._addSvgIconSetConfig(e,new qs("",o,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(_t.RESOURCE_URL,e);if(!r)throw jM(e);const i=this._cachedIconsByUrl.get(r);return i?Pe(Yd(i)):this._loadSvgIconFromConfig(new qs(e,null)).pipe(ln(s=>this._cachedIconsByUrl.set(r,s)),Q(s=>Yd(s)))}getNamedSvgIcon(e,r=""){const i=KM(r,e);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,e),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(e,o):Zo(HM(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Pe(Yd(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Q(r=>Yd(r)))}_getSvgFromIconSetConfigs(e,r){const i=this._extractIconWithNameFromAnySet(e,r);return i?Pe(i):VM(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe($i(a=>{const g=`Loading icon set URL: ${this._sanitizer.sanitize(_t.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(g)),Pe(null)})))).pipe(Q(()=>{const o=this._extractIconWithNameFromAnySet(e,r);if(!o)throw HM(e);return o}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ln(r=>e.svgText=r),Q(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Pe(null):this._fetchIcon(e).pipe(ln(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){const s=e.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(Gl("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){const r=this._svgElementFromString(Gl("<svg></svg>")),i=e.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){const{url:r,options:i}=e,s=i?.withCredentials??!1;if(!this._httpClient)throw function f4(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(_t.RESOURCE_URL,r);if(!o)throw jM(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Q(g=>Gl(g)),rd(()=>this._inProgressUrlFetches.delete(o)),Sv());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(KM(e,r),i),this}_addSvgIconSetConfig(e,r){const i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,e);if(s)return g4(s)?new qs(s.url,null,s.options):new qs(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(oe(pl,8),oe(ug),oe(We,8),oe(Ni))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yd(n){return n.cloneNode(!0)}function KM(n,t){return n+":"+t}function g4(n){return!(!n.url||!n.options)}const m4=Hl(class{constructor(n){this._elementRef=n}}),v4=new me("mat-icon-location",{providedIn:"root",factory:function _4(){const n=Qe(We),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),zM=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],y4=zM.map(n=>`[${n}]`).join(", "),E4=/^url\(['"]?#(.*?)['"]?\)$/;let WM=(()=>{class n extends m4{constructor(e,r,i,s,o){super(e),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=O.EMPTY,i||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=xt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=e.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),r&&e.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(y4),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)zM.forEach(o=>{const a=r[s],l=a.getAttribute(o),g=l?l.match(E4):null;if(g){let A=i.get(a);A||(A=[],i.set(a,A)),A.push({name:o,value:g[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(gn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne($d),ws("aria-hidden"),ne(v4),ne(Ni))},n.\u0275cmp=Lt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,r){2&e&&(lt("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),rn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ve],ngContentSelectors:d4,decls:1,vars:0,template:function(e,r){1&e&&(Qr(),$t(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),b4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct],Ct]}),n})();function D4(n,t){1&n&&(_e(0,"mat-icon",23),nt(1,"lock"),Ee())}function C4(n,t){if(1&n&&(_e(0,"p",20)(1,"span",21),nt(2),Ee(),_e(3,"span",21),nt(4),Ee(),$e(5,D4,2,0,"mat-icon",22),Ee()),2&n){const e=t.$implicit;Ce(2),_r(" ",e.order,". "),Ce(2),_r(" ",e.title,""),Ce(1),Te("ngIf","unlocked"===e.status)}}function S4(n,t){if(1&n&&(_e(0,"li"),nt(1),Ee()),2&n){const e=t.$implicit;Ce(1),_r(" ",e,"")}}function T4(n,t){if(1&n&&(_e(0,"div",3)(1,"div",4)(2,"button",5)(3,"mat-icon"),nt(4,"keyboard_backspace"),Ee()(),_e(5,"div",6),nt(6),Ee()(),_e(7,"div",7)(8,"div",8),yt(9,"img",9),_e(10,"div",10)(11,"span",11),nt(12,"Lessons:"),Ee(),_e(13,"div",12),$e(14,C4,6,3,"p",13),Ee()()(),_e(15,"div",14)(16,"div",15)(17,"span",11),nt(18,"Rating:"),Ee(),yt(19,"ngx-stars",16),Ee(),_e(20,"p",17)(21,"span",11),nt(22,"Description: "),Ee(),nt(23),Ee(),_e(24,"div",18)(25,"span",11),nt(26,"Skills:"),Ee(),_e(27,"ul"),$e(28,S4,2,1,"li",19),Ee()()()()()),2&n){const e=tt();Ce(6),_r(" ",e.course.title,""),Ce(3),Te("src",e.course.lessons[0].previewImageLink+"/lesson-"+e.course.lessons[0].order+".webp",Ba),Ce(5),Te("ngForOf",e.course.lessons),Ce(5),Te("readonly",!0)("initialStars",e.course.rating)("matTooltip",e.course.rating.toString()),Ce(4),_r(" ",e.course.description,""),Ce(5),Te("ngForOf",e.course.meta.skills)}}function M4(n,t){1&n&&(_e(0,"div")(1,"div",24),nt(2,"Try to reload page "),_e(3,"mat-icon"),nt(4,"sync"),Ee()()())}function w4(n,t){1&n&&(_e(0,"div",25),yt(1,"mat-spinner",26),Ee())}let x4=(()=>{class n{constructor(e,r,i,s){this.route=e,this.service=r,this._snackBar=i,this.dialog=s,this.isHideCourse=!0,this.linkLesson=""}ngOnInit(){this.route.params.pipe(Qt(e=>this.service.getCourse(e.id))).subscribe(e=>{this.isHideCourse=!1,this.course=e},()=>{this.isHideCourse=!1,this.openSnackBar("Something went wrong")})}convertVideo(e){document.querySelectorAll("video").forEach(r=>{const i=new(ET())({});i.loadSource(e),i.attachMedia(r)})}openSnackBar(e,r=!0){this._snackBar.open(e,"Close",{duration:6e3,panelClass:r?"alert":"success"})}}return n.\u0275fac=function(e){return new(e||n)(ne($s),ne(bT),ne(RM),ne(LM))},n.\u0275cmp=Lt({type:n,selectors:[["app-course"]],decls:3,vars:3,consts:[["class","course",4,"ngIf"],[4,"ngIf"],["class","blur",4,"ngIf"],[1,"course"],[1,"course-title"],["mat-button","","routerLink","/courses"],[1,"title"],[1,"course-wrapper"],[1,"video"],["alt","Lesson",3,"src"],[1,"info-item"],[1,"point"],[1,"lessons-list"],["class","lesson",4,"ngFor","ngForOf"],[1,"info"],[1,"rating","info-item"],["matTooltipPosition","above","customSize","1.2rem",1,"starts",3,"readonly","initialStars","matTooltip"],[1,"description","info-item"],[1,"skills","info-item"],[4,"ngFor","ngForOf"],[1,"lesson"],[1,"lesson-part"],["class","lock","matTooltip","This lesson is locked","matTooltipPosition","above",4,"ngIf"],["matTooltip","This lesson is locked","matTooltipPosition","above",1,"lock"],[1,"reload"],[1,"blur"],["color","",1,"spinner"]],template:function(e,r){1&e&&($e(0,T4,29,8,"div",0),$e(1,M4,5,0,"div",1),$e(2,w4,2,0,"div",2)),2&e&&(Te("ngIf",r.course),Ce(1),Te("ngIf",!r.course&&!r.isHideCourse),Ce(1),Te("ngIf",r.isHideCourse))},dependencies:[cl,Vs,kl,kM,bi,Zm,Kd,WM],styles:[".course[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center;width:100%;flex-direction:column}.course-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;text-align:center;display:flex;align-items:center}.course-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.course-wrapper[_ngcontent-%COMP%]{display:flex;margin-top:15px}@media screen and (max-width: 500px){.course-wrapper[_ngcontent-%COMP%]{flex-direction:column;padding:0 10px}}.course-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]{width:550px;margin-right:20px;margin-left:10px}@media screen and (max-width: 500px){.course-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]{margin-right:0;margin-left:0}}.course-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.lessons-list[_ngcontent-%COMP%]{margin-left:5px}.lessons-list[_ngcontent-%COMP%]   .lesson[_ngcontent-%COMP%]{display:flex;margin:0 0 4px}.lessons-list[_ngcontent-%COMP%]   .lesson-part[_ngcontent-%COMP%]:hover{text-decoration:underline;opacity:.8}.lessons-list[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{font-size:14px;margin-left:5px;color:#ee4747;height:-moz-fit-content;height:fit-content}.info-item[_ngcontent-%COMP%]{margin-bottom:5px}.info-item[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:600}.info[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;align-content:center}.info[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .starts[_ngcontent-%COMP%]{margin-left:5px}  snack-bar-container.alert{background:#ff8080}  .mat-progress-spinner circle,   .mat-spinner circle{stroke:#3e2dbb!important;opacity:1}"]}),n})();const $M=["*"];class I4{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(r=>this._trackTile(r))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new R4(this.rowIndex,e)}_findMatchingGap(t){let e=-1,r=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(r=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(e)))}while(r-e<t||0==r);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let r=0;r<e.colspan;r++)this.tracker[t+r]=e.rowspan}}class R4{constructor(t,e){this.row=t,this.col=e}}const YM=new me("MAT_GRID_LIST");let XM=(()=>{class n{constructor(e,r){this._element=e,this._gridList=r,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(Wn(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(Wn(e))}_setStyle(e,r){this._element.nativeElement.style[e]=r}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(YM,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,r){2&e&&lt("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:$M,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,r){1&e&&(Qr(),_e(0,"div",0),$t(1),Ee())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})();const O4=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class qm{constructor(){this._rows=0,this._rowspan=0}init(t,e,r,i){this._gutterSize=QM(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=r,this._direction=i}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":Js(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,r){let i=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(t,r,i,s),this.setRowStyles(t,e,i,s)}setColStyles(t,e,r,i){let s=this.getBaseTileSize(r,i);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,e)),t._setStyle("width",Js(this.getTileSize(s,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class P4 extends qm{constructor(t){super(),this.fixedRowHeight=t}init(t,e,r,i){super.init(t,e,r,i),this.fixedRowHeight=QM(this.fixedRowHeight),O4.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Js(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Js(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class L4 extends qm{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,r,i){this.baseTileHeight=this.getBaseTileSize(r/this.rowHeightRatio,i),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Js(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Js(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class k4 extends qm{setRowStyles(t,e){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(s,e)),t._setStyle("height",Js(this.getTileSize(s,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function Js(n){return`calc(${n})`}function QM(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let N4=(()=>{class n{constructor(e,r){this._element=e,this._dir=r,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(Wn(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const r=`${e??""}`;r!==this._rowHeight&&(this._rowHeight=r,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new k4:e&&e.indexOf(":")>-1?new L4(e):new P4(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new I4);const e=this._tileCoordinator,r=this._tiles.filter(s=>!s._gridList||s._gridList===this),i=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,r),this._tileStyler.init(this.gutterSize,e,this.cols,i),r.forEach((s,o)=>{const a=e.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(Xi,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-grid-list"]],contentQueries:function(e,r,i){if(1&e&&fn(i,XM,5),2&e){let s;bt(s=Dt())&&(r._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,r){2&e&&lt("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[Et([{provide:YM,useExisting:n}])],ngContentSelectors:$M,decls:2,vars:0,template:function(e,r){1&e&&(Qr(),_e(0,"div"),$t(1),Ee())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),B4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[fM,Ct],fM,Ct]}),n})();const U4=["connectionContainer"],V4=["inputContainer"],H4=["label"];function j4(n,t){1&n&&(za(0),_e(1,"div",14),yt(2,"div",15)(3,"div",16)(4,"div",17),Ee(),_e(5,"div",18),yt(6,"div",15)(7,"div",16)(8,"div",17),Ee(),Wa())}function G4(n,t){if(1&n){const e=Rr();_e(0,"div",19),st("cdkObserveContent",function(){return Un(e),Vn(tt().updateOutlineGap())}),$t(1,1),Ee()}2&n&&Te("cdkObserveContentDisabled","outline"!=tt().appearance)}function K4(n,t){if(1&n&&(za(0),$t(1,2),_e(2,"span"),nt(3),Ee(),Wa()),2&n){const e=tt(2);Ce(3),Or(e._control.placeholder)}}function z4(n,t){1&n&&$t(0,3,["*ngSwitchCase","true"])}function W4(n,t){1&n&&(_e(0,"span",23),nt(1," *"),Ee())}function $4(n,t){if(1&n){const e=Rr();_e(0,"label",20,21),st("cdkObserveContent",function(){return Un(e),Vn(tt().updateOutlineGap())}),$e(2,K4,4,1,"ng-container",12),$e(3,z4,1,0,"ng-content",12),$e(4,W4,2,0,"span",22),Ee()}if(2&n){const e=tt();rn("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),Te("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),lt("for",e._control.id)("aria-owns",e._control.id),Ce(2),Te("ngSwitchCase",!1),Ce(1),Te("ngSwitchCase",!0),Ce(1),Te("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Y4(n,t){1&n&&(_e(0,"div",24),$t(1,4),Ee())}function X4(n,t){if(1&n&&(_e(0,"div",25),yt(1,"span",26),Ee()),2&n){const e=tt();Ce(1),rn("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function Q4(n,t){1&n&&(_e(0,"div"),$t(1,5),Ee()),2&n&&Te("@transitionMessages",tt()._subscriptAnimationState)}function Z4(n,t){if(1&n&&(_e(0,"div",30),nt(1),Ee()),2&n){const e=tt(2);Te("id",e._hintLabelId),Ce(1),Or(e.hintLabel)}}function q4(n,t){if(1&n&&(_e(0,"div",27),$e(1,Z4,2,2,"div",28),$t(2,6),yt(3,"div",29),$t(4,7),Ee()),2&n){const e=tt();Te("@transitionMessages",e._subscriptAnimationState),Ce(1),Te("ngIf",e.hintLabel)}}const J4=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],eK=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],tK=new me("MatError"),nK={transitionMessages:cs("transitionMessages",[or("enter",Ht({opacity:1,transform:"translateY(0%)"})),Nr("void => enter",[Ht({opacity:0,transform:"translateY(-5px)"}),ri("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Xd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n}),n})();const rK=new me("MatHint");let ZM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n,selectors:[["mat-label"]]}),n})(),iK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n,selectors:[["mat-placeholder"]]}),n})();const sK=new me("MatPrefix"),oK=new me("MatSuffix");let qM=0;const lK=Hl(class{constructor(n){this._elementRef=n}},"primary"),cK=new me("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ew=new me("MatFormField");let uK=(()=>{class n extends lK{constructor(e,r,i,s,o,a,l){super(e),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new F,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+qM++,this._labelId="mat-form-field-label-"+qM++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=xt(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Wi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ft(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ft(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),ii(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Wi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Wi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ft(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Td(this._label.nativeElement,"transitionend").pipe(gn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const A=r.querySelectorAll(`${i}, ${s}`);for(let j=0;j<A.length;j++)A[j].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=r.querySelectorAll(i),g=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const A=r.getBoundingClientRect();if(0===A.width&&0===A.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const j=this._getStartEnd(A),X=e.children,J=this._getStartEnd(X[0].getBoundingClientRect());let ee=0;for(let ie=0;ie<X.length;ie++)ee+=X[ie].offsetWidth;o=Math.abs(J-j)-5,a=ee>0?.75*ee+10:0}for(let A=0;A<l.length;A++)l[A].style.width=`${o}px`;for(let A=0;A<g.length;A++)g[A].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(zn),ne(Xi,8),ne(cK,8),ne(Sn),ne(Ye),ne(Lr,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,i){if(1&e&&(fn(i,Xd,5),fn(i,Xd,7),fn(i,ZM,5),fn(i,ZM,7),fn(i,iK,5),fn(i,tK,5),fn(i,rK,5),fn(i,sK,5),fn(i,oK,5)),2&e){let s;bt(s=Dt())&&(r._controlNonStatic=s.first),bt(s=Dt())&&(r._controlStatic=s.first),bt(s=Dt())&&(r._labelChildNonStatic=s.first),bt(s=Dt())&&(r._labelChildStatic=s.first),bt(s=Dt())&&(r._placeholderChild=s.first),bt(s=Dt())&&(r._errorChildren=s),bt(s=Dt())&&(r._hintChildren=s),bt(s=Dt())&&(r._prefixChildren=s),bt(s=Dt())&&(r._suffixChildren=s)}},viewQuery:function(e,r){if(1&e&&(yr(U4,7),yr(V4,5),yr(H4,5)),2&e){let i;bt(i=Dt())&&(r._connectionContainerRef=i.first),bt(i=Dt())&&(r._inputContainerRef=i.first),bt(i=Dt())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,r){2&e&&rn("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Et([{provide:ew,useExisting:n}]),Ve],ngContentSelectors:eK,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,r){1&e&&(Qr(J4),_e(0,"div",0)(1,"div",1,2),st("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),$e(3,j4,9,0,"ng-container",3),$e(4,G4,2,1,"div",4),_e(5,"div",5,6),$t(7),_e(8,"span",7),$e(9,$4,5,16,"label",8),Ee()(),$e(10,Y4,2,0,"div",9),Ee(),$e(11,X4,2,4,"div",10),_e(12,"div",11),$e(13,Q4,2,1,"div",12),$e(14,q4,5,2,"div",13),Ee()()),2&e&&(Ce(3),Te("ngIf","outline"==r.appearance),Ce(1),Te("ngIf",r._prefixChildren.length),Ce(5),Te("ngIf",r._hasFloatingLabel()),Ce(1),Te("ngIf",r._suffixChildren.length),Ce(1),Te("ngIf","outline"!=r.appearance),Ce(1),Te("ngSwitch",r._getDisplayedMessages()),Ce(1),Te("ngSwitchCase","error"),Ce(1),Te("ngSwitchCase","hint"))},dependencies:[Vs,M3,Yo,wu],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[nK.transitionMessages]},changeDetection:0}),n})(),dK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[mi,Ct,YT],Ct]}),n})();class tw{constructor(t=!1,e,r=!0){this._multiple=t,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new F,e&&e.length&&(t?e.forEach(i=>this._markSelected(i)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}const mK=!1;function ms(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function iw(n){return null!=n&&"number"==typeof n.length}const Pn=new me("NgValidators"),vs=new me("NgAsyncValidators"),vK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class sw{static min(t){return function ow(n){return t=>{if(ms(t.value)||ms(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function aw(n){return t=>{if(ms(t.value)||ms(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function lw(n){return ms(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function cw(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function uw(n){return ms(n.value)||vK.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function dw(n){return t=>ms(t.value)||!iw(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function hw(n){return t=>iw(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function fw(n){if(!n)return Qd;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(ms(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return yw(t)}static composeAsync(t){return Ew(t)}}function Qd(n){return null}function pw(n){return null!=n}function gw(n){const t=$a(n)?nn(n):n;if(mK&&!ep(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new fe(-1101,e)}return t}function mw(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function vw(n,t){return t.map(e=>e(n))}function _w(n){return n.map(t=>function _K(n){return!n.validate}(t)?t:e=>t.validate(e))}function yw(n){if(!n)return null;const t=n.filter(pw);return 0==t.length?null:function(e){return mw(vw(e,t))}}function ev(n){return null!=n?yw(_w(n)):null}function Ew(n){if(!n)return null;const t=n.filter(pw);return 0==t.length?null:function(e){return VM(vw(e,t).map(gw)).pipe(Q(mw))}}function tv(n){return null!=n?Ew(_w(n)):null}function bw(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Dw(n){return n._rawValidators}function Cw(n){return n._rawAsyncValidators}function nv(n){return n?Array.isArray(n)?n:[n]:[]}function Zd(n,t){return Array.isArray(n)?n.includes(t):n===t}function Sw(n,t){const e=nv(t);return nv(n).forEach(i=>{Zd(e,i)||e.push(i)}),e}function Tw(n,t){return nv(t).filter(e=>!Zd(n,e))}class Mw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ev(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class $n extends Mw{get formDirective(){return null}get path(){return null}}class Ci extends Mw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}function xw(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const sv=!1,Kl="VALID",Jd="INVALID",da="PENDING",zl="DISABLED";function ov(n){return(eh(n)?n.validators:n)||null}function av(n,t){return(eh(t)?t.asyncValidators:n)||null}function eh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Rw{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Kl}get invalid(){return this.status===Jd}get pending(){return this.status==da}get disabled(){return this.status===zl}get enabled(){return this.status!==zl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Sw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Sw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Tw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Tw(t,this._rawAsyncValidators))}hasValidator(t){return Zd(this._rawValidators,t)}hasAsyncValidator(t){return Zd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=da,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zl,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Kl,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kl||this.status===da)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zl:Kl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=da,this._hasOwnPendingAsyncValidator=!0;const e=gw(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?zl:this.errors?Jd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(da)?da:this._anyControlsHaveStatus(Jd)?Jd:Kl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){eh(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function wK(n){return Array.isArray(n)?ev(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function xK(n){return Array.isArray(n)?tv(n):n||null}(this._rawAsyncValidators)}}class lv extends Rw{constructor(t,e,r){super(ov(e),av(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Iw(n,t,e){n._forEachChild((r,i)=>{if(void 0===e[i])throw new fe(1002,sv?function MK(n,t){return`Must supply a value for form control ${xw(n,t)}`}(t,i):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function Aw(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new fe(1e3,sv?function SK(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new fe(1001,sv?function TK(n,t){return`Cannot find form control ${xw(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Wl=new me("CallSetDisabledState",{providedIn:"root",factory:()=>cv}),cv="always";function $l(n,t,e=cv){uv(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function RK(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ow(n,t)})}(n,t),function PK(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function OK(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ow(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function IK(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function nh(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),ih(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rh(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function uv(n,t){const e=Dw(n);null!==t.validator?n.setValidators(bw(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=Cw(n);null!==t.asyncValidator?n.setAsyncValidators(bw(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rh(t._rawValidators,i),rh(t._rawAsyncValidators,i)}function ih(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=Dw(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==t.validator);s.length!==i.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const i=Cw(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==t.asyncValidator);s.length!==i.length&&(e=!0,n.setAsyncValidators(s))}}}const r=()=>{};return rh(t._rawValidators,r),rh(t._rawAsyncValidators,r),e}function Ow(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pw(n,t){uv(n,t)}function Lw(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const BK={provide:$n,useExisting:Pt(()=>Xl)},Yl=(()=>Promise.resolve())();let Xl=(()=>{class n extends $n{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ze,this.form=new lv({},ev(e),tv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Yl.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),$l(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Yl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Yl.then(()=>{const r=this._findContainer(e.path),i=new lv({});Pw(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Yl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){Yl.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Lw(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(ne(Pn,10),ne(vs,10),ne(Wl,8))},n.\u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&st("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Et([BK]),Ve]}),n})();function kw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Fw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Nw=class extends Rw{constructor(t=null,e,r){super(ov(e),av(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eh(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Fw(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Fw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},XK={provide:$n,useExisting:Pt(()=>Ql)};let Ql=(()=>{class n extends $n{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ze,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ih(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return $l(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){nh(e.control||null,e,!1),function NK(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,Lw(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(nh(r||null,e),(n=>n instanceof Nw)(i)&&($l(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);Pw(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function LK(n,t){return ih(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uv(this.form,this),this._oldForm&&ih(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(ne(Pn,10),ne(vs,10),ne(Wl,8))},n.\u0275dir=xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&st("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Et([XK]),Ve,Bn]}),n})();const pz=["trigger"],gz=["panel"];function mz(n,t){if(1&n&&(_e(0,"span",8),nt(1),Ee()),2&n){const e=tt();Ce(1),Or(e.placeholder)}}function vz(n,t){if(1&n&&(_e(0,"span",12),nt(1),Ee()),2&n){const e=tt(2);Ce(1),Or(e.triggerValue)}}function _z(n,t){1&n&&$t(0,0,["*ngSwitchCase","true"])}function yz(n,t){1&n&&(_e(0,"span",9),$e(1,vz,2,1,"span",10),$e(2,_z,1,0,"ng-content",11),Ee()),2&n&&(Te("ngSwitch",!!tt().customTrigger),Ce(2),Te("ngSwitchCase",!0))}function Ez(n,t){if(1&n){const e=Rr();_e(0,"div",13)(1,"div",14,15),st("@transformPanel.done",function(i){return Un(e),Vn(tt()._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){return Un(e),Vn(tt()._handleKeydown(i))}),$t(3,1),Ee()()}if(2&n){const e=tt();Te("@transformPanelWrap",void 0),Ce(1),iE("mat-select-panel ",e._getPanelTheme(),""),is("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),Te("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),lt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const bz=[[["mat-select-trigger"]],"*"],Dz=["mat-select-trigger","*"],ox={transformPanelWrap:cs("transformPanelWrap",[Nr("* => void",vg("@transformPanel",[mg()],{optional:!0}))]),transformPanel:cs("transformPanel",[or("void",Ht({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),or("showing",Ht({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),or("showing-multiple",Ht({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Nr("void => *",ri("120ms cubic-bezier(0, 0, 0.2, 1)")),Nr("* => void",ri("100ms 25ms linear",Ht({opacity:0})))])};let ax=0;const cx=new me("mat-select-scroll-strategy"),Mz=new me("MAT_SELECT_CONFIG"),wz={provide:cx,deps:[Ei],useFactory:function Tz(n){return()=>n.scrollStrategies.reposition()}};class xz{constructor(t,e){this.source=t,this.value=e}}const Az=jm(dM(Hm(hM(class{constructor(n,t,e,r,i){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=r,this.ngControl=i}})))),Iz=new me("MatSelectTrigger");let Rz=(()=>{class n extends Az{constructor(e,r,i,s,o,a,l,g,A,j,X,J,ee,ie){super(o,s,l,g,j),this._viewportRuler=e,this._changeDetectorRef=r,this._ngZone=i,this._dir=a,this._parentFormField=A,this._liveAnnouncer=ee,this._defaultOptions=ie,this._panelOpen=!1,this._compareWith=(ae,le)=>ae===le,this._uid="mat-select-"+ax++,this._triggerAriaLabelledBy=null,this._destroy=new F,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+ax++,this._panelDoneAnimatingStream=new F,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=td(()=>{const ae=this.options;return ae?ae.changes.pipe(Wi(ae),Hr(()=>ii(...ae.map(le=>le.onSelectionChange)))):this._ngZone.onStable.pipe(gn(1),Hr(()=>this.optionSelectionChanges))}),this.openedChange=new ze,this._openedStream=this.openedChange.pipe(_n(ae=>ae),Q(()=>{})),this._closedStream=this.openedChange.pipe(_n(ae=>!ae),Q(()=>{})),this.selectionChange=new ze,this.valueChange=new ze,this.ngControl&&(this.ngControl.valueAccessor=this),null!=ie?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=ie.typeaheadDebounceInterval),this._scrollStrategyFactory=J,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(X)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(sw.required)??!1}set required(e){this._required=xt(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=xt(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=xt(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Wn(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new tw(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(WT(),Ft(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ft(this._destroy)).subscribe(e=>{e.added.forEach(r=>r.select()),e.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(Wi(null),Ft(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),r=this.ngControl;if(e!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const r=e.keyCode,i=40===r||38===r||37===r||39===r,s=13===r||32===r,o=this._keyManager;if(!o.isTyping()&&s&&!Qi(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const r=this._keyManager,i=e.keyCode,s=40===i||38===i,o=r.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==i&&32!==i||!r.activeItem||Qi(e))if(!o&&this._multiple&&65===i&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=r.activeItemIndex;r.onKeydown(e),this._multiple&&s&&e.shiftKey&&r.activeItem&&r.activeItemIndex!==a&&r.activeItem._selectViaInteraction()}else e.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(gn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(e);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,e)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new I3(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Ft(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Ft(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=ii(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ft(e)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),ii(...this.options.map(r=>r._stateChanges)).pipe(Ft(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,r){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),r&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),r&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,e):e.indexOf(r)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let r=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(ne(Rd),ne(zn),ne(Ye),ne(Gm),ne(dt),ne(Xi,8),ne(Xl,8),ne(Ql,8),ne(ew,8),ne(Ci,10),ws("tabindex"),ne(cx),ne(Bm),ne(Mz,8))},n.\u0275dir=xe({type:n,viewQuery:function(e,r){if(1&e&&(yr(pz,5),yr(gz,5),yr(KT,5)),2&e){let i;bt(i=Dt())&&(r.trigger=i.first),bt(i=Dt())&&(r.panel=i.first),bt(i=Dt())&&(r._overlayDir=i.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Ve,Bn]}),n})(),Oz=(()=>{class n extends Rz{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,r,i){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-r+s/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Ft(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(gn(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const r=CM(e,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===r?0:function pG(n,t,e,r){return n<e?n:n+t>e+r?Math.max(0,n-r+t):e}((e+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new xz(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let g=this._selectionModel.selected[0]||this.options.first;o=g&&g.group?32:16}i||(o*=-1);const a=0-(e.left+o-(i?s:0)),l=e.right+o-r.width+(i?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,r,i){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?e*s:this._scrollTop===i?(e-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):r-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(e){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=i.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),g=Math.min(this._getItemCount()*r,256)-a-this._triggerRect.height;g>o?this._adjustPanelUp(g,o):a>s?this._adjustPanelDown(a,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,r){const i=Math.round(e-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,r,i){const s=Math.round(e-r);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*e,256),o=r*e-i;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=CM(a,this.options,this.optionGroups);const l=i/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const e=this._getItemHeight(),r=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=un(n)))(r||n)}}(),n.\u0275cmp=Lt({type:n,selectors:[["mat-select"]],contentQueries:function(e,r,i){if(1&e&&(fn(i,Iz,5),fn(i,DM,5),fn(i,bM,5)),2&e){let s;bt(s=Dt())&&(r.customTrigger=s.first),bt(s=Dt())&&(r.options=s),bt(s=Dt())&&(r.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,r){1&e&&st("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&e&&(lt("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-describedby",r._ariaDescribedby||null)("aria-activedescendant",r._getAriaActiveDescendant()),rn("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Et([{provide:Xd,useExisting:n},{provide:EM,useExisting:n}]),Ve],ngContentSelectors:Dz,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,r){if(1&e&&(Qr(bz),_e(0,"div",0,1),st("click",function(){return r.toggle()}),_e(3,"div",2),$e(4,mz,2,1,"span",3),$e(5,yz,3,2,"span",4),Ee(),_e(6,"div",5),yt(7,"div",6),Ee()(),$e(8,Ez,4,14,"ng-template",7),st("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&e){const i=Qc(1);lt("aria-owns",r.panelOpen?r.id+"-panel":null),Ce(3),Te("ngSwitch",r.empty),lt("id",r._valueId),Ce(1),Te("ngSwitchCase",!0),Ce(1),Te("ngSwitchCase",!1),Ce(3),Te("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},dependencies:[GT,Yo,wu,MD,KT,Mu],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[ox.transformPanelWrap,ox.transformPanel]},changeDetection:0}),n})(),Pz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[wz],imports:[[mi,Vd,SM,Ct],Od,dK,SM,Ct]}),n})();function Lz(n,t){if(1&n&&(_e(0,"mat-option",19),nt(1),Ee()),2&n){const e=t.$implicit;Te("value",e),Ce(1),_r(" ",e," ")}}function kz(n,t){if(1&n){const e=Rr();_e(0,"mat-form-field",16)(1,"mat-select",17),st("selectionChange",function(i){return Un(e),Vn(tt(2)._changePageSize(i.value))}),$e(2,Lz,2,2,"mat-option",18),Ee()()}if(2&n){const e=tt(2);Te("appearance",e._formFieldAppearance)("color",e.color),Ce(1),Te("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),Ce(1),Te("ngForOf",e._displayedPageSizeOptions)}}function Fz(n,t){if(1&n&&(_e(0,"div",20),nt(1),Ee()),2&n){const e=tt(2);Ce(1),Or(e.pageSize)}}function Nz(n,t){if(1&n&&(_e(0,"div",12)(1,"div",13),nt(2),Ee(),$e(3,kz,3,6,"mat-form-field",14),$e(4,Fz,2,1,"div",15),Ee()),2&n){const e=tt();Ce(2),_r(" ",e._intl.itemsPerPageLabel," "),Ce(1),Te("ngIf",e._displayedPageSizeOptions.length>1),Ce(1),Te("ngIf",e._displayedPageSizeOptions.length<=1)}}function Bz(n,t){if(1&n){const e=Rr();_e(0,"button",21),st("click",function(){return Un(e),Vn(tt().firstPage())}),Pi(),_e(1,"svg",7),yt(2,"path",22),Ee()()}if(2&n){const e=tt();Te("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),lt("aria-label",e._intl.firstPageLabel)}}function Uz(n,t){if(1&n){const e=Rr();Pi(),Bh(),_e(0,"button",23),st("click",function(){return Un(e),Vn(tt().lastPage())}),Pi(),_e(1,"svg",7),yt(2,"path",24),Ee()()}if(2&n){const e=tt();Te("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),lt("aria-label",e._intl.lastPageLabel)}}let oh=(()=>{class n{constructor(){this.changes=new F,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,r,i)=>{if(0==i||0==r)return`0 of ${i}`;const s=e*r;return`${s+1} \u2013 ${s<(i=Math.max(i,0))?Math.min(s+r,i):s+r} of ${i}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hz={provide:oh,deps:[[new Li,new As,oh]],useFactory:function Vz(n){return n||new oh}},Gz=new me("MAT_PAGINATOR_DEFAULT_OPTIONS"),Kz=Hm(rG(class{}));let zz=(()=>{class n extends Kz{constructor(e,r,i){if(super(),this._intl=e,this._changeDetectorRef=r,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new ze,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=i;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(Wn(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=Wn(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(Wn(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(r=>Wn(r)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=xt(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=xt(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const i=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,r)=>e-r),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(e){xo()},n.\u0275dir=xe({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[Ve]}),n})(),Wz=(()=>{class n extends zz{constructor(e,r,i){super(e,r,i),i&&null!=i.formFieldAppearance&&(this._formFieldAppearance=i.formFieldAppearance)}}return n.\u0275fac=function(e){return new(e||n)(ne(oh),ne(zn),ne(Gz,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[Ve],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,r){1&e&&(_e(0,"div",0)(1,"div",1),$e(2,Nz,5,3,"div",2),_e(3,"div",3)(4,"div",4),nt(5),Ee(),$e(6,Bz,3,5,"button",5),_e(7,"button",6),st("click",function(){return r.previousPage()}),Pi(),_e(8,"svg",7),yt(9,"path",8),Ee()(),Bh(),_e(10,"button",9),st("click",function(){return r.nextPage()}),Pi(),_e(11,"svg",7),yt(12,"path",10),Ee()(),$e(13,Uz,3,5,"button",11),Ee()()()),2&e&&(Ce(2),Te("ngIf",!r.hidePageSize),Ce(3),_r(" ",r._intl.getRangeLabel(r.pageIndex,r.pageSize,r.length)," "),Ce(1),Te("ngIf",r.showFirstLastButtons),Ce(1),Te("matTooltip",r._intl.previousPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),lt("aria-label",r._intl.previousPageLabel),Ce(3),Te("matTooltip",r._intl.nextPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),lt("aria-label",r._intl.nextPageLabel),Ce(3),Te("ngIf",r.showFirstLastButtons))},dependencies:[uK,Oz,DM,Kd,Vs,cl,Zm],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})(),$z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[Hz],imports:[[mi,Wm,Pz,UM,Ct]]}),n})();const Yz=["*",[["mat-card-footer"]]],Xz=["*","mat-card-footer"],Qz=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Zz=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let qz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),Jz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=xe({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),eW=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(ne(Lr,8))},n.\u0275cmp=Lt({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,r){2&e&&rn("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:Xz,decls:2,vars:0,template:function(e,r){1&e&&(Qr(Yz),$t(0),$t(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),tW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Lt({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:Zz,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,r){1&e&&(Qr(Qz),$t(0),_e(1,"div",0),$t(2,1),Ee(),$t(3,2))},encapsulation:2,changeDetection:0}),n})(),nW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct],Ct]}),n})(),rW=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=xt(e)}get inset(){return this._inset}set inset(e){this._inset=xt(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Lt({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,r){2&e&&(lt("aria-orientation",r.vertical?"vertical":"horizontal"),rn("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),iW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[Ct],Ct]}),n})();const sW=["*"],ux=new me("MatChipRemove"),dx=new me("MatChipAvatar"),hx=new me("MatChipTrailingIcon");class oW{constructor(t){this._elementRef=t}}const aW=dM(Hl(jm(oW),"primary"),-1);let ah=(()=>{class n extends aW{constructor(e,r,i,s,o,a,l,g){super(e),this._ngZone=r,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new F,this._onBlur=new F,this.selectionChange=new ze,this.destroyed=new ze,this.removed=new ze,this._addHostClassName(),this._chipRippleTarget=a.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new vM(this,r,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===l,this.tabIndex=null!=g&&parseInt(g)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const r=xt(e);r!==this._selected&&(this._selected=r,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=xt(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=xt(e)}get removable(){return this._removable}set removable(e){this._removable=xt(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",r=this._elementRef.nativeElement;r.hasAttribute(e)||r.tagName.toLowerCase()===e?r.classList.add(e):r.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled&&e.preventDefault()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case 46:case 8:this.remove(),e.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe(gn(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(Ye),ne(Sn),ne(_M,8),ne(zn),ne(We),ne(Lr,8),ws("tabindex"))},n.\u0275dir=xe({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,r,i){if(1&e&&(fn(i,dx,5),fn(i,hx,5),fn(i,ux,5)),2&e){let s;bt(s=Dt())&&(r.avatar=s.first),bt(s=Dt())&&(r.trailingIcon=s.first),bt(s=Dt())&&(r.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,r){1&e&&st("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&e&&(lt("tabindex",r.disabled?null:r.tabIndex)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString())("aria-selected",r.ariaSelected),rn("mat-chip-selected",r.selected)("mat-chip-with-avatar",r.avatar)("mat-chip-with-trailing-icon",r.trailingIcon||r.removeIcon)("mat-chip-disabled",r.disabled)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[Ve]}),n})();const fx=new me("mat-chips-default-options"),dW=hM(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r}});let hW=0;class fW{constructor(t,e){this.source=t,this.value=e}}let px=(()=>{class n extends dW{constructor(e,r,i,s,o,a,l){super(a,s,o,l),this._elementRef=e,this._changeDetectorRef=r,this._dir=i,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new F,this._uid="mat-chip-list-"+hW++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(g,A)=>g===A,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new ze,this.valueChange=new ze,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(e){this._multiple=xt(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(sw.required)??!1}set required(e){this._required=xt(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=xt(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=xt(e),this.chips&&this.chips.forEach(r=>r.chipListSelectable=this._selectable)}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return ii(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return ii(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return ii(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return ii(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new R3(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Ft(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe(Ft(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Wi(null),Ft(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new tw(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const r=e.target;r&&r.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,r=!0){if(this._clearSelection(),this.chips.forEach(i=>i.deselect()),Array.isArray(e))e.forEach(i=>this._selectValue(i,r)),this._sortValues();else{const i=this._selectValue(e,r);i&&r&&this._keyManager.setActiveItem(i)}}_selectValue(e,r=!0){const i=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,e));return i&&(r?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(r=>{r!==e&&r.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let r=null;r=Array.isArray(this.selected)?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=r,this.change.emit(new fW(this,r)),this.valueChange.emit(r),this._onChange(r),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(r=>{!this._selectionModel.isSelected(r)&&r.selected&&r.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let r=this.chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&this._keyManager.updateActiveItem(r),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const r=e.chip,i=this.chips.toArray().indexOf(e.chip);this._isValidIndex(i)&&r._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(e){let r=e.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-chip"))return!0;r=r.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple})}}return n.\u0275fac=function(e){return new(e||n)(ne(dt),ne(zn),ne(Xi,8),ne(Xl,8),ne(Ql,8),ne(Gm),ne(Ci,10))},n.\u0275cmp=Lt({type:n,selectors:[["mat-chip-list"]],contentQueries:function(e,r,i){if(1&e&&fn(i,ah,5),2&e){let s;bt(s=Dt())&&(r.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,r){1&e&&st("focus",function(){return r.focus()})("blur",function(){return r._blur()})("keydown",function(s){return r._keydown(s)}),2&e&&(Vo("id",r._uid),lt("tabindex",r.disabled?null:r._tabIndex)("aria-describedby",r._ariaDescribedby||null)("aria-required",r.role?r.required:null)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-multiselectable",r.multiple)("role",r.role)("aria-orientation",r.ariaOrientation),rn("mat-chip-list-disabled",r.disabled)("mat-chip-list-invalid",r.errorState)("mat-chip-list-required",r.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[Et([{provide:Xd,useExisting:n}]),Ve],ngContentSelectors:sW,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,r){1&e&&(Qr(),_e(0,"div",0),$t(1),Ee())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),mW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({providers:[Gm,{provide:fx,useValue:{separatorKeyCodes:[13]}}],imports:[[Ct]]}),n})();const gx=["box"],vW=function(){return[5,10]};function _W(n,t){if(1&n){const e=Rr();_e(0,"mat-paginator",4),st("page",function(i){return Un(e),Vn(tt().changesPaginator(i))}),Ee()}if(2&n){const e=tt();Te("length",e.courses.length)("pageSize",e.pageSize)("pageSizeOptions",function ZE(n,t,e){const r=Hn()+n,i=ge();return i[r]===Ke?hi(i,r,e?t.call(e):t()):function Ka(n,t){return n[t]}(i,r)}(3,vW))}}function yW(n,t){if(1&n&&(_e(0,"mat-chip"),nt(1),Ee()),2&n){const e=t.$implicit;Ce(1),_r(" ",e," ")}}const EW=function(n){return["/course",n]};function bW(n,t){if(1&n){const e=Rr();_e(0,"mat-grid-tile")(1,"mat-card",8)(2,"mat-card-header")(3,"mat-card-title",9)(4,"p",10)(5,"a",11),nt(6,"Open Course"),Ee()(),_e(7,"div",12)(8,"p",13),nt(9),Ee(),_e(10,"button",14),yt(11,"img",15),Ee()()()(),yt(12,"mat-divider"),_e(13,"mat-card-content",16),st("mouseover",function(){const s=Un(e).$implicit;return Vn(tt(2).playVideo(s.id))})("mouseleave",function(){const s=Un(e).$implicit;return Vn(tt(2).stopVideo(s.id))}),_e(14,"video",17),yt(15,"source",18),nt(16," Your browser does not support the video tag. "),Ee()(),_e(17,"div",19)(18,"div",20)(19,"div",21)(20,"div"),nt(21,"Rating:"),Ee(),yt(22,"ngx-stars",22),Ee(),_e(23,"p",23),nt(24,"Number of lessons: "),_e(25,"i"),nt(26),Ee()()(),yt(27,"mat-divider"),_e(28,"div",24)(29,"p"),nt(30," Skills: "),Ee(),_e(31,"mat-chip-list"),$e(32,yW,2,1,"mat-chip",7),Ee()()()()()}if(2&n){const e=t.$implicit;Ce(5),Te("routerLink",function qE(n,t,e,r){return JE(ge(),Hn(),n,t,e,r)}(11,EW,e.id)),Ce(4),Or(e.title),Ce(1),Te("matTooltip",e.description),Ce(4),Te("id","video-"+e.id)("poster",e.previewImageLink+"/cover.webp",Ba),Ce(1),Te("src",null==e||null==e.meta||null==e.meta.courseVideoPreview?null:e.meta.courseVideoPreview.link,Ba),Ce(7),Te("size",1)("readonly",!0)("initialStars",e.rating),Ce(4),Or(e.lessonsCount),Ce(6),Te("ngForOf",e.meta.skills)}}function DW(n,t){if(1&n){const e=Rr();_e(0,"div",5)(1,"mat-grid-list",6),st("resize",function(i){return Un(e),Vn(tt().onResize(i.target))},0,xy),$e(2,bW,33,13,"mat-grid-tile",7),Ee()()}if(2&n){const e=tt();Ce(1),Te("cols",e.columns)("gutterSize","10px")("rowHeight",e.rowHeight),Ce(1),Te("ngForOf",e.coursesView)}}function CW(n,t){1&n&&(_e(0,"div",25),yt(1,"mat-spinner",26),Ee())}function SW(n,t){1&n&&(_e(0,"div")(1,"div",27),nt(2,"Try to reload page "),_e(3,"mat-icon"),nt(4,"sync"),Ee()()())}let mx=(()=>{class n{constructor(e,r){this.service=e,this._snackBar=r,this.courses=[],this.coursesView=[],this.pageSize=10,this.isHideCourses=!0,this.columns=2,this.rowHeight="500px",this.panelOpenState=!1,this.count=0}set boxResizeTriggerInit(e){if(e){let r=document.getElementById("box");this.onBoxResize(),r?.addEventListener("onresize",this.onBoxResize)}}ngOnInit(){this.service.getCourses().subscribe(e=>{this.courses=e.courses,this.coursesView=[...this.courses].slice(0,this.pageSize),this.isHideCourses=!1,this.onResize(window)},()=>{this.isHideCourses=!1,this.openSnackBar("Something went wrong")})}ngAfterViewChecked(){0!==document.querySelectorAll("video").length&&0===this.count&&(this.count++,document.querySelectorAll("video").forEach(e=>{const r=e.querySelector("source")?.src?.toString(),i=new(ET())({});i.loadSource(r),i.attachMedia(e)}))}changesPaginator(e){this.count=0,this.coursesView=[...this.courses].slice(0===e.pageIndex?0:e.pageSize*e.pageIndex,0===e.pageIndex?e.pageSize:e.pageSize*(e.pageIndex+1))}onBoxResize(){if(this.box){let e=Math.floor(this.box.nativeElement.clientWidth/100);this.columns=e>0?e:1}else this.columns=1}openSnackBar(e,r=!0){this._snackBar.open(e,"Close",{duration:6e3,panelClass:r?"alert":"success"})}playVideo(e){document.querySelector("#video-"+e).play()}stopVideo(e){const r=document.querySelector("#video-"+e);r.currentTime=0,r.pause()}onResize(e){const r=e.innerWidth;r&&(r>770?this.columns=2:r<=770&&(this.columns=1))}}return n.\u0275fac=function(e){return new(e||n)(ne(bT),ne(RM))},n.\u0275cmp=Lt({type:n,selectors:[["app-courses"]],viewQuery:function(e,r){if(1&e&&(yr(gx,5),yr(gx,5)),2&e){let i;bt(i=Dt())&&(r.box=i.first),bt(i=Dt())&&(r.boxResizeTriggerInit=i.first)}},decls:4,vars:4,consts:[["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["class","box",4,"ngIf"],["class","blur",4,"ngIf"],[4,"ngIf"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],[1,"box"],["width","100%",3,"cols","gutterSize","rowHeight","resize"],[4,"ngFor","ngForOf"],[1,"card"],[1,"card__header"],[1,"open-btn"],[3,"routerLink"],[1,"card__header--info"],[1,"card__header--title"],["mat-button","","matTooltipPosition","above","aria-label","Button that displays a tooltip in various positions",1,"card__header--btn",3,"matTooltip"],["src","../../assets/lamp.png","alt","hint",1,"hint"],[1,"card__content",3,"mouseover","mouseleave"],["muted","",3,"id","poster"],["type","application/x-www-form-urlencoded",3,"src"],[1,"card__footer"],[1,"card__footer--item"],[1,"rating"],["customSize","1rem",1,"starts",3,"size","readonly","initialStars"],[1,"lessosns"],[1,"skills-block"],[1,"blur"],["color","",1,"spinner"],[1,"reload"]],template:function(e,r){1&e&&($e(0,_W,1,4,"mat-paginator",0),$e(1,DW,3,4,"div",1),$e(2,CW,2,0,"div",2),$e(3,SW,5,0,"div",3)),2&e&&(Te("ngIf",!r.isHideCourses&&r.courses.length),Ce(1),Te("ngIf",!r.isHideCourses&&r.courses.length),Ce(1),Te("ngIf",r.isHideCourses),Ce(1),Te("ngIf",!r.courses.length&&!r.isHideCourses))},dependencies:[cl,Vs,kl,kM,N4,XM,Wz,eW,tW,qz,Jz,bi,Zm,Kd,rW,WM,px,ah],styles:[".box[_ngcontent-%COMP%]{margin:auto;margin-top:5rem;max-width:1010px}@media screen and (max-width: 378px){.box[_ngcontent-%COMP%]{margin-top:7rem}}.open-btn[_ngcontent-%COMP%]{font-size:13px;display:flex;justify-content:flex-end;margin:10px 10px 0 0}.open-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.open-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#aeadad}.open-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.card[_ngcontent-%COMP%]{height:100%;margin-bottom:15px;width:500px}.card__header[_ngcontent-%COMP%]{width:100%;margin:0 0 10px!important;height:45px;padding:0}.card__header--info[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between}.card__header--title[_ngcontent-%COMP%]{font-size:14px}.card__header--btn[_ngcontent-%COMP%]{min-width:20px;width:30px;display:flex;justify-content:center}.card__content[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:170px;margin:0;position:relative;z-index:2}.card__content[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]:hover{transform:scale(1.4);box-shadow:#00000059 0 5px 15px}.card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{width:20px}.card__footer[_ngcontent-%COMP%]{padding:5px 10px}.card__footer--item[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.card__footer[_ngcontent-%COMP%]   .skills-block[_ngcontent-%COMP%]{margin-top:20px}.card__footer[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{align-items:center;display:flex}  .stars-line>div{display:flex;z-index:1!important}  snack-bar-container.alert{background:#ff8080}  .mat-progress-spinner circle,   .mat-spinner circle{stroke:#3e2dbb!important;opacity:1}  .mat-card-header-text{margin:0!important;width:100%;padding:0}  .mat-card-content{margin-bottom:0!important;margin-top:15px}  .mat-paginator{background:rgba(175,175,175,.5607843137);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:fixed;z-index:3;top:36px;right:0;width:100%;color:#111}  .mat-paginator-container{min-height:40px}  .mat-typography p{margin:0}  .mat-select-value{color:#111}  .mat-grid-tile{border-radius:10px}.modified-mc-content[_ngcontent-%COMP%]{height:48px}.modified-mc-content[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%]{z-index:1}.modified-mc-content[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%] > .mat-expansion-panel-content[_ngcontent-%COMP%]{max-height:50vh;overflow:auto}.modified-mc-content[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:auto}"]}),n})();const TW=[{path:"",component:mx},{path:"courses",component:mx},{path:"course/:id",component:x4}];let MW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[_T.forRoot(TW),_T]}),n})(),wW=(()=>{class n{constructor(e){this.http=e,this.URL="https://api.wisey.app/api/v1"}getToken(){return this.http.get(`${this.URL}/auth/anonymous`,{params:{platform:"subscriptions"}})}}return n.\u0275fac=function(e){return new(e||n)(oe(pl))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xW=(()=>{class n{constructor(){this.isShowMenu=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Lt({type:n,selectors:[["app-header"]],decls:3,vars:0,consts:[[1,"header"],[1,"header__title"]],template:function(e,r){1&e&&(_e(0,"div",0)(1,"div",1),nt(2," Genesis Test "),Ee()())},styles:[".header[_ngcontent-%COMP%]{height:30px;padding:3px 0;display:flex;flex-direction:row;align-items:center;background:rgb(0,0,71);background:linear-gradient(309deg,rgb(0,0,71) 11%,rgb(77,77,227) 38%,rgb(68,73,216) 59%,rgb(8,3,123) 89%)}.header__title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;align-self:center;display:flex;justify-content:center;width:100%}"]}),n})(),AW=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Lt({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"footer"],[1,"info"],[1,"links"],["href","https://github.com/DanaDovzhhttps://github.com/DanaDovzh/genesis-test"]],template:function(e,r){1&e&&(_e(0,"div",0)(1,"div",1),nt(2,"Genesis, Front-End School 2.0, 2023"),Ee(),_e(3,"div",2)(4,"a",3),nt(5,"GitHub"),Ee()()())},styles:[".footer[_ngcontent-%COMP%]{padding:5px;background:linear-gradient(309deg,rgb(0,0,71) 49%,rgb(6,10,124) 74%,rgb(0,25,255) 95%);display:flex;align-items:center;justify-content:space-between;color:#fff}"]}),n})(),IW=(()=>{class n{constructor(e){this.service=e,this.title="genesis-test"}ngOnInit(){this.service.getToken().subscribe(e=>localStorage.setItem("token",e.token))}}return n.\u0275fac=function(e){return new(e||n)(ne(wW))},n.\u0275cmp=Lt({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"content"]],template:function(e,r){1&e&&(_e(0,"div",0),yt(1,"app-header"),_e(2,"div",1),yt(3,"router-outlet"),Ee(),yt(4,"app-footer"),Ee())},dependencies:[lm,xW,AW],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{flex-shrink:1;flex-grow:1;position:relative;overflow-y:auto}app-footer[_ngcontent-%COMP%]{position:relative;bottom:0;flex-shrink:0;flex-grow:0;background:#eee}"]}),n})(),RW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({}),n})(),OW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[[mi,Ct,RW,Fd]]}),n})(),PW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=Je({imports:[B4,$z,nW,e4,UM,Wm,AM,iW,b4,OW,mW,GG]}),n})(),LW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=rt({type:n,bootstrap:[IW]}),n.\u0275inj=Je({imports:[tC,LB,MW,kV,WG,PW]}),n})();iB().bootstrapModule(LW).catch(n=>console.error(n))},70:function(fa){var He;typeof window<"u"&&(He=()=>(()=>{var io={"./src/config.ts":
/*!***********************!*\
                  !*** ./src/config.ts ***!
                  \***********************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{enableStreamingMode:()=>d,hlsDefaultConfig:()=>E,mergeConfig:()=>u});var W=O(
/*! ./controller/abr-controller */
"./src/controller/abr-controller.ts"),B=O(
/*! ./controller/audio-stream-controller */
"./src/controller/audio-stream-controller.ts"),z=O(
/*! ./controller/audio-track-controller */
"./src/controller/audio-track-controller.ts"),V=O(
/*! ./controller/subtitle-stream-controller */
"./src/controller/subtitle-stream-controller.ts"),Y=O(
/*! ./controller/subtitle-track-controller */
"./src/controller/subtitle-track-controller.ts"),U=O(
/*! ./controller/buffer-controller */
"./src/controller/buffer-controller.ts"),N=O(
/*! ./controller/timeline-controller */
"./src/controller/timeline-controller.ts"),L=O(
/*! ./controller/cap-level-controller */
"./src/controller/cap-level-controller.ts"),R=O(
/*! ./controller/fps-controller */
"./src/controller/fps-controller.ts"),P=O(
/*! ./controller/eme-controller */
"./src/controller/eme-controller.ts"),D=O(
/*! ./controller/cmcd-controller */
"./src/controller/cmcd-controller.ts"),I=O(
/*! ./utils/xhr-loader */
"./src/utils/xhr-loader.ts"),M=O(
/*! ./utils/fetch-loader */
"./src/utils/fetch-loader.ts"),_=O(
/*! ./utils/cues */
"./src/utils/cues.ts"),m=O(
/*! ./utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),v=O(
/*! ./utils/logger */
"./src/utils/logger.ts");function f(){return f=Object.assign?Object.assign.bind():function(c){for(var p=1;p<arguments.length;p++){var x=arguments[p];for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(c[T]=x[T])}return c},f.apply(this,arguments)}function b(c,p){var x=Object.keys(c);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(c);p&&(T=T.filter(function(k){return Object.getOwnPropertyDescriptor(c,k).enumerable})),x.push.apply(x,T)}return x}function C(c){for(var p=1;p<arguments.length;p++){var x=null!=arguments[p]?arguments[p]:{};p%2?b(Object(x),!0).forEach(function(T){h(c,T,x[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(x)):b(Object(x)).forEach(function(T){Object.defineProperty(c,T,Object.getOwnPropertyDescriptor(x,T))})}return c}function h(c,p,x){return p=function y(c){var p=function w(c,p){if("object"!=typeof c||null===c)return c;var x=c[Symbol.toPrimitive];if(void 0!==x){var T=x.call(c,p||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(c)}(c,"string");return"symbol"==typeof p?p:String(p)}(p),p in c?Object.defineProperty(c,p,{value:x,enumerable:!0,configurable:!0,writable:!0}):c[p]=x,c}var E=C(C({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:I.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:W.default,bufferController:U.default,capLevelController:L.default,fpsController:R.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},function S(){return{cueHandler:_.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:V.SubtitleStreamController,subtitleTrackController:Y.default,timelineController:N.TimelineController,audioStreamController:B.default,audioTrackController:z.default,emeController:P.default,cmcdController:D.default});function u(c,p){if((p.liveSyncDurationCount||p.liveMaxLatencyDurationCount)&&(p.liveSyncDuration||p.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==p.liveMaxLatencyDurationCount&&(void 0===p.liveSyncDurationCount||p.liveMaxLatencyDurationCount<=p.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==p.liveMaxLatencyDuration&&(void 0===p.liveSyncDuration||p.liveMaxLatencyDuration<=p.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return f({},c,p)}function d(c){var p=c.loader;p!==M.default&&p!==I.default?(v.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),c.progressive=!1):(0,M.fetchSupported)()&&(c.loader=M.default,c.progressive=!0,c.enableSoftwareAES=!0,v.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/abr-controller.ts ***!
                  \******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>I});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../utils/ewma-bandwidth-estimator */
"./src/utils/ewma-bandwidth-estimator.ts"),z=O(
/*! ../events */
"./src/events.ts"),V=O(
/*! ../errors */
"./src/errors.ts"),Y=O(
/*! ../types/loader */
"./src/types/loader.ts"),U=O(
/*! ../utils/logger */
"./src/utils/logger.ts");function N(M,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(M,R(v.key),v)}}function R(M){var _=function P(M,_){if("object"!=typeof M||null===M)return M;var m=M[Symbol.toPrimitive];if(void 0!==m){var v=m.call(M,_||"default");if("object"!=typeof v)return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(M)}(M,"string");return"symbol"==typeof _?_:String(_)}const I=function(){function M(m){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=m;var v=m.config;this.bwEstimator=new B.default(v.abrEwmaSlowVoD,v.abrEwmaFastVoD,v.abrEwmaDefaultEstimate),this.registerListeners()}var _=M.prototype;return _.registerListeners=function(){var v=this.hls;v.on(z.Events.FRAG_LOADING,this.onFragLoading,this),v.on(z.Events.FRAG_LOADED,this.onFragLoaded,this),v.on(z.Events.FRAG_BUFFERED,this.onFragBuffered,this),v.on(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.on(z.Events.ERROR,this.onError,this)},_.unregisterListeners=function(){var v=this.hls;v.off(z.Events.FRAG_LOADING,this.onFragLoading,this),v.off(z.Events.FRAG_LOADED,this.onFragLoaded,this),v.off(z.Events.FRAG_BUFFERED,this.onFragBuffered,this),v.off(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.off(z.Events.ERROR,this.onError,this)},_.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},_.onFragLoading=function(v,f){var C,b=f.frag;b.type!==Y.PlaylistLevelType.MAIN||this.timer||(this.fragCurrent=b,this.partCurrent=null!=(C=f.part)?C:null,this.timer=self.setInterval(this.onCheck,100))},_.onLevelLoaded=function(v,f){var b=this.hls.config;f.details.live?this.bwEstimator.update(b.abrEwmaSlowLive,b.abrEwmaFastLive):this.bwEstimator.update(b.abrEwmaSlowVoD,b.abrEwmaFastVoD)},_._abandonRulesCheck=function(){var v=this.fragCurrent,f=this.partCurrent,b=this.hls,C=b.autoLevelEnabled,h=b.media;if(v&&h){var y=f?f.stats:v.stats,w=f?f.duration:v.duration;if(y.aborted||y.loaded&&y.loaded===y.total||0===v.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(C&&!h.paused&&h.playbackRate&&h.readyState){var E=b.mainForwardBufferInfo;if(null!==E){var S=performance.now()-y.loading.start,u=Math.abs(h.playbackRate);if(!(S<=500*w/u)){var d=y.loaded&&y.loading.first,c=this.bwEstimator.getEstimate(),p=b.levels,x=b.minAutoLevel,k=y.total||Math.max(y.loaded,Math.round(w*p[v.level].maxBitrate/8)),H=d?1e3*y.loaded/S:0,F=H?(k-y.loaded)/H:8*k/c,G=E.len/u;if(!(F<=G)){var $,K=Number.POSITIVE_INFINITY;for($=v.level-1;$>x;$--){var Z=p[$].maxBitrate;if((K=H?w*Z/(6.4*H):w*Z/c)<G)break}K>=F||(U.logger.warn("Fragment "+v.sn+(f?" part "+f.index:"")+" of level "+v.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+$+"\n      Current BW estimate: "+((0,W.isFiniteNumber)(c)?(c/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+F.toFixed(3)+" s\n      Estimated load time for the next fragment: "+K.toFixed(3)+" s\n      Time to underbuffer: "+G.toFixed(3)+" s"),b.nextLoadLevel=$,d&&this.bwEstimator.sample(S,y.loaded),this.clearTimer(),(v.loader||v.keyLoader)&&(this.fragCurrent=this.partCurrent=null,v.abortRequests()),b.trigger(z.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:v,part:f,stats:y}))}}}}}},_.onFragLoaded=function(v,f){var b=f.frag,C=f.part;if(b.type===Y.PlaylistLevelType.MAIN&&(0,W.isFiniteNumber)(b.sn)){var h=C?C.stats:b.stats,y=C?C.duration:b.duration;if(this.clearTimer(),this.lastLoadedFragLevel=b.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var w=this.hls.levels[b.level],E=(w.loaded?w.loaded.bytes:0)+h.loaded,S=(w.loaded?w.loaded.duration:0)+y;w.loaded={bytes:E,duration:S},w.realBitrate=Math.round(8*E/S)}b.bitrateTest&&this.onFragBuffered(z.Events.FRAG_BUFFERED,{stats:h,frag:b,part:C,id:b.type})}},_.onFragBuffered=function(v,f){var b=f.frag,C=f.part,h=C?C.stats:b.stats;if(!h.aborted&&b.type===Y.PlaylistLevelType.MAIN&&"initSegment"!==b.sn){var y=h.parsing.end-h.loading.start;this.bwEstimator.sample(y,h.loaded),h.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=b.bitrateTest?y/1e3:0}},_.onError=function(v,f){var b;if((null===(b=f.frag)||void 0===b?void 0:b.type)===Y.PlaylistLevelType.MAIN){if(f.type===V.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(f.details){case V.ErrorDetails.FRAG_LOAD_ERROR:case V.ErrorDetails.FRAG_LOAD_TIMEOUT:case V.ErrorDetails.KEY_LOAD_ERROR:case V.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},_.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},_.getNextABRAutoLevel=function(){var v=this.fragCurrent,f=this.partCurrent,b=this.hls,C=b.maxAutoLevel,h=b.config,y=b.minAutoLevel,w=b.media,E=f?f.duration:v?v.duration:0,S=w&&0!==w.playbackRate?Math.abs(w.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():h.abrEwmaDefaultEstimate,d=b.mainForwardBufferInfo,c=(d?d.len:0)/S,p=this.findBestLevel(u,y,C,c,h.abrBandWidthFactor,h.abrBandWidthUpFactor);if(p>=0)return p;U.logger.trace((c?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var x=E?Math.min(E,h.maxStarvationDelay):h.maxStarvationDelay,T=h.abrBandWidthFactor,k=h.abrBandWidthUpFactor;if(!c){var H=this.bitrateTestDelay;H&&(x=(E?Math.min(E,h.maxLoadingDelay):h.maxLoadingDelay)-H,U.logger.trace("bitrate test took "+Math.round(1e3*H)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*x)+" ms"),T=k=1)}return p=this.findBestLevel(u,y,C,c+x,T,k),Math.max(p,0)},_.findBestLevel=function(v,f,b,C,h,y){for(var w,E=this.fragCurrent,S=this.partCurrent,u=this.lastLoadedFragLevel,d=this.hls.levels,c=d[u],p=!(null==c||null===(w=c.details)||void 0===w||!w.live),x=c?.codecSet,T=S?S.duration:E?E.duration:0,k=b;k>=f;k--){var H=d[k];if(H&&(!x||H.codecSet===x)){var K,F=H.details,G=(S?F?.partTarget:F?.averagetargetduration)||T,$=d[k].maxBitrate,Z=$*G/(K=k<=u?h*v:y*v);if(U.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+k+"/"+Math.round(K)+"/"+$+"/"+G+"/"+C+"/"+Z),K>$&&(0===Z||!(0,W.isFiniteNumber)(Z)||p&&!this.bitrateTestDelay||Z<C))return k}}return-1},function L(M,_,m){_&&N(M.prototype,_),m&&N(M,m),Object.defineProperty(M,"prototype",{writable:!1})}(M,[{key:"nextAutoLevel",get:function(){var v=this._nextAutoLevel;if(-1!==v&&!this.bwEstimator.canEstimate())return v;var b=this.getNextABRAutoLevel();return-1!==v&&this.hls.levels[b].loadError?v:(-1!==v&&(b=Math.min(v,b)),b)},set:function(v){this._nextAutoLevel=v}}]),M}()},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
                  !*** ./src/controller/audio-stream-controller.ts ***!
                  \***************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>h});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),z=O(
/*! ../events */
"./src/events.ts"),V=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),Y=O(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),U=O(
/*! ../types/level */
"./src/types/level.ts"),N=O(
/*! ../types/loader */
"./src/types/loader.ts"),L=O(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),R=O(
/*! ../demux/chunk-cache */
"./src/demux/chunk-cache.ts"),P=O(
/*! ../demux/transmuxer-interface */
"./src/demux/transmuxer-interface.ts"),D=O(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),I=O(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),M=O(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),_=O(
/*! ../errors */
"./src/errors.ts");function m(){return m=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var E=arguments[w];for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(y[S]=E[S])}return y},m.apply(this,arguments)}function f(y,w){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,u){return S.__proto__=u,S})(y,w)}const h=function(y){function w(S,u,d){var c;return(c=y.call(this,S,u,d,"[audio-stream-controller]")||this).videoBuffer=null,c.videoTrackCC=-1,c.waitingVideoCC=-1,c.audioSwitch=!1,c.trackId=-1,c.waitingData=null,c.mainDetails=null,c.bufferFlushed=!1,c.cachedTrackLoadedData=null,c._registerListeners(),c}!function v(y,w){y.prototype=Object.create(w.prototype),y.prototype.constructor=y,f(y,w)}(w,y);var E=w.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var u=this.hls;u.on(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(z.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.on(z.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(z.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.on(z.Events.ERROR,this.onError,this),u.on(z.Events.BUFFER_RESET,this.onBufferReset,this),u.on(z.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(z.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(z.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.on(z.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var u=this.hls;u.off(z.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(z.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(z.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(z.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(z.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.off(z.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(z.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.off(z.Events.ERROR,this.onError,this),u.off(z.Events.BUFFER_RESET,this.onBufferReset,this),u.off(z.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(z.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(z.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.off(z.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(u,d){var c=d.frag,x=d.initPTS;if("main"===d.id){var T=c.cc;this.initPTS[c.cc]=x,this.log("InitPTS for cc: "+T+" found from main: "+x),this.videoTrackCC=T,this.state===B.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(u){if(!this.levels)return this.startPosition=u,void(this.state=B.State.STOPPED);var d=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,d>0&&-1===u?(this.log("Override startPosition with lastCurrentTime @"+d.toFixed(3)),u=d,this.state=B.State.IDLE):(this.loadedmetadata=!1,this.state=B.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()},E.doTick=function(){switch(this.state){case B.State.IDLE:this.doTickIdle();break;case B.State.WAITING_TRACK:var u,d=this.levels,p=null==d||null===(u=d[this.trackId])||void 0===u?void 0:u.details;if(p){if(this.waitForCdnTuneIn(p))break;this.state=B.State.WAITING_INIT_PTS}break;case B.State.FRAG_LOADING_WAITING_RETRY:var x,T=performance.now(),k=this.retryDate;(!k||T>=k||null!==(x=this.media)&&void 0!==x&&x.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=B.State.IDLE);break;case B.State.WAITING_INIT_PTS:var H=this.waitingData;if(H){var F=H.frag,G=H.part,K=H.cache,$=H.complete;if(void 0!==this.initPTS[F.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=B.State.FRAG_LOADING;var te={frag:F,part:G,payload:K.flush(),networkDetails:null};this._handleFragmentLoadProgress(te),$&&y.prototype._handleFragmentLoadComplete.call(this,te)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+F.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Q=this.getLoadPosition(),re=V.BufferHelper.bufferInfo(this.mediaBuffer,Q,this.config.maxBufferHole);(0,I.fragmentWithinToleranceTest)(re.end,this.config.maxFragLookUpTolerance,F)<0&&(this.log("Waiting fragment cc ("+F.cc+") @ "+F.start+" cancelled because another fragment at "+re.end+" is needed"),this.clearWaitingFragment())}}else this.state=B.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var u=this.waitingData;u&&(this.fragmentTracker.removeFragment(u.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=B.State.IDLE)},E.resetLoadingState=function(){this.clearWaitingFragment(),y.prototype.resetLoadingState.call(this)},E.onTickEnd=function(){var u=this.media;!u||!u.readyState||(this.lastCurrentTime=u.currentTime)},E.doTickIdle=function(){var u=this.hls,d=this.levels,c=this.media,p=this.trackId;if(d&&d[p]&&(c||!this.startFragRequested&&u.config.startFragPrefetch)){var k=d[p].details;if(!k||k.live&&this.levelLastLoaded!==p||this.waitForCdnTuneIn(k))return void(this.state=B.State.WAITING_TRACK);var H=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&H&&(this.bufferFlushed=!1,this.afterBufferFlushed(H,L.ElementaryStreamTypes.AUDIO,N.PlaylistLevelType.AUDIO));var F=this.getFwdBufferInfo(H,N.PlaylistLevelType.AUDIO);if(null!==F){var G=this.audioSwitch;if(!G&&this._streamEnded(F,k))return u.trigger(z.Events.BUFFER_EOS,{type:"audio"}),void(this.state=B.State.ENDED);var K=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,N.PlaylistLevelType.MAIN);if(!(F.len>=this.getMaxBufferLength(K?.len))||G){var Q=k.fragments[0].start,re=F.end;if(G&&c){var se=this.getLoadPosition();re=se,k.PTSKnown&&se<Q&&(F.end>Q||F.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),c.currentTime=Q+.05)}if(!(K&&re>K.end+k.targetduration)&&(K&&K.len||!F.len)){var ce=this.getNextFragment(re,k);if(!ce)return void(this.bufferFlushed=!0);this.loadFragment(ce,k,re)}}}}},E.getMaxBufferLength=function(u){var d=y.prototype.getMaxBufferLength.call(this);return u?Math.max(d,u):d},E.onMediaDetaching=function(){this.videoBuffer=null,y.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(u,d){var c=d.audioTracks;this.resetTransmuxer(),this.levels=c.map(function(p){return new U.Level(p)})},E.onAudioTrackSwitching=function(u,d){var c=!!d.url;this.trackId=d.id;var p=this.fragCurrent;p&&p.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),c?this.setInterval(100):this.resetTransmuxer(),c?(this.audioSwitch=!0,this.state=B.State.IDLE):this.state=B.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(u,d){this.mainDetails=d.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(z.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},E.onAudioTrackLoaded=function(u,d){var c;if(null!=this.mainDetails){var p=this.levels,x=d.details,T=d.id;if(p){this.log("Track "+T+" loaded ["+x.startSN+","+x.endSN+"],duration:"+x.totalduration);var k=p[T],H=0;if(x.live||null!==(c=k.details)&&void 0!==c&&c.live){var F=this.mainDetails;if(x.fragments[0]||(x.deltaUpdateFailed=!0),x.deltaUpdateFailed||!F)return;!k.details&&x.hasProgramDateTime&&F.hasProgramDateTime?((0,M.alignMediaPlaylistByPDT)(x,F),H=x.fragments[0].start):H=this.alignPlaylists(x,k.details)}k.details=x,this.levelLastLoaded=T,!this.startFragRequested&&(this.mainDetails||!x.live)&&this.setStartPosition(k.details,H),this.state===B.State.WAITING_TRACK&&!this.waitForCdnTuneIn(x)&&(this.state=B.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+T)}else this.cachedTrackLoadedData=d},E._handleFragmentLoadProgress=function(u){var d,c=u.frag,p=u.part,x=u.payload,T=this.config,k=this.trackId,H=this.levels;if(H){var F=H[k];console.assert(F,"Audio track is defined on fragment load progress");var G=F.details;console.assert(G,"Audio track details are defined on fragment load progress");var K=T.defaultAudioCodec||F.audioCodec||"mp4a.40.2",$=this.transmuxer;$||($=this.transmuxer=new P.default(this.hls,N.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Z=this.initPTS[c.cc],te=null===(d=c.initSegment)||void 0===d?void 0:d.data;if(void 0!==Z){var re=p?p.index:-1,ce=new D.ChunkMetadata(c.level,c.sn,c.stats.chunkCount,x.byteLength,re,-1!==re);$.push(x,te,K,"",c,p,G.totalduration,!1,ce,Z)}else this.log("Unknown video PTS for cc "+c.cc+", waiting for video PTS before demuxing audio frag "+c.sn+" of ["+G.startSN+" ,"+G.endSN+"],track "+k),(this.waitingData=this.waitingData||{frag:c,part:p,cache:new R.default,complete:!1}).cache.push(new Uint8Array(x)),this.waitingVideoCC=this.videoTrackCC,this.state=B.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+c.sn+" of level "+c.level+" will not be buffered")},E._handleFragmentLoadComplete=function(u){this.waitingData?this.waitingData.complete=!0:y.prototype._handleFragmentLoadComplete.call(this,u)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(u,d){var c=d.tracks.audio;c&&(this.mediaBuffer=c.buffer||null),d.tracks.video&&(this.videoBuffer=d.tracks.video.buffer||null)},E.onFragBuffered=function(u,d){var x,c=d.frag,p=d.part;c.type===N.PlaylistLevelType.AUDIO?this.fragContextChanged(c)?this.warn("Fragment "+c.sn+(p?" p: "+p.index:"")+" of level "+c.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==c.sn&&(this.fragPrevious=c,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(z.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(c,p)):this.loadedmetadata||c.type!==N.PlaylistLevelType.MAIN||null!==(x=this.videoBuffer||this.media)&&void 0!==x&&x.buffered.length&&(this.loadedmetadata=!0)},E.onError=function(u,d){if(d.type!==_.ErrorTypes.KEY_SYSTEM_ERROR)switch(d.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:case _.ErrorDetails.FRAG_PARSING_ERROR:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(N.PlaylistLevelType.AUDIO,d);break;case _.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==B.State.ERROR&&this.state!==B.State.STOPPED&&(this.state=d.fatal?B.State.ERROR:B.State.IDLE,this.warn(d.details+" while loading frag, switching to "+this.state+" state"));break;case _.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===d.parent&&(this.state===B.State.PARSING||this.state===B.State.PARSED)){var c=!0,p=this.getFwdBufferInfo(this.mediaBuffer,N.PlaylistLevelType.AUDIO);p&&p.len>.5&&(c=!this.reduceMaxBufferLength(p.len)),c&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(N.PlaylistLevelType.AUDIO,d)},E.onBufferFlushed=function(u,d){d.type===L.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===B.State.ENDED&&(this.state=B.State.IDLE))},E._handleTransmuxComplete=function(u){var d,c="audio",p=this.hls,x=u.remuxResult,T=u.chunkMeta,k=this.getCurrentContext(T);if(!k)return this.warn("The loading context changed while buffering fragment "+T.sn+" of level "+T.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(T.level);var H=k.frag,F=k.part,G=k.level.details,K=x.audio,$=x.text,Z=x.id3,te=x.initSegment;if(!this.fragContextChanged(H)&&G){if(this.state=B.State.PARSING,this.audioSwitch&&K&&this.completeAudioSwitch(),null!=te&&te.tracks&&(this._bufferInitSegment(te.tracks,H,T),p.trigger(z.Events.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:c,tracks:te.tracks})),K){var Q=K.startPTS,re=K.endPTS,se=K.startDTS,ce=K.endDTS;F&&(F.elementaryStreams[L.ElementaryStreamTypes.AUDIO]={startPTS:Q,endPTS:re,startDTS:se,endDTS:ce}),H.setElementaryStreamInfo(L.ElementaryStreamTypes.AUDIO,Q,re,se,ce),this.bufferFragmentData(K,H,F,T)}if(null!=Z&&null!==(d=Z.samples)&&void 0!==d&&d.length){var ue=m({id:c,frag:H,details:G},Z);p.trigger(z.Events.FRAG_PARSING_METADATA,ue)}if($){var he=m({id:c,frag:H,details:G},$);p.trigger(z.Events.FRAG_PARSING_USERDATA,he)}}},E._bufferInitSegment=function(u,d,c){if(this.state===B.State.PARSING){u.video&&delete u.video;var p=u.audio;if(p){p.levelCodec=p.codec,p.id="audio",this.log("Init audio buffer, container:"+p.container+", codecs[parsed]=["+p.codec+"]"),this.hls.trigger(z.Events.BUFFER_CODECS,u);var x=p.initSegment;null!=x&&x.byteLength&&this.hls.trigger(z.Events.BUFFER_APPENDING,{type:"audio",frag:d,part:null,chunkMeta:c,parent:d.type,data:x}),this.tick()}}},E.loadFragment=function(u,d,c){var p=this.fragmentTracker.getState(u);this.fragCurrent=u,(this.audioSwitch||p===Y.FragmentState.NOT_LOADED||p===Y.FragmentState.PARTIAL)&&("initSegment"===u.sn?this._loadInitSegment(u,d):d.live&&!(0,W.isFiniteNumber)(this.initPTS[u.cc])?(this.log("Waiting for video PTS in continuity counter "+u.cc+" of live stream before loading audio fragment "+u.sn+" of level "+this.trackId),this.state=B.State.WAITING_INIT_PTS):(this.startFragRequested=!0,y.prototype.loadFragment.call(this,u,d,c)))},E.completeAudioSwitch=function(){var u=this.hls,c=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,u.trigger(z.Events.AUDIO_TRACK_SWITCHED,{id:c})},w}(B.default)},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
                  !*** ./src/controller/audio-track-controller.ts ***!
                  \**************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>I});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../errors */
"./src/errors.ts"),z=O(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),V=O(
/*! ../types/loader */
"./src/types/loader.ts");function Y(M,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(M,N(v.key),v)}}function N(M){var _=function L(M,_){if("object"!=typeof M||null===M)return M;var m=M[Symbol.toPrimitive];if(void 0!==m){var v=m.call(M,_||"default");if("object"!=typeof v)return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(M)}(M,"string");return"symbol"==typeof _?_:String(_)}function P(M,_){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,f){return v.__proto__=f,v})(M,_)}const I=function(M){function _(v){var f;return(f=M.call(this,v,"[audio-track-controller]")||this).tracks=[],f.groupId=null,f.tracksInGroup=[],f.trackId=-1,f.trackName="",f.selectDefaultTrack=!0,f.registerListeners(),f}!function R(M,_){M.prototype=Object.create(_.prototype),M.prototype.constructor=M,P(M,_)}(_,M);var m=_.prototype;return m.registerListeners=function(){var f=this.hls;f.on(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(W.Events.MANIFEST_PARSED,this.onManifestParsed,this),f.on(W.Events.LEVEL_LOADING,this.onLevelLoading,this),f.on(W.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),f.on(W.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),f.on(W.Events.ERROR,this.onError,this)},m.unregisterListeners=function(){var f=this.hls;f.off(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(W.Events.MANIFEST_PARSED,this.onManifestParsed,this),f.off(W.Events.LEVEL_LOADING,this.onLevelLoading,this),f.off(W.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),f.off(W.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),f.off(W.Events.ERROR,this.onError,this)},m.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,M.prototype.destroy.call(this)},m.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},m.onManifestParsed=function(f,b){this.tracks=b.audioTracks||[]},m.onAudioTrackLoaded=function(f,b){var C=b.id,h=b.details,y=this.tracksInGroup[C];if(y){var w=y.details;y.details=b.details,this.log("audioTrack "+C+" loaded ["+h.startSN+"-"+h.endSN+"]"),C===this.trackId&&(this.retryCount=0,this.playlistLoaded(C,b,w))}else this.warn("Invalid audio track id "+C)},m.onLevelLoading=function(f,b){this.switchLevel(b.level)},m.onLevelSwitching=function(f,b){this.switchLevel(b.level)},m.switchLevel=function(f){var b=this.hls.levels[f];if(null!=b&&b.audioGroupIds){var C=b.audioGroupIds[b.urlId];if(this.groupId!==C){this.groupId=C;var h=this.tracks.filter(function(w){return!C||w.groupId===C});this.selectDefaultTrack&&!h.some(function(w){return w.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=h;var y={audioTracks:h};this.log("Updating audio tracks, "+h.length+' track(s) found in "'+C+'" group-id'),this.hls.trigger(W.Events.AUDIO_TRACKS_UPDATED,y),this.selectInitialTrack()}}},m.onError=function(f,b){M.prototype.onError.call(this,f,b),!b.fatal&&b.context&&b.context.type===V.PlaylistContextType.AUDIO_TRACK&&b.context.id===this.trackId&&b.context.groupId===this.groupId&&this.retryLoadingOrFail(b)},m.setAudioTrack=function(f){var b=this.tracksInGroup;if(f<0||f>=b.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var C=b[this.trackId];this.log("Now switching to audio-track index "+f);var h=b[f],y=h.id,w=h.groupId,E=void 0===w?"":w,S=h.name,u=h.type,d=h.url;if(this.trackId=f,this.trackName=S,this.selectDefaultTrack=!1,this.hls.trigger(W.Events.AUDIO_TRACK_SWITCHING,{id:y,groupId:E,name:S,type:u,url:d}),!h.details||h.details.live){var c=this.switchParams(h.url,C?.details);this.loadPlaylist(c)}}},m.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var C=this.findTrackId(this.trackName)||this.findTrackId();-1!==C?this.setAudioTrack(C):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},m.findTrackId=function(f){for(var b=this.tracksInGroup,C=0;C<b.length;C++){var h=b[C];if((!this.selectDefaultTrack||h.default)&&(!f||f===h.name))return h.id}return-1},m.loadPlaylist=function(f){M.prototype.loadPlaylist.call(this);var b=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(b)){var C=b.id,h=b.groupId,y=b.url;if(f)try{y=f.addDirectives(y)}catch(w){this.warn("Could not construct new URL with HLS Delivery Directives: "+w)}this.log("loading audio-track playlist for id: "+C),this.clearTimer(),this.hls.trigger(W.Events.AUDIO_TRACK_LOADING,{url:y,id:C,groupId:h,deliveryDirectives:f||null})}},function U(M,_,m){_&&Y(M.prototype,_),m&&Y(M,m),Object.defineProperty(M,"prototype",{writable:!1})}(_,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(f){this.selectDefaultTrack=!1,this.setAudioTrack(f)}}]),_}(z.default)},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
                  !*** ./src/controller/base-playlist-controller.ts ***!
                  \****************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>Y});var W=O(
/*! ../types/level */
"./src/types/level.ts"),B=O(
/*! ./level-helper */
"./src/controller/level-helper.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=O(
/*! ../errors */
"./src/errors.ts"),Y=function(){function U(L,R){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=z.logger.log.bind(z.logger,R+":"),this.warn=z.logger.warn.bind(z.logger,R+":"),this.hls=L}var N=U.prototype;return N.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},N.onError=function(R,P){P.fatal&&(P.type===V.ErrorTypes.NETWORK_ERROR||P.type===V.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},N.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},N.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},N.stopLoad=function(){this.canLoad=!1,this.clearTimer()},N.switchParams=function(R,P){var D=P?.renditionReports;if(D)for(var I=0;I<D.length;I++){var M=D[I],_=void 0;try{_=new self.URL(M.URI,P.url).href}catch(b){z.logger.warn("Could not construct new URL for Rendition Report: "+b),_=M.URI||""}if(_===R.slice(-_.length)){var m=parseInt(M["LAST-MSN"])||P?.lastPartSn,v=parseInt(M["LAST-PART"])||P?.lastPartIndex;if(this.hls.config.lowLatencyMode){var f=Math.min(P.age-P.partTarget,P.targetduration);v>=0&&f>P.partTarget&&(v+=1)}return new W.HlsUrlParameters(m,v>=0?v:void 0,W.HlsSkip.No)}}},N.loadPlaylist=function(R){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},N.shouldLoadTrack=function(R){return this.canLoad&&R&&!!R.url&&(!R.details||R.details.live)},N.playlistLoaded=function(R,P,D){var I=this,M=P.details,_=P.stats,m=self.performance.now(),v=_.loading.first?Math.max(0,m-_.loading.first):0;if(M.advancedDateTime=Date.now()-v,M.live||null!=D&&D.live){if(M.reloaded(D),D&&this.log("live playlist "+R+" "+(M.advanced?"REFRESHED "+M.lastPartSn+"-"+M.lastPartIndex:"MISSED")),D&&M.fragments.length>0&&(0,B.mergeDetails)(D,M),!this.canLoad||!M.live)return;var f,b=void 0,C=void 0;if(M.canBlockReload&&M.endSN&&M.advanced){var h=this.hls.config.lowLatencyMode,y=M.lastPartSn,w=M.endSN,E=M.lastPartIndex,u=y===w;-1!==E?(b=u?w+1:y,C=u?h?0:E:E+1):b=w+1;var c=M.age,x=Math.min(c+M.ageHeader-M.partTarget,1.5*M.targetduration);if(x>0){if(D&&x>D.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+D.tuneInGoal+" to: "+x+" with playlist age: "+M.age),x=0;else{var T=Math.floor(x/M.targetduration);b+=T,void 0!==C&&(C+=Math.round(x%M.targetduration/M.partTarget)),this.log("CDN Tune-in age: "+M.ageHeader+"s last advanced "+c.toFixed(2)+"s goal: "+x+" skip sn "+T+" to part "+C)}M.tuneInGoal=x}if(f=this.getDeliveryDirectives(M,P.deliveryDirectives,b,C),h||!u)return void this.loadPlaylist(f)}else f=this.getDeliveryDirectives(M,P.deliveryDirectives,b,C);var H=this.hls.mainForwardBufferInfo,K=(0,B.computeReloadInterval)(M,1e3*(M.edge-(H?H.end-H.len:0)));M.updated?m>this.requestScheduled+K&&(this.requestScheduled=_.loading.start):this.requestScheduled=-1,this.requestScheduled=void 0!==b&&M.canBlockReload?_.loading.first+K-(1e3*M.partTarget||1e3):(-1===this.requestScheduled?m:this.requestScheduled)+K;var $=this.requestScheduled-m;$=Math.max(0,$),this.log("reload live playlist "+R+" in "+Math.round($)+" ms"),this.timer=self.setTimeout(function(){return I.loadPlaylist(f)},$)}else this.clearTimer()},N.getDeliveryDirectives=function(R,P,D,I){var M=(0,W.getSkipValue)(R,D);return null!=P&&P.skip&&R.deltaUpdateFailed&&(D=P.msn,I=P.part,M=W.HlsSkip.No),new W.HlsUrlParameters(D,I,M)},N.retryLoadingOrFail=function(R){var M,P=this,D=this.hls.config,I=this.retryCount<D.levelLoadingMaxRetry;if(I)if(this.requestScheduled=-1,this.retryCount++,R.details.indexOf("LoadTimeOut")>-1&&null!==(M=R.context)&&void 0!==M&&M.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+R.details+'"'),this.loadPlaylist();else{var _=Math.min(Math.pow(2,this.retryCount)*D.levelLoadingRetryDelay,D.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return P.loadPlaylist()},_),this.warn("retry playlist loading #"+this.retryCount+" in "+_+' ms after "'+R.details+'"')}else this.warn('cannot recover from error "'+R.details+'"'),this.clearTimer(),R.fatal=!0;return I},U}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
                  !*** ./src/controller/base-stream-controller.ts ***!
                  \**************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{State:()=>S,default:()=>u});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../task-loop */
"./src/task-loop.ts"),z=O(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),V=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),Y=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),U=O(
/*! ../events */
"./src/events.ts"),N=O(
/*! ../errors */
"./src/errors.ts"),L=O(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),R=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),P=O(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),D=O(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),I=O(
/*! ./level-helper */
"./src/controller/level-helper.ts"),M=O(
/*! ../loader/fragment-loader */
"./src/loader/fragment-loader.ts"),_=O(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),m=O(
/*! ../utils/time-ranges */
"./src/utils/time-ranges.ts"),v=O(
/*! ../types/loader */
"./src/types/loader.ts");function f(d,c){for(var p=0;p<c.length;p++){var x=c[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,C(x.key),x)}}function C(d){var c=function h(d,c){if("object"!=typeof d||null===d)return d;var p=d[Symbol.toPrimitive];if(void 0!==p){var x=p.call(d,c||"default");if("object"!=typeof x)return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(d)}(d,"string");return"symbol"==typeof c?c:String(c)}function E(d,c){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,T){return x.__proto__=T,x})(d,c)}var S={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},u=function(d){function c(x,T,k,H){var F;return(F=d.call(this)||this).hls=void 0,F.fragPrevious=null,F.fragCurrent=null,F.fragmentTracker=void 0,F.transmuxer=null,F._state=S.STOPPED,F.media=null,F.mediaBuffer=null,F.config=void 0,F.bitrateTest=!1,F.lastCurrentTime=0,F.nextLoadPosition=0,F.startPosition=0,F.loadedmetadata=!1,F.fragLoadError=0,F.retryDate=0,F.levels=null,F.fragmentLoader=void 0,F.keyLoader=void 0,F.levelLastLoaded=null,F.startFragRequested=!1,F.decrypter=void 0,F.initPTS=[],F.onvseeking=null,F.onvended=null,F.logPrefix="",F.log=void 0,F.warn=void 0,F.logPrefix=H,F.log=Y.logger.log.bind(Y.logger,H+":"),F.warn=Y.logger.warn.bind(Y.logger,H+":"),F.hls=x,F.fragmentLoader=new M.default(x.config),F.keyLoader=k,F.fragmentTracker=T,F.config=x.config,F.decrypter=new _.default(x.config),x.on(U.Events.LEVEL_SWITCHING,F.onLevelSwitching,function y(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(F)),F}!function w(d,c){d.prototype=Object.create(c.prototype),d.prototype.constructor=d,E(d,c)}(c,d);var p=c.prototype;return p.doTick=function(){this.onTickEnd()},p.onTickEnd=function(){},p.startLoad=function(T){},p.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var T=this.fragCurrent;T&&(T.abortRequests(),this.fragmentTracker.removeFragment(T)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=S.STOPPED},p._streamEnded=function(T,k){if(k.live||T.nextStart||!T.end||!this.media)return!1;var H=k.partList;if(null!=H&&H.length){var F=H[H.length-1];return V.BufferHelper.isBuffered(this.media,F.start+F.duration/2)}return this.fragmentTracker.isEndListAppended(k.fragments[k.fragments.length-1].type)},p.getLevelDetails=function(){var T;if(this.levels&&null!==this.levelLastLoaded)return null===(T=this.levels[this.levelLastLoaded])||void 0===T?void 0:T.details},p.onMediaAttached=function(T,k){var H=this.media=this.mediaBuffer=k.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),H.addEventListener("seeking",this.onvseeking),H.addEventListener("ended",this.onvended);var F=this.config;this.levels&&F.autoStartLoad&&this.state===S.STOPPED&&this.startLoad(F.startPosition)},p.onMediaDetaching=function(){var T=this.media;null!=T&&T.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),T&&this.onvseeking&&this.onvended&&(T.removeEventListener("seeking",this.onvseeking),T.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},p.onMediaSeeking=function(){var T=this.config,k=this.fragCurrent,H=this.media,G=this.state,K=H?H.currentTime:0,$=V.BufferHelper.bufferInfo(this.mediaBuffer||H,K,T.maxBufferHole);if(this.log("media seeking to "+((0,W.isFiniteNumber)(K)?K.toFixed(3):K)+", state: "+G),this.state===S.ENDED)this.resetLoadingState();else if(k){var Z=T.maxFragLookUpTolerance,te=k.start-Z,Q=k.start+k.duration+Z;if(!$.len||Q<$.start||te>$.end){var re=K>Q;(K<te||re)&&(re&&k.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),k.abortRequests()),this.resetLoadingState())}}H&&(this.lastCurrentTime=K),!this.loadedmetadata&&!$.len&&(this.nextLoadPosition=this.startPosition=K),this.tickImmediate()},p.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},p.onLevelSwitching=function(T,k){this.fragLoadError=0},p.onHandlerDestroying=function(){this.stopLoad(),d.prototype.onHandlerDestroying.call(this)},p.onHandlerDestroyed=function(){this.state=S.STOPPED,this.hls.off(U.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,d.prototype.onHandlerDestroyed.call(this)},p.loadFragment=function(T,k,H){this._loadFragForPlayback(T,k,H)},p._loadFragForPlayback=function(T,k,H){var F=this;this._doFragLoad(T,k,H,function($){if(F.fragContextChanged(T))return F.warn("Fragment "+T.sn+($.part?" p: "+$.part.index:"")+" of level "+T.level+" was dropped during download."),void F.fragmentTracker.removeFragment(T);T.stats.chunkCount++,F._handleFragmentLoadProgress($)}).then(function(K){if(K){F.fragLoadError=0;var $=F.state;if(F.fragContextChanged(T))return void(($===S.FRAG_LOADING||!F.fragCurrent&&$===S.PARSING)&&(F.fragmentTracker.removeFragment(T),F.state=S.IDLE));"payload"in K&&(F.log("Loaded fragment "+T.sn+" of level "+T.level),F.hls.trigger(U.Events.FRAG_LOADED,K)),F._handleFragmentLoadComplete(K)}}).catch(function(K){F.state===S.STOPPED||F.state===S.ERROR||(F.warn(K),F.resetFragmentLoading(T))})},p.flushMainBuffer=function(T,k,H){if(void 0===H&&(H=null),T-k){var F={startOffset:T,endOffset:k,type:H};this.fragLoadError=0,this.hls.trigger(U.Events.BUFFER_FLUSHING,F)}},p._loadInitSegment=function(T,k){var H=this;this._doFragLoad(T,k).then(function(F){if(!F||H.fragContextChanged(T)||!H.levels)throw new Error("init load aborted");return F}).then(function(F){var G=H.hls,K=F.payload,$=T.decryptdata;if(K&&K.byteLength>0&&$&&$.key&&$.iv&&"AES-128"===$.method){var Z=self.performance.now();return H.decrypter.decrypt(new Uint8Array(K),$.key.buffer,$.iv.buffer).then(function(te){var Q=self.performance.now();return G.trigger(U.Events.FRAG_DECRYPTED,{frag:T,payload:te,stats:{tstart:Z,tdecrypt:Q}}),F.payload=te,F})}return F}).then(function(F){var G=H.fragCurrent,K=H.hls,$=H.levels;if(!$)throw new Error("init load aborted, missing levels");console.assert($[T.level].details,"Level details are defined when init segment is loaded");var te=T.stats;H.state=S.IDLE,H.fragLoadError=0,T.data=new Uint8Array(F.payload),te.parsing.start=te.buffering.start=self.performance.now(),te.parsing.end=te.buffering.end=self.performance.now(),F.frag===G&&K.trigger(U.Events.FRAG_BUFFERED,{stats:te,frag:G,part:null,id:T.type}),H.tick()}).catch(function(F){H.state===S.STOPPED||H.state===S.ERROR||(H.warn(F),H.resetFragmentLoading(T))})},p.fragContextChanged=function(T){var k=this.fragCurrent;return!T||!k||T.level!==k.level||T.sn!==k.sn||T.urlId!==k.urlId},p.fragBufferedComplete=function(T,k){var H,F,G,K,$=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+T.type+" sn: "+T.sn+(k?" part: "+k.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+T.level+" (frag:["+(null!=(H=T.startPTS)?H:NaN).toFixed(3)+"-"+(null!=(F=T.endPTS)?F:NaN).toFixed(3)+"] > buffer:"+($?m.default.toString(V.BufferHelper.getBuffered($)):"(detached)")+")"),this.state=S.IDLE,$&&(!this.loadedmetadata&&T.type==v.PlaylistLevelType.MAIN&&$.buffered.length&&(null===(G=this.fragCurrent)||void 0===G?void 0:G.sn)===(null===(K=this.fragPrevious)||void 0===K?void 0:K.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},p.seekToStartPos=function(){},p._handleFragmentLoadComplete=function(T){var k=this.transmuxer;if(k){var H=T.frag,F=T.part,G=T.partsLoaded,K=!G||0===G.length||G.some(function(Z){return!Z}),$=new L.ChunkMetadata(H.level,H.sn,H.stats.chunkCount+1,0,F?F.index:-1,!K);k.flush($)}},p._handleFragmentLoadProgress=function(T){},p._doFragLoad=function(T,k,H,F){var G,K=this;if(void 0===H&&(H=null),!this.levels)throw new Error("frag load aborted, missing levels");var $=null;if(!T.encrypted||null!==(G=T.decryptdata)&&void 0!==G&&G.key?!T.encrypted&&k.encryptedFragments.length&&this.keyLoader.loadClear(T,k.encryptedFragments):(this.log("Loading key for "+T.sn+" of ["+k.startSN+"-"+k.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+T.level),this.state=S.KEY_LOADING,this.fragCurrent=T,$=this.keyLoader.load(T).then(function(se){if(!K.fragContextChanged(se.frag))return K.hls.trigger(U.Events.KEY_LOADED,se),K.state===S.KEY_LOADING&&(K.state=S.IDLE),se}),this.hls.trigger(U.Events.KEY_LOADING,{frag:T}),this.throwIfFragContextChanged("KEY_LOADING")),H=Math.max(T.start,H||0),this.config.lowLatencyMode&&k){var Z=k.partList;if(Z&&F){H>T.end&&k.fragmentHint&&(T=k.fragmentHint);var te=this.getNextPart(Z,T,H);if(te>-1){var Q=Z[te];return this.log("Loading part sn: "+T.sn+" p: "+Q.index+" cc: "+T.cc+" of playlist ["+k.startSN+"-"+k.endSN+"] parts [0-"+te+"-"+(Z.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+T.level+", target: "+parseFloat(H.toFixed(3))),this.nextLoadPosition=Q.start+Q.duration,this.state=S.FRAG_LOADING,this.hls.trigger(U.Events.FRAG_LOADING,{frag:T,part:Z[te],targetBufferTime:H}),this.throwIfFragContextChanged("FRAG_LOADING parts"),$?$.then(function(se){return!se||K.fragContextChanged(se.frag)?null:K.doFragPartsLoad(T,Z,te,F)}).catch(function(se){return K.handleFragLoadError(se)}):this.doFragPartsLoad(T,Z,te,F).catch(function(se){return K.handleFragLoadError(se)})}if(!T.url||this.loadedEndOfParts(Z,H))return Promise.resolve(null)}}this.log("Loading fragment "+T.sn+" cc: "+T.cc+" "+(k?"of ["+k.startSN+"-"+k.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+T.level+", target: "+parseFloat(H.toFixed(3))),(0,W.isFiniteNumber)(T.sn)&&!this.bitrateTest&&(this.nextLoadPosition=T.start+T.duration),this.state=S.FRAG_LOADING,this.hls.trigger(U.Events.FRAG_LOADING,{frag:T,targetBufferTime:H}),this.throwIfFragContextChanged("FRAG_LOADING");var re=this.config.progressive;return re&&$?$.then(function(se){return!se||K.fragContextChanged(se?.frag)?null:K.fragmentLoader.load(T,F)}).catch(function(se){return K.handleFragLoadError(se)}):Promise.all([this.fragmentLoader.load(T,re?F:void 0),$]).then(function(se){var ce=se[0];return!re&&ce&&F&&F(ce),ce}).catch(function(se){return K.handleFragLoadError(se)})},p.throwIfFragContextChanged=function(T){if(null===this.fragCurrent)throw new Error("frag load aborted, context changed in "+T)},p.doFragPartsLoad=function(T,k,H,F){var G=this;return new Promise(function(K,$){var Z=[];!function Q(re){var se=k[re];G.fragmentLoader.loadPart(T,se,F).then(function(ce){Z[se.index]=ce;var ue=ce.part;G.hls.trigger(U.Events.FRAG_LOADED,ce);var he=k[re+1];if(!he||he.fragment!==T)return K({frag:T,part:ue,partsLoaded:Z});Q(re+1)}).catch($)}(H)})},p.handleFragLoadError=function(T){if("data"in T){var k=T.data;T.data&&k.details===N.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(k.frag,k.part):this.hls.trigger(U.Events.ERROR,k)}else this.hls.trigger(U.Events.ERROR,{type:N.ErrorTypes.OTHER_ERROR,details:N.ErrorDetails.INTERNAL_EXCEPTION,err:T,fatal:!0});return null},p._handleTransmuxerFlush=function(T){var k=this.getCurrentContext(T);if(k&&this.state===S.PARSING){var H=k.frag,F=k.part,G=k.level,K=self.performance.now();H.stats.parsing.end=K,F&&(F.stats.parsing.end=K),this.updateLevelTiming(H,F,G,T.partial)}else!this.fragCurrent&&this.state!==S.STOPPED&&this.state!==S.ERROR&&(this.state=S.IDLE)},p.getCurrentContext=function(T){var k=this.levels,H=T.level,F=T.sn,G=T.part;if(!k||!k[H])return this.warn("Levels object was unset while buffering fragment "+F+" of level "+H+". The current chunk will not be buffered."),null;var K=k[H],$=G>-1?(0,I.getPartWith)(K,F,G):null,Z=$?$.fragment:(0,I.getFragmentWithSN)(K,F,this.fragCurrent);return Z?{frag:Z,part:$,level:K}:null},p.bufferFragmentData=function(T,k,H,F){if(T&&this.state===S.PARSING){var G=T.data1,K=T.data2,$=G;G&&K&&($=(0,R.appendUint8Array)(G,K)),$&&$.length&&(this.hls.trigger(U.Events.BUFFER_APPENDING,{type:T.type,frag:k,part:H,chunkMeta:F,parent:k.type,data:$}),T.dropped&&T.independent&&!H&&this.flushBufferGap(k))}},p.flushBufferGap=function(T){var k=this.media;if(k){if(!V.BufferHelper.isBuffered(k,k.currentTime))return void this.flushMainBuffer(0,T.start);var H=k.currentTime,F=V.BufferHelper.bufferInfo(k,H,0),K=Math.min(2*this.config.maxFragLookUpTolerance,.25*T.duration),$=Math.max(Math.min(T.start-K,F.end-K),H+K);T.start-$>K&&this.flushMainBuffer($,T.start)}},p.getFwdBufferInfo=function(T,k){var H=this.config,F=this.getLoadPosition();if(!(0,W.isFiniteNumber)(F))return null;var G=V.BufferHelper.bufferInfo(T,F,H.maxBufferHole);if(0===G.len&&void 0!==G.nextStart){var K=this.fragmentTracker.getBufferedFrag(F,k);if(K&&G.nextStart<K.end)return V.BufferHelper.bufferInfo(T,F,Math.max(G.nextStart,H.maxBufferHole))}return G},p.getMaxBufferLength=function(T){var H,k=this.config;return H=T?Math.max(8*k.maxBufferSize/T,k.maxBufferLength):k.maxBufferLength,Math.min(H,k.maxMaxBufferLength)},p.reduceMaxBufferLength=function(T){var k=this.config;return k.maxMaxBufferLength>=(T||k.maxBufferLength)&&(k.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+k.maxMaxBufferLength+"s"),!0)},p.getNextFragment=function(T,k){var H=k.fragments,F=H.length;if(!F)return null;var $,G=this.config,K=H[0].start;if(k.live){var Z=G.initialLiveManifestSize;if(F<Z)return this.warn("Not enough fragments to start playback (have: "+F+", need: "+Z+")"),null;!k.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&($=this.getInitialLiveFragment(k,H),this.startPosition=$?this.hls.liveSyncPosition||$.start:T)}else T<=K&&($=H[0]);return $||($=this.getFragmentAtPosition(T,G.lowLatencyMode?k.partEnd:k.fragmentEnd,k)),this.mapToInitFragWhenRequired($)},p.mapToInitFragWhenRequired=function(T){return null==T||!T.initSegment||null!=T&&T.initSegment.data||this.bitrateTest?T:T.initSegment},p.getNextPart=function(T,k,H){for(var F=-1,G=!1,K=!0,$=0,Z=T.length;$<Z;$++){var te=T[$];if(K=K&&!te.independent,F>-1&&H<te.start)break;var Q=te.loaded;Q?F=-1:(G||te.independent||K)&&te.fragment===k&&(F=$),G=Q}return F},p.loadedEndOfParts=function(T,k){var H=T[T.length-1];return H&&k>H.start&&H.loaded},p.getInitialLiveFragment=function(T,k){var H=this.fragPrevious,F=null;if(H){if(T.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+H.programDateTime),F=(0,D.findFragmentByPDT)(k,H.endProgramDateTime,this.config.maxFragLookUpTolerance)),!F){var G=H.sn+1;if(G>=T.startSN&&G<=T.endSN){var K=k[G-T.startSN];H.cc===K.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(F=K).sn)}F||(F=(0,D.findFragWithCC)(k,H.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+F.sn)}}else{var $=this.hls.liveSyncPosition;null!==$&&(F=this.getFragmentAtPosition($,this.bitrateTest?T.fragmentEnd:T.edge,T))}return F},p.getFragmentAtPosition=function(T,k,H){var re,F=this.config,G=this.fragPrevious,K=H.fragments,$=H.endSN,Z=H.fragmentHint,te=F.maxFragLookUpTolerance,Q=!!(F.lowLatencyMode&&H.partList&&Z);if(Q&&Z&&!this.bitrateTest&&(K=K.concat(Z),$=Z.sn),re=T<k?(0,D.findFragmentByPTS)(G,K,T,T>k-te?0:te):K[K.length-1]){var ce=re.sn-H.startSN;if(this.fragmentTracker.getState(re)===z.FragmentState.OK&&(G=re),G&&re.sn===G.sn&&!Q&&G&&re.level===G.level){var he=K[ce+1];re.sn<$&&this.fragmentTracker.getState(he)!==z.FragmentState.OK?(this.log("SN "+re.sn+" just loaded, load next one: "+he.sn),re=he):re=null}}return re},p.synchronizeToLiveEdge=function(T){var k=this.config,H=this.media;if(H){var F=this.hls.liveSyncPosition,G=H.currentTime,$=T.edge,Z=G>=T.fragments[0].start-k.maxFragLookUpTolerance&&G<=$;null!==F&&H.duration>F&&(G<F||!Z)&&(!Z&&H.readyState<4||G<$-(void 0!==k.liveMaxLatencyDuration?k.liveMaxLatencyDuration:k.liveMaxLatencyDurationCount*T.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=F),H.readyState&&(this.warn("Playback: "+G.toFixed(3)+" is located too far from the end of live sliding playlist: "+$+", reset currentTime to : "+F.toFixed(3)),H.currentTime=F))}},p.alignPlaylists=function(T,k){var F=this.levelLastLoaded,G=this.fragPrevious,K=null!==F?this.levels[F]:null,$=T.fragments.length;if(!$)return this.warn("No fragments in live playlist"),0;var Z=T.fragments[0].start,te=!k,Q=T.alignedSliding&&(0,W.isFiniteNumber)(Z);if(te||!Q&&!Z){(0,P.alignStream)(G,K,T);var re=T.fragments[0].start;return this.log("Live playlist sliding: "+re.toFixed(2)+" start-sn: "+(k?k.startSN:"na")+"->"+T.startSN+" prev-sn: "+(G?G.sn:"na")+" fragments: "+$),re}return Z},p.waitForCdnTuneIn=function(T){return T.live&&T.canBlockReload&&T.partTarget&&T.tuneInGoal>Math.max(T.partHoldBack,3*T.partTarget)},p.setStartPosition=function(T,k){var H=this.startPosition;if(H<k&&(H=-1),-1===H||-1===this.lastCurrentTime){var F=T.startTimeOffset;(0,W.isFiniteNumber)(F)?(H=k+F,F<0&&(H+=T.totalduration),H=Math.min(Math.max(k,H),k+T.totalduration),this.log("Start time offset "+F+" found in playlist, adjust startPosition to "+H),this.startPosition=H):T.live?H=this.hls.liveSyncPosition||k:this.startPosition=H=0,this.lastCurrentTime=H}this.nextLoadPosition=H},p.getLoadPosition=function(){var T=this.media,k=0;return this.loadedmetadata&&T?k=T.currentTime:this.nextLoadPosition&&(k=this.nextLoadPosition),k},p.handleFragLoadAborted=function(T,k){this.transmuxer&&"initSegment"!==T.sn&&T.stats.aborted&&(this.warn("Fragment "+T.sn+(k?" part"+k.index:"")+" of level "+T.level+" was aborted"),this.resetFragmentLoading(T))},p.resetFragmentLoading=function(T){(!this.fragCurrent||!this.fragContextChanged(T)&&this.state!==S.FRAG_LOADING_WAITING_RETRY)&&(this.state=S.IDLE)},p.onFragmentOrKeyLoadError=function(T,k){if(k.fatal)return this.stopLoad(),void(this.state=S.ERROR);var H=this.config;if(k.chunkMeta){var F=this.getCurrentContext(k.chunkMeta);F&&(k.frag=F.frag,k.levelRetry=!0,this.fragLoadError=H.fragLoadingMaxRetry)}var G=k.frag;if(G&&G.type===T){var K=this.fragCurrent;if(console.assert(K&&G.sn===K.sn&&G.level===K.level&&G.urlId===K.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=H.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var $=Math.min(Math.pow(2,this.fragLoadError)*H.fragLoadingRetryDelay,H.fragLoadingMaxRetryTimeout);this.warn("Fragment "+G.sn+" of "+T+" "+G.level+" failed to load, retrying in "+$+"ms"),this.retryDate=self.performance.now()+$,this.fragLoadError++,this.state=S.FRAG_LOADING_WAITING_RETRY}else k.levelRetry?(T===v.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=S.IDLE):(Y.logger.error(k.details+" reaches max retry, redispatch as fatal ..."),k.fatal=!0,this.hls.stopLoad(),this.state=S.ERROR)}},p.afterBufferFlushed=function(T,k,H){if(T){var F=V.BufferHelper.getBuffered(T);this.fragmentTracker.detectEvictedFragments(k,F,H),this.state===S.ENDED&&this.resetLoadingState()}},p.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=S.IDLE},p.resetStartWhenNotLoaded=function(T){if(!this.loadedmetadata){this.startFragRequested=!1;var k=this.levels?this.levels[T].details:null;null!=k&&k.live?(this.startPosition=-1,this.setStartPosition(k,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},p.updateLevelTiming=function(T,k,H,F){var G=this,K=H.details;console.assert(!!K,"level.details must be defined"),Object.keys(T.elementaryStreams).reduce(function(Z,te){var Q=T.elementaryStreams[te];if(Q){var re=Q.endPTS-Q.startPTS;if(re<=0)return G.warn("Could not parse fragment "+T.sn+" "+te+" duration reliably ("+re+")"),Z||!1;var se=F?0:(0,I.updateFragPTSDTS)(K,T,Q.startPTS,Q.endPTS,Q.startDTS,Q.endDTS);return G.hls.trigger(U.Events.LEVEL_PTS_UPDATED,{details:K,level:H,drift:se,type:te,frag:T,start:Q.startPTS,end:Q.endPTS}),!0}return Z},!1)||(this.warn("Found no media in fragment "+T.sn+" of level "+H.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=S.PARSED,this.hls.trigger(U.Events.FRAG_PARSED,{frag:T,part:k})},p.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function b(d,c,p){c&&f(d.prototype,c),p&&f(d,p),Object.defineProperty(d,"prototype",{writable:!1})}(c,[{key:"state",get:function(){return this._state},set:function(T){var k=this._state;k!==T&&(this._state=T,this.log(k+"->"+T))}}]),c}(B.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
                  !*** ./src/controller/buffer-controller.ts ***!
                  \*********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>D});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=O(
/*! ../errors */
"./src/errors.ts"),Y=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),U=O(
/*! ../utils/mediasource-helper */
"./src/utils/mediasource-helper.ts"),N=O(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),L=O(
/*! ./buffer-operation-queue */
"./src/controller/buffer-operation-queue.ts"),R=(0,U.getMediaSource)(),P=/([ha]vc.)(?:\.[^.,]+)+/,D=function(){function I(_){var m=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var v=m.media,f=m.mediaSource;z.logger.log("[buffer-controller]: Media source opened"),v&&(v.removeEventListener("emptied",m._onMediaEmptied),m.updateMediaElementDuration(),m.hls.trigger(B.Events.MEDIA_ATTACHED,{media:v})),f&&f.removeEventListener("sourceopen",m._onMediaSourceOpen),m.checkPendingTracks()},this._onMediaSourceClose=function(){z.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){z.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var v=m.media,f=m._objectUrl;v&&v.src!==f&&z.logger.error("Media element src was set while attaching MediaSource ("+f+" > "+v.src+")")},this.hls=_,this._initSourceBuffer(),this.registerListeners()}var M=I.prototype;return M.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},M.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},M.registerListeners=function(){var m=this.hls;m.on(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),m.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.on(B.Events.MANIFEST_PARSED,this.onManifestParsed,this),m.on(B.Events.BUFFER_RESET,this.onBufferReset,this),m.on(B.Events.BUFFER_APPENDING,this.onBufferAppending,this),m.on(B.Events.BUFFER_CODECS,this.onBufferCodecs,this),m.on(B.Events.BUFFER_EOS,this.onBufferEos,this),m.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),m.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),m.on(B.Events.FRAG_PARSED,this.onFragParsed,this),m.on(B.Events.FRAG_CHANGED,this.onFragChanged,this)},M.unregisterListeners=function(){var m=this.hls;m.off(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),m.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.off(B.Events.MANIFEST_PARSED,this.onManifestParsed,this),m.off(B.Events.BUFFER_RESET,this.onBufferReset,this),m.off(B.Events.BUFFER_APPENDING,this.onBufferAppending,this),m.off(B.Events.BUFFER_CODECS,this.onBufferCodecs,this),m.off(B.Events.BUFFER_EOS,this.onBufferEos,this),m.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),m.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),m.off(B.Events.FRAG_PARSED,this.onFragParsed,this),m.off(B.Events.FRAG_CHANGED,this.onFragChanged,this)},M._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new L.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},M.onManifestParsed=function(m,v){var f=2;(v.audio&&!v.video||!v.altAudio)&&(f=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=f,this.details=null,z.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},M.onMediaAttaching=function(m,v){var f=this.media=v.media;if(f&&R){var b=this.mediaSource=new R;b.addEventListener("sourceopen",this._onMediaSourceOpen),b.addEventListener("sourceended",this._onMediaSourceEnded),b.addEventListener("sourceclose",this._onMediaSourceClose),f.src=self.URL.createObjectURL(b),this._objectUrl=f.src,f.addEventListener("emptied",this._onMediaEmptied)}},M.onMediaDetaching=function(){var m=this.media,v=this.mediaSource,f=this._objectUrl;if(v){if(z.logger.log("[buffer-controller]: media source detaching"),"open"===v.readyState)try{v.endOfStream()}catch(b){z.logger.warn("[buffer-controller]: onMediaDetaching: "+b.message+" while calling endOfStream")}this.onBufferReset(),v.removeEventListener("sourceopen",this._onMediaSourceOpen),v.removeEventListener("sourceended",this._onMediaSourceEnded),v.removeEventListener("sourceclose",this._onMediaSourceClose),m&&(m.removeEventListener("emptied",this._onMediaEmptied),f&&self.URL.revokeObjectURL(f),m.src===f?(m.removeAttribute("src"),m.load()):z.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(B.Events.MEDIA_DETACHED,void 0)},M.onBufferReset=function(){var m=this;this.getSourceBufferTypes().forEach(function(v){var f=m.sourceBuffer[v];try{f&&(m.removeBufferListeners(v),m.mediaSource&&m.mediaSource.removeSourceBuffer(f),m.sourceBuffer[v]=void 0)}catch(b){z.logger.warn("[buffer-controller]: Failed to reset the "+v+" buffer",b)}}),this._initSourceBuffer()},M.onBufferCodecs=function(m,v){var f=this,b=this.getSourceBufferTypes().length;Object.keys(v).forEach(function(C){if(b){var h=f.tracks[C];if(h&&"function"==typeof h.buffer.changeType){var y=v[C],w=y.id,E=y.codec,S=y.levelCodec,u=y.container,d=y.metadata,c=(h.levelCodec||h.codec).replace(P,"$1"),p=(S||E).replace(P,"$1");c!==p&&(f.appendChangeType(C,u+";codecs="+(S||E)),z.logger.log("[buffer-controller]: switching codec "+c+" to "+p),f.tracks[C]={buffer:h.buffer,codec:E,container:u,levelCodec:S,metadata:d,id:w})}}else f.pendingTracks[C]=v[C]}),!b&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},M.appendChangeType=function(m,v){var f=this,b=this.operationQueue,C={execute:function(){var y=f.sourceBuffer[m];y&&(z.logger.log("[buffer-controller]: changing "+m+" sourceBuffer type to "+v),y.changeType(v)),b.shiftAndExecuteNext(m)},onStart:function(){},onComplete:function(){},onError:function(y){z.logger.warn("[buffer-controller]: Failed to change "+m+" SourceBuffer type",y)}};b.append(C,m)},M.onBufferAppending=function(m,v){var f=this,b=this.hls,C=this.operationQueue,h=this.tracks,y=v.data,w=v.type,E=v.frag,S=v.part,u=v.chunkMeta,d=u.buffering[w],c=self.performance.now();d.start=c;var p=E.stats.buffering,x=S?S.stats.buffering:null;0===p.start&&(p.start=c),x&&0===x.start&&(x.start=c);var k=!1;"audio"===w&&"audio/mpeg"===h.audio?.container&&(k=!this.lastMpegAudioChunk||1===u.id||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var H=E.start;C.append({execute:function(){if(d.executeStart=self.performance.now(),k){var K=f.sourceBuffer[w];if(K){var $=H-K.timestampOffset;Math.abs($)>=.1&&(z.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+H+" (delta: "+$+") sn: "+E.sn+")"),K.timestampOffset=H)}}f.appendExecutor(y,w)},onStart:function(){},onComplete:function(){var K=self.performance.now();d.executeEnd=d.end=K,0===p.first&&(p.first=K),x&&0===x.first&&(x.first=K);var $=f.sourceBuffer,Z={};for(var te in $)Z[te]=Y.BufferHelper.getBuffered($[te]);f.appendError=0,f.hls.trigger(B.Events.BUFFER_APPENDED,{type:w,frag:E,part:S,chunkMeta:u,parent:E.type,timeRanges:Z})},onError:function(K){z.logger.error("[buffer-controller]: Error encountered while trying to append to the "+w+" SourceBuffer",K);var $={type:V.ErrorTypes.MEDIA_ERROR,parent:E.type,details:V.ErrorDetails.BUFFER_APPEND_ERROR,err:K,fatal:!1};K.code===DOMException.QUOTA_EXCEEDED_ERR?$.details=V.ErrorDetails.BUFFER_FULL_ERROR:(f.appendError++,$.details=V.ErrorDetails.BUFFER_APPEND_ERROR,f.appendError>b.config.appendErrorMaxRetry&&(z.logger.error("[buffer-controller]: Failed "+b.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),$.fatal=!0,b.stopLoad())),b.trigger(B.Events.ERROR,$)}},w)},M.onBufferFlushing=function(m,v){var f=this,b=this.operationQueue,C=function(y){return{execute:f.removeExecutor.bind(f,y,v.startOffset,v.endOffset),onStart:function(){},onComplete:function(){f.hls.trigger(B.Events.BUFFER_FLUSHED,{type:y})},onError:function(E){z.logger.warn("[buffer-controller]: Failed to remove from "+y+" SourceBuffer",E)}}};v.type?b.append(C(v.type),v.type):this.getSourceBufferTypes().forEach(function(h){b.append(C(h),h)})},M.onFragParsed=function(m,v){var f=this,b=v.frag,C=v.part,h=[],y=C?C.elementaryStreams:b.elementaryStreams;y[N.ElementaryStreamTypes.AUDIOVIDEO]?h.push("audiovideo"):(y[N.ElementaryStreamTypes.AUDIO]&&h.push("audio"),y[N.ElementaryStreamTypes.VIDEO]&&h.push("video")),0===h.length&&z.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+b.type+" level: "+b.level+" sn: "+b.sn),this.blockBuffers(function(){var S=self.performance.now();b.stats.buffering.end=S,C&&(C.stats.buffering.end=S),f.hls.trigger(B.Events.FRAG_BUFFERED,{frag:b,part:C,stats:C?C.stats:b.stats,id:b.type})},h)},M.onFragChanged=function(m,v){this.flushBackBuffer()},M.onBufferEos=function(m,v){var f=this;this.getSourceBufferTypes().reduce(function(C,h){var y=f.sourceBuffer[h];return y&&(!v.type||v.type===h)&&(y.ending=!0,y.ended||(y.ended=!0,z.logger.log("[buffer-controller]: "+h+" sourceBuffer now EOS"))),C&&!(y&&!y.ended)},!0)&&(z.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){f.getSourceBufferTypes().forEach(function(h){var y=f.sourceBuffer[h];y&&(y.ending=!1)});var C=f.mediaSource;C&&"open"===C.readyState?(z.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),C.endOfStream()):C&&z.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+C.readyState)}))},M.onLevelUpdated=function(m,v){var f=v.details;f.fragments.length&&(this.details=f,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},M.flushBackBuffer=function(){var m=this.hls,v=this.details,f=this.media,b=this.sourceBuffer;if(f&&null!==v){var C=this.getSourceBufferTypes();if(C.length){var h=v.live&&null!==m.config.liveBackBufferLength?m.config.liveBackBufferLength:m.config.backBufferLength;if((0,W.isFiniteNumber)(h)&&!(h<0)){var y=f.currentTime,w=v.levelTargetDuration,E=Math.max(h,w),S=Math.floor(y/w)*w-E;C.forEach(function(u){var d=b[u];if(d){var c=Y.BufferHelper.getBuffered(d);if(c.length>0&&S>c.start(0)){if(m.trigger(B.Events.BACK_BUFFER_REACHED,{bufferEnd:S}),v.live)m.trigger(B.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:S});else if(d.ended&&c.end(c.length-1)-y<2*w)return void z.logger.info("[buffer-controller]: Cannot flush "+u+" back buffer while SourceBuffer is in ended state");m.trigger(B.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:S,type:u})}}})}}}},M.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var m=this.details,v=this.hls,b=this.mediaSource,C=m.fragments[0].start+m.totalduration,h=this.media.duration,y=(0,W.isFiniteNumber)(b.duration)?b.duration:0;m.live&&v.config.liveDurationInfinity?(z.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),b.duration=1/0,this.updateSeekableRange(m)):(C>y&&C>h||!(0,W.isFiniteNumber)(h))&&(z.logger.log("[buffer-controller]: Updating Media Source duration to "+C.toFixed(3)),b.duration=C)}},M.updateSeekableRange=function(m){var v=this.mediaSource,f=m.fragments;if(f.length&&m.live&&null!=v&&v.setLiveSeekableRange){var C=Math.max(0,f[0].start),h=Math.max(C,C+m.totalduration);v.setLiveSeekableRange(C,h)}},M.checkPendingTracks=function(){var m=this.bufferCodecEventsExpected,v=this.operationQueue,f=this.pendingTracks,b=Object.keys(f).length;if(b&&!m||2===b){this.createSourceBuffers(f),this.pendingTracks={};var C=this.getSourceBufferTypes();if(0===C.length)return void this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});C.forEach(function(h){v.executeNext(h)})}},M.createSourceBuffers=function(m){var v=this.sourceBuffer,f=this.mediaSource;if(!f)throw Error("createSourceBuffers called when mediaSource was null");var b=0;for(var C in m)if(!v[C]){var h=m[C];if(!h)throw Error("source buffer exists for track "+C+", however track does not");var y=h.levelCodec||h.codec,w=h.container+";codecs="+y;z.logger.log("[buffer-controller]: creating sourceBuffer("+w+")");try{var E=v[C]=f.addSourceBuffer(w),S=C;this.addBufferListener(S,"updatestart",this._onSBUpdateStart),this.addBufferListener(S,"updateend",this._onSBUpdateEnd),this.addBufferListener(S,"error",this._onSBUpdateError),this.tracks[C]={buffer:E,codec:y,container:h.container,levelCodec:h.levelCodec,metadata:h.metadata,id:h.id},b++}catch(u){z.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+u.message),this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:w})}}b&&this.hls.trigger(B.Events.BUFFER_CREATED,{tracks:this.tracks})},M._onSBUpdateStart=function(m){this.operationQueue.current(m).onStart()},M._onSBUpdateEnd=function(m){var v=this.operationQueue;v.current(m).onComplete(),v.shiftAndExecuteNext(m)},M._onSBUpdateError=function(m,v){z.logger.error("[buffer-controller]: "+m+" SourceBuffer error",v),this.hls.trigger(B.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var f=this.operationQueue.current(m);f&&f.onError(v)},M.removeExecutor=function(m,v,f){var b=this.media,C=this.mediaSource,h=this.operationQueue,w=this.sourceBuffer[m];if(!b||!C||!w)return z.logger.warn("[buffer-controller]: Attempting to remove from the "+m+" SourceBuffer, but it does not exist"),void h.shiftAndExecuteNext(m);var E=(0,W.isFiniteNumber)(b.duration)?b.duration:1/0,S=(0,W.isFiniteNumber)(C.duration)?C.duration:1/0,u=Math.max(0,v),d=Math.min(f,E,S);d>u&&!w.ending?(w.ended=!1,z.logger.log("[buffer-controller]: Removing ["+u+","+d+"] from the "+m+" SourceBuffer"),console.assert(!w.updating,m+" sourceBuffer must not be updating"),w.remove(u,d)):h.shiftAndExecuteNext(m)},M.appendExecutor=function(m,v){var f=this.operationQueue,C=this.sourceBuffer[v];if(!C)return z.logger.warn("[buffer-controller]: Attempting to append to the "+v+" SourceBuffer, but it does not exist"),void f.shiftAndExecuteNext(v);C.ended=!1,console.assert(!C.updating,v+" sourceBuffer must not be updating"),C.appendBuffer(m)},M.blockBuffers=function(m,v){var f=this;if(void 0===v&&(v=this.getSourceBufferTypes()),!v.length)return z.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(m);var b=this.operationQueue,C=v.map(function(h){return b.appendBlocker(h)});Promise.all(C).then(function(){m(),v.forEach(function(h){var y=f.sourceBuffer[h];(!y||!y.updating)&&b.shiftAndExecuteNext(h)})})},M.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},M.addBufferListener=function(m,v,f){var b=this.sourceBuffer[m];if(b){var C=f.bind(this,m);this.listeners[m].push({event:v,listener:C}),b.addEventListener(v,C)}},M.removeBufferListeners=function(m){var v=this.sourceBuffer[m];v&&this.listeners[m].forEach(function(f){v.removeEventListener(f.event,f.listener)})},I}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
                  !*** ./src/controller/buffer-operation-queue.ts ***!
                  \**************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>B});var W=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=function(){function z(Y){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=Y}var V=z.prototype;return V.append=function(U,N){var L=this.queues[N];L.push(U),1===L.length&&this.buffers[N]&&this.executeNext(N)},V.insertAbort=function(U,N){this.queues[N].unshift(U),this.executeNext(N)},V.appendBlocker=function(U){var N,L=new Promise(function(P){N=P});return this.append({execute:N,onStart:function(){},onComplete:function(){},onError:function(){}},U),L},V.executeNext=function(U){var R=this.buffers[U],P=this.queues[U];if(P.length){var D=P[0];try{D.execute()}catch(I){W.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),D.onError(I),(!R||!R.updating)&&(P.shift(),this.executeNext(U))}}},V.shiftAndExecuteNext=function(U){this.queues[U].shift(),this.executeNext(U)},V.current=function(U){return this.queues[U][0]},z}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
                  !*** ./src/controller/cap-level-controller.ts ***!
                  \************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>N});var W=O(
/*! ../events */
"./src/events.ts");function B(L,R){for(var P=0;P<R.length;P++){var D=R[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(L,V(D.key),D)}}function V(L){var R=function Y(L,R){if("object"!=typeof L||null===L)return L;var P=L[Symbol.toPrimitive];if(void 0!==P){var D=P.call(L,R||"default");if("object"!=typeof D)return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}const N=function(){function L(P){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=P,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var R=L.prototype;return R.setStreamController=function(D){this.streamController=D},R.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},R.registerListeners=function(){var D=this.hls;D.on(W.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),D.on(W.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),D.on(W.Events.MANIFEST_PARSED,this.onManifestParsed,this),D.on(W.Events.BUFFER_CODECS,this.onBufferCodecs,this),D.on(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},R.unregisterListener=function(){var D=this.hls;D.off(W.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),D.off(W.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),D.off(W.Events.MANIFEST_PARSED,this.onManifestParsed,this),D.off(W.Events.BUFFER_CODECS,this.onBufferCodecs,this),D.off(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},R.onFpsDropLevelCapping=function(D,I){L.isLevelAllowed(I.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(I.droppedLevel)},R.onMediaAttaching=function(D,I){this.media=I.media instanceof HTMLVideoElement?I.media:null,this.clientRect=null},R.onManifestParsed=function(D,I){var M=this.hls;this.restrictedLevels=[],this.firstLevel=I.firstLevel,M.config.capLevelToPlayerSize&&I.video&&this.startCapping()},R.onBufferCodecs=function(D,I){this.hls.config.capLevelToPlayerSize&&I.video&&this.startCapping()},R.onMediaDetaching=function(){this.stopCapping()},R.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var D=this.hls.levels;if(D.length){var I=this.hls;I.autoLevelCapping=this.getMaxLevel(D.length-1),I.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=I.autoLevelCapping}}},R.getMaxLevel=function(D){var I=this,M=this.hls.levels;if(!M.length)return-1;var _=M.filter(function(m,v){return L.isLevelAllowed(v,I.restrictedLevels)&&v<=D});return this.clientRect=null,L.getMaxLevelByMediaSize(_,this.mediaWidth,this.mediaHeight)},R.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},R.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},R.getDimensions=function(){if(this.clientRect)return this.clientRect;var D=this.media,I={width:0,height:0};if(D){var M=D.getBoundingClientRect();I.width=M.width,I.height=M.height,!I.width&&!I.height&&(I.width=M.right-M.left||D.width||0,I.height=M.bottom-M.top||D.height||0)}return this.clientRect=I,I},L.isLevelAllowed=function(D,I){return void 0===I&&(I=[]),-1===I.indexOf(D)},L.getMaxLevelByMediaSize=function(D,I,M){if(!D||!D.length)return-1;for(var m=D.length-1,v=0;v<D.length;v+=1){var f=D[v];if((f.width>=I||f.height>=M)&&(C=f,!(h=D[v+1])||C.width!==h.width||C.height!==h.height)){m=v;break}}var C,h;return m},function z(L,R,P){R&&B(L.prototype,R),P&&B(L,P),Object.defineProperty(L,"prototype",{writable:!1})}(L,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var D=1;if(!this.hls.config.ignoreDevicePixelRatio)try{D=self.devicePixelRatio}catch{}return D}}]),L}()},"./src/controller/cmcd-controller.ts":
/*!*******************************************!*\
                  !*** ./src/controller/cmcd-controller.ts ***!
                  \*******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>M});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../types/cmcd */
"./src/types/cmcd.ts"),z=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts");function Y(_,m){for(var v=0;v<m.length;v++){var f=m[v];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(_,N(f.key),f)}}function U(_,m,v){return m&&Y(_.prototype,m),v&&Y(_,v),Object.defineProperty(_,"prototype",{writable:!1}),_}function N(_){var m=function L(_,m){if("object"!=typeof _||null===_)return _;var v=_[Symbol.toPrimitive];if(void 0!==v){var f=v.call(_,m||"default");if("object"!=typeof f)return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===m?String:Number)(_)}(_,"string");return"symbol"==typeof m?m:String(m)}function R(_,m){var v=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(v)return(v=v.call(_)).next.bind(v);if(Array.isArray(_)||(v=function P(_,m){if(_){if("string"==typeof _)return D(_,m);var v=Object.prototype.toString.call(_).slice(8,-1);if("Object"===v&&_.constructor&&(v=_.constructor.name),"Map"===v||"Set"===v)return Array.from(_);if("Arguments"===v||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return D(_,m)}}(_))||m&&_&&"number"==typeof _.length){v&&(_=v);var f=0;return function(){return f>=_.length?{done:!0}:{done:!1,value:_[f++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(_,m){(null==m||m>_.length)&&(m=_.length);for(var v=0,f=new Array(m);v<m;v++)f[v]=_[v];return f}function I(){return I=Object.assign?Object.assign.bind():function(_){for(var m=1;m<arguments.length;m++){var v=arguments[m];for(var f in v)Object.prototype.hasOwnProperty.call(v,f)&&(_[f]=v[f])}return _},I.apply(this,arguments)}var M=function(){function _(v){var f=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){f.initialized&&(f.starved=!0),f.buffering=!0},this.onPlaying=function(){f.initialized||(f.initialized=!0),f.buffering=!1},this.applyPlaylistData=function(h){try{f.apply(h,{ot:B.CMCDObjectType.MANIFEST,su:!f.initialized})}catch(y){V.logger.warn("Could not generate manifest CMCD data.",y)}},this.applyFragmentData=function(h){try{var y=h.frag,w=f.hls.levels[y.level],E=f.getObjectType(y),S={d:1e3*y.duration,ot:E};(E===B.CMCDObjectType.VIDEO||E===B.CMCDObjectType.AUDIO||E==B.CMCDObjectType.MUXED)&&(S.br=w.bitrate/1e3,S.tb=f.getTopBandwidth(E)/1e3,S.bl=f.getBufferLength(E)),f.apply(h,S)}catch(u){V.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=v;var b=this.config=v.config,C=b.cmcd;null!=C&&(b.pLoader=this.createPlaylistLoader(),b.fLoader=this.createFragmentLoader(),this.sid=C.sessionId||_.uuid(),this.cid=C.contentId,this.useHeaders=!0===C.useHeaders,this.registerListeners())}var m=_.prototype;return m.registerListeners=function(){var f=this.hls;f.on(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(W.Events.MEDIA_DETACHED,this.onMediaDetached,this),f.on(W.Events.BUFFER_CREATED,this.onBufferCreated,this)},m.unregisterListeners=function(){var f=this.hls;f.off(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(W.Events.MEDIA_DETACHED,this.onMediaDetached,this),f.off(W.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},m.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},m.onMediaAttached=function(f,b){this.media=b.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},m.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},m.onBufferCreated=function(f,b){var C,h;this.audioBuffer=null===(C=b.tracks.audio)||void 0===C?void 0:C.buffer,this.videoBuffer=null===(h=b.tracks.video)||void 0===h?void 0:h.buffer},m.createData=function(){var f;return{v:B.CMCDVersion,sf:B.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(f=this.media)||void 0===f?void 0:f.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},m.apply=function(f,b){if(void 0===b&&(b={}),I(b,this.createData()),this.starved&&(b.ot===B.CMCDObjectType.INIT||b.ot===B.CMCDObjectType.VIDEO||b.ot===B.CMCDObjectType.MUXED)&&(b.bs=!0,b.su=!0,this.starved=!1),null==b.su&&(b.su=this.buffering),this.useHeaders){var h=_.toHeaders(b);if(!Object.keys(h).length)return;f.headers||(f.headers={}),I(f.headers,h)}else{var y=_.toQuery(b);if(!y)return;f.url=_.appendQueryToUri(f.url,y)}},m.getObjectType=function(f){var b=f.type;return"subtitle"===b?B.CMCDObjectType.TIMED_TEXT:"initSegment"===f.sn?B.CMCDObjectType.INIT:"audio"===b?B.CMCDObjectType.AUDIO:"main"===b?this.hls.audioTracks.length?B.CMCDObjectType.VIDEO:B.CMCDObjectType.MUXED:void 0},m.getTopBandwidth=function(f){var C,b=0,h=this.hls;if(f===B.CMCDObjectType.AUDIO)C=h.audioTracks;else{var y=h.maxAutoLevel;C=h.levels.slice(0,y>-1?y+1:h.levels.length)}for(var S,E=R(C);!(S=E()).done;){var u=S.value;u.bitrate>b&&(b=u.bitrate)}return b>0?b:NaN},m.getBufferLength=function(f){var b=this.hls.media,C=f===B.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return C&&b?1e3*z.BufferHelper.bufferInfo(C,b.currentTime,this.config.maxBufferHole).len:NaN},m.createPlaylistLoader=function(){var b=this.applyPlaylistData,C=this.config.pLoader||this.config.loader;return function(){function h(w){this.loader=void 0,this.loader=new C(w)}var y=h.prototype;return y.destroy=function(){this.loader.destroy()},y.abort=function(){this.loader.abort()},y.load=function(E,S,u){b(E),this.loader.load(E,S,u)},U(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},m.createFragmentLoader=function(){var b=this.applyFragmentData,C=this.config.fLoader||this.config.loader;return function(){function h(w){this.loader=void 0,this.loader=new C(w)}var y=h.prototype;return y.destroy=function(){this.loader.destroy()},y.abort=function(){this.loader.abort()},y.load=function(E,S,u){b(E),this.loader.load(E,S,u)},U(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},_.uuid=function(){var f=URL.createObjectURL(new Blob),b=f.toString();return URL.revokeObjectURL(f),b.slice(b.lastIndexOf("/")+1)},_.serialize=function(f){for(var d,b=[],h=function(F){return Math.round(F)},y=function(F){return 100*h(F/100)},E={br:h,d:h,bl:y,dl:y,mtp:y,nor:function(F){return encodeURIComponent(F)},rtp:y,tb:h},u=R(Object.keys(f||{}).sort());!(d=u()).done;){var c=d.value,p=f[c];if(F=p,!(Number.isNaN(F)||null==F||""===F||!1===F||"v"===c&&1===p||"pr"==c&&1===p)){var x=E[c];x&&(p=x(p));var k,T=typeof p;k="ot"===c||"sf"===c||"st"===c?c+"="+p:"boolean"===T?c:"number"===T?c+"="+p:c+"="+JSON.stringify(p),b.push(k)}}var F;return b.join(",")},_.toHeaders=function(f){for(var C={},h=["Object","Request","Session","Status"],y=[{},{},{},{}],w={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},E=0,S=Object.keys(f);E<S.length;E++){var u=S[E];y[null!=w[u]?w[u]:1][u]=f[u]}for(var c=0;c<y.length;c++){var p=_.serialize(y[c]);p&&(C["CMCD-"+h[c]]=p)}return C},_.toQuery=function(f){return"CMCD="+encodeURIComponent(_.serialize(f))},_.appendQueryToUri=function(f,b){if(!b)return f;var C=f.includes("?")?"&":"?";return""+f+C+b},_}()},"./src/controller/eme-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/eme-controller.ts ***!
                  \******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>E});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../errors */
"./src/errors.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=O(
/*! ../utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),Y=O(
/*! ../utils/keysystem-util */
"./src/utils/keysystem-util.ts"),U=O(
/*! ../utils/numeric-encoding-utils */
"./src/utils/numeric-encoding-utils.ts"),N=O(
/*! ../loader/level-key */
"./src/loader/level-key.ts"),L=O(
/*! ../utils/hex */
"./src/utils/hex.ts"),R=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),P=O(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),D=O.n(P);function M(S){var u="function"==typeof Map?new Map:void 0;return M=function(c){if(null===c||!function v(S){return-1!==Function.toString.call(S).indexOf("[native code]")}(c))return c;if("function"!=typeof c)throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(c))return u.get(c);u.set(c,p)}function p(){return _(c,arguments,b(this).constructor)}return p.prototype=Object.create(c.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f(p,c)},M(S)}function _(S,u,d){return(_=function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(p,x,T){var k=[null];k.push.apply(k,x);var F=new(Function.bind.apply(p,k));return T&&f(F,T.prototype),F}).apply(null,arguments)}function f(S,u){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,p){return c.__proto__=p,c})(S,u)}function b(S){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)})(S)}var h="[eme]",y=function(){function S(d){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=S.CDMCleanupPromise?[S.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=z.logger.debug.bind(z.logger,h),this.log=z.logger.log.bind(z.logger,h),this.warn=z.logger.warn.bind(z.logger,h),this.error=z.logger.error.bind(z.logger,h),this.hls=d,this.config=d.config,this.registerListeners()}var u=S.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},u.registerListeners=function(){this.hls.on(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(W.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(W.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.unregisterListeners=function(){this.hls.off(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(W.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(W.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.getLicenseServerUrl=function(c){var p=this.config,T=p.widevineLicenseUrl,k=p.drmSystems[c];if(k)return k.licenseUrl;if(c===V.KeySystems.WIDEVINE&&T)return T;throw new Error('no license server URL configured for key-system "'+c+'"')},u.getServerCertificateUrl=function(c){var x=this.config.drmSystems[c];if(x)return x.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+c+'"]')},u.attemptKeySystemAccess=function(c){var p=this,x=this.hls.levels,T=function(G,K,$){return!!G&&$.indexOf(G)===K},k=x.map(function(F){return F.audioCodec}).filter(T),H=x.map(function(F){return F.videoCodec}).filter(T);return k.length+H.length===0&&H.push("avc1.42e01e"),new Promise(function(F,G){!function $(Z){var te=Z.shift();p.getMediaKeysPromise(te,k,H).then(function(Q){return F({keySystem:te,mediaKeys:Q})}).catch(function(Q){Z.length?$(Z):G(Q instanceof w?Q:new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Q,fatal:!0},Q.message))})}(c)})},u.requestMediaKeySystemAccess=function(c,p){var x=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof x){var T="Configured requestMediaKeySystemAccess is not a function "+x;return null===V.requestMediaKeySystemAccess&&"http:"===self.location.protocol&&(T="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(T))}return x(c,p)},u.getMediaKeysPromise=function(c,p,x){var T=this,k=(0,V.getSupportedMediaKeySystemConfigurations)(c,p,x,this.config.drmSystemOptions),H=this.keySystemAccessPromises[c],F=H?.keySystemAccess;if(!F){this.log('Requesting encrypted media "'+c+'" key-system access with config: '+JSON.stringify(k)),F=this.requestMediaKeySystemAccess(c,k);var G=this.keySystemAccessPromises[c]={keySystemAccess:F};return F.catch(function(K){T.log('Failed to obtain access to key-system "'+c+'": '+K)}),F.then(function(K){T.log('Access for key-system "'+K.keySystem+'" obtained');var $=T.fetchServerCertificate(c);return T.log('Create media-keys for "'+c+'"'),G.mediaKeys=K.createMediaKeys().then(function(Z){return T.log('Media-keys created for "'+c+'"'),$.then(function(te){return te?T.setMediaKeysServerCertificate(Z,c,te):Z})}),G.mediaKeys.catch(function(Z){T.error('Failed to create media-keys for "'+c+'"}: '+Z)}),G.mediaKeys})}return F.then(function(){return H.mediaKeys})},u.createMediaKeySessionContext=function(c){var p=c.decryptdata,x=c.keySystem,T=c.mediaKeys;console.assert(!!T,"mediaKeys is defined"),this.log('Creating key-system session "'+x+'" keyId: '+L.default.hexDump(p.keyId||[]));var k=T.createSession(),H={decryptdata:p,keySystem:x,mediaKeys:T,mediaKeysSession:k,keyStatus:"status-pending"};return this.mediaKeySessions.push(H),H},u.renewKeySession=function(c){var p=c.decryptdata;if(p.pssh){var x=this.createMediaKeySessionContext(c),T=this.getKeyIdString(p);this.keyIdToKeySessionPromise[T]=this.generateRequestWithPreferredKeySession(x,"cenc",p.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(c)},u.getKeyIdString=function(c){if(!c)throw new Error("Could not read keyId of undefined decryptdata");if(null===c.keyId)throw new Error("keyId is null");return L.default.hexDump(c.keyId)},u.updateKeySession=function(c,p){var x,T=c.mediaKeysSession;return this.log('Updating key-session "'+T.sessionId+'" for keyID '+L.default.hexDump((null===(x=c.decryptdata)||void 0===x?void 0:x.keyId)||[])+"\n      } (data length: "+(p&&p.byteLength)+")"),T.update(p)},u.selectKeySystemFormat=function(c){var p=Object.keys(c.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+c.sn+" "+c.type+": "+c.level+") key formats "+p.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(p)),this.keyFormatPromise},u.getKeyFormatPromise=function(c){var p=this;return new Promise(function(x,T){var k=(0,V.getKeySystemsForConfig)(p.config),H=c.map(V.keySystemFormatToKeySystemDomain).filter(function(F){return!!F&&-1!==k.indexOf(F)});return p.getKeySystemSelectionPromise(H).then(function(F){var G=F.keySystem,K=(0,V.keySystemDomainToKeySystemFormat)(G);K?x(K):T(new Error('Unable to find format for key-system "'+G+'"'))}).catch(T)})},u.loadKey=function(c){var p=this,x=c.keyInfo.decryptdata,T=this.getKeyIdString(x),k="(keyId: "+T+' format: "'+x.keyFormat+'" method: '+x.method+" uri: "+x.uri+")";this.log("Starting session for key "+k);var H=this.keyIdToKeySessionPromise[T];return H||(H=this.keyIdToKeySessionPromise[T]=this.getKeySystemForKeyPromise(x).then(function(F){var G=F.keySystem,K=F.mediaKeys;return p.throwIfDestroyed(),p.log("Handle encrypted media sn: "+c.frag.sn+" "+c.frag.type+": "+c.frag.level+" using key "+k),p.attemptSetMediaKeys(G,K).then(function(){p.throwIfDestroyed();var $=p.createMediaKeySessionContext({keySystem:G,mediaKeys:K,decryptdata:x});return p.generateRequestWithPreferredKeySession($,"cenc",x.pssh,"playlist-key")})})).catch(function(F){return p.handleError(F)}),H},u.throwIfDestroyed=function(c){if(void 0===c&&(c="Invalid state"),!this.hls)throw new Error("invalid state")},u.handleError=function(c){this.hls&&(this.error(c.message),this.hls.trigger(W.Events.ERROR,c instanceof w?c.data:{type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:c,fatal:!0}))},u.getKeySystemForKeyPromise=function(c){var p=this.getKeyIdString(c),x=this.keyIdToKeySessionPromise[p];if(!x){var T=(0,V.keySystemFormatToKeySystemDomain)(c.keyFormat),k=T?[T]:(0,V.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(k)}return x},u.getKeySystemSelectionPromise=function(c){if(c.length||(c=(0,V.getKeySystemsForConfig)(this.config)),0===c.length)throw new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(c)},u._onMediaEncrypted=function(c){var p=this,x=c.initDataType,T=c.initData;if(this.debug('"'+c.type+'" event: init data type: "'+x+'"'),null!==T){var k,H;if("sinf"===x&&this.config.drmSystems[V.KeySystems.FAIRPLAY]){var F=(0,R.bin2str)(new Uint8Array(T));try{var G=(0,U.base64Decode)(JSON.parse(F).sinf),K=(0,R.parseSinf)(new Uint8Array(G));if(!K)return;k=K.subarray(8,24),H=V.KeySystems.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var $=(0,R.parsePssh)(T);if(null===$)return;0===$.version&&$.systemId===V.KeySystemIds.WIDEVINE&&$.data&&(k=$.data.subarray(8,24)),H=(0,V.keySystemIdToKeySystemDomain)($.systemId)}if(H&&k){for(var Z=L.default.hexDump(k),te=this.keyIdToKeySessionPromise,Q=this.mediaKeySessions,re=te[Z],se=function(be){var Re=Q[be],Se=Re.decryptdata;if(Se.pssh||!Se.keyId)return"continue";var De=L.default.hexDump(Se.keyId);return Z===De||-1!==Se.uri.replace(/-/g,"").indexOf(Z)?(re=te[De],delete te[De],Se.pssh=new Uint8Array(T),Se.keyId=k,re=te[Z]=re.then(function(){return p.generateRequestWithPreferredKeySession(Re,x,T,"encrypted-event-key-match")}),"break"):void 0},ce=0;ce<Q.length;ce++){var ue=se(ce);if("continue"!==ue&&"break"===ue)break}re||(re=te[Z]=this.getKeySystemSelectionPromise([H]).then(function(he){var be,Re=he.keySystem,Se=he.mediaKeys;p.throwIfDestroyed();var De=new N.LevelKey("ISO-23001-7",Z,null!=(be=(0,V.keySystemDomainToKeySystemFormat)(Re))?be:"");return De.pssh=new Uint8Array(T),De.keyId=k,p.attemptSetMediaKeys(Re,Se).then(function(){p.throwIfDestroyed();var Me=p.createMediaKeySessionContext({decryptdata:De,keySystem:Re,mediaKeys:Se});return p.generateRequestWithPreferredKeySession(Me,x,T,"encrypted-event-no-match")})})),re.catch(function(he){return p.handleError(he)})}}},u._onWaitingForKey=function(c){this.log('"'+c.type+'" event')},u.attemptSetMediaKeys=function(c,p){var x=this,T=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+c+'"');var k=Promise.all(T).then(function(){if(!x.media)throw new Error("Attempted to set mediaKeys without media element attached");return x.media.setMediaKeys(p)});return this.setMediaKeysQueue.push(k),k.then(function(){x.log('Media-keys set for "'+c+'"'),T.push(k),x.setMediaKeysQueue=x.setMediaKeysQueue.filter(function(H){return-1===T.indexOf(H)})})},u.generateRequestWithPreferredKeySession=function(c,p,x,T){var k,H,F=this,G=null===(k=this.config.drmSystems)||void 0===k||null===(H=k[c.keySystem])||void 0===H?void 0:H.generateRequest;if(G)try{var K=G.call(this.hls,p,x,c);if(!K)throw new Error("Invalid response from configured generateRequest filter");p=K.initDataType,x=c.decryptdata.pssh=K.initData?new Uint8Array(K.initData):null}catch(re){var $;if(this.warn(re.message),null!==($=this.hls)&&void 0!==$&&$.config.debug)throw re}if(null===x)return this.log('Skipping key-session request for "'+T+'" (no initData)'),Promise.resolve(c);var Z=this.getKeyIdString(c.decryptdata);this.log('Generating key-session request for "'+T+'": '+Z+" (init data type: "+p+" length: "+(x?x.byteLength:null)+")");var te=new(D());c.mediaKeysSession.onmessage=function(re){var se=c.mediaKeysSession;if(se){var ce=re.messageType,ue=re.message;F.log('"'+ce+'" message event for session "'+se.sessionId+'" message size: '+ue.byteLength),"license-request"===ce||"license-renewal"===ce?F.renewLicense(c,ue).catch(function(he){F.handleError(he),te.emit("error",he)}):"license-release"===ce?c.keySystem===V.KeySystems.FAIRPLAY&&(F.updateKeySession(c,(0,Y.strToUtf8array)("acknowledged")),F.removeSession(c)):F.warn('unhandled media key message type "'+ce+'"')}else te.emit("error",new Error("invalid state"))},c.mediaKeysSession.onkeystatuseschange=function(re){if(c.mediaKeysSession){F.onKeyStatusChange(c);var ce=c.keyStatus;te.emit("keyStatus",ce),"expired"===ce&&(F.warn(c.keySystem+" expired for key "+Z),F.renewKeySession(c))}else te.emit("error",new Error("invalid state"))};var Q=new Promise(function(re,se){te.on("error",se),te.on("keyStatus",function(ce){ce.startsWith("usable")?re():"output-restricted"===ce?se(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===ce?se(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+ce+'"')):"expired"===ce?se(new Error("key expired while generating request")):F.warn('unhandled key status change "'+ce+'"')})});return c.mediaKeysSession.generateRequest(p,x).then(function(){var re;F.log('Request generated for key-session "'+(null===(re=c.mediaKeysSession)||void 0===re?void 0:re.sessionId)+'" keyId: '+Z)}).catch(function(re){throw new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:re,fatal:!1},"Error generating key-session request: "+re)}).then(function(){return Q}).catch(function(re){throw te.removeAllListeners(),F.removeSession(c),re}).then(function(){return te.removeAllListeners(),c})},u.onKeyStatusChange=function(c){var p=this;c.mediaKeysSession.keyStatuses.forEach(function(x,T){p.log('key status change "'+x+'" for keyStatuses keyId: '+L.default.hexDump("buffer"in T?new Uint8Array(T.buffer,T.byteOffset,T.byteLength):new Uint8Array(T))+" session keyId: "+L.default.hexDump(new Uint8Array(c.decryptdata.keyId||[]))+" uri: "+c.decryptdata.uri),c.keyStatus=x})},u.fetchServerCertificate=function(c){var p=this;return new Promise(function(x,T){var k=p.getServerCertificateUrl(c);if(!k)return x();p.log('Fetching serverCertificate for "'+c+'"');var H=new XMLHttpRequest;H.open("GET",k,!0),H.responseType="arraybuffer",H.onreadystatechange=function(){H.readyState===XMLHttpRequest.DONE&&(200===H.status?x(H.response):T(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:H},'"'+c+'" certificate request XHR failed ('+k+"). Status: "+H.status+" ("+H.statusText+")")))},H.send()})},u.setMediaKeysServerCertificate=function(c,p,x){var T=this;return new Promise(function(k,H){c.setServerCertificate(x).then(function(F){T.log("setServerCertificate "+(F?"success":"not supported by CDM")+" ("+x?.byteLength+') on "'+p+'"'),k(c)}).catch(function(F){H(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:F,fatal:!0},F.message))})})},u.renewLicense=function(c,p){var x=this;return this.requestLicense(c,new Uint8Array(p)).then(function(T){return x.updateKeySession(c,new Uint8Array(T)).catch(function(k){throw new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:k,fatal:!0},k.message)})})},u.setupLicenseXHR=function(c,p,x,T){var k=this,H=this.config.licenseXhrSetup;return H?Promise.resolve().then(function(){if(!x.decryptdata)throw new Error("Key removed");return H.call(k.hls,c,p,x,T)}).catch(function(F){if(!x.decryptdata)throw F;return c.open("POST",p,!0),H.call(k.hls,c,p,x,T)}).then(function(F){return c.readyState||c.open("POST",p,!0),{xhr:c,licenseChallenge:F||T}}):(c.open("POST",p,!0),Promise.resolve({xhr:c,licenseChallenge:T}))},u.requestLicense=function(c,p){var x=this;return new Promise(function(T,k){var H=x.getLicenseServerUrl(c.keySystem);x.log("Sending license request to URL: "+H);var F=new XMLHttpRequest;F.responseType="arraybuffer",F.onreadystatechange=function(){if(!x.hls||!c.mediaKeysSession)return k(new Error("invalid state"));if(4===F.readyState)if(200===F.status){x._requestLicenseFailureCount=0;var G=F.response;x.log("License received "+(G instanceof ArrayBuffer?G.byteLength:G));var K=x.config.licenseResponseCallback;if(K)try{G=K.call(x.hls,F,H,c)}catch(Z){x.error(Z)}T(G)}else x._requestLicenseFailureCount++,x._requestLicenseFailureCount>3||F.status>=400&&F.status<500?k(new w({type:B.ErrorTypes.KEY_SYSTEM_ERROR,details:B.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:F},"License Request XHR failed ("+H+"). Status: "+F.status+" ("+F.statusText+")")):(x.warn("Retrying license request, "+(3-x._requestLicenseFailureCount+1)+" attempts left"),x.requestLicense(c,p).then(T,k))},c.licenseXhr&&c.licenseXhr.readyState!==XMLHttpRequest.DONE&&c.licenseXhr.abort(),c.licenseXhr=F,x.setupLicenseXHR(F,H,c,p).then(function(G){G.xhr.send(G.licenseChallenge)})})},u.onMediaAttached=function(c,p){if(this.config.emeEnabled){var x=p.media;this.media=x,x.addEventListener("encrypted",this.onMediaEncrypted),x.addEventListener("waitingforkey",this.onWaitingForKey)}},u.onMediaDetached=function(){var c=this,p=this.media,x=this.mediaKeySessions;p&&(p.removeEventListener("encrypted",this.onMediaEncrypted),p.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},N.LevelKey.clearKeyUriToKeyIdMap();var T=x.length;S.CDMCleanupPromise=Promise.all(x.map(function(k){return c.removeSession(k)}).concat(p?.setMediaKeys(null).catch(function(k){c.log("Could not clear media keys: "+k+". media.src: "+p?.src)}))).then(function(){T&&(c.log("finished closing key sessions and clearing media keys"),x.length=0)}).catch(function(k){c.log("Could not close sessions and clear media keys: "+k+". media.src: "+p?.src)})},u.onManifestLoaded=function(c,p){var x=p.sessionKeys;if(x&&this.config.emeEnabled&&!this.keyFormatPromise){var T=x.reduce(function(k,H){return-1===k.indexOf(H.keyFormat)&&k.push(H.keyFormat),k},[]);this.log("Selecting key-system from session-keys "+T.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(T)}},u.removeSession=function(c){var p=this,x=c.mediaKeysSession,T=c.licenseXhr;if(x){this.log("Remove licenses and keys and close session "+x.sessionId),x.onmessage=null,x.onkeystatuseschange=null,T&&T.readyState!==XMLHttpRequest.DONE&&T.abort(),c.mediaKeysSession=c.decryptdata=c.licenseXhr=void 0;var k=this.mediaKeySessions.indexOf(c);return k>-1&&this.mediaKeySessions.splice(k,1),x.remove().catch(function(H){p.log("Could not remove session: "+H)}).then(function(){return x.close()}).catch(function(H){p.log("Could not close session: "+H)})}},S}();y.CDMCleanupPromise=void 0;var w=function(S){function u(d,c){var p;return(p=S.call(this,c)||this).data=void 0,p.data=d,d.err=d.error,p}return function I(S,u){S.prototype=Object.create(u.prototype),S.prototype.constructor=S,f(S,u)}(u,S),u}(M(Error));const E=y},"./src/controller/fps-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/fps-controller.ts ***!
                  \******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>V});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../utils/logger */
"./src/utils/logger.ts");const V=function(){function Y(N){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=N,this.registerListeners()}var U=Y.prototype;return U.setStreamController=function(L){this.streamController=L},U.registerListeners=function(){this.hls.on(W.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},U.unregisterListeners=function(){this.hls.off(W.Events.MEDIA_ATTACHING,this.onMediaAttaching)},U.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},U.onMediaAttaching=function(L,R){var P=this.hls.config;if(P.capLevelOnFPSDrop){var D=R.media instanceof self.HTMLVideoElement?R.media:null;this.media=D,D&&"function"==typeof D.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),P.fpsDroppedMonitoringPeriod)}},U.checkFPS=function(L,R,P){var D=performance.now();if(R){if(this.lastTime){var M=P-this.lastDroppedFrames,_=R-this.lastDecodedFrames,m=1e3*M/(D-this.lastTime),v=this.hls;if(v.trigger(W.Events.FPS_DROP,{currentDropped:M,currentDecoded:_,totalDroppedFrames:P}),m>0&&M>v.config.fpsDroppedMonitoringThreshold*_){var f=v.currentLevel;B.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===v.autoLevelCapping||v.autoLevelCapping>=f)&&(v.trigger(W.Events.FPS_DROP_LEVEL_CAPPING,{level:f-=1,droppedLevel:v.currentLevel}),v.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=D,this.lastDroppedFrames=P,this.lastDecodedFrames=R}},U.checkFPSInterval=function(){var L=this.media;if(L)if(this.isVideoPlaybackQualityAvailable){var R=L.getVideoPlaybackQuality();this.checkFPS(L,R.totalVideoFrames,R.droppedVideoFrames)}else this.checkFPS(L,L.webkitDecodedFrameCount,L.webkitDroppedFrameCount)},Y}()},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
                  !*** ./src/controller/fragment-finders.ts ***!
                  \********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{findFragWithCC:()=>N,findFragmentByPDT:()=>z,findFragmentByPTS:()=>V,fragmentWithinToleranceTest:()=>Y,pdtWithinToleranceTest:()=>U});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../utils/binary-search */
"./src/utils/binary-search.ts");function z(L,R,P){if(null===R||!Array.isArray(L)||!L.length||!(0,W.isFiniteNumber)(R))return null;if(R<(L[0].programDateTime||0))return null;if(R>=(L[L.length-1].endProgramDateTime||0))return null;P=P||0;for(var M=0;M<L.length;++M){var _=L[M];if(U(R,P,_))return _}return null}function V(L,R,P,D){void 0===P&&(P=0),void 0===D&&(D=0);var I=null;if(L?I=R[L.sn-R[0].sn+1]||null:0===P&&0===R[0].start&&(I=R[0]),I&&0===Y(P,D,I))return I;var M=B.default.search(R,Y.bind(null,P,D));return!M||M===L&&I?I:M}function Y(L,R,P){if(void 0===L&&(L=0),void 0===R&&(R=0),P.start<=L&&P.start+P.duration>L)return 0;var D=Math.min(R,P.duration+(P.deltaPTS?P.deltaPTS:0));return P.start+P.duration-D<=L?1:P.start-D>L&&P.start?-1:0}function U(L,R,P){var D=1e3*Math.min(R,P.duration+(P.deltaPTS?P.deltaPTS:0));return(P.endProgramDateTime||0)-D>L}function N(L,R){return B.default.search(L,function(P){return P.cc<R?1:P.cc>R?-1:0})}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
                  !*** ./src/controller/fragment-tracker.ts ***!
                  \********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{FragmentState:()=>z,FragmentTracker:()=>V});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../types/loader */
"./src/types/loader.ts"),z=(()=>{return(N=z||(z={})).NOT_LOADED="NOT_LOADED",N.APPENDING="APPENDING",N.PARTIAL="PARTIAL",N.OK="OK",z;var N})(),V=function(){function N(R){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=R,this._registerListeners()}var L=N.prototype;return L._registerListeners=function(){var P=this.hls;P.on(W.Events.BUFFER_APPENDED,this.onBufferAppended,this),P.on(W.Events.FRAG_BUFFERED,this.onFragBuffered,this),P.on(W.Events.FRAG_LOADED,this.onFragLoaded,this)},L._unregisterListeners=function(){var P=this.hls;P.off(W.Events.BUFFER_APPENDED,this.onBufferAppended,this),P.off(W.Events.FRAG_BUFFERED,this.onFragBuffered,this),P.off(W.Events.FRAG_LOADED,this.onFragLoaded,this)},L.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},L.getAppendedFrag=function(P,D){if(D===B.PlaylistLevelType.MAIN){var I=this.activeFragment,M=this.activeParts;if(!I)return null;if(M)for(var _=M.length;_--;){var m=M[_],v=m?m.end:I.appendedPTS;if(m.start<=P&&void 0!==v&&P<=v)return _>9&&(this.activeParts=M.slice(_-9)),m}else if(I.start<=P&&void 0!==I.appendedPTS&&P<=I.appendedPTS)return I}return this.getBufferedFrag(P,D)},L.getBufferedFrag=function(P,D){for(var I=this.fragments,M=Object.keys(I),_=M.length;_--;){var m=I[M[_]];if(m?.body.type===D&&m.buffered){var v=m.body;if(v.start<=P&&P<=v.end)return v}}return null},L.detectEvictedFragments=function(P,D,I){var M=this;this.timeRanges&&(this.timeRanges[P]=D),Object.keys(this.fragments).forEach(function(_){var m=M.fragments[_];if(m){if(!m.buffered&&!m.loaded)return void(m.body.type===I&&M.removeFragment(m.body));var v=m.range[P];v&&v.time.some(function(f){var b=!M.isTimeBuffered(f.startPTS,f.endPTS,D);return b&&M.removeFragment(m.body),b})}})},L.detectPartialFragments=function(P){var D=this,I=this.timeRanges,M=P.frag,_=P.part;if(I&&"initSegment"!==M.sn){var m=U(M),v=this.fragments[m];v&&(Object.keys(I).forEach(function(f){var b=M.elementaryStreams[f];b&&(v.range[f]=D.getBufferedTimes(M,_,null!==_||!0===b.partial,I[f]))}),v.loaded=null,Object.keys(v.range).length?(v.buffered=!0,v.body.endList&&(this.endListFragments[v.body.type]=v)):this.removeFragment(v.body))}},L.fragBuffered=function(P){var D=U(P),I=this.fragments[D];I&&(I.loaded=null,I.buffered=!0)},L.getBufferedTimes=function(P,D,I,M){for(var _={time:[],partial:I},m=D?D.start:P.start,v=D?D.end:P.end,f=P.minEndPTS||v,b=P.maxStartPTS||m,C=0;C<M.length;C++){var h=M.start(C)-this.bufferPadding,y=M.end(C)+this.bufferPadding;if(b>=h&&f<=y){_.time.push({startPTS:Math.max(m,M.start(C)),endPTS:Math.min(v,M.end(C))});break}if(m<y&&v>h)_.partial=!0,_.time.push({startPTS:Math.max(m,M.start(C)),endPTS:Math.min(v,M.end(C))});else if(v<=h)break}return _},L.getPartialFragment=function(P){var I,M,_,D=null,m=0,v=this.bufferPadding,f=this.fragments;return Object.keys(f).forEach(function(b){var C=f[b];C&&Y(C)&&(_=C.body.end+v,P>=(M=C.body.start-v)&&P<=_&&(I=Math.min(P-M,_-P),m<=I&&(D=C.body,m=I)))}),D},L.isEndListAppended=function(P){var D=this.endListFragments[P];return void 0!==D&&(D.buffered||Y(D))},L.getState=function(P){var D=U(P),I=this.fragments[D];return I?I.buffered?Y(I)?z.PARTIAL:z.OK:z.APPENDING:z.NOT_LOADED},L.isTimeBuffered=function(P,D,I){for(var M,_,m=0;m<I.length;m++){if(M=I.start(m)-this.bufferPadding,_=I.end(m)+this.bufferPadding,P>=M&&D<=_)return!0;if(D<=M)return!1}return!1},L.onFragLoaded=function(P,D){var I=D.frag;if("initSegment"!==I.sn&&!I.bitrateTest&&!D.part){var _=U(I);this.fragments[_]={body:I,loaded:D,buffered:!1,range:Object.create(null)}}},L.onBufferAppended=function(P,D){var I=this,M=D.frag,_=D.part,m=D.timeRanges;if(M.type===B.PlaylistLevelType.MAIN)if(this.activeFragment!==M&&(this.activeFragment=M,M.appendedPTS=void 0),_){var v=this.activeParts;v||(this.activeParts=v=[]),v.push(_)}else this.activeParts=null;this.timeRanges=m,Object.keys(m).forEach(function(f){var b=m[f];if(I.detectEvictedFragments(f,b),!_&&M.type===B.PlaylistLevelType.MAIN){var C=M.elementaryStreams[f];if(!C)return;for(var h=0;h<b.length;h++){var y=b.end(h);M.appendedPTS=y<=C.endPTS&&y>C.startPTS?Math.max(y,M.appendedPTS||0):C.endPTS}}})},L.onFragBuffered=function(P,D){this.detectPartialFragments(D)},L.hasFragment=function(P){var D=U(P);return!!this.fragments[D]},L.removeFragmentsInRange=function(P,D,I){var M=this;Object.keys(this.fragments).forEach(function(_){var m=M.fragments[_];if(m&&m.buffered){var v=m.body;v.type===I&&v.start<D&&v.end>P&&M.removeFragment(v)}})},L.removeFragment=function(P){var D=U(P);P.stats.loaded=0,P.clearElementaryStreamInfo(),P.appendedPTS=void 0,delete this.fragments[D],P.endList&&delete this.endListFragments[P.type]},L.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},N}();function Y(N){var L,R;return N.buffered&&((null===(L=N.range.video)||void 0===L?void 0:L.partial)||(null===(R=N.range.audio)||void 0===R?void 0:R.partial))}function U(N){return N.type+"_"+N.level+"_"+N.urlId+"_"+N.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
                  !*** ./src/controller/gap-controller.ts ***!
                  \******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{MAX_START_GAP_JUMP:()=>U,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>N,SKIP_BUFFER_RANGE_START:()=>L,STALL_MINIMUM_DURATION_MS:()=>Y,default:()=>R});var W=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),B=O(
/*! ../errors */
"./src/errors.ts"),z=O(
/*! ../events */
"./src/events.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=250,U=2,N=.1,L=.05,R=function(){function P(I,M,_,m){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=I,this.media=M,this.fragmentTracker=_,this.hls=m}var D=P.prototype;return D.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},D.poll=function(M,_){var m=this.config,v=this.media,f=this.stalled;if(null!==v){var b=v.currentTime,C=v.seeking,h=this.seeking&&!C,y=!this.seeking&&C;if(this.seeking=C,b!==M){if(this.moved=!0,null!==f){if(this.stallReported){var w=self.performance.now()-f;V.logger.warn("playback not stuck anymore @"+b+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((y||h)&&(this.stalled=null),!(v.paused&&!C||v.ended||0===v.playbackRate)&&W.BufferHelper.getBuffered(v).length){var E=W.BufferHelper.bufferInfo(v,b,0),u=E.nextStart||0;if(E.len>0||u){if(C){var d=E.len>U,c=!u||_&&_.start<=b||u-b>U&&!this.fragmentTracker.getPartialFragment(b);if(d||c)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,x=Math.max(u,E.start||0)-b,T=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,k=null==T||null===(p=T.details)||void 0===p?void 0:p.live;if(x>0&&x<=(k?2*T.details.targetduration:U))return void this._trySkipBufferHole(null)}var F=self.performance.now();if(null===f)return void(this.stalled=F);var G=F-f;if(C||!(G>=Y)||(this._reportStall(E),this.media)){var K=W.BufferHelper.bufferInfo(v,b,m.maxBufferHole);this._tryFixBufferStall(K,G)}}}}},D._tryFixBufferStall=function(M,_){var m=this.config,f=this.media;if(null!==f){var C=this.fragmentTracker.getPartialFragment(f.currentTime);if(C&&(this._trySkipBufferHole(C)||!this.media))return;M.len>m.maxBufferHole&&_>1e3*m.highBufferWatchdogPeriod&&(V.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},D._reportStall=function(M){var _=this.hls,m=this.media;!this.stallReported&&m&&(this.stallReported=!0,V.logger.warn("Playback stalling at @"+m.currentTime+" due to low buffer ("+JSON.stringify(M)+")"),_.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:M.len}))},D._trySkipBufferHole=function(M){var _=this.config,m=this.hls,v=this.media;if(null===v)return 0;for(var f=v.currentTime,b=0,C=W.BufferHelper.getBuffered(v),h=0;h<C.length;h++){var y=C.start(h);if(f+_.maxBufferHole>=b&&f<y){var w=Math.max(y+L,v.currentTime+N);return V.logger.warn("skipping hole, adjusting currentTime from "+f+" to "+w),this.moved=!0,this.stalled=null,v.currentTime=w,M&&m.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+f+" to "+w,frag:M}),w}b=C.end(h)}return 0},D._tryNudgeBuffer=function(){var M=this.config,_=this.hls,m=this.media,v=this.nudgeRetry;if(null!==m){var f=m.currentTime;if(this.nudgeRetry++,v<M.nudgeMaxRetry){var b=f+(v+1)*M.nudgeOffset;V.logger.warn("Nudging 'currentTime' from "+f+" to "+b),m.currentTime=b,_.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else V.logger.error("Playhead still not moving while enough data buffered @"+f+" after "+M.nudgeMaxRetry+" nudges"),_.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},P}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
                  !*** ./src/controller/id3-track-controller.ts ***!
                  \************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>M});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),V=O(
/*! ../demux/id3 */
"./src/demux/id3.ts"),Y=O(
/*! ../loader/date-range */
"./src/loader/date-range.ts"),U=O(
/*! ../types/demuxer */
"./src/types/demuxer.ts");function L(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var R=function(){var _=L();try{new _(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function P(_,m){return _.getTime()/1e3-m}function D(_){return Uint8Array.from(_.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}const M=function(){function _(v){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=v,this._registerListeners()}var m=_.prototype;return m.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},m._registerListeners=function(){var f=this.hls;f.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(B.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),f.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),f.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},m._unregisterListeners=function(){var f=this.hls;f.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(B.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),f.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),f.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},m.onMediaAttached=function(f,b){this.media=b.media},m.onMediaDetaching=function(){this.id3Track&&((0,z.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},m.onManifestLoading=function(){this.dateRangeCuesAppended={}},m.createTrack=function(f){var b=this.getID3Track(f.textTracks);return b.mode="hidden",b},m.getID3Track=function(f){if(this.media){for(var b=0;b<f.length;b++){var C=f[b];if("metadata"===C.kind&&"id3"===C.label)return(0,z.sendAddTrackEvent)(C,this.media),C}return this.media.addTextTrack("metadata","id3")}},m.onFragParsingMetadata=function(f,b){if(this.media){var C=this.hls.config,h=C.enableEmsgMetadataCues,y=C.enableID3MetadataCues;if(h||y){var w=b.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var E=L(),S=0;S<w.length;S++){var u=w[S].type;if((u!==U.MetadataSchema.emsg||h)&&y){var d=V.getID3Frames(w[S].data);if(d){var c=w[S].pts,p=c+w[S].duration;p>R&&(p=R),p-c<=0&&(p=c+.25);for(var T=0;T<d.length;T++){var k=d[T];if(!V.isTimeStampFrame(k)){this.updateId3CueEnds(c);var H=new E(c,p,"");H.value=k,u&&(H.type=u),this.id3Track.addCue(H)}}}}}}}},m.updateId3CueEnds=function(f){var b,C=null===(b=this.id3Track)||void 0===b?void 0:b.cues;if(C)for(var h=C.length;h--;){var y=C[h];y.startTime<f&&y.endTime===R&&(y.endTime=f)}},m.onBufferFlushing=function(f,b){var y=b.type,w=this.id3Track,E=this.hls;if(E){var S=E.config,u=S.enableEmsgMetadataCues,d=S.enableID3MetadataCues;w&&(u||d)&&(0,z.removeCuesInRange)(w,b.startOffset,b.endOffset,"audio"===y?function(x){return x.type===U.MetadataSchema.audioId3&&d}:"video"===y?function(x){return x.type===U.MetadataSchema.emsg&&u}:function(x){return x.type===U.MetadataSchema.audioId3&&d||x.type===U.MetadataSchema.emsg&&u})}},m.onLevelUpdated=function(f,b){var C=this,h=b.details;if(this.media&&h.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var y=this.dateRangeCuesAppended,w=this.id3Track,E=h.dateRanges,S=Object.keys(E);if(w)for(var u=Object.keys(y).filter(function(F){return!S.includes(F)}),d=function(G){var K=u[G];Object.keys(y[K].cues).forEach(function($){w.removeCue(y[K].cues[$])}),delete y[K]},c=u.length;c--;)d(c);var p=h.fragments[h.fragments.length-1];if(0!==S.length&&(0,W.isFiniteNumber)(p?.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var x=p.programDateTime/1e3-p.start,T=L(),k=function(G){var K=S[G],$=E[K],Z=y[K],te=Z?.cues||{},Q=Z?.durationKnown||!1,re=P($.startDate,x),se=R,ce=$.endDate;if(ce)se=P(ce,x),Q=!0;else if($.endOnNext&&!Q){var ue=S.reduce(function(Me,it){var ct=E[it];return ct.class===$.class&&ct.id!==it&&ct.startDate>$.startDate&&Me.push(ct),Me},[]).sort(function(Me,it){return Me.startDate.getTime()-it.startDate.getTime()})[0];ue&&(se=P(ue.startDate,x),Q=!0)}for(var he=Object.keys($.attr),be=0;be<he.length;be++){var Re=he[be];if(Re!==Y.DateRangeAttribute.ID&&Re!==Y.DateRangeAttribute.CLASS&&Re!==Y.DateRangeAttribute.START_DATE&&Re!==Y.DateRangeAttribute.DURATION&&Re!==Y.DateRangeAttribute.END_DATE&&Re!==Y.DateRangeAttribute.END_ON_NEXT){var Se=te[Re];if(Se)Q&&!Z.durationKnown&&(Se.endTime=se);else{var De=$.attr[Re];Se=new T(re,se,""),(Re===Y.DateRangeAttribute.SCTE35_OUT||Re===Y.DateRangeAttribute.SCTE35_IN)&&(De=D(De)),Se.value={key:Re,data:De},Se.type=U.MetadataSchema.dateRange,C.id3Track.addCue(Se),te[Re]=Se}}}y[K]={cues:te,dateRange:$,durationKnown:Q}},H=0;H<S.length;H++)k(H)}}},_}()},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
                  !*** ./src/controller/latency-controller.ts ***!
                  \**********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>L});var W=O(
/*! ../errors */
"./src/errors.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts");function V(R,P){for(var D=0;D<P.length;D++){var I=P[D];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(R,U(I.key),I)}}function U(R){var P=function N(R,P){if("object"!=typeof R||null===R)return R;var D=R[Symbol.toPrimitive];if(void 0!==D){var I=D.call(R,P||"default");if("object"!=typeof I)return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(R)}(R,"string");return"symbol"==typeof P?P:String(P)}var L=function(){function R(D){var I=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return I.timeupdate()},this.hls=D,this.config=D.config,this.registerListeners()}var P=R.prototype;return P.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},P.registerListeners=function(){this.hls.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(B.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(B.Events.ERROR,this.onError,this)},P.unregisterListeners=function(){this.hls.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(B.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(B.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(B.Events.ERROR,this.onError)},P.onMediaAttached=function(I,M){this.media=M.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},P.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},P.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},P.onLevelUpdated=function(I,M){var _=M.details;this.levelDetails=_,_.advanced&&this.timeupdate(),!_.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},P.onError=function(I,M){M.details===W.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,z.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},P.timeupdate=function(){var I=this.media,M=this.levelDetails;if(I&&M){this.currentTime=I.currentTime;var _=this.computeLatency();if(null!==_){this._latency=_;var m=this.config,f=m.maxLiveSyncPlaybackRate;if(m.lowLatencyMode&&1!==f){var b=this.targetLatency;if(null!==b){var C=_-b,h=Math.min(this.maxLatency,b+M.targetduration);if(M.live&&C<h&&C>.05&&this.forwardBufferLength>1){var w=Math.min(2,Math.max(1,f)),E=Math.round(2/(1+Math.exp(-.75*C-this.edgeStalled))*20)/20;I.playbackRate=Math.min(w,Math.max(1,E))}else 1!==I.playbackRate&&0!==I.playbackRate&&(I.playbackRate=1)}}}}},P.estimateLiveEdge=function(){var I=this.levelDetails;return null===I?null:I.edge+I.age},P.computeLatency=function(){var I=this.estimateLiveEdge();return null===I?null:I-this.currentTime},function Y(R,P,D){P&&V(R.prototype,P),D&&V(R,D),Object.defineProperty(R,"prototype",{writable:!1})}(R,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var I=this.config,M=this.levelDetails;return void 0!==I.liveMaxLatencyDuration?I.liveMaxLatencyDuration:M?I.liveMaxLatencyDurationCount*M.targetduration:0}},{key:"targetLatency",get:function(){var I=this.levelDetails;if(null===I)return null;var m=I.targetduration,v=this.config,f=v.liveSyncDuration,h=this.hls.userConfig,y=v.lowLatencyMode&&I.partHoldBack||I.holdBack;return(h.liveSyncDuration||h.liveSyncDurationCount||0===y)&&(y=void 0!==f?f:v.liveSyncDurationCount*m),y+Math.min(1*this.stallCount,m)}},{key:"liveSyncPosition",get:function(){var I=this.estimateLiveEdge(),M=this.targetLatency,_=this.levelDetails;if(null===I||null===M||null===_)return null;var m=_.edge,b=m-(this.config.lowLatencyMode&&_.partTarget||_.targetduration);return Math.min(Math.max(m-_.totalduration,I-M-this.edgeStalled),b)}},{key:"drift",get:function(){var I=this.levelDetails;return null===I?1:I.drift}},{key:"edgeStalled",get:function(){var I=this.levelDetails;return null===I?0:Math.max(I.age-3*(this.config.lowLatencyMode&&I.partTarget||I.targetduration),0)}},{key:"forwardBufferLength",get:function(){var I=this.media,M=this.levelDetails;if(!I||!M)return 0;var _=I.buffered.length;return(_?I.buffered.end(_-1):M.edge)-this.currentTime}}]),R}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
                  !*** ./src/controller/level-controller.ts ***!
                  \********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>v});var W=O(
/*! ../types/level */
"./src/types/level.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../errors */
"./src/errors.ts"),V=O(
/*! ../utils/codecs */
"./src/utils/codecs.ts"),Y=O(
/*! ./level-helper */
"./src/controller/level-helper.ts"),U=O(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),N=O(
/*! ../types/loader */
"./src/types/loader.ts");function L(){return L=Object.assign?Object.assign.bind():function(f){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var h in C)Object.prototype.hasOwnProperty.call(C,h)&&(f[h]=C[h])}return f},L.apply(this,arguments)}function R(f,b){for(var C=0;C<b.length;C++){var h=b[C];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,D(h.key),h)}}function D(f){var b=function I(f,b){if("object"!=typeof f||null===f)return f;var C=f[Symbol.toPrimitive];if(void 0!==C){var h=C.call(f,b||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(f)}(f,"string");return"symbol"==typeof b?b:String(b)}function _(f,b){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,y){return h.__proto__=y,h})(f,b)}var m=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),v=function(f){function b(h){var y;return(y=f.call(this,h,"[level-controller]")||this)._levels=[],y._firstLevel=-1,y._startLevel=void 0,y.currentLevelIndex=-1,y.manualLevelIndex=-1,y.onParsedComplete=void 0,y._registerListeners(),y}!function M(f,b){f.prototype=Object.create(b.prototype),f.prototype.constructor=f,_(f,b)}(b,f);var C=b.prototype;return C._registerListeners=function(){var y=this.hls;y.on(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),y.on(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.on(B.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),y.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),y.on(B.Events.ERROR,this.onError,this)},C._unregisterListeners=function(){var y=this.hls;y.off(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),y.off(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.off(B.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),y.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),y.off(B.Events.ERROR,this.onError,this)},C.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,f.prototype.destroy.call(this)},C.startLoad=function(){this._levels.forEach(function(w){w.loadError=0}),f.prototype.startLoad.call(this)},C.onManifestLoaded=function(y,w){var d,p,E=[],S=[],u=[],c={},x=!1,T=!1,k=!1;if(w.levels.forEach(function(K){var $=K.attrs;x=x||!(!K.width||!K.height),T=T||!!K.videoCodec,k=k||!!K.audioCodec,m&&K.audioCodec&&-1!==K.audioCodec.indexOf("mp4a.40.34")&&(K.audioCodec=void 0);var Z=K.bitrate+"-"+K.attrs.RESOLUTION+"-"+K.attrs.CODECS;(p=c[Z])?p.url.push(K.url):(p=new W.Level(K),c[Z]=p,E.push(p)),$&&($.AUDIO&&(0,Y.addGroupId)(p,"audio",$.AUDIO),$.SUBTITLES&&(0,Y.addGroupId)(p,"text",$.SUBTITLES))}),(x||T)&&k&&(E=E.filter(function(K){return!!K.videoCodec||!(!K.width||!K.height)})),E=E.filter(function(K){var $=K.audioCodec,Z=K.videoCodec;return(!$||(0,V.isCodecSupportedInMp4)($,"audio"))&&(!Z||(0,V.isCodecSupportedInMp4)(Z,"video"))}),w.audioTracks&&(S=w.audioTracks.filter(function(K){return!K.audioCodec||(0,V.isCodecSupportedInMp4)(K.audioCodec,"audio")}),(0,Y.assignTrackIdsByGroup)(S)),w.subtitles&&(0,Y.assignTrackIdsByGroup)(u=w.subtitles),E.length>0){d=E[0].bitrate,E.sort(function(K,$){return K.attrs["HDCP-LEVEL"]!==$.attrs["HDCP-LEVEL"]?(K.attrs["HDCP-LEVEL"]||"")>($.attrs["HDCP-LEVEL"]||"")?1:-1:K.bitrate!==$.bitrate?K.bitrate-$.bitrate:K.attrs.SCORE!==$.attrs.SCORE?K.attrs.decimalFloatingPoint("SCORE")-$.attrs.decimalFloatingPoint("SCORE"):x&&K.height!==$.height?K.height-$.height:0}),this._levels=E;for(var H=0;H<E.length;H++)if(E[H].bitrate===d){this._firstLevel=H,this.log("manifest loaded, "+E.length+" level(s) found, first bitrate: "+d);break}var G={levels:E,audioTracks:S,subtitleTracks:u,sessionData:w.sessionData,sessionKeys:w.sessionKeys,firstLevel:this._firstLevel,stats:w.stats,audio:k,video:T,altAudio:!(k&&!T)&&S.some(function(K){return!!K.url})};this.hls.trigger(B.Events.MANIFEST_PARSED,G),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(B.Events.ERROR,{type:z.ErrorTypes.MEDIA_ERROR,details:z.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:w.url,reason:"no level with compatible codecs found in manifest"})},C.onError=function(y,w){var E,S;if(f.prototype.onError.call(this,y,w),!w.fatal){var u=w.context,d=this._levels[this.currentLevelIndex];if(u&&(u.type===N.PlaylistContextType.AUDIO_TRACK&&d.audioGroupIds&&u.groupId===d.audioGroupIds[d.urlId]||u.type===N.PlaylistContextType.SUBTITLE_TRACK&&d.textGroupIds&&u.groupId===d.textGroupIds[d.urlId]))return void this.redundantFailover(this.currentLevelIndex);var x,c=!1,p=!0;switch(w.details){case z.ErrorDetails.FRAG_LOAD_ERROR:case z.ErrorDetails.FRAG_LOAD_TIMEOUT:case z.ErrorDetails.KEY_LOAD_ERROR:case z.ErrorDetails.KEY_LOAD_TIMEOUT:if(w.frag){var T=w.frag.type===N.PlaylistLevelType.MAIN?w.frag.level:this.currentLevelIndex,k=this._levels[T];k?(k.fragmentError++,k.fragmentError>this.hls.config.fragLoadingMaxRetry&&(x=T)):x=T}break;case z.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var H=d.attrs["HDCP-LEVEL"];H&&(this.hls.maxHdcpLevel=W.HdcpLevels[W.HdcpLevels.indexOf(H)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case z.ErrorDetails.FRAG_PARSING_ERROR:case z.ErrorDetails.KEY_SYSTEM_NO_SESSION:x=(null===(E=w.frag)||void 0===E?void 0:E.type)===N.PlaylistLevelType.MAIN?w.frag.level:this.currentLevelIndex,w.levelRetry=!1;break;case z.ErrorDetails.LEVEL_LOAD_ERROR:case z.ErrorDetails.LEVEL_LOAD_TIMEOUT:u&&(u.deliveryDirectives&&(p=!1),x=u.level),c=!0;break;case z.ErrorDetails.REMUX_ALLOC_ERROR:x=null!=(S=w.level)?S:this.currentLevelIndex,c=!0}void 0!==x&&this.recoverLevel(w,x,c,p)}},C.recoverLevel=function(y,w,E,S){var u=y.details,d=this._levels[w];if(d.loadError++,E){if(!this.retryLoadingOrFail(y))return void(this.currentLevelIndex=-1);y.levelRetry=!0}if(S){var p=d.url.length;if(p>1&&d.loadError<p)y.levelRetry=!0,this.redundantFailover(w);else if(-1===this.manualLevelIndex){for(var x=-1,T=this._levels,k=T.length;k--;){var H=(k+this.currentLevelIndex)%T.length;if(H!==this.currentLevelIndex&&0===T[H].loadError){x=H;break}}x>-1&&this.currentLevelIndex!==x?(this.warn(u+": switch to "+x),y.levelRetry=!0,this.hls.nextAutoLevel=x):!1===y.levelRetry&&(y.fatal=!0)}}},C.redundantFailover=function(y){var w=this._levels[y],E=w.url.length;if(E>1){var S=(w.urlId+1)%E;this.warn("Switching to redundant URL-id "+S),this._levels.forEach(function(u){u.urlId=S}),this.level=y}},C.onFragLoaded=function(y,w){var E=w.frag;if(void 0!==E&&E.type===N.PlaylistLevelType.MAIN){var S=this._levels[E.level];void 0!==S&&(S.fragmentError=0,S.loadError=0)}},C.onLevelLoaded=function(y,w){var E,c,S=w.level,u=w.details,d=this._levels[S];if(!d)return this.warn("Invalid level index "+S),void(null!==(c=w.deliveryDirectives)&&void 0!==c&&c.skip&&(u.deltaUpdateFailed=!0));S===this.currentLevelIndex?(0===d.fragmentError&&(d.loadError=0,this.retryCount=0),this.playlistLoaded(S,w,d.details)):null!==(E=w.deliveryDirectives)&&void 0!==E&&E.skip&&(u.deltaUpdateFailed=!0)},C.onAudioTrackSwitched=function(y,w){var E=this.hls.levels[this.currentLevelIndex];if(E&&E.audioGroupIds){for(var S=-1,u=this.hls.audioTracks[w.id].groupId,d=0;d<E.audioGroupIds.length;d++)if(E.audioGroupIds[d]===u){S=d;break}S!==E.urlId&&(E.urlId=S,this.startLoad())}},C.loadPlaylist=function(y){f.prototype.loadPlaylist.call(this);var w=this.currentLevelIndex,E=this._levels[w];if(this.canLoad&&E&&E.url.length>0){var S=E.urlId,u=E.url[S];if(y)try{u=y.addDirectives(u)}catch(d){this.warn("Could not construct new URL with HLS Delivery Directives: "+d)}this.log("Attempt loading level index "+w+(void 0!==y?.msn?" at sn "+y.msn+" part "+y.part:"")+" with URL-id "+S+" "+u),this.clearTimer(),this.hls.trigger(B.Events.LEVEL_LOADING,{url:u,level:w,id:S,deliveryDirectives:y||null})}},C.removeLevel=function(y,w){var E=function(d,c){return c!==w},S=this._levels.filter(function(u,d){return d!==y||u.url.length>1&&void 0!==w&&(u.url=u.url.filter(E),u.audioGroupIds&&(u.audioGroupIds=u.audioGroupIds.filter(E)),u.textGroupIds&&(u.textGroupIds=u.textGroupIds.filter(E)),u.urlId=0,!0)}).map(function(u,d){var c=u.details;return null!=c&&c.fragments&&c.fragments.forEach(function(p){p.level=d}),u});this._levels=S,this.hls.trigger(B.Events.LEVELS_UPDATED,{levels:S})},function P(f,b,C){b&&R(f.prototype,b),C&&R(f,C),Object.defineProperty(f,"prototype",{writable:!1})}(b,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(y){var w,E=this._levels;if(0!==E.length&&(this.currentLevelIndex!==y||null===(w=E[y])||void 0===w||!w.details)){if(y<0||y>=E.length){var S=y<0;if(this.hls.trigger(B.Events.ERROR,{type:z.ErrorTypes.OTHER_ERROR,details:z.ErrorDetails.LEVEL_SWITCH_ERROR,level:y,fatal:S,reason:"invalid level idx"}),S)return;y=Math.min(y,E.length-1)}this.clearTimer();var u=this.currentLevelIndex,d=E[u],c=E[y];this.log("switching to level "+y+" from "+u),this.currentLevelIndex=y;var p=L({},c,{level:y,maxBitrate:c.maxBitrate,uri:c.uri,urlId:c.urlId});delete p._urlId,this.hls.trigger(B.Events.LEVEL_SWITCHING,p);var x=c.details;if(!x||x.live){var T=this.switchParams(c.uri,d?.details);this.loadPlaylist(T)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(y){this.manualLevelIndex=y,void 0===this._startLevel&&(this._startLevel=y),-1!==y&&(this.level=y)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(y){this._firstLevel=y}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var y=this.hls.config.startLevel;return void 0!==y?y:this._firstLevel}return this._startLevel},set:function(y){this._startLevel=y}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(y){this.level=y,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=y)}}]),b}(U.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
                  !*** ./src/controller/level-helper.ts ***!
                  \****************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{addGroupId:()=>Y,addSliding:()=>m,adjustSliding:()=>_,assignTrackIdsByGroup:()=>U,computeReloadInterval:()=>v,getFragmentWithSN:()=>f,getPartWith:()=>b,mapFragmentIntersection:()=>M,mapPartIntersection:()=>I,mergeDetails:()=>P,updateFragPTSDTS:()=>R,updatePTS:()=>N});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),z=O(
/*! ../loader/date-range */
"./src/loader/date-range.ts");function V(){return V=Object.assign?Object.assign.bind():function(C){for(var h=1;h<arguments.length;h++){var y=arguments[h];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(C[w]=y[w])}return C},V.apply(this,arguments)}function Y(C,h,y){switch(h){case"audio":C.audioGroupIds||(C.audioGroupIds=[]),C.audioGroupIds.push(y);break;case"text":C.textGroupIds||(C.textGroupIds=[]),C.textGroupIds.push(y)}}function U(C){var h={};C.forEach(function(y){var w=y.groupId||"";y.id=h[w]=h[w]||0,h[w]++})}function N(C,h,y){L(C[h],C[y])}function L(C,h){var y=h.startPTS;if((0,W.isFiniteNumber)(y)){var E,w=0;h.sn>C.sn?(w=y-C.start,E=C):(w=C.start-y,E=h),E.duration!==w&&(E.duration=w)}else h.start=h.sn>C.sn?C.cc===h.cc&&C.minEndPTS?C.start+(C.minEndPTS-C.start):C.start+C.duration:Math.max(C.start-h.duration,0)}function R(C,h,y,w,E,S){w-y<=0&&(B.logger.warn("Fragment should have a positive duration",h),w=y+h.duration,S=E+h.duration);var d=y,c=w,p=h.startPTS,x=h.endPTS;if((0,W.isFiniteNumber)(p)){var T=Math.abs(p-y);h.deltaPTS=(0,W.isFiniteNumber)(h.deltaPTS)?Math.max(T,h.deltaPTS):T,d=Math.max(y,p),y=Math.min(y,p),E=Math.min(E,h.startDTS),c=Math.min(w,x),w=Math.max(w,x),S=Math.max(S,h.endDTS)}h.duration=w-y;var k=y-h.start;h.start=h.startPTS=y,h.maxStartPTS=d,h.startDTS=E,h.endPTS=w,h.minEndPTS=c,h.endDTS=S;var H=h.sn;if(!C||H<C.startSN||H>C.endSN)return 0;var F,G=H-C.startSN,K=C.fragments;for(K[G]=h,F=G;F>0;F--)L(K[F],K[F-1]);for(F=G;F<K.length-1;F++)L(K[F],K[F+1]);return C.fragmentHint&&L(K[K.length-1],C.fragmentHint),C.PTSKnown=C.alignedSliding=!0,k}function P(C,h){for(var y=null,w=C.fragments,E=w.length-1;E>=0;E--){var S=w[E].initSegment;if(S){y=S;break}}C.fragmentHint&&delete C.fragmentHint.endPTS;var d,u=0;if(M(C,h,function(F,G){F.relurl&&(u=F.cc-G.cc),(0,W.isFiniteNumber)(F.startPTS)&&(0,W.isFiniteNumber)(F.endPTS)&&(G.start=G.startPTS=F.startPTS,G.startDTS=F.startDTS,G.appendedPTS=F.appendedPTS,G.maxStartPTS=F.maxStartPTS,G.endPTS=F.endPTS,G.endDTS=F.endDTS,G.minEndPTS=F.minEndPTS,G.duration=F.endPTS-F.startPTS,G.duration&&(d=G),h.PTSKnown=h.alignedSliding=!0),G.elementaryStreams=F.elementaryStreams,G.loader=F.loader,G.stats=F.stats,G.urlId=F.urlId,F.initSegment&&(G.initSegment=F.initSegment,y=F.initSegment)}),y&&(h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments).forEach(function(F){var G;(!F.initSegment||F.initSegment.relurl===(null===(G=y)||void 0===G?void 0:G.relurl))&&(F.initSegment=y)}),h.skippedSegments)if(h.deltaUpdateFailed=h.fragments.some(function(F){return!F}),h.deltaUpdateFailed){B.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=h.skippedSegments;p--;)h.fragments.shift();h.startSN=h.fragments[0].sn,h.startCC=h.fragments[0].cc}else h.canSkipDateRanges&&(h.dateRanges=function D(C,h,y){var w=V({},C);return y&&y.forEach(function(E){delete w[E]}),Object.keys(h).forEach(function(E){var S=new z.DateRange(h[E].attr,w[E]);S.isValid?w[E]=S:B.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(h[E].attr)+'"')}),w}(C.dateRanges,h.dateRanges,h.recentlyRemovedDateranges));var x=h.fragments;if(u){B.logger.warn("discontinuity sliding from playlist, take drift into account");for(var T=0;T<x.length;T++)x[T].cc+=u}h.skippedSegments&&(h.startCC=h.fragments[0].cc),I(C.partList,h.partList,function(F,G){G.elementaryStreams=F.elementaryStreams,G.stats=F.stats}),d?R(h,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS):_(C,h),x.length&&(h.totalduration=h.edge-x[0].start),h.driftStartTime=C.driftStartTime,h.driftStart=C.driftStart;var k=h.advancedDateTime;if(h.advanced&&k){var H=h.edge;h.driftStart||(h.driftStartTime=k,h.driftStart=H),h.driftEndTime=k,h.driftEnd=H}else h.driftEndTime=C.driftEndTime,h.driftEnd=C.driftEnd,h.advancedDateTime=C.advancedDateTime}function I(C,h,y){if(C&&h)for(var w=0,E=0,S=C.length;E<=S;E++){var u=C[E],d=h[E+w];u&&d&&u.index===d.index&&u.fragment.sn===d.fragment.sn?y(u,d):w--}}function M(C,h,y){for(var w=h.skippedSegments,E=Math.max(C.startSN,h.startSN)-h.startSN,S=(C.fragmentHint?1:0)+(w?h.endSN:Math.min(C.endSN,h.endSN))-h.startSN,u=h.startSN-C.startSN,d=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments,c=C.fragmentHint?C.fragments.concat(C.fragmentHint):C.fragments,p=E;p<=S;p++){var x=c[u+p],T=d[p];w&&!T&&p<w&&(T=h.fragments[p]=x),x&&T&&y(x,T)}}function _(C,h){var y=h.startSN+h.skippedSegments-C.startSN,w=C.fragments;y<0||y>=w.length||m(h,w[y].start)}function m(C,h){if(h){for(var y=C.fragments,w=C.skippedSegments;w<y.length;w++)y[w].start+=h;C.fragmentHint&&(C.fragmentHint.start+=h)}}function v(C,h){void 0===h&&(h=1/0);var y=1e3*C.targetduration;if(C.updated){var w=C.fragments;if(w.length&&4*y>h){var S=1e3*w[w.length-1].duration;S<y&&(y=S)}}else y/=2;return Math.round(y)}function f(C,h,y){if(!C||!C.details)return null;var w=C.details,E=w.fragments[h-w.startSN];return E||(E=w.fragmentHint)&&E.sn===h?E:h<w.startSN&&y&&y.sn===h?y:null}function b(C,h,y){if(!C||!C.details)return null;var w=C.details.partList;if(w)for(var E=w.length;E--;){var S=w[E];if(S.index===y&&S.fragment.sn===h)return S}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
                  !*** ./src/controller/stream-controller.ts ***!
                  \*********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>h});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),z=O(
/*! ../is-supported */
"./src/is-supported.ts"),V=O(
/*! ../events */
"./src/events.ts"),Y=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),U=O(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),N=O(
/*! ../types/loader */
"./src/types/loader.ts"),L=O(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),R=O(
/*! ../demux/transmuxer-interface */
"./src/demux/transmuxer-interface.ts"),P=O(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),D=O(
/*! ./gap-controller */
"./src/controller/gap-controller.ts"),I=O(
/*! ../errors */
"./src/errors.ts");function M(y,w){for(var E=0;E<w.length;E++){var S=w[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,m(S.key),S)}}function m(y){var w=function v(y,w){if("object"!=typeof y||null===y)return y;var E=y[Symbol.toPrimitive];if(void 0!==E){var S=E.call(y,w||"default");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(y)}(y,"string");return"symbol"==typeof w?w:String(w)}function b(y,w){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,u){return S.__proto__=u,S})(y,w)}var h=function(y){function w(S,u,d){var c;return(c=y.call(this,S,u,d,"[stream-controller]")||this).audioCodecSwap=!1,c.gapController=null,c.level=-1,c._forceStartLoad=!1,c.altAudio=!1,c.audioOnly=!1,c.fragPlaying=null,c.onvplaying=null,c.onvseeked=null,c.fragLastKbps=0,c.couldBacktrack=!1,c.backtrackFragment=null,c.audioCodecSwitch=!1,c.videoBuffer=null,c._registerListeners(),c}!function f(y,w){y.prototype=Object.create(w.prototype),y.prototype.constructor=y,b(y,w)}(w,y);var E=w.prototype;return E._registerListeners=function(){var u=this.hls;u.on(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(V.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(V.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.on(V.Events.ERROR,this.onError,this),u.on(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(V.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.on(V.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(V.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.on(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var u=this.hls;u.off(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(V.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.off(V.Events.ERROR,this.onError,this),u.off(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(V.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.off(V.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(V.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.off(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},E.startLoad=function(u){if(this.levels){var d=this.lastCurrentTime,c=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var p=c.startLevel;-1===p&&(c.config.testBandwidth&&this.levels.length>1?(p=0,this.bitrateTest=!0):p=c.nextAutoLevel),this.level=c.nextLoadLevel=p,this.loadedmetadata=!1}d>0&&-1===u&&(this.log("Override startPosition with lastCurrentTime @"+d.toFixed(3)),u=d),this.state=B.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()}else this._forceStartLoad=!0,this.state=B.State.STOPPED},E.stopLoad=function(){this._forceStartLoad=!1,y.prototype.stopLoad.call(this)},E.doTick=function(){switch(this.state){case B.State.IDLE:this.doTickIdle();break;case B.State.WAITING_LEVEL:var u,d=this.levels,p=null==d||null===(u=d[this.level])||void 0===u?void 0:u.details;if(p&&(!p.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(p))break;this.state=B.State.IDLE;break}break;case B.State.FRAG_LOADING_WAITING_RETRY:var x,T=self.performance.now(),k=this.retryDate;(!k||T>=k||null!==(x=this.media)&&void 0!==x&&x.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=B.State.IDLE)}this.onTickEnd()},E.onTickEnd=function(){y.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},E.doTickIdle=function(){var u=this.hls,c=this.levels,T=u.nextLoadLevel;if(null!==this.levelLastLoaded&&(this.media||!this.startFragRequested&&u.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&c&&c[T]){var k=c[T],H=this.getMainFwdBufferInfo();if(null!==H){var F=this.getLevelDetails();if(F&&this._streamEnded(H,F)){var G={};return this.altAudio&&(G.type="video"),this.hls.trigger(V.Events.BUFFER_EOS,G),void(this.state=B.State.ENDED)}this.level=u.nextLoadLevel=T;var K=k.details;if(!K||this.state===B.State.WAITING_LEVEL||K.live&&this.levelLastLoaded!==T)return this.level=T,void(this.state=B.State.WAITING_LEVEL);if(!(H.len>=this.getMaxBufferLength(k.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>H.end&&(this.backtrackFragment=null);var te=this.backtrackFragment?this.backtrackFragment.start:H.end,Q=this.getNextFragment(te,K);if(this.couldBacktrack&&!this.fragPrevious&&Q&&"initSegment"!==Q.sn&&this.fragmentTracker.getState(Q)!==U.FragmentState.OK){var re,se=(null!=(re=this.backtrackFragment)?re:Q).sn,ue=K.fragments[se-K.startSN-1];ue&&Q.cc===ue.cc&&(Q=ue,this.fragmentTracker.removeFragment(ue))}else this.backtrackFragment&&H.len&&(this.backtrackFragment=null);if(Q&&this.fragmentTracker.getState(Q)===U.FragmentState.OK&&this.nextLoadPosition>te){var he=this.audioOnly&&!this.altAudio?L.ElementaryStreamTypes.AUDIO:L.ElementaryStreamTypes.VIDEO,be=(he===L.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;be&&this.afterBufferFlushed(be,he,N.PlaylistLevelType.MAIN),Q=this.getNextFragment(this.nextLoadPosition,K)}Q&&(Q.initSegment&&!Q.initSegment.data&&!this.bitrateTest&&(Q=Q.initSegment),this.loadFragment(Q,K,te))}}}},E.loadFragment=function(u,d,c){var p,x=this.fragmentTracker.getState(u);this.fragCurrent=u,x===U.FragmentState.NOT_LOADED?"initSegment"===u.sn?this._loadInitSegment(u,d):this.bitrateTest?(this.log("Fragment "+u.sn+" of level "+u.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(u,d)):(this.startFragRequested=!0,y.prototype.loadFragment.call(this,u,d,c)):x===U.FragmentState.APPENDING?this.reduceMaxBufferLength(u.duration)&&this.fragmentTracker.removeFragment(u):0===(null===(p=this.media)||void 0===p?void 0:p.buffered.length)&&this.fragmentTracker.removeAllFragments()},E.getAppendedFrag=function(u){var d=this.fragmentTracker.getAppendedFrag(u,N.PlaylistLevelType.MAIN);return d&&"fragment"in d?d.fragment:d},E.getBufferedFrag=function(u){return this.fragmentTracker.getBufferedFrag(u,N.PlaylistLevelType.MAIN)},E.followingBufferedFrag=function(u){return u?this.getBufferedFrag(u.end+.5):null},E.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},E.nextLevelSwitch=function(){var u=this.levels,d=this.media;if(null!=d&&d.readyState){var c,p=this.getAppendedFrag(d.currentTime);if(p&&p.start>1&&this.flushMainBuffer(0,p.start-1),!d.paused&&u){var k=this.fragLastKbps;c=k&&this.fragCurrent?this.fragCurrent.duration*u[this.hls.nextLoadLevel].maxBitrate/(1e3*k)+1:0}else c=0;var H=this.getBufferedFrag(d.currentTime+c);if(H){var F=this.followingBufferedFrag(H);if(F){this.abortCurrentFrag();var K=F.duration,$=Math.max(H.end,(F.maxStartPTS?F.maxStartPTS:F.start)+Math.min(Math.max(K-this.config.maxFragLookUpTolerance,.5*K),.75*K));this.flushMainBuffer($,Number.POSITIVE_INFINITY)}}}},E.abortCurrentFrag=function(){var u=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,u&&u.abortRequests(),this.state){case B.State.KEY_LOADING:case B.State.FRAG_LOADING:case B.State.FRAG_LOADING_WAITING_RETRY:case B.State.PARSING:case B.State.PARSED:this.state=B.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},E.flushMainBuffer=function(u,d){y.prototype.flushMainBuffer.call(this,u,d,this.altAudio?"video":null)},E.onMediaAttached=function(u,d){y.prototype.onMediaAttached.call(this,u,d);var c=d.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),c.addEventListener("playing",this.onvplaying),c.addEventListener("seeked",this.onvseeked),this.gapController=new D.default(this.config,c,this.fragmentTracker,this.hls)},E.onMediaDetaching=function(){var u=this.media;u&&this.onvplaying&&this.onvseeked&&(u.removeEventListener("playing",this.onvplaying),u.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),y.prototype.onMediaDetaching.call(this)},E.onMediaPlaying=function(){this.tick()},E.onMediaSeeked=function(){var u=this.media,d=u?u.currentTime:null;(0,W.isFiniteNumber)(d)&&this.log("Media seeked to "+d.toFixed(3)),this.tick()},E.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(V.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},E.onManifestParsed=function(u,d){var x,c=!1,p=!1;d.levels.forEach(function(T){(x=T.audioCodec)&&(-1!==x.indexOf("mp4a.40.2")&&(c=!0),-1!==x.indexOf("mp4a.40.5")&&(p=!0))}),this.audioCodecSwitch=c&&p&&!(0,z.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=d.levels,this.startFragRequested=!1},E.onLevelLoading=function(u,d){var c=this.levels;if(c&&this.state===B.State.IDLE){var p=c[d.level];(!p.details||p.details.live&&this.levelLastLoaded!==d.level||this.waitForCdnTuneIn(p.details))&&(this.state=B.State.WAITING_LEVEL)}},E.onLevelLoaded=function(u,d){var c,p=this.levels,x=d.level,T=d.details;if(p){this.log("Level "+x+" loaded ["+T.startSN+","+T.endSN+"], cc ["+T.startCC+", "+T.endCC+"] duration:"+T.totalduration);var H=this.fragCurrent;H&&(this.state===B.State.FRAG_LOADING||this.state===B.State.FRAG_LOADING_WAITING_RETRY)&&H.level!==d.level&&H.loader&&(this.state=B.State.IDLE,this.backtrackFragment=null,H.abortRequests());var F=p[x],G=0;if(T.live||null!==(c=F.details)&&void 0!==c&&c.live){if(T.fragments[0]||(T.deltaUpdateFailed=!0),T.deltaUpdateFailed)return;G=this.alignPlaylists(T,F.details)}if(F.details=T,this.levelLastLoaded=x,this.hls.trigger(V.Events.LEVEL_UPDATED,{details:T,level:x}),this.state===B.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(T))return;this.state=B.State.IDLE}this.startFragRequested?T.live&&this.synchronizeToLiveEdge(T):this.setStartPosition(T,G),this.tick()}else this.warn("Levels were reset while loading level "+x)},E._handleFragmentLoadProgress=function(u){var d,c=u.frag,p=u.part,x=u.payload,T=this.levels;if(T){var k=T[c.level],H=k.details;if(H){var F=k.videoCodec,G=H.PTSKnown||!H.live,K=null===(d=c.initSegment)||void 0===d?void 0:d.data,$=this._getAudioCodec(k),Z=this.transmuxer=this.transmuxer||new R.default(this.hls,N.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),te=p?p.index:-1,re=new P.ChunkMetadata(c.level,c.sn,c.stats.chunkCount,x.byteLength,te,-1!==te);Z.push(x,K,$,F,c,p,H.totalduration,G,re,this.initPTS[c.cc])}else this.warn("Dropping fragment "+c.sn+" of level "+c.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+c.sn+" of level "+c.level+" will not be buffered")},E.onAudioTrackSwitching=function(u,d){var c=this.altAudio,x=d.id;if(!d.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var T=this.fragCurrent;T&&(this.log("Switching to main audio track, cancel main fragment load"),T.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var k=this.hls;c&&k.trigger(V.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),k.trigger(V.Events.AUDIO_TRACK_SWITCHED,{id:x})}},E.onAudioTrackSwitched=function(u,d){var p=!!this.hls.audioTracks[d.id].url;if(p){var x=this.videoBuffer;x&&this.mediaBuffer!==x&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=x)}this.altAudio=p,this.tick()},E.onBufferCreated=function(u,d){var p,x,c=d.tracks,T=!1;for(var k in c){var H=c[k];if("main"===H.id){if(x=k,p=H,"video"===k){var F=c[k];F&&(this.videoBuffer=F.buffer)}}else T=!0}T&&p?(this.log("Alternate track found, use "+x+".buffered to schedule main fragment loading"),this.mediaBuffer=p.buffer):this.mediaBuffer=this.media},E.onFragBuffered=function(u,d){var c=d.frag,p=d.part;if(!c||c.type===N.PlaylistLevelType.MAIN){if(this.fragContextChanged(c))return this.warn("Fragment "+c.sn+(p?" p: "+p.index:"")+" of level "+c.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===B.State.PARSED&&(this.state=B.State.IDLE));var x=p?p.stats:c.stats;this.fragLastKbps=Math.round(8*x.total/(x.buffering.end-x.loading.first)),"initSegment"!==c.sn&&(this.fragPrevious=c),this.fragBufferedComplete(c,p)}},E.onError=function(u,d){if(d.type!==I.ErrorTypes.KEY_SYSTEM_ERROR)switch(d.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:case I.ErrorDetails.FRAG_PARSING_ERROR:case I.ErrorDetails.KEY_LOAD_ERROR:case I.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(N.PlaylistLevelType.MAIN,d);break;case I.ErrorDetails.LEVEL_LOAD_ERROR:case I.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==B.State.ERROR&&(d.fatal?(this.warn(""+d.details),this.state=B.State.ERROR):!d.levelRetry&&this.state===B.State.WAITING_LEVEL&&(this.state=B.State.IDLE));break;case I.ErrorDetails.BUFFER_FULL_ERROR:if("main"===d.parent&&(this.state===B.State.PARSING||this.state===B.State.PARSED)){var c=!0,p=this.getFwdBufferInfo(this.media,N.PlaylistLevelType.MAIN);p&&p.len>.5&&(c=!this.reduceMaxBufferLength(p.len)),c&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(N.PlaylistLevelType.MAIN,d)},E.checkBuffer=function(){var u=this.media,d=this.gapController;u&&d&&u.readyState&&(!this.loadedmetadata&&Y.BufferHelper.getBuffered(u).length||d.poll(this.lastCurrentTime,this.state!==B.State.IDLE?this.fragCurrent:null),this.lastCurrentTime=u.currentTime)},E.onFragLoadEmergencyAborted=function(){this.state=B.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},E.onBufferFlushed=function(u,d){var c=d.type;(c!==L.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((c===L.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,c,N.PlaylistLevelType.MAIN)},E.onLevelsUpdated=function(u,d){this.levels=d.levels},E.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},E.seekToStartPos=function(){var u=this.media;if(u){var d=u.currentTime,c=this.startPosition;if(c>=0&&d<c){if(u.seeking)return void this.log("could not seek to "+c+", already seeking at "+d);var p=Y.BufferHelper.getBuffered(u),T=(p.length?p.start(0):0)-c;T>0&&(T<this.config.maxBufferHole||T<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+T+" to match buffer start"),this.startPosition=c+=T),this.log("seek to target start position "+c+" from current time "+d),u.currentTime=c}}},E._getAudioCodec=function(u){var d=this.config.defaultAudioCodec||u.audioCodec;return this.audioCodecSwap&&d&&(this.log("Swapping audio codec"),d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),d},E._loadBitrateTestFrag=function(u,d){var c=this;u.bitrateTest=!0,this._doFragLoad(u,d).then(function(p){var x=c.hls;if(p&&!c.fragContextChanged(u)){c.fragLoadError=0,c.state=B.State.IDLE,c.startFragRequested=!1,c.bitrateTest=!1;var T=u.stats;T.parsing.start=T.parsing.end=T.buffering.start=T.buffering.end=self.performance.now(),x.trigger(V.Events.FRAG_LOADED,p),u.bitrateTest=!1}})},E._handleTransmuxComplete=function(u){var d,c="main",p=this.hls,x=u.remuxResult,T=u.chunkMeta,k=this.getCurrentContext(T);if(!k)return this.warn("The loading context changed while buffering fragment "+T.sn+" of level "+T.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(T.level);var H=k.frag,F=k.part,G=k.level,K=x.video,$=x.text,Z=x.id3,te=x.initSegment,Q=G.details,re=this.altAudio?void 0:x.audio;if(!this.fragContextChanged(H)){if(this.state=B.State.PARSING,te){te.tracks&&(this._bufferInitSegment(G,te.tracks,H,T),p.trigger(V.Events.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:c,tracks:te.tracks}));var se=te.initPTS,ce=te.timescale;(0,W.isFiniteNumber)(se)&&(this.initPTS[H.cc]=se,p.trigger(V.Events.INIT_PTS_FOUND,{frag:H,id:c,initPTS:se,timescale:ce}))}if(K&&!1!==x.independent){if(Q){var ue=K.startPTS,he=K.endPTS,be=K.startDTS,Re=K.endDTS;if(F)F.elementaryStreams[K.type]={startPTS:ue,endPTS:he,startDTS:be,endDTS:Re};else if(K.firstKeyFrame&&K.independent&&1===T.id&&(this.couldBacktrack=!0),K.dropped&&K.independent){var Se=this.getMainFwdBufferInfo();if((Se?Se.end:this.getLoadPosition())+this.config.maxBufferHole<(K.firstKeyFramePTS?K.firstKeyFramePTS:ue)-this.config.maxBufferHole)return void this.backtrack(H);H.setElementaryStreamInfo(K.type,H.start,he,H.start,Re,!0)}H.setElementaryStreamInfo(K.type,ue,he,be,Re),this.backtrackFragment&&(this.backtrackFragment=H),this.bufferFragmentData(K,H,F,T)}}else if(!1===x.independent)return void this.backtrack(H);if(re){var it=re.startPTS,ct=re.endPTS,Nt=re.startDTS,St=re.endDTS;F&&(F.elementaryStreams[L.ElementaryStreamTypes.AUDIO]={startPTS:it,endPTS:ct,startDTS:Nt,endDTS:St}),H.setElementaryStreamInfo(L.ElementaryStreamTypes.AUDIO,it,ct,Nt,St),this.bufferFragmentData(re,H,F,T)}Q&&null!=Z&&null!==(d=Z.samples)&&void 0!==d&&d.length&&p.trigger(V.Events.FRAG_PARSING_METADATA,{id:c,frag:H,details:Q,samples:Z.samples}),Q&&$&&p.trigger(V.Events.FRAG_PARSING_USERDATA,{id:c,frag:H,details:Q,samples:$.samples})}},E._bufferInitSegment=function(u,d,c,p){var x=this;if(this.state===B.State.PARSING){this.audioOnly=!!d.audio&&!d.video,this.altAudio&&!this.audioOnly&&delete d.audio;var T=d.audio,k=d.video,H=d.audiovideo;if(T){var F=u.audioCodec,G=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(F&&(F=-1!==F.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==T.metadata.channelCount&&-1===G.indexOf("firefox")&&(F="mp4a.40.5")),-1!==G.indexOf("android")&&"audio/mpeg"!==T.container&&this.log("Android: force audio codec to "+(F="mp4a.40.2")),u.audioCodec&&u.audioCodec!==F&&this.log('Swapping manifest audio codec "'+u.audioCodec+'" for "'+F+'"'),T.levelCodec=F,T.id="main",this.log("Init audio buffer, container:"+T.container+", codecs[selected/level/parsed]=["+(F||"")+"/"+(u.audioCodec||"")+"/"+T.codec+"]")}k&&(k.levelCodec=u.videoCodec,k.id="main",this.log("Init video buffer, container:"+k.container+", codecs[level/parsed]=["+(u.videoCodec||"")+"/"+k.codec+"]")),H&&this.log("Init audiovideo buffer, container:"+H.container+", codecs[level/parsed]=["+(u.attrs.CODECS||"")+"/"+H.codec+"]"),this.hls.trigger(V.Events.BUFFER_CODECS,d),Object.keys(d).forEach(function(K){var Z=d[K].initSegment;null!=Z&&Z.byteLength&&x.hls.trigger(V.Events.BUFFER_APPENDING,{type:K,data:Z,frag:c,part:null,chunkMeta:p,parent:c.type})}),this.tick()}},E.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,N.PlaylistLevelType.MAIN)},E.backtrack=function(u){this.couldBacktrack=!0,this.backtrackFragment=u,this.resetTransmuxer(),this.flushBufferGap(u),this.fragmentTracker.removeFragment(u),this.fragPrevious=null,this.nextLoadPosition=u.start,this.state=B.State.IDLE},E.checkFragmentChanged=function(){var u=this.media,d=null;if(u&&u.readyState>1&&!1===u.seeking){var c=u.currentTime;if(Y.BufferHelper.isBuffered(u,c)?d=this.getAppendedFrag(c):Y.BufferHelper.isBuffered(u,c+.1)&&(d=this.getAppendedFrag(c+.1)),d){this.backtrackFragment=null;var p=this.fragPlaying,x=d.level;(!p||d.sn!==p.sn||p.level!==x||d.urlId!==p.urlId)&&(this.fragPlaying=d,this.hls.trigger(V.Events.FRAG_CHANGED,{frag:d}),(!p||p.level!==x)&&this.hls.trigger(V.Events.LEVEL_SWITCHED,{level:x}))}}},function _(y,w,E){w&&M(y.prototype,w),E&&M(y,E),Object.defineProperty(y,"prototype",{writable:!1})}(w,[{key:"nextLevel",get:function(){var u=this.nextBufferedFrag;return u?u.level:-1}},{key:"currentFrag",get:function(){var u=this.media;return u?this.fragPlaying||this.getAppendedFrag(u.currentTime):null}},{key:"currentProgramDateTime",get:function(){var u=this.media;if(u){var d=u.currentTime,c=this.currentFrag;if(c&&(0,W.isFiniteNumber)(d)&&(0,W.isFiniteNumber)(c.programDateTime))return new Date(c.programDateTime+1e3*(d-c.start))}return null}},{key:"currentLevel",get:function(){var u=this.currentFrag;return u?u.level:-1}},{key:"nextBufferedFrag",get:function(){var u=this.currentFrag;return u?this.followingBufferedFrag(u):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),w}(B.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
                  !*** ./src/controller/subtitle-stream-controller.ts ***!
                  \******************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{SubtitleStreamController:()=>f});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),z=O(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),V=O(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),Y=O(
/*! ./level-helper */
"./src/controller/level-helper.ts"),U=O(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),N=O(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),L=O(
/*! ../types/loader */
"./src/types/loader.ts"),R=O(
/*! ../types/level */
"./src/types/level.ts");function P(C,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(C,I(w.key),w)}}function I(C){var h=function M(C,h){if("object"!=typeof C||null===C)return C;var y=C[Symbol.toPrimitive];if(void 0!==y){var w=y.call(C,h||"default");if("object"!=typeof w)return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(C)}(C,"string");return"symbol"==typeof h?h:String(h)}function m(C,h){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w})(C,h)}var f=function(C){function h(w,E,S){var u;return(u=C.call(this,w,E,S,"[subtitle-stream-controller]")||this).levels=[],u.currentTrackId=-1,u.tracksBuffered=[],u.mainDetails=null,u._registerListeners(),u}!function _(C,h){C.prototype=Object.create(h.prototype),C.prototype.constructor=C,m(C,h)}(h,C);var y=h.prototype;return y.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},y._registerListeners=function(){var E=this.hls;E.on(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.on(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.on(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.on(W.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.on(W.Events.ERROR,this.onError,this),E.on(W.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),E.on(W.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),E.on(W.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),E.on(W.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),E.on(W.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),E.on(W.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y._unregisterListeners=function(){var E=this.hls;E.off(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.off(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.off(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.off(W.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.off(W.Events.ERROR,this.onError,this),E.off(W.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),E.off(W.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),E.off(W.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),E.off(W.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),E.off(W.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),E.off(W.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y.startLoad=function(E){this.stopLoad(),this.state=N.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=E,this.tick()},y.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},y.onLevelLoaded=function(E,S){this.mainDetails=S.details},y.onSubtitleFragProcessed=function(E,S){var u=S.frag,d=S.success;if(this.fragPrevious=u,this.state=N.State.IDLE,d){var c=this.tracksBuffered[this.currentTrackId];if(c){for(var p,x=u.start,T=0;T<c.length;T++)if(x>=c[T].start&&x<=c[T].end){p=c[T];break}var k=u.start+u.duration;p?p.end=k:c.push(p={start:x,end:k}),this.fragmentTracker.fragBuffered(u)}}},y.onBufferFlushing=function(E,S){var u=S.startOffset,d=S.endOffset;if(0===u&&d!==Number.POSITIVE_INFINITY){var c=this.currentTrackId,p=this.levels;if(!p.length||!p[c]||!p[c].details)return;var k=d-p[c].details.targetduration;if(k<=0)return;S.endOffsetSubtitles=Math.max(0,k),this.tracksBuffered.forEach(function(H){for(var F=0;F<H.length;)if(H[F].end<=k)H.shift();else{if(!(H[F].start<k))break;H[F].start=k,F++}}),this.fragmentTracker.removeFragmentsInRange(u,k,L.PlaylistLevelType.SUBTITLE)}},y.onFragBuffered=function(E,S){var u;this.loadedmetadata||S.frag.type!==L.PlaylistLevelType.MAIN||null!==(u=this.media)&&void 0!==u&&u.buffered.length&&(this.loadedmetadata=!0)},y.onError=function(E,S){var u=S.frag;!u||u.type!==L.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=N.State.IDLE)},y.onSubtitleTracksUpdated=function(E,S){var u=this,d=S.subtitleTracks;this.tracksBuffered=[],this.levels=d.map(function(c){return new R.Level(c)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(c){u.tracksBuffered[c.id]=[]}),this.mediaBuffer=null},y.onSubtitleTrackSwitch=function(E,S){if(this.currentTrackId=S.id,this.levels.length&&-1!==this.currentTrackId){var u=this.levels[this.currentTrackId];this.mediaBuffer=null!=u&&u.details?this.mediaBufferTimeRanges:null,u&&this.setInterval(500)}else this.clearInterval()},y.onSubtitleTrackLoaded=function(E,S){var u,d=S.details,c=S.id,p=this.currentTrackId,x=this.levels;if(x.length){var T=x[p];if(!(c>=x.length||c!==p)&&T){this.mediaBuffer=this.mediaBufferTimeRanges;var k=0;if(d.live||null!==(u=T.details)&&void 0!==u&&u.live){var H=this.mainDetails;if(d.deltaUpdateFailed||!H)return;var F=H.fragments[0];T.details?0===(k=this.alignPlaylists(d,T.details))&&F&&(0,Y.addSliding)(d,k=F.start):d.hasProgramDateTime&&H.hasProgramDateTime?((0,V.alignMediaPlaylistByPDT)(d,H),k=d.fragments[0].start):F&&(0,Y.addSliding)(d,k=F.start)}T.details=d,this.levelLastLoaded=c,!this.startFragRequested&&(this.mainDetails||!d.live)&&this.setStartPosition(T.details,k),this.tick(),d.live&&!this.fragCurrent&&this.media&&this.state===N.State.IDLE&&((0,z.findFragmentByPTS)(null,d.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),T.details=void 0))}}},y._handleFragmentLoadComplete=function(E){var S=this,u=E.frag,d=E.payload,c=u.decryptdata,p=this.hls;if(!this.fragContextChanged(u)&&d&&d.byteLength>0&&c&&c.key&&c.iv&&"AES-128"===c.method){var x=performance.now();this.decrypter.decrypt(new Uint8Array(d),c.key.buffer,c.iv.buffer).then(function(T){var k=performance.now();p.trigger(W.Events.FRAG_DECRYPTED,{frag:u,payload:T,stats:{tstart:x,tdecrypt:k}})}).catch(function(T){S.warn(T.name+": "+T.message),S.state=N.State.IDLE})}},y.doTick=function(){if(this.media){if(this.state===N.State.IDLE){var E=this.currentTrackId,S=this.levels;if(!S.length||!S[E]||!S[E].details)return;var u=S[E].details,d=u.targetduration,c=this.config,p=this.getLoadPosition(),x=B.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],p-d,c.maxBufferHole),T=x.end,k=x.len,H=this.getFwdBufferInfo(this.media,L.PlaylistLevelType.MAIN);if(k>this.getMaxBufferLength(H?.len)+d)return;console.assert(u,"Subtitle track details are defined on idle subtitle stream controller tick");var G=u.fragments,K=G.length,Z=null,te=this.fragPrevious;if(T<u.edge){var Q=c.maxFragLookUpTolerance;!(Z=(0,z.findFragmentByPTS)(te,G,Math.max(G[0].start,T),Q))&&te&&te.start<G[0].start&&(Z=G[0])}else Z=G[K-1];if(!Z)return;Z=this.mapToInitFragWhenRequired(Z),this.fragmentTracker.getState(Z)===U.FragmentState.NOT_LOADED&&this.loadFragment(Z,u,T)}}else this.state=N.State.IDLE},y.getMaxBufferLength=function(E){var S=C.prototype.getMaxBufferLength.call(this);return E?Math.max(S,E):S},y.loadFragment=function(E,S,u){this.fragCurrent=E,"initSegment"===E.sn?this._loadInitSegment(E,S):(this.startFragRequested=!0,C.prototype.loadFragment.call(this,E,S,u))},function D(C,h,y){h&&P(C.prototype,h),y&&P(C,y),Object.defineProperty(C,"prototype",{writable:!1})}(h,[{key:"mediaBufferTimeRanges",get:function(){return new b(this.tracksBuffered[this.currentTrackId]||[])}}]),h}(N.default),b=function(h){this.buffered=void 0;var y=function(E,S,u){if((S>>>=0)>u-1)throw new DOMException("Failed to execute '"+E+"' on 'TimeRanges': The index provided ("+S+") is greater than the maximum bound ("+u+")");return h[S][E]};this.buffered={get length(){return h.length},end:function(E){return y("end",E,h.length)},start:function(E){return y("start",E,h.length)}}}},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
                  !*** ./src/controller/subtitle-track-controller.ts ***!
                  \*****************************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>M});var W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),z=O(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),V=O(
/*! ../types/loader */
"./src/types/loader.ts");function Y(_,m){for(var v=0;v<m.length;v++){var f=m[v];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(_,N(f.key),f)}}function N(_){var m=function L(_,m){if("object"!=typeof _||null===_)return _;var v=_[Symbol.toPrimitive];if(void 0!==v){var f=v.call(_,m||"default");if("object"!=typeof f)return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===m?String:Number)(_)}(_,"string");return"symbol"==typeof m?m:String(m)}function P(_,m){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,b){return f.__proto__=b,f})(_,m)}function I(_){for(var m=[],v=0;v<_.length;v++){var f=_[v];"subtitles"===f.kind&&f.label&&m.push(_[v])}return m}const M=function(_){function m(f){var b;return(b=_.call(this,f,"[subtitle-track-controller]")||this).media=null,b.tracks=[],b.groupId=null,b.tracksInGroup=[],b.trackId=-1,b.selectDefaultTrack=!0,b.queuedDefaultTrack=-1,b.trackChangeListener=function(){return b.onTextTracksChanged()},b.asyncPollTrackChange=function(){return b.pollTrackChange(0)},b.useTextTrackPolling=!1,b.subtitlePollingInterval=-1,b._subtitleDisplay=!0,b.registerListeners(),b}!function R(_,m){_.prototype=Object.create(m.prototype),_.prototype.constructor=_,P(_,m)}(m,_);var v=m.prototype;return v.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,_.prototype.destroy.call(this)},v.registerListeners=function(){var b=this.hls;b.on(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),b.on(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.on(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.on(W.Events.MANIFEST_PARSED,this.onManifestParsed,this),b.on(W.Events.LEVEL_LOADING,this.onLevelLoading,this),b.on(W.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),b.on(W.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),b.on(W.Events.ERROR,this.onError,this)},v.unregisterListeners=function(){var b=this.hls;b.off(W.Events.MEDIA_ATTACHED,this.onMediaAttached,this),b.off(W.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.off(W.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.off(W.Events.MANIFEST_PARSED,this.onManifestParsed,this),b.off(W.Events.LEVEL_LOADING,this.onLevelLoading,this),b.off(W.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),b.off(W.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),b.off(W.Events.ERROR,this.onError,this)},v.onMediaAttached=function(b,C){this.media=C.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},v.pollTrackChange=function(b){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,b)},v.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),I(this.media.textTracks).forEach(function(C){(0,B.clearCurrentCues)(C)}),this.subtitleTrack=-1,this.media=null)},v.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},v.onManifestParsed=function(b,C){this.tracks=C.subtitleTracks},v.onSubtitleTrackLoaded=function(b,C){var h=C.id,y=C.details,E=this.tracksInGroup[this.trackId];if(E){var S=E.details;E.details=C.details,this.log("subtitle track "+h+" loaded ["+y.startSN+"-"+y.endSN+"]"),h===this.trackId&&(this.retryCount=0,this.playlistLoaded(h,C,S))}else this.warn("Invalid subtitle track id "+h)},v.onLevelLoading=function(b,C){this.switchLevel(C.level)},v.onLevelSwitching=function(b,C){this.switchLevel(C.level)},v.switchLevel=function(b){var C=this.hls.levels[b];if(null!=C&&C.textGroupIds){var h=C.textGroupIds[C.urlId];if(this.groupId!==h){var y=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,w=this.tracks.filter(function(u){return!h||u.groupId===h});this.tracksInGroup=w;var E=this.findTrackId(y?.name)||this.findTrackId();this.groupId=h;var S={subtitleTracks:w};this.log("Updating subtitle tracks, "+w.length+' track(s) found in "'+h+'" group-id'),this.hls.trigger(W.Events.SUBTITLE_TRACKS_UPDATED,S),-1!==E&&this.setSubtitleTrack(E,y)}}},v.findTrackId=function(b){for(var C=this.tracksInGroup,h=0;h<C.length;h++){var y=C[h];if((!this.selectDefaultTrack||y.default)&&(!b||b===y.name))return y.id}return-1},v.onError=function(b,C){_.prototype.onError.call(this,b,C),!C.fatal&&C.context&&C.context.type===V.PlaylistContextType.SUBTITLE_TRACK&&C.context.id===this.trackId&&C.context.groupId===this.groupId&&this.retryLoadingOrFail(C)},v.loadPlaylist=function(b){_.prototype.loadPlaylist.call(this);var C=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(C)){var h=C.id,y=C.groupId,w=C.url;if(b)try{w=b.addDirectives(w)}catch(E){this.warn("Could not construct new URL with HLS Delivery Directives: "+E)}this.log("Loading subtitle playlist for id "+h),this.hls.trigger(W.Events.SUBTITLE_TRACK_LOADING,{url:w,id:h,groupId:y,deliveryDirectives:b||null})}},v.toggleTrackModes=function(b){var C=this,h=this.media,y=this.trackId;if(h){var w=I(h.textTracks),E=w.filter(function(d){return d.groupId===C.groupId});if(-1===b)[].slice.call(w).forEach(function(d){d.mode="disabled"});else{var S=E[y];S&&(S.mode="disabled")}var u=E[b];u&&(u.mode=this.subtitleDisplay?"showing":"hidden")}},v.setSubtitleTrack=function(b,C){var h,y=this.tracksInGroup;if(this.media){if(this.trackId!==b&&this.toggleTrackModes(b),!(this.trackId===b&&(-1===b||null!==(h=y[b])&&void 0!==h&&h.details)||b<-1||b>=y.length)){this.clearTimer();var w=y[b];if(this.log("Switching to subtitle track "+b),this.trackId=b,w){var S=w.groupId;this.hls.trigger(W.Events.SUBTITLE_TRACK_SWITCH,{id:w.id,groupId:void 0===S?"":S,name:w.name,type:w.type,url:w.url});var x=this.switchParams(w.url,C?.details);this.loadPlaylist(x)}else this.hls.trigger(W.Events.SUBTITLE_TRACK_SWITCH,{id:b})}}else this.queuedDefaultTrack=b},v.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var b=-1,C=I(this.media.textTracks),h=0;h<C.length;h++)if("hidden"===C[h].mode)b=h;else if("showing"===C[h].mode){b=h;break}this.subtitleTrack!==b&&(this.subtitleTrack=b)}},function U(_,m,v){m&&Y(_.prototype,m),v&&Y(_,v),Object.defineProperty(_,"prototype",{writable:!1})}(m,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(b){this._subtitleDisplay=b,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(b){this.selectDefaultTrack=!1,this.setSubtitleTrack(b,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}]),m}(z.default)},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
                  !*** ./src/controller/timeline-controller.ts ***!
                  \***********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{TimelineController:()=>D});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../utils/cea-608-parser */
"./src/utils/cea-608-parser.ts"),V=O(
/*! ../utils/output-filter */
"./src/utils/output-filter.ts"),Y=O(
/*! ../utils/webvtt-parser */
"./src/utils/webvtt-parser.ts"),U=O(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),N=O(
/*! ../utils/imsc1-ttml-parser */
"./src/utils/imsc1-ttml-parser.ts"),L=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),R=O(
/*! ../types/loader */
"./src/types/loader.ts"),P=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),D=function(){function m(f){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=f,this.config=f.config,this.Cues=f.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var b=new V.default(this,"textTrack1"),C=new V.default(this,"textTrack2"),h=new V.default(this,"textTrack3"),y=new V.default(this,"textTrack4");this.cea608Parser1=new z.default(1,b,C),this.cea608Parser2=new z.default(3,h,y)}f.on(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),f.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),f.on(B.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.on(B.Events.FRAG_LOADING,this.onFragLoading,this),f.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),f.on(B.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),f.on(B.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),f.on(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),f.on(B.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),f.on(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var v=m.prototype;return v.destroy=function(){var b=this.hls;b.off(B.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),b.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),b.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.off(B.Events.MANIFEST_LOADED,this.onManifestLoaded,this),b.off(B.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),b.off(B.Events.FRAG_LOADING,this.onFragLoading,this),b.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),b.off(B.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),b.off(B.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),b.off(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),b.off(B.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),b.off(B.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},v.addCues=function(b,C,h,y,w){for(var E=!1,S=w.length;S--;){var u=w[S],d=M(u[0],u[1],C,h);if(d>=0&&(u[0]=Math.min(u[0],C),u[1]=Math.max(u[1],h),E=!0,d/(h-C)>.5))return}if(E||w.push([C,h]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[b],C,h,y);else{var p=this.Cues.newCue(null,C,h,y);this.hls.trigger(B.Events.CUES_PARSED,{type:"captions",cues:p,track:b})}},v.onInitPtsFound=function(b,C){var h=this,y=C.frag,S=C.timescale,u=this.unparsedVttFrags;"main"===C.id&&(this.initPTS[y.cc]=C.initPTS,this.timescale[y.cc]=S),u.length&&(this.unparsedVttFrags=[],u.forEach(function(d){h.onFragLoaded(B.Events.FRAG_LOADED,d)}))},v.getExistingTrack=function(b){var C=this.media;if(C)for(var h=0;h<C.textTracks.length;h++){var y=C.textTracks[h];if(y[b])return y}return null},v.createCaptionsTrack=function(b){this.config.renderTextTracksNatively?this.createNativeTrack(b):this.createNonNativeTrack(b)},v.createNativeTrack=function(b){if(!this.captionsTracks[b]){var h=this.captionsTracks,y=this.media,w=this.captionsProperties[b],E=w.label,S=w.languageCode,u=this.getExistingTrack(b);if(u)h[b]=u,(0,U.clearCurrentCues)(h[b]),(0,U.sendAddTrackEvent)(h[b],y);else{var d=this.createTextTrack("captions",E,S);d&&(d[b]=!0,h[b]=d)}}},v.createNonNativeTrack=function(b){if(!this.nonNativeCaptionsTracks[b]){var C=this.captionsProperties[b];if(C){var y={_id:b,label:C.label,kind:"captions",default:!!C.media&&!!C.media.default,closedCaptions:C.media};this.nonNativeCaptionsTracks[b]=y,this.hls.trigger(B.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[y]})}}},v.createTextTrack=function(b,C,h){var y=this.media;if(y)return y.addTextTrack(b,C,h)},v.onMediaAttaching=function(b,C){this.media=C.media,this._cleanTracks()},v.onMediaDetaching=function(){var b=this.captionsTracks;Object.keys(b).forEach(function(C){(0,U.clearCurrentCues)(b[C]),delete b[C]}),this.nonNativeCaptionsTracks={}},v.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},v._cleanTracks=function(){var b=this.media;if(b){var C=b.textTracks;if(C)for(var h=0;h<C.length;h++)(0,U.clearCurrentCues)(C[h])}},v.onSubtitleTracksUpdated=function(b,C){var h=this;this.textTracks=[];var y=C.subtitleTracks||[],w=y.some(function(d){return d.textCodec===N.IMSC1_CODEC});if(this.config.enableWebVTT||w&&this.config.enableIMSC1){var E=this.tracks&&y&&this.tracks.length===y.length;if(this.tracks=y||[],this.config.renderTextTracksNatively){var S=this.media?this.media.textTracks:[];this.tracks.forEach(function(d,c){var p;if(c<S.length){for(var x=null,T=0;T<S.length;T++)if(I(S[T],d)){x=S[T];break}x&&(p=x)}if(p)(0,U.clearCurrentCues)(p);else{var k=h._captionsOrSubtitlesFromCharacteristics(d);(p=h.createTextTrack(k,d.name,d.lang))&&(p.mode="disabled")}p&&(p.groupId=d.groupId,h.textTracks.push(p))})}else if(!E&&this.tracks&&this.tracks.length){var u=this.tracks.map(function(d){return{label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}});this.hls.trigger(B.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:u})}}},v._captionsOrSubtitlesFromCharacteristics=function(b){var C;if(null!==(C=b.attrs)&&void 0!==C&&C.CHARACTERISTICS){var h=/transcribes-spoken-dialog/gi.test(b.attrs.CHARACTERISTICS),y=/describes-music-and-sound/gi.test(b.attrs.CHARACTERISTICS);if(h&&y)return"captions"}return"subtitles"},v.onManifestLoaded=function(b,C){var h=this;this.config.enableCEA708Captions&&C.captions&&C.captions.forEach(function(y){var w=/(?:CC|SERVICE)([1-4])/.exec(y.instreamId);if(w){var S=h.captionsProperties["textTrack"+w[1]];S&&(S.label=y.name,y.lang&&(S.languageCode=y.lang),S.media=y)}})},v.closedCaptionsForLevel=function(b){return this.hls.levels[b.level]?.attrs["CLOSED-CAPTIONS"]},v.onFragLoading=function(b,C){var h=this.cea608Parser1,y=this.cea608Parser2,w=this.lastSn;if(this.enabled&&h&&y&&C.frag.type===R.PlaylistLevelType.MAIN){var S,u,d=C.frag.sn,c=null!=(S=null==C||null===(u=C.part)||void 0===u?void 0:u.index)?S:-1;d===w+1||d===w&&c===this.lastPartIndex+1||(h.reset(),y.reset()),this.lastSn=d,this.lastPartIndex=c}},v.onFragLoaded=function(b,C){var h=C.frag,y=C.payload,w=this.initPTS,E=this.unparsedVttFrags;if(h.type===R.PlaylistLevelType.SUBTITLE)if(y.byteLength){if(!(0,W.isFiniteNumber)(w[h.cc]))return E.push(C),void(w.length&&this.hls.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:new Error("Missing initial subtitle PTS")}));var S=h.decryptdata;if(null==S||!S.encrypted||"stats"in C){var d=this.tracks[h.level],c=this.vttCCs;c[h.cc]||(c[h.cc]={start:h.start,prevCC:this.prevCC,new:!0},this.prevCC=h.cc),d&&d.textCodec===N.IMSC1_CODEC?this._parseIMSC1(h,y):this._parseVTTs(h,y,c)}}else this.hls.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:new Error("Empty subtitle payload")})},v._parseIMSC1=function(b,C){var h=this,y=this.hls;(0,N.parseIMSC1)(C,this.initPTS[b.cc],this.timescale[b.cc],function(w){h._appendCues(w,b.level),y.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:b})},function(w){P.logger.log("Failed to parse IMSC1: "+w),y.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:b,error:w})})},v._parseVTTs=function(b,C,h){var y,w=this,E=this.hls,S=null!==(y=b.initSegment)&&void 0!==y&&y.data?(0,L.appendUint8Array)(b.initSegment.data,new Uint8Array(C)):C;(0,Y.parseWebVTT)(S,this.initPTS[b.cc],this.timescale[b.cc],h,b.cc,b.start,function(u){w._appendCues(u,b.level),E.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:b})},function(u){w._fallbackToIMSC1(b,C),P.logger.log("Failed to parse VTT cue: "+u),E.trigger(B.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:b,error:u})})},v._fallbackToIMSC1=function(b,C){var h=this,y=this.tracks[b.level];y.textCodec||(0,N.parseIMSC1)(C,this.initPTS[b.cc],this.timescale[b.cc],function(){y.textCodec=N.IMSC1_CODEC,h._parseIMSC1(b,C)},function(){y.textCodec="wvtt"})},v._appendCues=function(b,C){var h=this.hls;if(this.config.renderTextTracksNatively){var y=this.textTracks[C];if(!y||"disabled"===y.mode)return;b.forEach(function(S){return(0,U.addCueToTrack)(y,S)})}else{var w=this.tracks[C];if(!w)return;h.trigger(B.Events.CUES_PARSED,{type:"subtitles",cues:b,track:w.default?"default":"subtitles"+C})}},v.onFragDecrypted=function(b,C){var h=C.frag;if(h.type===R.PlaylistLevelType.SUBTITLE){if(!(0,W.isFiniteNumber)(this.initPTS[h.cc]))return void this.unparsedVttFrags.push(C);this.onFragLoaded(B.Events.FRAG_LOADED,C)}},v.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},v.onFragParsingUserdata=function(b,C){var h=this.cea608Parser1,y=this.cea608Parser2;if(this.enabled&&h&&y){var w=C.frag,E=C.samples;if(w.type!==R.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(w))for(var S=0;S<E.length;S++){var u=E[S].bytes;if(u){var d=this.extractCea608Data(u);h.addData(E[S].pts,d[0]),y.addData(E[S].pts,d[1])}}}},v.onBufferFlushing=function(b,C){var h=C.startOffset,y=C.endOffset,w=C.endOffsetSubtitles,E=C.type,S=this.media;if(S&&!(S.currentTime<y)){if(!E||"video"===E){var u=this.captionsTracks;Object.keys(u).forEach(function(c){return(0,U.removeCuesInRange)(u[c],h,y)})}if(this.config.renderTextTracksNatively&&0===h&&void 0!==w){var d=this.textTracks;Object.keys(d).forEach(function(c){return(0,U.removeCuesInRange)(d[c],h,w)})}}},v.extractCea608Data=function(b){for(var C=[[],[]],h=31&b[0],y=2,w=0;w<h;w++){var E=b[y++],S=127&b[y++],u=127&b[y++];if((0!==S||0!==u)&&0!=(4&E)){var c=3&E;(0===c||1===c)&&(C[c].push(S),C[c].push(u))}}return C},m}();function I(m,v){return m&&m.label===v.name&&!(m.textTrack1||m.textTrack2)}function M(m,v,f,b){return Math.min(v,b)-Math.max(m,f)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
                  !*** ./src/crypt/aes-crypto.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>W});var W=function(){function B(V,Y){this.subtle=void 0,this.aesIV=void 0,this.subtle=V,this.aesIV=Y}return B.prototype.decrypt=function(Y,U){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},U,Y)},B}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
                  !*** ./src/crypt/aes-decryptor.ts ***!
                  \************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>z,removePadding:()=>B});var W=O(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts");function B(V){var Y=V.byteLength,U=Y&&new DataView(V.buffer).getUint8(Y-1);return U?(0,W.sliceUint8)(V,0,Y-U):V}var z=function(){function V(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var Y=V.prototype;return Y.uint8ArrayToUint32Array_=function(N){for(var L=new DataView(N),R=new Uint32Array(4),P=0;P<4;P++)R[P]=L.getUint32(4*P);return R},Y.initTable=function(){var N=this.sBox,L=this.invSBox,R=this.subMix,P=R[0],D=R[1],I=R[2],M=R[3],_=this.invSubMix,m=_[0],v=_[1],f=_[2],b=_[3],C=new Uint32Array(256),h=0,y=0,w=0;for(w=0;w<256;w++)C[w]=w<128?w<<1:w<<1^283;for(w=0;w<256;w++){var E=y^y<<1^y<<2^y<<3^y<<4;N[h]=E=E>>>8^255&E^99,L[E]=h;var S=C[h],u=C[S],d=C[u],c=257*C[E]^16843008*E;P[h]=c<<24|c>>>8,D[h]=c<<16|c>>>16,I[h]=c<<8|c>>>24,M[h]=c,m[E]=(c=16843009*d^65537*u^257*S^16843008*h)<<24|c>>>8,v[E]=c<<16|c>>>16,f[E]=c<<8|c>>>24,b[E]=c,h?(h=S^C[C[C[d^S]]],y^=C[C[y]]):h=y=1}},Y.expandKey=function(N){for(var L=this.uint8ArrayToUint32Array_(N),R=!0,P=0;P<L.length&&R;)R=L[P]===this.key[P],P++;if(!R){this.key=L;var D=this.keySize=L.length;if(4!==D&&6!==D&&8!==D)throw new Error("Invalid aes key size="+D);var M,_,S,u,I=this.ksRows=4*(D+6+1),m=this.keySchedule=new Uint32Array(I),v=this.invKeySchedule=new Uint32Array(I),f=this.sBox,b=this.rcon,C=this.invSubMix,h=C[0],y=C[1],w=C[2],E=C[3];for(M=0;M<I;M++)M<D?S=m[M]=L[M]:(u=S,M%D==0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=b[M/D|0]<<24):D>6&&M%D==4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),m[M]=S=(m[M-D]^u)>>>0);for(_=0;_<I;_++)M=I-_,u=3&_?m[M]:m[M-4],v[_]=_<4||M<=4?u:h[f[u>>>24]]^y[f[u>>>16&255]]^w[f[u>>>8&255]]^E[f[255&u]],v[_]=v[_]>>>0}},Y.networkToHostOrderSwap=function(N){return N<<24|(65280&N)<<8|(16711680&N)>>8|N>>>24},Y.decrypt=function(N,L,R){for(var d,c,p,x,T,k,H,F,G,K,$,Z,te,P=this.keySize+6,D=this.invKeySchedule,I=this.invSBox,M=this.invSubMix,_=M[0],m=M[1],v=M[2],f=M[3],b=this.uint8ArrayToUint32Array_(R),C=b[0],h=b[1],y=b[2],w=b[3],E=new Int32Array(N),S=new Int32Array(E.length),Q=this.networkToHostOrderSwap;L<E.length;){for(F=Q(E[L]),G=Q(E[L+1]),K=Q(E[L+2]),$=Q(E[L+3]),x=F^D[0],T=$^D[1],k=K^D[2],H=G^D[3],Z=4,te=1;te<P;te++)d=_[T>>>24]^m[k>>16&255]^v[H>>8&255]^f[255&x]^D[Z+1],c=_[k>>>24]^m[H>>16&255]^v[x>>8&255]^f[255&T]^D[Z+2],p=_[H>>>24]^m[x>>16&255]^v[T>>8&255]^f[255&k]^D[Z+3],x=_[x>>>24]^m[T>>16&255]^v[k>>8&255]^f[255&H]^D[Z],T=d,k=c,H=p,Z+=4;d=I[T>>>24]<<24^I[k>>16&255]<<16^I[H>>8&255]<<8^I[255&x]^D[Z+1],c=I[k>>>24]<<24^I[H>>16&255]<<16^I[x>>8&255]<<8^I[255&T]^D[Z+2],p=I[H>>>24]<<24^I[x>>16&255]<<16^I[T>>8&255]<<8^I[255&k]^D[Z+3],S[L]=Q(I[x>>>24]<<24^I[T>>16&255]<<16^I[k>>8&255]<<8^I[255&H]^D[Z]^C),S[L+1]=Q(p^h),S[L+2]=Q(c^y),S[L+3]=Q(d^w),C=F,h=G,y=K,w=$,L+=4}return S.buffer},V}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
                  !*** ./src/crypt/decrypter.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>L});var W=O(
/*! ./aes-crypto */
"./src/crypt/aes-crypto.ts"),B=O(
/*! ./fast-aes-key */
"./src/crypt/fast-aes-key.ts"),z=O(
/*! ./aes-decryptor */
"./src/crypt/aes-decryptor.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),U=O(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts"),L=function(){function R(D,I){var _=(void 0===I?{}:I).removePKCS7Padding,m=void 0===_||_;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=D.enableSoftwareAES,this.removePKCS7Padding=m,m)try{var v=self.crypto;v&&(this.subtle=v.subtle||v.webkitSubtle)}catch{}null===this.subtle&&(this.useSoftware=!0)}var P=R.prototype;return P.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},P.isSync=function(){return this.useSoftware},P.flush=function(){var I=this.currentResult;if(!I||this.remainderData)return this.reset(),null;var _=new Uint8Array(I);return this.reset(),this.removePKCS7Padding?(0,z.removePadding)(_):_},P.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},P.decrypt=function(I,M,_){var m=this;return this.useSoftware?new Promise(function(v,f){m.softwareDecrypt(new Uint8Array(I),M,_);var b=m.flush();b?v(b.buffer):f(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(I),M,_)},P.softwareDecrypt=function(I,M,_){var m=this.currentIV,v=this.currentResult,f=this.remainderData;this.logOnce("JS AES decrypt"),f&&(I=(0,Y.appendUint8Array)(f,I),this.remainderData=null);var b=this.getValidChunk(I);if(!b.length)return null;m&&(_=m);var C=this.softwareDecrypter;C||(C=this.softwareDecrypter=new z.default),C.expandKey(M);var h=v;return this.currentResult=C.decrypt(b.buffer,0,_),this.currentIV=(0,U.sliceUint8)(b,-16).buffer,h||null},P.webCryptoDecrypt=function(I,M,_){var m=this,v=this.subtle;return(this.key!==M||!this.fastAesKey)&&(this.key=M,this.fastAesKey=new B.default(v,M)),this.fastAesKey.expandKey().then(function(f){return v?(m.logOnce("WebCrypto AES decrypt"),new W.default(v,new Uint8Array(_)).decrypt(I.buffer,f)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(f){return V.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+f.name+": "+f.message),m.onWebCryptoError(I,M,_)})},P.onWebCryptoError=function(I,M,_){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(I,M,_);var m=this.flush();if(m)return m.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},P.getValidChunk=function(I){var M=I,_=I.length-I.length%16;return _!==I.length&&(M=(0,U.sliceUint8)(I,0,_),this.remainderData=(0,U.sliceUint8)(I,_)),M},P.logOnce=function(I){this.logEnabled&&(V.logger.log("[decrypter]: "+I),this.logEnabled=!1)},R}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
                  !*** ./src/crypt/fast-aes-key.ts ***!
                  \***********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>W});var W=function(){function B(V,Y){this.subtle=void 0,this.key=void 0,this.subtle=V,this.key=Y}return B.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},B}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/aacdemuxer.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>L});var W=O(
/*! ./base-audio-demuxer */
"./src/demux/base-audio-demuxer.ts"),B=O(
/*! ./adts */
"./src/demux/adts.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=O(
/*! ../demux/id3 */
"./src/demux/id3.ts");function U(R,P){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,M){return I.__proto__=M,I})(R,P)}const L=function(R){function P(I,M){var _;return(_=R.call(this)||this).observer=void 0,_.config=void 0,_.observer=I,_.config=M,_}!function Y(R,P){R.prototype=Object.create(P.prototype),R.prototype.constructor=R,U(R,P)}(P,R);var D=P.prototype;return D.resetInitSegment=function(M,_,m,v){R.prototype.resetInitSegment.call(this,M,_,m,v),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:_,duration:v,inputTimeScale:9e4,dropped:0}},P.probe=function(M){if(!M)return!1;for(var m=(V.getID3Data(M,0)||[]).length,v=M.length;m<v;m++)if(B.probe(M,m))return z.logger.log("ADTS sync word found !"),!0;return!1},D.canParse=function(M,_){return B.canParse(M,_)},D.appendFrame=function(M,_,m){B.initTrackConfig(M,this.observer,_,m,M.manifestCodec);var v=B.appendFrame(M,_,m,this.basePTS,this.frameIndex);if(v&&0===v.missing)return v},P}(W.default)},"./src/demux/adts.ts":
/*!***************************!*\
                  !*** ./src/demux/adts.ts ***!
                  \***************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{appendFrame:()=>m,canGetFrameLength:()=>L,canParse:()=>P,getAudioConfig:()=>V,getFrameDuration:()=>M,getFullFrameLength:()=>N,getHeaderLength:()=>U,initTrackConfig:()=>I,isHeader:()=>R,isHeaderPattern:()=>Y,parseFrameHeader:()=>_,probe:()=>D});var W=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=O(
/*! ../errors */
"./src/errors.ts"),z=O(
/*! ../events */
"./src/events.ts");function V(v,f,b,C){var h,y,w,E,S=navigator.userAgent.toLowerCase(),u=C,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];h=1+((192&f[b+2])>>>6);var c=(60&f[b+2])>>>2;if(!(c>d.length-1))return w=(1&f[b+2])<<2,w|=(192&f[b+3])>>>6,W.logger.log("manifest codec:"+C+", ADTS type:"+h+", samplingIndex:"+c),/firefox/i.test(S)?c>=6?(h=5,E=new Array(4),y=c-3):(h=2,E=new Array(2),y=c):-1!==S.indexOf("android")?(h=2,E=new Array(2),y=c):(h=5,E=new Array(4),C&&(-1!==C.indexOf("mp4a.40.29")||-1!==C.indexOf("mp4a.40.5"))||!C&&c>=6?y=c-3:((C&&-1!==C.indexOf("mp4a.40.2")&&(c>=6&&1===w||/vivaldi/i.test(S))||!C&&1===w)&&(h=2,E=new Array(2)),y=c)),E[0]=h<<3,E[0]|=(14&c)>>1,E[1]|=(1&c)<<7,E[1]|=w<<3,5===h&&(E[1]|=(14&y)>>1,E[2]=(1&y)<<7,E[2]|=8,E[3]=0),{config:E,samplerate:d[c],channelCount:w,codec:"mp4a.40."+h,manifestCodec:u};v.trigger(z.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}function Y(v,f){return 255===v[f]&&240==(246&v[f+1])}function U(v,f){return 1&v[f+1]?7:9}function N(v,f){return(3&v[f+3])<<11|v[f+4]<<3|(224&v[f+5])>>>5}function L(v,f){return f+5<v.length}function R(v,f){return f+1<v.length&&Y(v,f)}function P(v,f){return L(v,f)&&Y(v,f)&&N(v,f)<=v.length-f}function D(v,f){if(R(v,f)){var b=U(v,f);if(f+b>=v.length)return!1;var C=N(v,f);if(C<=b)return!1;var h=f+C;return h===v.length||R(v,h)}return!1}function I(v,f,b,C,h){if(!v.samplerate){var y=V(f,b,C,h);if(!y)return;v.config=y.config,v.samplerate=y.samplerate,v.channelCount=y.channelCount,v.codec=y.codec,v.manifestCodec=y.manifestCodec,W.logger.log("parsed codec:"+v.codec+", rate:"+y.samplerate+", channels:"+y.channelCount)}}function M(v){return 9216e4/v}function _(v,f){var b=U(v,f);if(f+b<=v.length){var C=N(v,f)-b;if(C>0)return{headerLength:b,frameLength:C}}}function m(v,f,b,C,h){var S,w=C+h*M(v.samplerate),E=_(f,b);if(E){var d=E.headerLength,c=d+E.frameLength,p=Math.max(0,b+c-f.length);p?(S=new Uint8Array(c-d)).set(f.subarray(b+d,f.length),0):S=f.subarray(b+d,b+c);var x={unit:S,pts:w};return p||v.samples.push(x),{sample:x,length:c,missing:p}}var T=f.length-b;return(S=new Uint8Array(T)).set(f.subarray(b,f.length),0),{sample:{unit:S,pts:w},length:T,missing:-1}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
                  !*** ./src/demux/base-audio-demuxer.ts ***!
                  \*****************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>R,initPTSFn:()=>L});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../demux/id3 */
"./src/demux/id3.ts"),z=O(
/*! ../types/demuxer */
"./src/types/demuxer.ts"),V=O(
/*! ./dummy-demuxed-track */
"./src/demux/dummy-demuxed-track.ts"),Y=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),U=O(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts"),N=function(){function P(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var D=P.prototype;return D.resetInitSegment=function(M,_,m,v){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},D.resetTimeStamp=function(M){this.initPTS=M,this.resetContiguity()},D.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},D.canParse=function(M,_){return!1},D.appendFrame=function(M,_,m){},D.demux=function(M,_){this.cachedData&&(M=(0,Y.appendUint8Array)(this.cachedData,M),this.cachedData=null);var f,m=B.getID3Data(M,0),v=m?m.length:0,b=this._audioTrack,C=this._id3Track,h=m?B.getTimeStamp(m):void 0,y=M.length;for((null===this.basePTS||0===this.frameIndex&&(0,W.isFiniteNumber)(h))&&(this.basePTS=L(h,_,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),m&&m.length>0&&C.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:m,type:z.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});v<y;){if(this.canParse(M,v)){var w=this.appendFrame(b,M,v);w?(this.frameIndex++,this.lastPTS=w.sample.pts,f=v+=w.length):v=y}else B.canParse(M,v)?(m=B.getID3Data(M,v),C.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:m,type:z.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),f=v+=m.length):v++;if(v===y&&f!==y){var E=(0,U.sliceUint8)(M,f);this.cachedData=this.cachedData?(0,Y.appendUint8Array)(this.cachedData,E):E}}return{audioTrack:b,videoTrack:(0,V.dummyTrack)(),id3Track:C,textTrack:(0,V.dummyTrack)()}},D.demuxSampleAes=function(M,_,m){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},D.flush=function(M){var _=this.cachedData;return _&&(this.cachedData=null,this.demux(_,0)),{audioTrack:this._audioTrack,videoTrack:(0,V.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,V.dummyTrack)()}},D.destroy=function(){},P}(),L=function(D,I,M){return(0,W.isFiniteNumber)(D)?90*D:9e4*I+(M||0)};const R=N},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
                  !*** ./src/demux/chunk-cache.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>W});var W=function(){function z(){this.chunks=[],this.dataLength=0}var V=z.prototype;return V.push=function(U){this.chunks.push(U),this.dataLength+=U.length},V.flush=function(){var L,U=this.chunks;return U.length?(L=1===U.length?U[0]:function B(z,V){for(var Y=new Uint8Array(V),U=0,N=0;N<z.length;N++){var L=z[N];Y.set(L,U),U+=L.length}return Y}(U,this.dataLength),this.reset(),L):new Uint8Array(0)},V.reset=function(){this.chunks.length=0,this.dataLength=0},z}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
                  !*** ./src/demux/dummy-demuxed-track.ts ***!
                  \******************************************/(pe,q,O)=>{"use strict";function W(B,z){return void 0===B&&(B=""),void 0===z&&(z=9e4),{type:B,id:-1,pid:-1,inputTimeScale:z,sequenceNumber:-1,samples:[],dropped:0}}O.r(q),O.d(q,{dummyTrack:()=>W})},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
                  !*** ./src/demux/exp-golomb.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>z});var W=O(
/*! ../utils/logger */
"./src/utils/logger.ts");const z=function(){function V(U){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=U,this.bytesAvailable=U.byteLength,this.word=0,this.bitsAvailable=0}var Y=V.prototype;return Y.loadWord=function(){var N=this.data,L=this.bytesAvailable,R=N.byteLength-L,P=new Uint8Array(4),D=Math.min(4,L);if(0===D)throw new Error("no bytes available");P.set(N.subarray(R,R+D)),this.word=new DataView(P.buffer).getUint32(0),this.bitsAvailable=8*D,this.bytesAvailable-=D},Y.skipBits=function(N){var L;N=Math.min(N,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>N?(this.word<<=N,this.bitsAvailable-=N):(N-=this.bitsAvailable,N-=(L=N>>3)<<3,this.bytesAvailable-=L,this.loadWord(),this.word<<=N,this.bitsAvailable-=N)},Y.readBits=function(N){var L=Math.min(this.bitsAvailable,N),R=this.word>>>32-L;if(N>32&&W.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=L,this.bitsAvailable>0)this.word<<=L;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(L=N-L)>0&&this.bitsAvailable?R<<L|this.readBits(L):R},Y.skipLZ=function(){var N;for(N=0;N<this.bitsAvailable;++N)if(this.word&2147483648>>>N)return this.word<<=N,this.bitsAvailable-=N,N;return this.loadWord(),N+this.skipLZ()},Y.skipUEG=function(){this.skipBits(1+this.skipLZ())},Y.skipEG=function(){this.skipBits(1+this.skipLZ())},Y.readUEG=function(){var N=this.skipLZ();return this.readBits(N+1)-1},Y.readEG=function(){var N=this.readUEG();return 1&N?1+N>>>1:-1*(N>>>1)},Y.readBoolean=function(){return 1===this.readBits(1)},Y.readUByte=function(){return this.readBits(8)},Y.readUShort=function(){return this.readBits(16)},Y.readUInt=function(){return this.readBits(32)},Y.skipScalingList=function(N){for(var L=8,R=8,D=0;D<N;D++)0!==R&&(R=(L+this.readEG()+256)%256),L=0===R?L:R},Y.readSPS=function(){var D,I,M,N=0,L=0,R=0,P=0,_=this.readUByte.bind(this),m=this.readBits.bind(this),v=this.readUEG.bind(this),f=this.readBoolean.bind(this),b=this.skipBits.bind(this),C=this.skipEG.bind(this),h=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);_();var w=_();if(m(5),b(3),_(),h(),100===w||110===w||122===w||244===w||44===w||83===w||86===w||118===w||128===w){var E=v();if(3===E&&b(1),h(),h(),b(1),f())for(I=3!==E?8:12,M=0;M<I;M++)f()&&y(M<6?16:64)}h();var S=v();if(0===S)v();else if(1===S)for(b(1),C(),C(),D=v(),M=0;M<D;M++)C();h(),b(1);var u=v(),d=v(),c=m(1);0===c&&b(1),b(1),f()&&(N=v(),L=v(),R=v(),P=v());var p=[1,1];if(f()&&f())switch(_()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[_()<<8|_(),_()<<8|_()]}return{width:Math.ceil(16*(u+1)-2*N-2*L),height:(2-c)*(d+1)*16-(c?2:4)*(R+P),pixelRatio:p}},Y.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},V}()},"./src/demux/id3.ts":
/*!**************************!*\
                  !*** ./src/demux/id3.ts ***!
                  \**************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{canParse:()=>Y,decodeFrame:()=>P,getID3Data:()=>z,getID3Frames:()=>R,getTimeStamp:()=>U,isFooter:()=>B,isHeader:()=>W,isTimeStampFrame:()=>N,testables:()=>v,utf8ArrayToStr:()=>m});var f,W=function(h,y){return y+10<=h.length&&73===h[y]&&68===h[y+1]&&51===h[y+2]&&h[y+3]<255&&h[y+4]<255&&h[y+6]<128&&h[y+7]<128&&h[y+8]<128&&h[y+9]<128},B=function(h,y){return y+10<=h.length&&51===h[y]&&68===h[y+1]&&73===h[y+2]&&h[y+3]<255&&h[y+4]<255&&h[y+6]<128&&h[y+7]<128&&h[y+8]<128&&h[y+9]<128},z=function(h,y){for(var w=y,E=0;W(h,y);)E+=10,E+=V(h,y+6),B(h,y+10)&&(E+=10),y+=E;if(E>0)return h.subarray(w,w+E)},V=function(h,y){var w=0;return w=(127&h[y])<<21,w|=(127&h[y+1])<<14,(w|=(127&h[y+2])<<7)|127&h[y+3]},Y=function(h,y){return W(h,y)&&V(h,y+6)+10<=h.length-y},U=function(h){for(var y=R(h),w=0;w<y.length;w++){var E=y[w];if(N(E))return _(E)}},N=function(h){return h&&"PRIV"===h.key&&"com.apple.streaming.transportStreamTimestamp"===h.info},L=function(h){var y=String.fromCharCode(h[0],h[1],h[2],h[3]),w=V(h,4);return{type:y,size:w,data:h.subarray(10,10+w)}},R=function(h){for(var y=0,w=[];W(h,y);){for(var E=V(h,y+6),S=(y+=10)+E;y+8<S;){var u=L(h.subarray(y)),d=P(u);d&&w.push(d),y+=u.size+10}B(h,y)&&(y+=10)}return w},P=function(h){return"PRIV"===h.type?D(h):"W"===h.type[0]?M(h):I(h)},D=function(h){if(!(h.size<2)){var y=m(h.data,!0),w=new Uint8Array(h.data.subarray(y.length+1));return{key:h.type,info:y,data:w.buffer}}},I=function(h){if(!(h.size<2)){if("TXXX"===h.type){var y=1,w=m(h.data.subarray(y),!0),E=m(h.data.subarray(y+=w.length+1));return{key:h.type,info:w,data:E}}var S=m(h.data.subarray(1));return{key:h.type,data:S}}},M=function(h){if("WXXX"===h.type){if(h.size<2)return;var y=1,w=m(h.data.subarray(y),!0),E=m(h.data.subarray(y+=w.length+1));return{key:h.type,info:w,data:E}}var S=m(h.data);return{key:h.type,data:S}},_=function(h){if(8===h.data.byteLength){var y=new Uint8Array(h.data),E=(y[4]<<23)+(y[5]<<15)+(y[6]<<7)+y[7];return E/=45,1&y[3]&&(E+=47721858.84),Math.round(E)}},m=function(h,y){void 0===y&&(y=!1);var w=function b(){return!f&&typeof self.TextDecoder<"u"&&(f=new self.TextDecoder("utf-8")),f}();if(w){var E=w.decode(h);if(y){var S=E.indexOf("\0");return-1!==S?E.substring(0,S):E}return E.replace(/\0/g,"")}for(var d,c,p,u=h.length,x="",T=0;T<u;){if(0===(d=h[T++])&&y)return x;if(0!==d&&3!==d)switch(d>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:x+=String.fromCharCode(d);break;case 12:case 13:c=h[T++],x+=String.fromCharCode((31&d)<<6|63&c);break;case 14:c=h[T++],p=h[T++],x+=String.fromCharCode((15&d)<<12|(63&c)<<6|(63&p)<<0)}}return x},v={decodeTextFrame:I}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/mp3demuxer.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>L});var W=O(
/*! ./base-audio-demuxer */
"./src/demux/base-audio-demuxer.ts"),B=O(
/*! ../demux/id3 */
"./src/demux/id3.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=O(
/*! ./mpegaudio */
"./src/demux/mpegaudio.ts");function U(R,P){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,M){return I.__proto__=M,I})(R,P)}var N=function(R){function P(){return R.apply(this,arguments)||this}!function Y(R,P){R.prototype=Object.create(P.prototype),R.prototype.constructor=R,U(R,P)}(P,R);var D=P.prototype;return D.resetInitSegment=function(M,_,m,v){R.prototype.resetInitSegment.call(this,M,_,m,v),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:_,duration:v,inputTimeScale:9e4,dropped:0}},P.probe=function(M){if(!M)return!1;for(var m=(B.getID3Data(M,0)||[]).length,v=M.length;m<v;m++)if(V.probe(M,m))return z.logger.log("MPEG Audio sync word found !"),!0;return!1},D.canParse=function(M,_){return V.canParse(M,_)},D.appendFrame=function(M,_,m){if(null!==this.basePTS)return V.appendFrame(M,_,m,this.basePTS,this.frameIndex)},P}(W.default);const L=N},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/mp4demuxer.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>N});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../types/demuxer */
"./src/types/demuxer.ts"),z=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),V=O(
/*! ./dummy-demuxed-track */
"./src/demux/dummy-demuxed-track.ts"),Y=/\/emsg[-/]ID3/i;const N=function(){function L(P,D){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=D}var R=L.prototype;return R.resetTimeStamp=function(){},R.resetInitSegment=function(D,I,M,_){var m=this.videoTrack=(0,V.dummyTrack)("video",1),v=this.audioTrack=(0,V.dummyTrack)("audio",1),f=this.txtTrack=(0,V.dummyTrack)("text",1);if(this.id3Track=(0,V.dummyTrack)("id3",1),this.timeOffset=0,D&&D.byteLength){var b=(0,z.parseInitSegment)(D);if(b.video){var C=b.video,y=C.timescale,w=C.codec;m.id=C.id,m.timescale=f.timescale=y,m.codec=w}if(b.audio){var E=b.audio,u=E.timescale,d=E.codec;v.id=E.id,v.timescale=u,v.codec=d}f.id=z.RemuxerTrackIdConfig.text,m.sampleDuration=0,m.duration=v.duration=_}},R.resetContiguity=function(){},L.probe=function(D){return D=D.length>16384?D.subarray(0,16384):D,(0,z.findBox)(D,["moof"]).length>0},R.demux=function(D,I){this.timeOffset=I;var M=D,_=this.videoTrack,m=this.txtTrack;if(this.config.progressive){this.remainderData&&(M=(0,z.appendUint8Array)(this.remainderData,D));var v=(0,z.segmentValidRange)(M);this.remainderData=v.remainder,_.samples=v.valid||new Uint8Array}else _.samples=M;var f=this.extractID3Track(_,I);return m.samples=(0,z.parseSamples)(I,_),{videoTrack:_,audioTrack:this.audioTrack,id3Track:f,textTrack:this.txtTrack}},R.flush=function(){var D=this.timeOffset,I=this.videoTrack,M=this.txtTrack;I.samples=this.remainderData||new Uint8Array,this.remainderData=null;var _=this.extractID3Track(I,this.timeOffset);return M.samples=(0,z.parseSamples)(D,I),{videoTrack:I,audioTrack:(0,V.dummyTrack)(),id3Track:_,textTrack:(0,V.dummyTrack)()}},R.extractID3Track=function(D,I){var M=this.id3Track;if(D.samples.length){var _=(0,z.findBox)(D.samples,["emsg"]);_&&_.forEach(function(m){var v=(0,z.parseEmsg)(m);if(Y.test(v.schemeIdUri)){var f=(0,W.isFiniteNumber)(v.presentationTime)?v.presentationTime/v.timeScale:I+v.presentationTimeDelta/v.timeScale,b=4294967295===v.eventDuration?Number.POSITIVE_INFINITY:v.eventDuration/v.timeScale;b<=.001&&(b=Number.POSITIVE_INFINITY);var C=v.payload;M.samples.push({data:C,len:C.byteLength,dts:f,pts:f,type:B.MetadataSchema.emsg,duration:b})}})}return M},R.demuxSampleAes=function(D,I,M){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},R.destroy=function(){},L}()},"./src/demux/mpegaudio.ts":
/*!********************************!*\
                  !*** ./src/demux/mpegaudio.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{appendFrame:()=>U,canParse:()=>P,isHeader:()=>R,isHeaderPattern:()=>L,parseHeader:()=>N,probe:()=>D});var W=null,B=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],z=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],V=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Y=[0,1,1,4];function U(I,M,_,m,v){if(!(_+24>M.length)){var f=N(M,_);if(f&&_+f.frameLength<=M.length){var C=m+v*(9e4*f.samplesPerFrame/f.sampleRate),h={unit:M.subarray(_,_+f.frameLength),pts:C,dts:C};return I.config=[],I.channelCount=f.channelCount,I.samplerate=f.sampleRate,I.samples.push(h),{sample:h,length:f.frameLength,missing:0}}}}function N(I,M){var _=I[M+1]>>3&3,m=I[M+1]>>1&3,v=I[M+2]>>4&15,f=I[M+2]>>2&3;if(1!==_&&0!==v&&15!==v&&3!==f){var C=I[M+3]>>6,y=1e3*B[14*(3===_?3-m:3===m?3:4)+v-1],E=z[3*(3===_?0:2===_?1:2)+f],S=3===C?1:2,u=V[_][m],d=Y[m],c=8*u*d,p=Math.floor(u*y/E+(I[M+2]>>1&1))*d;if(null===W){var T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);W=T?parseInt(T[1]):0}return!!W&&W<=87&&2===m&&y>=224e3&&0===C&&(I[M+3]=128|I[M+3]),{sampleRate:E,channelCount:S,frameLength:p,samplesPerFrame:c}}}function L(I,M){return 255===I[M]&&224==(224&I[M+1])&&0!=(6&I[M+1])}function R(I,M){return M+1<I.length&&L(I,M)}function P(I,M){return L(I,M)&&4<=I.length-M}function D(I,M){if(M+1<I.length&&L(I,M)){var m=N(I,M),v=4;null!=m&&m.frameLength&&(v=m.frameLength);var f=M+v;return f===I.length||R(I,f)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
                  !*** ./src/demux/sample-aes.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>V});var W=O(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),B=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts");const V=function(){function Y(N,L,R){this.keyData=void 0,this.decrypter=void 0,this.keyData=R,this.decrypter=new W.default(L,{removePKCS7Padding:!1})}var U=Y.prototype;return U.decryptBuffer=function(L){return this.decrypter.decrypt(L,this.keyData.key.buffer,this.keyData.iv.buffer)},U.decryptAacSample=function(L,R,P){var D=this,I=L[R].unit;if(!(I.length<=16)){var M=I.subarray(16,I.length-I.length%16),_=M.buffer.slice(M.byteOffset,M.byteOffset+M.length);this.decryptBuffer(_).then(function(m){var v=new Uint8Array(m);I.set(v,16),D.decrypter.isSync()||D.decryptAacSamples(L,R+1,P)})}},U.decryptAacSamples=function(L,R,P){for(;;R++){if(R>=L.length)return void P();if(!(L[R].unit.length<32||(this.decryptAacSample(L,R,P),this.decrypter.isSync())))return}},U.getAvcEncryptedData=function(L){for(var R=16*Math.floor((L.length-48)/160)+16,P=new Int8Array(R),D=0,I=32;I<L.length-16;I+=160,D+=16)P.set(L.subarray(I,I+16),D);return P},U.getAvcDecryptedUnit=function(L,R){for(var P=new Uint8Array(R),D=0,I=32;I<L.length-16;I+=160,D+=16)L.set(P.subarray(D,D+16),I);return L},U.decryptAvcSample=function(L,R,P,D,I){var M=this,_=(0,B.discardEPB)(I.data),m=this.getAvcEncryptedData(_);this.decryptBuffer(m.buffer).then(function(v){I.data=M.getAvcDecryptedUnit(_,v),M.decrypter.isSync()||M.decryptAvcSamples(L,R,P+1,D)})},U.decryptAvcSamples=function(L,R,P,D){if(L instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;R++,P=0){if(R>=L.length)return void D();for(var I=L[R].units;!(P>=I.length);P++){var M=I[P];if(!(M.data.length<=48||1!==M.type&&5!==M.type||(this.decryptAvcSample(L,R,P,D,M),this.decrypter.isSync())))return}}},Y}()},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
                  !*** ./src/demux/transmuxer-interface.ts ***!
                  \*******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>P});var W=O(
/*! ./webworkify-webpack */
"./src/demux/webworkify-webpack.js"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../demux/transmuxer */
"./src/demux/transmuxer.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=O(
/*! ../errors */
"./src/errors.ts"),U=O(
/*! ../utils/mediasource-helper */
"./src/utils/mediasource-helper.ts"),N=O(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),R=(0,U.getMediaSource)()||{isTypeSupported:function(){return!1}},P=function(){function D(M,_,m,v){var f=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var b=M.config;this.hls=M,this.id=_,this.useWorker=!!b.enableWorker,this.onTransmuxComplete=m,this.onFlush=v;var C=function(S,u){(u=u||{}).frag=f.frag,u.id=f.id,f.hls.trigger(S,u)};this.observer=new N.EventEmitter,this.observer.on(B.Events.FRAG_DECRYPTED,C),this.observer.on(B.Events.ERROR,C);var h={mp4:R.isTypeSupported("video/mp4"),mpeg:R.isTypeSupported("audio/mpeg"),mp3:R.isTypeSupported('audio/mp4; codecs="mp3"')},y=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){var w;V.logger.log("demuxing in webworker");try{w=this.worker=(0,W.default)(
/*! ../demux/transmuxer-worker.ts */
"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),w.addEventListener("message",this.onwmsg),w.onerror=function(E){f.useWorker=!1,V.logger.warn("Exception in webworker, fallback to inline"),f.hls.trigger(B.Events.ERROR,{type:Y.ErrorTypes.OTHER_ERROR,details:Y.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(E.message+"  ("+E.filename+":"+E.lineno+")")})},w.postMessage({cmd:"init",typeSupported:h,vendor:y,id:_,config:JSON.stringify(b)})}catch(E){V.logger.warn("Error in worker:",E),V.logger.error("Error while initializing DemuxerWorker, fallback to inline"),w&&self.URL.revokeObjectURL(w.objectURL),this.transmuxer=new z.default(this.observer,h,b,y,_),this.worker=null}}else this.transmuxer=new z.default(this.observer,h,b,y,_)}var I=D.prototype;return I.destroy=function(){var _=this.worker;if(_)_.removeEventListener("message",this.onwmsg),_.terminate(),this.worker=null,this.onwmsg=void 0;else{var m=this.transmuxer;m&&(m.destroy(),this.transmuxer=null)}var v=this.observer;v&&v.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},I.push=function(_,m,v,f,b,C,h,y,w,E){var S,u,d=this;w.transmuxing.start=self.performance.now();var c=this.transmuxer,p=this.worker,x=C?C.start:b.start,T=b.decryptdata,k=this.frag,H=!(k&&b.cc===k.cc),F=!(k&&w.level===k.level),G=k?w.sn-k.sn:-1,K=this.part?w.part-this.part.index:-1,Z=!F&&(1===G||0===G&&(1===K||0===G&&w.id>1&&w.id===k?.stats.chunkCount&&K<=0)),te=self.performance.now();(F||G||0===b.stats.parsing.start)&&(b.stats.parsing.start=te),C&&(K||!Z)&&(C.stats.parsing.start=te);var Q=!(k&&(null===(S=b.initSegment)||void 0===S?void 0:S.url)===(null===(u=k.initSegment)||void 0===u?void 0:u.url)),re=new z.TransmuxState(H,Z,y,F,x,Q);if(!Z||H||Q){V.logger.log("[transmuxer-interface, "+b.type+"]: Starting new transmux session for sn: "+w.sn+" p: "+w.part+" level: "+w.level+" id: "+w.id+"\n        discontinuity: "+H+"\n        trackSwitch: "+F+"\n        contiguous: "+Z+"\n        accurateTimeOffset: "+y+"\n        timeOffset: "+x+"\n        initSegmentChange: "+Q);var se=new z.TransmuxConfig(v,f,m,h,E);this.configureTransmuxer(se)}if(this.frag=b,this.part=C,p)p.postMessage({cmd:"demux",data:_,decryptdata:T,chunkMeta:w,state:re},_ instanceof ArrayBuffer?[_]:[]);else if(c){var ce=c.push(_,T,w,re);(0,z.isPromise)(ce)?(c.async=!0,ce.then(function(ue){d.handleTransmuxComplete(ue)}).catch(function(ue){d.transmuxerError(ue,w,"transmuxer-interface push error")})):(c.async=!1,this.handleTransmuxComplete(ce))}},I.flush=function(_){var m=this;_.transmuxing.start=self.performance.now();var v=this.transmuxer,f=this.worker;if(f)f.postMessage({cmd:"flush",chunkMeta:_});else if(v){var b=v.flush(_);(0,z.isPromise)(b)||v.async?((0,z.isPromise)(b)||(b=Promise.resolve(b)),b.then(function(h){m.handleFlushResult(h,_)}).catch(function(h){m.transmuxerError(h,_,"transmuxer-interface flush error")})):this.handleFlushResult(b,_)}},I.transmuxerError=function(_,m,v){this.hls&&this.hls.trigger(B.Events.ERROR,{type:Y.ErrorTypes.MEDIA_ERROR,details:Y.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:m,fatal:!1,error:_,err:_,reason:v})},I.handleFlushResult=function(_,m){var v=this;_.forEach(function(f){v.handleTransmuxComplete(f)}),this.onFlush(m)},I.onWorkerMessage=function(_){var m=_.data,v=this.hls;switch(m.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(m.data);break;case"flush":this.onFlush(m.data);break;case"workerLog":V.logger[m.data.logType]&&V.logger[m.data.logType](m.data.message);break;default:m.data=m.data||{},m.data.frag=this.frag,m.data.id=this.id,v.trigger(m.event,m.data)}},I.configureTransmuxer=function(_){var m=this.worker,v=this.transmuxer;m?m.postMessage({cmd:"configure",config:_}):v&&v.configure(_)},I.handleTransmuxComplete=function(_){_.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(_)},D}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
                  !*** ./src/demux/transmuxer-worker.ts ***!
                  \****************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>N});var W=O(
/*! ../demux/transmuxer */
"./src/demux/transmuxer.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=O(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),U=O(
/*! ../errors */
"./src/errors.ts");function N(I){var M=new V.EventEmitter,_=function(f,b){I.postMessage({event:f,data:b})};M.on(B.Events.FRAG_DECRYPTED,_),M.on(B.Events.ERROR,_),I.addEventListener("message",function(v){var f=v.data;switch(f.cmd){case"init":var b=JSON.parse(f.config);I.transmuxer=new W.default(M,f.typeSupported,b,f.vendor,f.id),(0,z.enableLogs)(b.debug,f.id),function(){var f=function(h){z.logger[h]=function(E){_("workerLog",{logType:h,message:E})}};for(var b in z.logger)f(b)}(),_("init",null);break;case"configure":I.transmuxer.configure(f.config);break;case"demux":var C=I.transmuxer.push(f.data,f.decryptdata,f.chunkMeta,f.state);(0,W.isPromise)(C)?(I.transmuxer.async=!0,C.then(function(E){L(I,E)}).catch(function(E){_(B.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:f.chunkMeta,fatal:!1,error:E,err:E,reason:"transmuxer-worker push error"})})):(I.transmuxer.async=!1,L(I,C));break;case"flush":var h=f.chunkMeta,y=I.transmuxer.flush(h);(0,W.isPromise)(y)||I.transmuxer.async?((0,W.isPromise)(y)||(y=Promise.resolve(y)),y.then(function(E){P(I,E,h)}).catch(function(E){_(B.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:f.chunkMeta,fatal:!1,error:E,err:E,reason:"transmuxer-worker flush error"})})):P(I,y,h)}})}function L(I,M){if(function D(I){return!(I.audio||I.video||I.text||I.id3||I.initSegment)}(M.remuxResult))return!1;var _=[],m=M.remuxResult,v=m.audio,f=m.video;return v&&R(_,v),f&&R(_,f),I.postMessage({event:"transmuxComplete",data:M},_),!0}function R(I,M){M.data1&&I.push(M.data1.buffer),M.data2&&I.push(M.data2.buffer)}function P(I,M,_){M.reduce(function(v,f){return L(I,f)||v},!1)||I.postMessage({event:"transmuxComplete",data:M[0]}),I.postMessage({event:"flush",data:_})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
                  !*** ./src/demux/transmuxer.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{TransmuxConfig:()=>f,TransmuxState:()=>b,default:()=>M,isPromise:()=>v});var D,W=O(
/*! ../events */
"./src/events.ts"),B=O(
/*! ../errors */
"./src/errors.ts"),z=O(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),V=O(
/*! ../demux/aacdemuxer */
"./src/demux/aacdemuxer.ts"),Y=O(
/*! ../demux/mp4demuxer */
"./src/demux/mp4demuxer.ts"),U=O(
/*! ../demux/tsdemuxer */
"./src/demux/tsdemuxer.ts"),N=O(
/*! ../demux/mp3demuxer */
"./src/demux/mp3demuxer.ts"),L=O(
/*! ../remux/mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),R=O(
/*! ../remux/passthrough-remuxer */
"./src/remux/passthrough-remuxer.ts"),P=O(
/*! ../utils/logger */
"./src/utils/logger.ts");try{D=self.performance.now.bind(self.performance)}catch{P.logger.debug("Unable to use Performance API on this environment"),D=self.Date.now}var I=[{demux:Y.default,remux:R.default},{demux:U.default,remux:L.default},{demux:V.default,remux:L.default},{demux:N.default,remux:L.default}],M=function(){function C(y,w,E,S,u){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=y,this.typeSupported=w,this.config=E,this.vendor=S,this.id=u}var h=C.prototype;return h.configure=function(w){this.transmuxConfig=w,this.decrypter&&this.decrypter.reset()},h.push=function(w,E,S,u){var d=this,c=S.transmuxing;c.executeStart=D();var p=new Uint8Array(w),x=this.currentTransmuxState,T=this.transmuxConfig;u&&(this.currentTransmuxState=u);var k=u||x,H=k.contiguous,F=k.discontinuity,G=k.trackSwitch,K=k.accurateTimeOffset,$=k.timeOffset,Z=k.initSegmentChange,te=T.audioCodec,Q=T.videoCodec,re=T.defaultInitPts,se=T.duration,ce=T.initSegmentData,ue=function _(C,h){var y=null;return C.byteLength>0&&null!=h&&null!=h.key&&null!==h.iv&&null!=h.method&&(y=h),y}(p,E);if(ue&&"AES-128"===ue.method){var he=this.getDecrypter();if(!he.isSync())return this.decryptionPromise=he.webCryptoDecrypt(p,ue.key.buffer,ue.iv.buffer).then(function(it){var ct=d.push(it,null,S);return d.decryptionPromise=null,ct}),this.decryptionPromise;var be=he.softwareDecrypt(p,ue.key.buffer,ue.iv.buffer);if(S.part>-1&&(be=he.flush()),!be)return c.executeEnd=D(),m(S);p=new Uint8Array(be)}var Se=this.needsProbing(F,G);Se&&this.configureTransmuxer(p),(F||G||Z||Se)&&this.resetInitSegment(ce,te,Q,se,E),(F||Z||Se)&&this.resetInitialTimestamp(re),H||this.resetContiguity();var De=this.transmux(p,ue,$,K,S),Me=this.currentTransmuxState;return Me.contiguous=!0,Me.discontinuity=!1,Me.trackSwitch=!1,c.executeEnd=D(),De},h.flush=function(w){var E=this,S=w.transmuxing;S.executeStart=D();var u=this.decrypter,d=this.currentTransmuxState,c=this.decryptionPromise;if(c)return c.then(function(){return E.flush(w)});var p=[],x=d.timeOffset;if(u){var T=u.flush();T&&p.push(this.push(T,null,w))}var k=this.demuxer;if(!k||!this.remuxer)return this.observer.emit(W.Events.ERROR,W.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),S.executeEnd=D(),[m(w)];var F=k.flush(x);return v(F)?F.then(function(G){return E.flushRemux(p,G,w),p}):(this.flushRemux(p,F,w),p)},h.flushRemux=function(w,E,S){var u=E.audioTrack,d=E.videoTrack,c=E.id3Track,p=E.textTrack,x=this.currentTransmuxState,T=x.accurateTimeOffset,k=x.timeOffset;P.logger.log("[transmuxer.ts]: Flushed fragment "+S.sn+(S.part>-1?" p: "+S.part:"")+" of level "+S.level);var H=this.remuxer.remux(u,d,c,p,k,T,!0,this.id);w.push({remuxResult:H,chunkMeta:S}),S.transmuxing.executeEnd=D()},h.resetInitialTimestamp=function(w){var E=this.demuxer,S=this.remuxer;!E||!S||(E.resetTimeStamp(w),S.resetTimeStamp(w))},h.resetContiguity=function(){var w=this.demuxer,E=this.remuxer;!w||!E||(w.resetContiguity(),E.resetNextTimestamp())},h.resetInitSegment=function(w,E,S,u,d){var c=this.demuxer,p=this.remuxer;!c||!p||(c.resetInitSegment(w,E,S,u),p.resetInitSegment(w,E,S,d))},h.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},h.transmux=function(w,E,S,u,d){return E&&"SAMPLE-AES"===E.method?this.transmuxSampleAes(w,E,S,u,d):this.transmuxUnencrypted(w,S,u,d)},h.transmuxUnencrypted=function(w,E,S,u){var d=this.demuxer.demux(w,E,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(d.audioTrack,d.videoTrack,d.id3Track,d.textTrack,E,S,!1,this.id),chunkMeta:u}},h.transmuxSampleAes=function(w,E,S,u,d){var c=this;return this.demuxer.demuxSampleAes(w,E,S).then(function(p){return{remuxResult:c.remuxer.remux(p.audioTrack,p.videoTrack,p.id3Track,p.textTrack,S,u,!1,c.id),chunkMeta:d}})},h.configureTransmuxer=function(w){for(var c,E=this.config,S=this.observer,u=this.typeSupported,d=this.vendor,p=0,x=I.length;p<x;p++)if(I[p].demux.probe(w)){c=I[p];break}c||(P.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),c={demux:Y.default,remux:R.default});var T=this.demuxer,k=this.remuxer,H=c.remux,F=c.demux;(!k||!(k instanceof H))&&(this.remuxer=new H(S,E,u,d)),(!T||!(T instanceof F))&&(this.demuxer=new F(S,E,u),this.probe=F.probe)},h.needsProbing=function(w,E){return!this.demuxer||!this.remuxer||w||E},h.getDecrypter=function(){var w=this.decrypter;return w||(w=this.decrypter=new z.default(this.config)),w},C}(),m=function(h){return{remuxResult:{},chunkMeta:h}};function v(C){return"then"in C&&C.then instanceof Function}var f=function(h,y,w,E,S){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=h,this.videoCodec=y,this.initSegmentData=w,this.duration=E,this.defaultInitPts=S},b=function(h,y,w,E,S,u){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=h,this.contiguous=y,this.accurateTimeOffset=w,this.trackSwitch=E,this.timeOffset=S,this.initSegmentChange=u}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
                  !*** ./src/demux/tsdemuxer.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>C});var W=O(
/*! ./adts */
"./src/demux/adts.ts"),B=O(
/*! ./mpegaudio */
"./src/demux/mpegaudio.ts"),z=O(
/*! ./exp-golomb */
"./src/demux/exp-golomb.ts"),V=O(
/*! ./sample-aes */
"./src/demux/sample-aes.ts"),Y=O(
/*! ../events */
"./src/events.ts"),U=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),N=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),L=O(
/*! ../errors */
"./src/errors.ts"),R=O(
/*! ../types/demuxer */
"./src/types/demuxer.ts");function P(){return P=Object.assign?Object.assign.bind():function(h){for(var y=1;y<arguments.length;y++){var w=arguments[y];for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}return h},P.apply(this,arguments)}var D=188;function M(h,y,w,E){return{key:h,frame:!1,pts:y,dts:w,units:[],debug:E,length:0}}function _(h,y){return((31&h[y+1])<<8)+h[y+2]}function m(h,y){return(31&h[y+10])<<8|h[y+11]}function v(h,y,w,E){var S={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},d=y+3+((15&h[y+1])<<8|h[y+2])-4;for(y+=12+((15&h[y+10])<<8|h[y+11]);y<d;){var p=_(h,y);switch(h[y]){case 207:if(!E){N.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===S.audio&&(S.audio=p);break;case 21:-1===S.id3&&(S.id3=p);break;case 219:if(!E){N.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===S.avc&&(S.avc=p);break;case 3:case 4:!0!==w.mpeg&&!0!==w.mp3?N.logger.log("MPEG audio found, not supported in this browser"):-1===S.audio&&(S.audio=p,S.segmentCodec="mp3");break;case 36:N.logger.warn("Unsupported HEVC stream type found")}y+=5+((15&h[y+3])<<8|h[y+4])}return S}function f(h){var w,E,S,u,d,y=0,c=h.data;if(!h||0===h.size)return null;for(;c[0].length<19&&c.length>1;){var p=new Uint8Array(c[0].length+c[1].length);p.set(c[0]),p.set(c[1],c[0].length),c[0]=p,c.splice(1,1)}if(1===((w=c[0])[0]<<16)+(w[1]<<8)+w[2]){if((E=(w[4]<<8)+w[5])&&E>h.size-6)return null;var T=w[7];192&T&&(u=536870912*(14&w[9])+4194304*(255&w[10])+16384*(254&w[11])+128*(255&w[12])+(254&w[13])/2,64&T?u-(d=536870912*(14&w[14])+4194304*(255&w[15])+16384*(254&w[16])+128*(255&w[17])+(254&w[18])/2)>54e5&&(N.logger.warn(Math.round((u-d)/9e4)+"s delta between PTS and DTS, align them"),u=d):d=u);var k=(S=w[8])+9;if(h.size<=k)return null;h.size-=k;for(var H=new Uint8Array(h.size),F=0,G=c.length;F<G;F++){var K=(w=c[F]).byteLength;if(k){if(k>K){k-=K;continue}w=w.subarray(k),K-=k,k=0}H.set(w,y),y+=K}return E&&(E-=S+3),{data:H,pts:u,dts:d,len:E}}return null}function b(h,y){if(h.units.length&&h.frame){if(void 0===h.pts){var w=y.samples,E=w.length;if(!E)return void y.dropped++;var S=w[E-1];h.pts=S.pts,h.dts=S.dts}y.samples.push(h)}h.debug.length&&N.logger.log(h.pts+"/"+h.dts+":"+h.debug)}const C=function(){function h(w,E,S){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=w,this.config=E,this.typeSupported=S}h.probe=function(E){var S=h.syncOffset(E);return S>0&&N.logger.warn("MPEG2-TS detected but first sync word found @ offset "+S),-1!==S},h.syncOffset=function(E){for(var S=E.length,u=Math.min(940,E.length-D)+1,d=0;d<u;){for(var c=!1,p=d;p<S&&71===E[p];p+=D)if(!c&&0===_(E,p)&&(c=!0),c&&p+D>u)return d;d++}return-1},h.createTrack=function(E,S){return{container:"video"===E||"audio"===E?"video/mp2t":void 0,type:E,id:U.RemuxerTrackIdConfig[E],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===E?S:void 0}};var y=h.prototype;return y.resetInitSegment=function(E,S,u,d){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=h.createTrack("video"),this._audioTrack=h.createTrack("audio",d),this._id3Track=h.createTrack("id3"),this._txtTrack=h.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=S,this.videoCodec=u,this._duration=d},y.resetTimeStamp=function(){},y.resetContiguity=function(){var E=this._audioTrack,S=this._avcTrack,u=this._id3Track;E&&(E.pesData=null),S&&(S.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},y.demux=function(E,S,u,d){void 0===u&&(u=!1),void 0===d&&(d=!1),u||(this.sampleAes=null);var c,p=this._avcTrack,x=this._audioTrack,T=this._id3Track,k=this._txtTrack,H=p.pid,F=p.pesData,G=x.pid,K=T.pid,$=x.pesData,Z=T.pesData,te=null,Q=this.pmtParsed,re=this._pmtId,se=E.length;if(this.remainderData&&(se=(E=(0,U.appendUint8Array)(this.remainderData,E)).length,this.remainderData=null),se<D&&!d)return this.remainderData=E,{audioTrack:x,videoTrack:p,id3Track:T,textTrack:k};var ce=Math.max(0,h.syncOffset(E));(se-=(se-ce)%D)<E.byteLength&&!d&&(this.remainderData=new Uint8Array(E.buffer,se,E.buffer.byteLength-se));for(var ue=0,he=ce;he<se;he+=D)if(71===E[he]){var be=!!(64&E[he+1]),Re=_(E,he),De=void 0;if((48&E[he+3])>>4>1){if((De=he+5+E[he+4])===he+D)continue}else De=he+4;switch(Re){case H:be&&(F&&(c=f(F))&&this.parseAVCPES(p,k,c,!1),F={data:[],size:0}),F&&(F.data.push(E.subarray(De,he+D)),F.size+=he+D-De);break;case G:if(be){if($&&(c=f($)))switch(x.segmentCodec){case"aac":this.parseAACPES(x,c);break;case"mp3":this.parseMPEGPES(x,c)}$={data:[],size:0}}$&&($.data.push(E.subarray(De,he+D)),$.size+=he+D-De);break;case K:be&&(Z&&(c=f(Z))&&this.parseID3PES(T,c),Z={data:[],size:0}),Z&&(Z.data.push(E.subarray(De,he+D)),Z.size+=he+D-De);break;case 0:be&&(De+=E[De]+1),re=this._pmtId=m(E,De);break;case re:be&&(De+=E[De]+1);var Me=v(E,De,this.typeSupported,u);(H=Me.avc)>0&&(p.pid=H),(G=Me.audio)>0&&(x.pid=G,x.segmentCodec=Me.segmentCodec),(K=Me.id3)>0&&(T.pid=K),null!==te&&!Q&&(N.logger.warn("MPEG-TS PMT found at "+he+" after unknown PID '"+te+"'. Backtracking to sync byte @"+ce+" to parse all TS packets."),te=null,he=ce-188),Q=this.pmtParsed=!0;break;case 17:case 8191:break;default:te=Re}}else ue++;ue>0&&this.observer.emit(Y.Events.ERROR,Y.Events.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ue+" TS packet/s that do not start with 0x47"}),p.pesData=F,x.pesData=$,T.pesData=Z;var it={audioTrack:x,videoTrack:p,id3Track:T,textTrack:k};return d&&this.extractRemainingSamples(it),it},y.flush=function(){var S,E=this.remainderData;return this.remainderData=null,S=E?this.demux(E,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(S),this.sampleAes?this.decrypt(S,this.sampleAes):S},y.extractRemainingSamples=function(E){var k,S=E.audioTrack,u=E.videoTrack,d=E.id3Track,c=E.textTrack,p=u.pesData,x=S.pesData,T=d.pesData;if(p&&(k=f(p))?(this.parseAVCPES(u,c,k,!0),u.pesData=null):u.pesData=p,x&&(k=f(x))){switch(S.segmentCodec){case"aac":this.parseAACPES(S,k);break;case"mp3":this.parseMPEGPES(S,k)}S.pesData=null}else null!=x&&x.size&&N.logger.log("last AAC PES packet truncated,might overlap between fragments"),S.pesData=x;T&&(k=f(T))?(this.parseID3PES(d,k),d.pesData=null):d.pesData=T},y.demuxSampleAes=function(E,S,u){var d=this.demux(E,u,!0,!this.config.progressive),c=this.sampleAes=new V.default(this.observer,this.config,S);return this.decrypt(d,c)},y.decrypt=function(E,S){return new Promise(function(u){var d=E.audioTrack,c=E.videoTrack;d.samples&&"aac"===d.segmentCodec?S.decryptAacSamples(d.samples,0,function(){c.samples?S.decryptAvcSamples(c.samples,0,0,function(){u(E)}):u(E)}):c.samples&&S.decryptAvcSamples(c.samples,0,0,function(){u(E)})})},y.destroy=function(){this._duration=0},y.parseAVCPES=function(E,S,u,d){var k,c=this,p=this.parseAVCNALu(E,u.data),T=this.avcSample,H=!1;u.data=null,T&&p.length&&!E.audFound&&(b(T,E),T=this.avcSample=M(!1,u.pts,u.dts,"")),p.forEach(function(F){switch(F.type){case 1:k=!0,T||(T=c.avcSample=M(!0,u.pts,u.dts,"")),T.frame=!0;var G=F.data;if(H&&G.length>4){var K=new z.default(G).readSliceType();(2===K||4===K||7===K||9===K)&&(T.key=!0)}break;case 5:k=!0,T||(T=c.avcSample=M(!0,u.pts,u.dts,"")),T.key=!0,T.frame=!0;break;case 6:k=!0,(0,U.parseSEIMessageFromNALu)(F.data,1,u.pts,S.samples);break;case 7:if(k=!0,H=!0,!E.sps){var Z=new z.default(F.data).readSPS();E.width=Z.width,E.height=Z.height,E.pixelRatio=Z.pixelRatio,E.sps=[F.data],E.duration=c._duration;for(var te=F.data.subarray(1,4),Q="avc1.",re=0;re<3;re++){var se=te[re].toString(16);se.length<2&&(se="0"+se),Q+=se}E.codec=Q}break;case 8:k=!0,E.pps||(E.pps=[F.data]);break;case 9:k=!1,E.audFound=!0,T&&b(T,E),T=c.avcSample=M(!1,u.pts,u.dts,"");break;case 12:k=!0;break;default:k=!1,T&&(T.debug+="unknown NAL "+F.type+" ")}T&&k&&T.units.push(F)}),d&&T&&(b(T,E),this.avcSample=null)},y.getLastNalUnit=function(E){var S,d,u=this.avcSample;if((!u||0===u.units.length)&&(u=E[E.length-1]),null!==(S=u)&&void 0!==S&&S.units){var c=u.units;d=c[c.length-1]}return d},y.parseAVCNALu=function(E,S){var T,k,u=S.byteLength,d=E.naluState||0,c=d,p=[],x=0,F=-1,G=0;for(-1===d&&(F=0,G=31&S[0],d=0,x=1);x<u;)if(T=S[x++],d)if(1!==d)if(T)if(1===T){if(F>=0){var K={data:S.subarray(F,x-d-1),type:G};p.push(K)}else{var $=this.getLastNalUnit(E.samples);if($&&(c&&x<=4-c&&$.state&&($.data=$.data.subarray(0,$.data.byteLength-c)),(k=x-d-1)>0)){var Z=new Uint8Array($.data.byteLength+k);Z.set($.data,0),Z.set(S.subarray(0,k),$.data.byteLength),$.data=Z,$.state=0}}x<u?(F=x,G=31&S[x],d=0):d=-1}else d=0;else d=3;else d=T?0:2;else d=T?0:1;if(F>=0&&d>=0){var te={data:S.subarray(F,u),type:G,state:d};p.push(te)}if(0===p.length){var Q=this.getLastNalUnit(E.samples);if(Q){var re=new Uint8Array(Q.data.byteLength+S.byteLength);re.set(Q.data,0),re.set(S,Q.data.byteLength),Q.data=re}}return E.naluState=d,p},y.parseAACPES=function(E,S){var H,F,G,K,$,u=0,d=this.aacOverFlow,c=S.data;if(d){this.aacOverFlow=null;var p=d.missing,x=d.sample.unit.byteLength;if(-1===p){var T=new Uint8Array(x+c.byteLength);T.set(d.sample.unit,0),T.set(c,x),c=T}else{var k=x-p;d.sample.unit.set(c.subarray(0,p),k),E.samples.push(d.sample),u=d.missing}}for(H=u,F=c.length;H<F-1&&!W.isHeader(c,H);H++);if(H===u||(H<F-1?(G="AAC PES did not start with ADTS header,offset:"+H,K=!1):(G="no ADTS header found in AAC PES",K=!0),N.logger.warn("parsing error:"+G),this.observer.emit(Y.Events.ERROR,Y.Events.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:K,reason:G}),!K)){if(W.initTrackConfig(E,this.observer,c,H,this.audioCodec),void 0!==S.pts)$=S.pts;else{if(!d)return void N.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var Z=W.getFrameDuration(E.samplerate);$=d.sample.pts+Z}for(var Q,te=0;H<F;){if(H+=(Q=W.appendFrame(E,c,H,$,te)).length,Q.missing){this.aacOverFlow=Q;break}for(te++;H<F-1&&!W.isHeader(c,H);H++);}}},y.parseMPEGPES=function(E,S){var u=S.data,d=u.length,c=0,p=0,x=S.pts;if(void 0!==x)for(;p<d;)if(B.isHeader(u,p)){var T=B.appendFrame(E,u,p,x,c);if(!T)break;p+=T.length,c++}else p++;else N.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},y.parseID3PES=function(E,S){if(void 0!==S.pts){var u=P({},S,{type:this._avcTrack?R.MetadataSchema.emsg:R.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});E.samples.push(u)}else N.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},h}()},"./src/demux/webworkify-webpack.js":
/*!*****************************************!*\
                  !*** ./src/demux/webworkify-webpack.js ***!
                  \*****************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>D});var B=function(){var M=ENTRY_MODULE,_={},m=function f(b){var C=_[b];if(void 0!==C)return C.exports;var h=_[b]={exports:{}};return M[b].call(h.exports,h,h.exports,f),h.exports};m.m=M,m.n=function(f){var b=f&&f.__esModule?function(){return f.default}:function(){return f};return m.d(b,{a:b}),b},m.d=function(f,b){for(var C in b)m.o(b,C)&&!m.o(f,C)&&Object.defineProperty(f,C,{enumerable:!0,get:b[C]})},m.o=function(f,b){return Object.prototype.hasOwnProperty.call(f,b)},m.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var v=m(ENTRY_MODULE);return v.default||v}.toString().split("ENTRY_MODULE"),z="[\\.|\\-|\\+|\\w|/|@]+",V="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+z+").*?\\)";function Y(I){return(I+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function U(I){return!isNaN(1*I)}function N(I,M,_){var m={};m[_]=[];var v=M.toString().replace(/^"[^"]+"/,"function"),f=v.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||v.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!f)return m;for(var h,b=f[1],C=new RegExp("(\\\\n|\\W)"+Y(b)+V,"g");h=C.exec(v);)"dll-reference"!==h[3]&&m[_].push(h[3]);for(C=new RegExp("\\("+Y(b)+'\\("(dll-reference\\s('+z+'))"\\)\\)'+V,"g");h=C.exec(v);)I[h[2]]||(m[_].push(h[1]),I[h[2]]=O(h[1]).m),m[h[2]]=m[h[2]]||[],m[h[2]].push(h[4]);for(var y=Object.keys(m),w=0;w<y.length;w++)for(var E=0;E<m[y[w]].length;E++)U(m[y[w]][E])&&(m[y[w]][E]=1*m[y[w]][E]);return m}function L(I){return Object.keys(I).reduce(function(_,m){return _||I[m].length>0},!1)}function P(I,M,_,m){var v=I[m].map(function(f){return'"'+f+'": '+M[m][f].toString().replace(/^"[^"]+"/,"function")}).join(",");return B[0]+"{"+v+"}"+B[1]+'"'+_+'"'+B[2]}function D(I,M){var _={main:O.m},m=(M=M||{}).all?{main:Object.keys(_.main)}:function R(I,M){for(var _={main:[M]},m={main:[]},v={main:{}};L(_);)for(var f=Object.keys(_),b=0;b<f.length;b++){var C=f[b],y=_[C].pop();if(v[C]=v[C]||{},!v[C][y]&&I[C][y]){v[C][y]=!0,m[C]=m[C]||[],m[C].push(y);for(var w=N(I,I[C][y],C),E=Object.keys(w),S=0;S<E.length;S++)_[E[S]]=_[E[S]]||[],_[E[S]]=_[E[S]].concat(w[E[S]])}}return m}(_,I),v="";Object.keys(m).filter(function(y){return"main"!==y}).forEach(function(y){for(var w=0;m[y][w];)w++;m[y].push(w),_[y][w]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",v=v+"var "+y+" = ("+P(m,_,w,modules)+")();\n"}),v=v+"new (("+P(m,_,I,"main")+")())(self);";var f=new window.Blob([v],{type:"text/javascript"}),C=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(f),h=new window.Worker(C);return h.objectURL=C,h}},"./src/errors.ts":
/*!***********************!*\
                  !*** ./src/errors.ts ***!
                  \***********************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{ErrorDetails:()=>B,ErrorTypes:()=>W});var W=(()=>{return(z=W||(W={})).NETWORK_ERROR="networkError",z.MEDIA_ERROR="mediaError",z.KEY_SYSTEM_ERROR="keySystemError",z.MUX_ERROR="muxError",z.OTHER_ERROR="otherError",W;var z})(),B=(()=>{return(z=B||(B={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",z.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",z.KEY_SYSTEM_NO_SESSION="keySystemNoSession",z.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",z.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",z.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",z.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",z.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",z.MANIFEST_LOAD_ERROR="manifestLoadError",z.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",z.MANIFEST_PARSING_ERROR="manifestParsingError",z.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",z.LEVEL_EMPTY_ERROR="levelEmptyError",z.LEVEL_LOAD_ERROR="levelLoadError",z.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",z.LEVEL_SWITCH_ERROR="levelSwitchError",z.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",z.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",z.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",z.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",z.FRAG_LOAD_ERROR="fragLoadError",z.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",z.FRAG_DECRYPT_ERROR="fragDecryptError",z.FRAG_PARSING_ERROR="fragParsingError",z.REMUX_ALLOC_ERROR="remuxAllocError",z.KEY_LOAD_ERROR="keyLoadError",z.KEY_LOAD_TIMEOUT="keyLoadTimeOut",z.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",z.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",z.BUFFER_APPEND_ERROR="bufferAppendError",z.BUFFER_APPENDING_ERROR="bufferAppendingError",z.BUFFER_STALLED_ERROR="bufferStalledError",z.BUFFER_FULL_ERROR="bufferFullError",z.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",z.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",z.INTERNAL_EXCEPTION="internalException",z.INTERNAL_ABORTED="aborted",z.UNKNOWN="unknown",B;var z})()},"./src/events.ts":
/*!***********************!*\
                  !*** ./src/events.ts ***!
                  \***********************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{Events:()=>W});var W=(()=>{return(B=W||(W={})).MEDIA_ATTACHING="hlsMediaAttaching",B.MEDIA_ATTACHED="hlsMediaAttached",B.MEDIA_DETACHING="hlsMediaDetaching",B.MEDIA_DETACHED="hlsMediaDetached",B.BUFFER_RESET="hlsBufferReset",B.BUFFER_CODECS="hlsBufferCodecs",B.BUFFER_CREATED="hlsBufferCreated",B.BUFFER_APPENDING="hlsBufferAppending",B.BUFFER_APPENDED="hlsBufferAppended",B.BUFFER_EOS="hlsBufferEos",B.BUFFER_FLUSHING="hlsBufferFlushing",B.BUFFER_FLUSHED="hlsBufferFlushed",B.MANIFEST_LOADING="hlsManifestLoading",B.MANIFEST_LOADED="hlsManifestLoaded",B.MANIFEST_PARSED="hlsManifestParsed",B.LEVEL_SWITCHING="hlsLevelSwitching",B.LEVEL_SWITCHED="hlsLevelSwitched",B.LEVEL_LOADING="hlsLevelLoading",B.LEVEL_LOADED="hlsLevelLoaded",B.LEVEL_UPDATED="hlsLevelUpdated",B.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",B.LEVELS_UPDATED="hlsLevelsUpdated",B.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",B.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",B.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",B.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",B.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",B.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",B.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",B.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",B.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",B.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",B.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",B.CUES_PARSED="hlsCuesParsed",B.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",B.INIT_PTS_FOUND="hlsInitPtsFound",B.FRAG_LOADING="hlsFragLoading",B.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",B.FRAG_LOADED="hlsFragLoaded",B.FRAG_DECRYPTED="hlsFragDecrypted",B.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",B.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",B.FRAG_PARSING_METADATA="hlsFragParsingMetadata",B.FRAG_PARSED="hlsFragParsed",B.FRAG_BUFFERED="hlsFragBuffered",B.FRAG_CHANGED="hlsFragChanged",B.FPS_DROP="hlsFpsDrop",B.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",B.ERROR="hlsError",B.DESTROYING="hlsDestroying",B.KEY_LOADING="hlsKeyLoading",B.KEY_LOADED="hlsKeyLoaded",B.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",B.BACK_BUFFER_REACHED="hlsBackBufferReached",W;var B})()},"./src/hls.ts":
/*!********************!*\
                  !*** ./src/hls.ts ***!
                  \********************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>w});var W=O(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),z=O(
/*! ./loader/playlist-loader */
"./src/loader/playlist-loader.ts"),V=O(
/*! ./controller/id3-track-controller */
"./src/controller/id3-track-controller.ts"),Y=O(
/*! ./controller/latency-controller */
"./src/controller/latency-controller.ts"),U=O(
/*! ./controller/level-controller */
"./src/controller/level-controller.ts"),N=O(
/*! ./controller/fragment-tracker */
"./src/controller/fragment-tracker.ts"),L=O(
/*! ./loader/key-loader */
"./src/loader/key-loader.ts"),R=O(
/*! ./controller/stream-controller */
"./src/controller/stream-controller.ts"),P=O(
/*! ./is-supported */
"./src/is-supported.ts"),D=O(
/*! ./utils/logger */
"./src/utils/logger.ts"),I=O(
/*! ./config */
"./src/config.ts"),M=O(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),m=O(
/*! ./events */
"./src/events.ts"),v=O(
/*! ./errors */
"./src/errors.ts"),f=O(
/*! ./types/level */
"./src/types/level.ts");function b(E,S){for(var u=0;u<S.length;u++){var d=S[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(E,h(d.key),d)}}function h(E){var S=function y(E,S){if("object"!=typeof E||null===E)return E;var u=E[Symbol.toPrimitive];if(void 0!==u){var d=u.call(E,S||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===S?String:Number)(E)}(E,"string");return"symbol"==typeof S?S:String(S)}var w=function(){function E(u){void 0===u&&(u={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new M.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var d=this.config=(0,I.mergeConfig)(E.DefaultConfig,u);this.userConfig=u,(0,D.enableLogs)(d.debug,"Hls instance"),this._autoLevelCapping=-1,d.progressive&&(0,I.enableStreamingMode)(d);var p=d.bufferController,x=d.capLevelController,T=d.fpsController,k=this.abrController=new(0,d.abrController)(this),H=this.bufferController=new p(this),F=this.capLevelController=new x(this),G=new T(this),K=new z.default(this),$=new V.default(this),Z=this.levelController=new U.default(this),te=new N.FragmentTracker(this),Q=new L.default(this.config),re=this.streamController=new R.default(this,te,Q);F.setStreamController(re),G.setStreamController(re);var se=[K,Z,re];this.networkControllers=se;var ce=[k,H,F,G,$,te];this.audioTrackController=this.createController(d.audioTrackController,se);var ue=d.audioStreamController;ue&&se.push(new ue(this,te,Q)),this.subtitleTrackController=this.createController(d.subtitleTrackController,se);var he=d.subtitleStreamController;he&&se.push(new he(this,te,Q)),this.createController(d.timelineController,ce),Q.emeController=this.emeController=this.createController(d.emeController,ce),this.cmcdController=this.createController(d.cmcdController,ce),this.latencyController=this.createController(Y.default,ce),this.coreComponents=ce}E.isSupported=function(){return(0,P.isSupported)()};var S=E.prototype;return S.createController=function(d,c){if(d){var p=new d(this);return c&&c.push(p),p}return null},S.on=function(d,c,p){void 0===p&&(p=this),this._emitter.on(d,c,p)},S.once=function(d,c,p){void 0===p&&(p=this),this._emitter.once(d,c,p)},S.removeAllListeners=function(d){this._emitter.removeAllListeners(d)},S.off=function(d,c,p,x){void 0===p&&(p=this),this._emitter.off(d,c,p,x)},S.listeners=function(d){return this._emitter.listeners(d)},S.emit=function(d,c,p){return this._emitter.emit(d,c,p)},S.trigger=function(d,c){if(this.config.debug)return this.emit(d,d,c);try{return this.emit(d,d,c)}catch(p){D.logger.error("An internal error happened while handling event "+d+'. Error message: "'+p.message+'". Here is a stacktrace:',p),this.trigger(m.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:d,error:p})}return!1},S.listenerCount=function(d){return this._emitter.listenerCount(d)},S.destroy=function(){D.logger.log("destroy"),this.trigger(m.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(d){return d.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(d){return d.destroy()}),this.coreComponents.length=0},S.attachMedia=function(d){D.logger.log("attachMedia"),this._media=d,this.trigger(m.Events.MEDIA_ATTACHING,{media:d})},S.detachMedia=function(){D.logger.log("detachMedia"),this.trigger(m.Events.MEDIA_DETACHING,void 0),this._media=null},S.loadSource=function(d){this.stopLoad();var c=this.media,p=this.url,x=this.url=W.buildAbsoluteURL(self.location.href,d,{alwaysNormalize:!0});D.logger.log("loadSource:"+x),c&&p&&p!==x&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(c)),this.trigger(m.Events.MANIFEST_LOADING,{url:d})},S.startLoad=function(d){void 0===d&&(d=-1),D.logger.log("startLoad("+d+")"),this.networkControllers.forEach(function(c){c.startLoad(d)})},S.stopLoad=function(){D.logger.log("stopLoad"),this.networkControllers.forEach(function(d){d.stopLoad()})},S.swapAudioCodec=function(){D.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},S.recoverMediaError=function(){D.logger.log("recoverMediaError");var d=this._media;this.detachMedia(),d&&this.attachMedia(d)},S.removeLevel=function(d,c){void 0===c&&(c=0),this.levelController.removeLevel(d,c)},function C(E,S,u){S&&b(E.prototype,S),u&&b(E,u),Object.defineProperty(E,"prototype",{writable:!1})}(E,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(d){D.logger.log("set currentLevel:"+d),this.loadLevel=d,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(d){D.logger.log("set nextLevel:"+d),this.levelController.manualLevel=d,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(d){D.logger.log("set loadLevel:"+d),this.levelController.manualLevel=d}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(d){this.levelController.nextLoadLevel=d}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(d){D.logger.log("set firstLevel:"+d),this.levelController.firstLevel=d}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(d){D.logger.log("set startLevel:"+d),-1!==d&&(d=Math.max(d,this.minAutoLevel)),this.levelController.startLevel=d}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(d){var c=!!d;c!==this.config.capLevelToPlayerSize&&(c?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=c)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(d){this._autoLevelCapping!==d&&(D.logger.log("set autoLevelCapping:"+d),this._autoLevelCapping=d)}},{key:"bandwidthEstimate",get:function(){var d=this.abrController.bwEstimator;return d?d.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(d){f.HdcpLevels.indexOf(d)>-1&&(this._maxHdcpLevel=d)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var d=this.levels,c=this.config.minAutoBitrate;if(!d)return 0;for(var p=d.length,x=0;x<p;x++)if(d[x].maxBitrate>=c)return x;return 0}},{key:"maxAutoLevel",get:function(){var x,d=this.levels,c=this.autoLevelCapping,p=this.maxHdcpLevel;if(x=-1===c&&d&&d.length?d.length-1:c,p)for(var T=x;T--;){var k=d[T].attrs["HDCP-LEVEL"];if(k&&k<=p)return T}return x}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(d){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,d)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var d=this.audioTrackController;return d?d.audioTracks:[]}},{key:"audioTrack",get:function(){var d=this.audioTrackController;return d?d.audioTrack:-1},set:function(d){var c=this.audioTrackController;c&&(c.audioTrack=d)}},{key:"subtitleTracks",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTrack:-1},set:function(d){var c=this.subtitleTrackController;c&&(c.subtitleTrack=d)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var d=this.subtitleTrackController;return!!d&&d.subtitleDisplay},set:function(d){var c=this.subtitleTrackController;c&&(c.subtitleDisplay=d)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(d){this.config.lowLatencyMode=d}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return m.Events}},{key:"ErrorTypes",get:function(){return v.ErrorTypes}},{key:"ErrorDetails",get:function(){return v.ErrorDetails}},{key:"DefaultConfig",get:function(){return E.defaultConfig?E.defaultConfig:I.hlsDefaultConfig},set:function(d){E.defaultConfig=d}}]),E}();w.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
                  !*** ./src/is-supported.ts ***!
                  \*****************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{changeTypeSupported:()=>V,isSupported:()=>z});var W=O(
/*! ./utils/mediasource-helper */
"./src/utils/mediasource-helper.ts");function B(){return self.SourceBuffer||self.WebKitSourceBuffer}function z(){var Y=(0,W.getMediaSource)();if(!Y)return!1;var U=B();return!(!Y||"function"!=typeof Y.isTypeSupported||!Y.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||U&&(!U.prototype||"function"!=typeof U.prototype.appendBuffer||"function"!=typeof U.prototype.remove))}function V(){var Y,U=B();return"function"==typeof(null==U||null===(Y=U.prototype)||void 0===Y?void 0:Y.changeType)}},"./src/loader/date-range.ts":
/*!**********************************!*\
                  !*** ./src/loader/date-range.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{DateRange:()=>P,DateRangeAttribute:()=>R});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts"),z=O(
/*! ../utils/logger */
"./src/utils/logger.ts");function V(){return V=Object.assign?Object.assign.bind():function(D){for(var I=1;I<arguments.length;I++){var M=arguments[I];for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(D[_]=M[_])}return D},V.apply(this,arguments)}function Y(D,I){for(var M=0;M<I.length;M++){var _=I[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,N(_.key),_)}}function N(D){var I=function L(D,I){if("object"!=typeof D||null===D)return D;var M=D[Symbol.toPrimitive];if(void 0!==M){var _=M.call(D,I||"default");if("object"!=typeof _)return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===I?String:Number)(D)}(D,"string");return"symbol"==typeof I?I:String(I)}var R=(()=>{return(D=R||(R={})).ID="ID",D.CLASS="CLASS",D.START_DATE="START-DATE",D.DURATION="DURATION",D.END_DATE="END-DATE",D.END_ON_NEXT="END-ON-NEXT",D.PLANNED_DURATION="PLANNED-DURATION",D.SCTE35_OUT="SCTE35-OUT",D.SCTE35_IN="SCTE35-IN",R;var D})(),P=function(){function D(I,M){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,M){var _=M.attr;for(var m in _)if(Object.prototype.hasOwnProperty.call(I,m)&&I[m]!==_[m]){z.logger.warn('DATERANGE tag attribute: "'+m+'" does not match for tags with ID: "'+I.ID+'"'),this._badValueForSameId=m;break}I=V(new B.AttrList({}),_,I)}if(this.attr=I,this._startDate=new Date(I[R.START_DATE]),R.END_DATE in this.attr){var v=new Date(this.attr[R.END_DATE]);(0,W.isFiniteNumber)(v.getTime())&&(this._endDate=v)}}return function U(D,I,M){I&&Y(D.prototype,I),M&&Y(D,M),Object.defineProperty(D,"prototype",{writable:!1})}(D,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var M=this.duration;return null!==M?new Date(this._startDate.getTime()+1e3*M):null}},{key:"duration",get:function(){if(R.DURATION in this.attr){var M=this.attr.decimalFloatingPoint(R.DURATION);if((0,W.isFiniteNumber)(M))return M}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return R.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(R.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(R.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,W.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),D}()},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
                  !*** ./src/loader/fragment-loader.ts ***!
                  \***************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{LoadError:()=>M,default:()=>D});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../errors */
"./src/errors.ts");function V(_){var m="function"==typeof Map?new Map:void 0;return V=function(f){if(null===f||!function N(_){return-1!==Function.toString.call(_).indexOf("[native code]")}(f))return f;if("function"!=typeof f)throw new TypeError("Super expression must either be null or a function");if(typeof m<"u"){if(m.has(f))return m.get(f);m.set(f,b)}function b(){return Y(f,arguments,R(this).constructor)}return b.prototype=Object.create(f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),L(b,f)},V(_)}function Y(_,m,v){return(Y=function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(b,C,h){var y=[null];y.push.apply(y,C);var E=new(Function.bind.apply(b,y));return h&&L(E,h.prototype),E}).apply(null,arguments)}function L(_,m){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,b){return f.__proto__=b,f})(_,m)}function R(_){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)})(_)}var P=Math.pow(2,17),D=function(){function _(v){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=v}var m=_.prototype;return m.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},m.abort=function(){this.loader&&this.loader.abort()},m.load=function(f,b){var C=this,h=f.url;if(!h)return Promise.reject(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:f,networkDetails:null},"Fragment does not have a "+(h?"part list":"url")));this.abort();var y=this.config,w=y.fLoader,E=y.loader;return new Promise(function(S,u){C.loader&&C.loader.destroy();var d=C.loader=f.loader=w?new w(y):new E(y),c=I(f),p={timeout:y.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:y.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===f.sn?1/0:P};f.stats=d.stats,d.load(c,p,{onSuccess:function(T,k,H,F){C.resetLoader(f,d);var G=T.data;H.resetIV&&f.decryptdata&&(f.decryptdata.iv=new Uint8Array(G.slice(0,16)),G=G.slice(16)),S({frag:f,part:null,payload:G,networkDetails:F})},onError:function(T,k,H){C.resetLoader(f,d),u(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:f,response:T,networkDetails:H}))},onAbort:function(T,k,H){C.resetLoader(f,d),u(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:f,networkDetails:H}))},onTimeout:function(T,k,H){C.resetLoader(f,d),u(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:f,networkDetails:H}))},onProgress:function(T,k,H,F){b&&b({frag:f,part:null,payload:H,networkDetails:F})}})})},m.loadPart=function(f,b,C){var h=this;this.abort();var y=this.config,w=y.fLoader,E=y.loader;return new Promise(function(S,u){h.loader&&h.loader.destroy();var d=h.loader=f.loader=w?new w(y):new E(y),c=I(f,b),p={timeout:y.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:y.fragLoadingMaxRetryTimeout,highWaterMark:P};b.stats=d.stats,d.load(c,p,{onSuccess:function(T,k,H,F){h.resetLoader(f,d),h.updateStatsFromPart(f,b);var G={frag:f,part:b,payload:T.data,networkDetails:F};C(G),S(G)},onError:function(T,k,H){h.resetLoader(f,d),u(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:f,part:b,response:T,networkDetails:H}))},onAbort:function(T,k,H){f.stats.aborted=b.stats.aborted,h.resetLoader(f,d),u(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:f,part:b,networkDetails:H}))},onTimeout:function(T,k,H){h.resetLoader(f,d),u(new M({type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:f,part:b,networkDetails:H}))}})})},m.updateStatsFromPart=function(f,b){var C=f.stats,h=b.stats,y=h.total;if(C.loaded+=h.loaded,y){var w=Math.round(f.duration/b.duration),E=Math.min(Math.round(C.loaded/y),w),u=(w-E)*Math.round(C.loaded/E);C.total=C.loaded+u}else C.total=Math.max(C.loaded,C.total);var d=C.loading,c=h.loading;d.start?d.first+=c.first-c.start:(d.start=c.start,d.first=c.first),d.end=c.end},m.resetLoader=function(f,b){f.loader=null,this.loader===b&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),b.destroy()},_}();function I(_,m){void 0===m&&(m=null);var v=m||_,f={frag:_,part:m,responseType:"arraybuffer",url:v.url,headers:{},rangeStart:0,rangeEnd:0},b=v.byteRangeStartOffset,C=v.byteRangeEndOffset;if((0,W.isFiniteNumber)(b)&&(0,W.isFiniteNumber)(C)){var h,y=b,w=C;if("initSegment"===_.sn&&"AES-128"===(null===(h=_.decryptdata)||void 0===h?void 0:h.method)){var E=C-b;E%16&&(w=C+(16-E%16)),0!==b&&(f.resetIV=!0,y=b-16)}f.rangeStart=y,f.rangeEnd=w}return f}var M=function(_){function m(v){for(var f,b=arguments.length,C=new Array(b>1?b-1:0),h=1;h<b;h++)C[h-1]=arguments[h];return(f=_.call.apply(_,[this].concat(C))||this).data=void 0,f.data=v,f}return function z(_,m){_.prototype=Object.create(m.prototype),_.prototype.constructor=_,L(_,m)}(m,_),m}(V(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
                  !*** ./src/loader/fragment.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{BaseSegment:()=>I,ElementaryStreamTypes:()=>D,Fragment:()=>M,Part:()=>_});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),V=O(
/*! ./load-stats */
"./src/loader/load-stats.ts");function Y(m,v){m.prototype=Object.create(v.prototype),m.prototype.constructor=m,U(m,v)}function U(m,v){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,C){return b.__proto__=C,b})(m,v)}function N(m,v){for(var f=0;f<v.length;f++){var b=v[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,R(b.key),b)}}function L(m,v,f){return v&&N(m.prototype,v),f&&N(m,f),Object.defineProperty(m,"prototype",{writable:!1}),m}function R(m){var v=function P(m,v){if("object"!=typeof m||null===m)return m;var f=m[Symbol.toPrimitive];if(void 0!==f){var b=f.call(m,v||"default");if("object"!=typeof b)return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(m)}(m,"string");return"symbol"==typeof v?v:String(v)}var D=(()=>{return(m=D||(D={})).AUDIO="audio",m.VIDEO="video",m.AUDIOVIDEO="audiovideo",D;var m})(),I=function(){function m(f){var b;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((b={})[D.AUDIO]=null,b[D.VIDEO]=null,b[D.AUDIOVIDEO]=null,b),this.baseurl=f}return m.prototype.setByteRange=function(b,C){var h=b.split("@",2),y=[];y[0]=1===h.length?C?C.byteRangeEndOffset:0:parseInt(h[1]),y[1]=parseInt(h[0])+y[0],this._byteRange=y},L(m,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,B.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(b){this._url=b}}]),m}(),M=function(m){function v(b,C){var h;return(h=m.call(this,C)||this)._decryptdata=null,h.rawProgramDateTime=null,h.programDateTime=null,h.tagList=[],h.duration=0,h.sn=0,h.levelkeys=void 0,h.type=void 0,h.loader=null,h.keyLoader=null,h.level=-1,h.cc=0,h.startPTS=void 0,h.endPTS=void 0,h.appendedPTS=void 0,h.startDTS=void 0,h.endDTS=void 0,h.start=0,h.deltaPTS=void 0,h.maxStartPTS=void 0,h.minEndPTS=void 0,h.stats=new V.LoadStats,h.urlId=0,h.data=void 0,h.bitrateTest=!1,h.title=null,h.initSegment=null,h.endList=void 0,h.type=b,h}Y(v,m);var f=v.prototype;return f.setKeyFormat=function(C){if(this.levelkeys){var h=this.levelkeys[C];h&&!this._decryptdata&&(this._decryptdata=h.getDecryptData(this.sn))}},f.abortRequests=function(){var C,h;null===(C=this.loader)||void 0===C||C.abort(),null===(h=this.keyLoader)||void 0===h||h.abort()},f.setElementaryStreamInfo=function(C,h,y,w,E,S){void 0===S&&(S=!1);var u=this.elementaryStreams,d=u[C];d?(d.startPTS=Math.min(d.startPTS,h),d.endPTS=Math.max(d.endPTS,y),d.startDTS=Math.min(d.startDTS,w),d.endDTS=Math.max(d.endDTS,E)):u[C]={startPTS:h,endPTS:y,startDTS:w,endDTS:E,partial:S}},f.clearElementaryStreamInfo=function(){var C=this.elementaryStreams;C[D.AUDIO]=null,C[D.VIDEO]=null,C[D.AUDIOVIDEO]=null},L(v,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var h=this.levelkeys.identity;if(h)this._decryptdata=h.getDecryptData(this.sn);else{var y=Object.keys(this.levelkeys);if(1===y.length)return this._decryptdata=this.levelkeys[y[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!(0,W.isFiniteNumber)(this.programDateTime))return null;var C=(0,W.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*C}},{key:"encrypted",get:function(){var C;if(null!==(C=this._decryptdata)&&void 0!==C&&C.encrypted)return!0;if(this.levelkeys){var h=Object.keys(this.levelkeys),y=h.length;if(y>1||1===y&&this.levelkeys[h[0]].encrypted)return!0}return!1}}]),v}(I),_=function(m){function v(f,b,C,h,y){var w;(w=m.call(this,C)||this).fragOffset=0,w.duration=0,w.gap=!1,w.independent=!1,w.relurl=void 0,w.fragment=void 0,w.index=void 0,w.stats=new V.LoadStats,w.duration=f.decimalFloatingPoint("DURATION"),w.gap=f.bool("GAP"),w.independent=f.bool("INDEPENDENT"),w.relurl=f.enumeratedString("URI"),w.fragment=b,w.index=h;var E=f.enumeratedString("BYTERANGE");return E&&w.setByteRange(E,y),y&&(w.fragOffset=y.fragOffset+y.duration),w}return Y(v,m),L(v,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var b=this.elementaryStreams;return!!(b.audio||b.video||b.audiovideo)}}]),v}(I)},"./src/loader/key-loader.ts":
/*!**********************************!*\
                  !*** ./src/loader/key-loader.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>z});var W=O(
/*! ../errors */
"./src/errors.ts"),B=O(
/*! ./fragment-loader */
"./src/loader/fragment-loader.ts"),z=function(){function V(U){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=U}var Y=V.prototype;return Y.abort=function(){for(var N in this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[N].loader;L&&L.abort()}},Y.detach=function(){for(var N in this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[N];(L.mediaKeySessionContext||L.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[N]}},Y.destroy=function(){for(var N in this.detach(),this.keyUriToKeyInfo){var L=this.keyUriToKeyInfo[N].loader;L&&L.destroy()}this.keyUriToKeyInfo={}},Y.createKeyLoadError=function(N,L,R,P){return void 0===L&&(L=W.ErrorDetails.KEY_LOAD_ERROR),new B.LoadError({type:W.ErrorTypes.NETWORK_ERROR,details:L,fatal:!1,frag:N,networkDetails:R})},Y.loadClear=function(N,L){var R=this;if(this.emeController&&this.config.emeEnabled)for(var P=N.sn,D=N.cc,I=function(v){var f=L[v];if(D<=f.cc&&("initSegment"===P||P<f.sn))return R.emeController.selectKeySystemFormat(f).then(function(b){f.setKeyFormat(b)}),"break"},M=0;M<L.length&&"break"!==I(M);M++);},Y.load=function(N){var L=this;return!N.decryptdata&&N.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(N).then(function(R){return L.loadInternal(N,R)}):this.loadInternal(N)},Y.loadInternal=function(N,L){var R,P;L&&N.setKeyFormat(L);var D=N.decryptdata;if(!D)return Promise.reject(this.createKeyLoadError(N,W.ErrorDetails.KEY_LOAD_ERROR,null,L?"Expected frag.decryptdata to be defined after setting format "+L:"Missing decryption data on fragment in onKeyLoading"));var M=D.uri;if(!M)return Promise.reject(this.createKeyLoadError(N,W.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+M+'"'));var m,_=this.keyUriToKeyInfo[M];if(null!==(R=_)&&void 0!==R&&R.decryptdata.key)return D.key=_.decryptdata.key,Promise.resolve({frag:N,keyInfo:_});if(null!==(P=_)&&void 0!==P&&P.keyLoadPromise)switch(null===(m=_.mediaKeySessionContext)||void 0===m?void 0:m.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return _.keyLoadPromise.then(function(v){return D.key=v.keyInfo.decryptdata.key,{frag:N,keyInfo:_}})}switch(_=this.keyUriToKeyInfo[M]={decryptdata:D,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},D.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===D.keyFormat?this.loadKeyHTTP(_,N):this.loadKeyEME(_,N);case"AES-128":return this.loadKeyHTTP(_,N);default:return Promise.reject(this.createKeyLoadError(N,W.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+D.method+'"'))}},Y.loadKeyEME=function(N,L){var R={frag:L,keyInfo:N};if(this.emeController&&this.config.emeEnabled){var P=this.emeController.loadKey(R);if(P)return(N.keyLoadPromise=P.then(function(D){return N.mediaKeySessionContext=D,R})).catch(function(D){throw N.keyLoadPromise=null,D})}return Promise.resolve(R)},Y.loadKeyHTTP=function(N,L){var R=this,P=this.config,I=new(0,P.loader)(P);return L.keyLoader=N.loader=I,N.keyLoadPromise=new Promise(function(M,_){I.load({keyInfo:N,frag:L,responseType:"arraybuffer",url:N.decryptdata.uri},{timeout:P.fragLoadingTimeOut,maxRetry:0,retryDelay:P.fragLoadingRetryDelay,maxRetryDelay:P.fragLoadingMaxRetryTimeout,highWaterMark:0},{onSuccess:function(C,h,y,w){var E=y.frag,S=y.keyInfo;if(!E.decryptdata||S!==R.keyUriToKeyInfo[y.url])return _(R.createKeyLoadError(E,W.ErrorDetails.KEY_LOAD_ERROR,w,"after key load, decryptdata unset or changed"));S.decryptdata.key=E.decryptdata.key=new Uint8Array(C.data),E.keyLoader=null,S.loader=null,M({frag:E,keyInfo:S})},onError:function(C,h,y){R.resetLoader(h),_(R.createKeyLoadError(L,W.ErrorDetails.KEY_LOAD_ERROR,y))},onTimeout:function(C,h,y){R.resetLoader(h),_(R.createKeyLoadError(L,W.ErrorDetails.KEY_LOAD_TIMEOUT,y))},onAbort:function(C,h,y){R.resetLoader(h),_(R.createKeyLoadError(L,W.ErrorDetails.INTERNAL_ABORTED,y))}})})},Y.resetLoader=function(N){var L=N.frag,R=N.keyInfo,P=N.url,D=R.loader;L.keyLoader===D&&(L.keyLoader=null,R.loader=null),delete this.keyUriToKeyInfo[P],D&&D.destroy()},V}()},"./src/loader/level-details.ts":
/*!*************************************!*\
                  !*** ./src/loader/level-details.ts ***!
                  \*************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{LevelDetails:()=>N});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts");function B(L,R){for(var P=0;P<R.length;P++){var D=R[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(L,V(D.key),D)}}function V(L){var R=function Y(L,R){if("object"!=typeof L||null===L)return L;var P=L[Symbol.toPrimitive];if(void 0!==P){var D=P.call(L,R||"default");if("object"!=typeof D)return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}var N=function(){function L(P){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=P}return L.prototype.reloaded=function(D){if(!D)return this.advanced=!0,void(this.updated=!0);var I=this.lastPartSn-D.lastPartSn,M=this.lastPartIndex-D.lastPartIndex;this.updated=this.endSN!==D.endSN||!!M||!!I,this.advanced=this.endSN>D.endSN||I>0||0===I&&M>0,this.misses=this.updated||this.advanced?Math.floor(.6*D.misses):D.misses+1,this.availabilityDelay=D.availabilityDelay},function z(L,R,P){R&&B(L.prototype,R),P&&B(L,P),Object.defineProperty(L,"prototype",{writable:!1})}(L,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,W.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var D=this.driftEndTime-this.driftStartTime;return D>0?1e3*(this.driftEnd-this.driftStart)/D:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var D;return null!==(D=this.partList)&&void 0!==D&&D.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var D;return null!==(D=this.fragments)&&void 0!==D&&D.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var D;return null!==(D=this.partList)&&void 0!==D&&D.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var D;return null!==(D=this.partList)&&void 0!==D&&D.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),L}()},"./src/loader/level-key.ts":
/*!*********************************!*\
                  !*** ./src/loader/level-key.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{LevelKey:()=>N});var W=O(
/*! ../utils/keysystem-util */
"./src/utils/keysystem-util.ts"),B=O(
/*! ../utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),z=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=O(
/*! ../utils/numeric-encoding-utils */
"./src/utils/numeric-encoding-utils.ts"),U={},N=function(){function R(D,I,M,_,m){void 0===_&&(_=[1]),void 0===m&&(m=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=D,this.uri=I,this.keyFormat=M,this.keyFormatVersions=_,this.iv=m,this.encrypted=!!D&&"NONE"!==D,this.isCommonEncryption=this.encrypted&&"AES-128"!==D}R.clearKeyUriToKeyIdMap=function(){U={}};var P=R.prototype;return P.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;switch(this.keyFormat){case"identity":return"SAMPLE-AES"===this.method;case B.KeySystemFormats.FAIRPLAY:case B.KeySystemFormats.WIDEVINE:case B.KeySystemFormats.PLAYREADY:case B.KeySystemFormats.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},P.getDecryptData=function(I){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof I&&("AES-128"===this.method&&!this.iv&&V.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),I=0);var M=function L(R){for(var P=new Uint8Array(16),D=12;D<16;D++)P[D]=R>>8*(15-D)&255;return P}(I);return new R(this.method,this.uri,"identity",this.keyFormatVersions,M)}var m=(0,W.convertDataUriToArrayBytes)(this.uri);if(m)switch(this.keyFormat){case B.KeySystemFormats.WIDEVINE:this.pssh=m,m.length>=22&&(this.keyId=m.subarray(m.length-22,m.length-6));break;case B.KeySystemFormats.PLAYREADY:var v=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,z.mp4pssh)(v,null,m);var f=new Uint16Array(m.buffer,m.byteOffset,m.byteLength/2),b=String.fromCharCode.apply(null,Array.from(f)),C=b.substring(b.indexOf("<"),b.length),w=(new DOMParser).parseFromString(C,"text/xml").getElementsByTagName("KID")[0];if(w){var E=w.childNodes[0]?w.childNodes[0].nodeValue:w.getAttribute("VALUE");if(E){var S=(0,Y.base64Decode)(E).subarray(0,16);(0,W.changeEndianness)(S),this.keyId=S}}break;default:var u=m.subarray(0,16);if(16!==u.length){var d=new Uint8Array(16);d.set(u,16-u.length),u=d}this.keyId=u}if(!this.keyId||16!==this.keyId.byteLength){var c=U[this.uri];if(!c){var p=Object.keys(U).length%Number.MAX_SAFE_INTEGER;c=new Uint8Array(16),new DataView(c.buffer,12,4).setUint32(0,p),U[this.uri]=c}this.keyId=c}return this},R}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
                  !*** ./src/loader/load-stats.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{LoadStats:()=>W});var W=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
                  !*** ./src/loader/m3u8-parser.ts ***!
                  \***********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>v});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),V=O(
/*! ./date-range */
"./src/loader/date-range.ts"),Y=O(
/*! ./fragment */
"./src/loader/fragment.ts"),U=O(
/*! ./level-details */
"./src/loader/level-details.ts"),N=O(
/*! ./level-key */
"./src/loader/level-key.ts"),L=O(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts"),R=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),P=O(
/*! ../utils/codecs */
"./src/utils/codecs.ts");function D(){return D=Object.assign?Object.assign.bind():function(S){for(var u=1;u<arguments.length;u++){var d=arguments[u];for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(S[c]=d[c])}return S},D.apply(this,arguments)}var I=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,M=/#EXT-X-MEDIA:(.*)/g,_=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),m=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=function(){function S(){}return S.findGroup=function(d,c){for(var p=0;p<d.length;p++){var x=d[p];if(x.id===c)return x}},S.convertAVC1ToAVCOTI=function(d){var c=d.split(".");if(c.length>2){var p=c.shift()+".";return(p+=parseInt(c.shift()).toString(16))+("000"+parseInt(c.shift()).toString(16)).slice(-4)}return d},S.resolve=function(d,c){return(0,B.buildAbsoluteURL)(c,d,{alwaysNormalize:!0})},S.parseMasterPlaylist=function(d,c){var F,p=[],x=[],T={},k=[],H=!1;for(I.lastIndex=0;null!=(F=I.exec(d));)if(F[1]){var G,K=new L.AttrList(F[1]),$={attrs:K,bitrate:K.decimalInteger("AVERAGE-BANDWIDTH")||K.decimalInteger("BANDWIDTH"),name:K.NAME,url:S.resolve(F[2],c)},Z=K.decimalResolution("RESOLUTION");Z&&($.width=Z.width,$.height=Z.height),b((K.CODECS||"").split(/[ ,]+/).filter(function(ce){return ce}),$),$.videoCodec&&-1!==$.videoCodec.indexOf("avc1")&&($.videoCodec=S.convertAVC1ToAVCOTI($.videoCodec)),null!==(G=$.unknownCodecs)&&void 0!==G&&G.length||x.push($),p.push($)}else if(F[3]){var te=new L.AttrList(F[3]);te["DATA-ID"]&&(H=!0,T[te["DATA-ID"]]=te)}else if(F[4]){var Q=F[4],re=f(Q,c);re.encrypted&&re.isSupported()?k.push(re):R.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+Q+'"')}return{levels:x.length>0&&x.length<p.length?x:p,sessionData:H?T:null,sessionKeys:k.length?k:null}},S.parseMasterPlaylistMedia=function(d,c,p,x){void 0===x&&(x=[]);var T,k=[],H=0;for(M.lastIndex=0;null!==(T=M.exec(d));){var F=new L.AttrList(T[1]);if(F.TYPE===p){var G={attrs:F,bitrate:0,id:H++,groupId:F["GROUP-ID"],instreamId:F["INSTREAM-ID"],name:F.NAME||F.LANGUAGE||"",type:p,default:F.bool("DEFAULT"),autoselect:F.bool("AUTOSELECT"),forced:F.bool("FORCED"),lang:F.LANGUAGE,url:F.URI?S.resolve(F.URI,c):""};if(x.length){var K=S.findGroup(x,G.groupId)||x[0];C(G,K,"audioCodec"),C(G,K,"textCodec")}k.push(G)}}return k},S.parseLevelPlaylist=function(d,c,p,x,T){var re,se,ce,k=new U.LevelDetails(c),H=k.fragments,F=null,G=0,K=0,$=0,Z=0,te=null,Q=new Y.Fragment(x,c),ue=-1,he=!1;for(_.lastIndex=0,k.m3u8=d;null!==(re=_.exec(d));){he&&(he=!1,(Q=new Y.Fragment(x,c)).start=$,Q.sn=G,Q.cc=Z,Q.level=p,F&&(Q.initSegment=F,Q.rawProgramDateTime=F.rawProgramDateTime,F.rawProgramDateTime=null));var be=re[1];if(be){Q.duration=parseFloat(be);var Re=(" "+re[2]).slice(1);Q.title=Re||null,Q.tagList.push(Re?["INF",be,Re]:["INF",be])}else if(re[3])(0,W.isFiniteNumber)(Q.duration)&&(Q.start=$,ce&&E(Q,ce,k),Q.sn=G,Q.level=p,Q.cc=Z,Q.urlId=T,H.push(Q),Q.relurl=(" "+re[3]).slice(1),y(Q,te),te=Q,$+=Q.duration,G++,K=0,he=!0);else if(re[4]){var Se=(" "+re[4]).slice(1);te?Q.setByteRange(Se,te):Q.setByteRange(Se)}else if(re[5])Q.rawProgramDateTime=(" "+re[5]).slice(1),Q.tagList.push(["PROGRAM-DATE-TIME",Q.rawProgramDateTime]),-1===ue&&(ue=H.length);else{if(!(re=re[0].match(m))){R.logger.warn("No matches on slow regex match for level playlist!");continue}for(se=1;se<re.length&&!(typeof re[se]<"u");se++);var De=(" "+re[se]).slice(1),Me=(" "+re[se+1]).slice(1),it=re[se+2]?(" "+re[se+2]).slice(1):"";switch(De){case"PLAYLIST-TYPE":k.type=Me.toUpperCase();break;case"MEDIA-SEQUENCE":G=k.startSN=parseInt(Me);break;case"SKIP":var ct=new L.AttrList(Me),Nt=ct.decimalInteger("SKIPPED-SEGMENTS");if((0,W.isFiniteNumber)(Nt)){k.skippedSegments=Nt;for(var St=Nt;St--;)H.unshift(null);G+=Nt}var Bt=ct.enumeratedString("RECENTLY-REMOVED-DATERANGES");Bt&&(k.recentlyRemovedDateranges=Bt.split("\t"));break;case"TARGETDURATION":k.targetduration=parseFloat(Me);break;case"VERSION":k.version=parseInt(Me);break;case"EXTM3U":break;case"ENDLIST":k.live=!1;break;case"#":(Me||it)&&Q.tagList.push(it?[Me,it]:[Me]);break;case"DISCONTINUITY":Z++,Q.tagList.push(["DIS"]);break;case"GAP":Q.tagList.push([De]);break;case"BITRATE":Q.tagList.push([De,Me]);break;case"DATERANGE":var gt=new L.AttrList(Me),Rt=new V.DateRange(gt,k.dateRanges[gt.ID]);Rt.isValid||k.skippedSegments?k.dateRanges[Rt.id]=Rt:R.logger.warn('Ignoring invalid DATERANGE tag: "'+Me+'"'),Q.tagList.push(["EXT-X-DATERANGE",Me]);break;case"DISCONTINUITY-SEQUENCE":Z=parseInt(Me);break;case"KEY":var mt=f(Me,c);if(mt.isSupported()){if("NONE"===mt.method){ce=void 0;break}ce||(ce={}),ce[mt.keyFormat]&&(ce=D({},ce)),ce[mt.keyFormat]=mt}else R.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+Me+'"');break;case"START":var mn=new L.AttrList(Me).decimalFloatingPoint("TIME-OFFSET");(0,W.isFiniteNumber)(mn)&&(k.startTimeOffset=mn);break;case"MAP":var At=new L.AttrList(Me);if(Q.duration){var Tn=new Y.Fragment(x,c);w(Tn,At,p,ce),Q.initSegment=F=Tn,F.rawProgramDateTime&&!Q.rawProgramDateTime&&(Q.rawProgramDateTime=F.rawProgramDateTime)}else w(Q,At,p,ce),F=Q,he=!0;break;case"SERVER-CONTROL":var Fn=new L.AttrList(Me);k.canBlockReload=Fn.bool("CAN-BLOCK-RELOAD"),k.canSkipUntil=Fn.optionalFloat("CAN-SKIP-UNTIL",0),k.canSkipDateRanges=k.canSkipUntil>0&&Fn.bool("CAN-SKIP-DATERANGES"),k.partHoldBack=Fn.optionalFloat("PART-HOLD-BACK",0),k.holdBack=Fn.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var ar=new L.AttrList(Me);k.partTarget=ar.decimalFloatingPoint("PART-TARGET");break;case"PART":var Yn=k.partList;Yn||(Yn=k.partList=[]);var lr=K>0?Yn[Yn.length-1]:void 0,Tr=K++,Xn=new Y.Part(new L.AttrList(Me),Q,c,Tr,lr);Yn.push(Xn),Q.duration+=Xn.duration;break;case"PRELOAD-HINT":var En=new L.AttrList(Me);k.preloadHint=En;break;case"RENDITION-REPORT":var Mn=new L.AttrList(Me);k.renditionReports=k.renditionReports||[],k.renditionReports.push(Mn);break;default:R.logger.warn("line parsed but not handled: "+re)}}}te&&!te.relurl?(H.pop(),$-=te.duration,k.partList&&(k.fragmentHint=te)):k.partList&&(y(Q,te),Q.cc=Z,k.fragmentHint=Q,ce&&E(Q,ce,k));var Qn=H.length,Zn=H[0],jt=H[Qn-1];if(($+=k.skippedSegments*k.targetduration)>0&&Qn&&jt){k.averagetargetduration=$/Qn;var wn=jt.sn;k.endSN="initSegment"!==wn?wn:0,k.live||(jt.endList=!0),Zn&&(k.startCC=Zn.cc)}else k.endSN=0,k.startCC=0;return k.fragmentHint&&($+=k.fragmentHint.duration),k.totalduration=$,k.endCC=Z,ue>0&&function h(S,u){for(var d=S[u],c=u;c--;){var p=S[c];if(!p)return;p.programDateTime=d.programDateTime-1e3*p.duration,d=p}}(H,ue),k},S}();function f(S,u){var d,c,p=new L.AttrList(S),x=null!=(d=p.enumeratedString("METHOD"))?d:"",T=p.URI,k=p.hexadecimalInteger("IV"),H=p.enumeratedString("KEYFORMATVERSIONS"),F=null!=(c=p.enumeratedString("KEYFORMAT"))?c:"identity";T&&p.IV&&!k&&R.logger.error("Invalid IV: "+p.IV);var G=T?v.resolve(T,u):"",K=(H||"1").split("/").map(Number).filter(Number.isFinite);return new N.LevelKey(x,G,F,K,k)}function b(S,u){["video","audio","text"].forEach(function(d){var c=S.filter(function(x){return(0,P.isCodecType)(x,d)});if(c.length){var p=c.filter(function(x){return 0===x.lastIndexOf("avc1",0)||0===x.lastIndexOf("mp4a",0)});u[d+"Codec"]=p.length>0?p[0]:c[0],S=S.filter(function(x){return-1===c.indexOf(x)})}}),u.unknownCodecs=S}function C(S,u,d){var c=u[d];c&&(S[d]=c)}function y(S,u){S.rawProgramDateTime?S.programDateTime=Date.parse(S.rawProgramDateTime):null!=u&&u.programDateTime&&(S.programDateTime=u.endProgramDateTime),(0,W.isFiniteNumber)(S.programDateTime)||(S.programDateTime=null,S.rawProgramDateTime=null)}function w(S,u,d,c){S.relurl=u.URI,u.BYTERANGE&&S.setByteRange(u.BYTERANGE),S.level=d,S.sn="initSegment",c&&(S.levelkeys=c),S.initSegment=null}function E(S,u,d){S.levelkeys=u;var c=d.encryptedFragments;(!c.length||c[c.length-1].levelkeys!==u)&&Object.keys(u).some(function(p){return u[p].isCommonEncryption})&&c.push(S)}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
                  !*** ./src/loader/playlist-loader.ts ***!
                  \***************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>D});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../events */
"./src/events.ts"),z=O(
/*! ../errors */
"./src/errors.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=O(
/*! ./m3u8-parser */
"./src/loader/m3u8-parser.ts"),U=O(
/*! ../types/loader */
"./src/types/loader.ts"),N=O(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts");function R(I,M){var _=I.url;return(void 0===_||0===_.indexOf("data:"))&&(_=M.url),_}const D=function(){function I(_){this.hls=void 0,this.loaders=Object.create(null),this.hls=_,this.registerListeners()}var M=I.prototype;return M.startLoad=function(m){},M.stopLoad=function(){this.destroyInternalLoaders()},M.registerListeners=function(){var m=this.hls;m.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),m.on(B.Events.LEVEL_LOADING,this.onLevelLoading,this),m.on(B.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),m.on(B.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},M.unregisterListeners=function(){var m=this.hls;m.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),m.off(B.Events.LEVEL_LOADING,this.onLevelLoading,this),m.off(B.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),m.off(B.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},M.createInternalLoader=function(m){var v=this.hls.config,h=new(v.pLoader||v.loader)(v);return m.loader=h,this.loaders[m.type]=h,h},M.getInternalLoader=function(m){return this.loaders[m.type]},M.resetInternalLoader=function(m){this.loaders[m]&&delete this.loaders[m]},M.destroyInternalLoaders=function(){for(var m in this.loaders){var v=this.loaders[m];v&&v.destroy(),this.resetInternalLoader(m)}},M.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},M.onManifestLoading=function(m,v){this.load({id:null,groupId:null,level:0,responseType:"text",type:U.PlaylistContextType.MANIFEST,url:v.url,deliveryDirectives:null})},M.onLevelLoading=function(m,v){this.load({id:v.id,groupId:null,level:v.level,responseType:"text",type:U.PlaylistContextType.LEVEL,url:v.url,deliveryDirectives:v.deliveryDirectives})},M.onAudioTrackLoading=function(m,v){this.load({id:v.id,groupId:v.groupId,level:null,responseType:"text",type:U.PlaylistContextType.AUDIO_TRACK,url:v.url,deliveryDirectives:v.deliveryDirectives})},M.onSubtitleTrackLoading=function(m,v){this.load({id:v.id,groupId:v.groupId,level:null,responseType:"text",type:U.PlaylistContextType.SUBTITLE_TRACK,url:v.url,deliveryDirectives:v.deliveryDirectives})},M.load=function(m){var v,h,y,w,E,S,f=this.hls.config,b=this.getInternalLoader(m);if(b){var C=b.context;if(C&&C.url===m.url)return void V.logger.trace("[playlist-loader]: playlist request ongoing");V.logger.log("[playlist-loader]: aborting previous loader for type: "+m.type),b.abort()}switch(m.type){case U.PlaylistContextType.MANIFEST:h=f.manifestLoadingMaxRetry,y=f.manifestLoadingTimeOut,w=f.manifestLoadingRetryDelay,E=f.manifestLoadingMaxRetryTimeout;break;case U.PlaylistContextType.LEVEL:case U.PlaylistContextType.AUDIO_TRACK:case U.PlaylistContextType.SUBTITLE_TRACK:h=0,y=f.levelLoadingTimeOut;break;default:h=f.levelLoadingMaxRetry,y=f.levelLoadingTimeOut,w=f.levelLoadingRetryDelay,E=f.levelLoadingMaxRetryTimeout}if(b=this.createInternalLoader(m),null!==(v=m.deliveryDirectives)&&void 0!==v&&v.part&&(m.type===U.PlaylistContextType.LEVEL&&null!==m.level?S=this.hls.levels[m.level].details:m.type===U.PlaylistContextType.AUDIO_TRACK&&null!==m.id?S=this.hls.audioTracks[m.id].details:m.type===U.PlaylistContextType.SUBTITLE_TRACK&&null!==m.id&&(S=this.hls.subtitleTracks[m.id].details),S)){var u=S.partTarget,d=S.targetduration;u&&d&&(y=Math.min(1e3*Math.max(3*u,.8*d),y))}var c={timeout:y,maxRetry:h,retryDelay:w,maxRetryDelay:E,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};b.load(m,c,p)},M.loadsuccess=function(m,v,f,b){void 0===b&&(b=null),this.resetInternalLoader(f.type);var C=m.data;0===C.indexOf("#EXTM3U")?(v.parsing.start=performance.now(),C.indexOf("#EXTINF:")>0||C.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(m,v,f,b):this.handleMasterPlaylist(m,v,f,b)):this.handleManifestParsingError(m,f,"no EXTM3U delimiter",b)},M.loaderror=function(m,v,f){void 0===f&&(f=null),this.handleNetworkError(v,f,!1,m)},M.loadtimeout=function(m,v,f){void 0===f&&(f=null),this.handleNetworkError(v,f,!0)},M.handleMasterPlaylist=function(m,v,f,b){var C=this.hls,h=m.data,y=R(m,f),w=Y.default.parseMasterPlaylist(h,y),E=w.levels,S=w.sessionData,u=w.sessionKeys;if(E.length){var d=E.map(function(H){return{id:H.attrs.AUDIO,audioCodec:H.audioCodec}}),c=E.map(function(H){return{id:H.attrs.SUBTITLES,textCodec:H.textCodec}}),p=Y.default.parseMasterPlaylistMedia(h,y,"AUDIO",d),x=Y.default.parseMasterPlaylistMedia(h,y,"SUBTITLES",c),T=Y.default.parseMasterPlaylistMedia(h,y,"CLOSED-CAPTIONS");p.length&&!p.some(function(H){return!H.url})&&E[0].audioCodec&&!E[0].attrs.AUDIO&&(V.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new N.AttrList({}),bitrate:0,url:""})),C.trigger(B.Events.MANIFEST_LOADED,{levels:E,audioTracks:p,subtitles:x,captions:T,url:y,stats:v,networkDetails:b,sessionData:S,sessionKeys:u})}else this.handleManifestParsingError(m,f,"no level found in manifest",b)},M.handleTrackOrLevelPlaylist=function(m,v,f,b){var C=this.hls,h=f.id,y=f.level,w=f.type,E=R(m,f),S=(0,W.isFiniteNumber)(h)?h:0,u=(0,W.isFiniteNumber)(y)?y:S,d=function L(I){switch(I.type){case U.PlaylistContextType.AUDIO_TRACK:return U.PlaylistLevelType.AUDIO;case U.PlaylistContextType.SUBTITLE_TRACK:return U.PlaylistLevelType.SUBTITLE;default:return U.PlaylistLevelType.MAIN}}(f),c=Y.default.parseLevelPlaylist(m.data,E,u,d,S);if(c.fragments.length){if(w===U.PlaylistContextType.MANIFEST){var p={attrs:new N.AttrList({}),bitrate:0,details:c,name:"",url:E};C.trigger(B.Events.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:E,stats:v,networkDetails:b,sessionData:null,sessionKeys:null})}v.parsing.end=performance.now(),f.levelDetails=c,this.handlePlaylistLoaded(m,v,f,b)}else C.trigger(B.Events.ERROR,{type:z.ErrorTypes.NETWORK_ERROR,details:z.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:E,reason:"no fragments found in level",level:"number"==typeof f.level?f.level:void 0})},M.handleManifestParsingError=function(m,v,f,b){this.hls.trigger(B.Events.ERROR,{type:z.ErrorTypes.NETWORK_ERROR,details:z.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:v.type===U.PlaylistContextType.MANIFEST,url:m.url,reason:f,response:m,context:v,networkDetails:b})},M.handleNetworkError=function(m,v,f,b){void 0===f&&(f=!1),V.logger.warn("[playlist-loader]: A network "+(f?"timeout":"error")+" occurred while loading "+m.type+" level: "+m.level+" id: "+m.id+' group-id: "'+m.groupId+'"');var C=z.ErrorDetails.UNKNOWN,h=!1,y=this.getInternalLoader(m);switch(m.type){case U.PlaylistContextType.MANIFEST:C=f?z.ErrorDetails.MANIFEST_LOAD_TIMEOUT:z.ErrorDetails.MANIFEST_LOAD_ERROR,h=!0;break;case U.PlaylistContextType.LEVEL:C=f?z.ErrorDetails.LEVEL_LOAD_TIMEOUT:z.ErrorDetails.LEVEL_LOAD_ERROR,h=!1;break;case U.PlaylistContextType.AUDIO_TRACK:C=f?z.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:z.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,h=!1;break;case U.PlaylistContextType.SUBTITLE_TRACK:C=f?z.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:z.ErrorDetails.SUBTITLE_LOAD_ERROR,h=!1}y&&this.resetInternalLoader(m.type);var w={type:z.ErrorTypes.NETWORK_ERROR,details:C,fatal:h,url:m.url,loader:y,context:m,networkDetails:v};b&&(w.response=b),this.hls.trigger(B.Events.ERROR,w)},M.handlePlaylistLoaded=function(m,v,f,b){var C=f.type,h=f.level,y=f.id,w=f.groupId,E=f.loader,S=f.levelDetails,u=f.deliveryDirectives;if(null!=S&&S.targetduration){if(E)switch(S.live&&(E.getCacheAge&&(S.ageHeader=E.getCacheAge()||0),(!E.getCacheAge||isNaN(S.ageHeader))&&(S.ageHeader=0)),C){case U.PlaylistContextType.MANIFEST:case U.PlaylistContextType.LEVEL:this.hls.trigger(B.Events.LEVEL_LOADED,{details:S,level:h||0,id:y||0,stats:v,networkDetails:b,deliveryDirectives:u});break;case U.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(B.Events.AUDIO_TRACK_LOADED,{details:S,id:y||0,groupId:w||"",stats:v,networkDetails:b,deliveryDirectives:u});break;case U.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(B.Events.SUBTITLE_TRACK_LOADED,{details:S,id:y||0,groupId:w||"",stats:v,networkDetails:b,deliveryDirectives:u})}}else this.handleManifestParsingError(m,f,"invalid target duration",b)},I}()},"./src/polyfills/number.ts":
/*!*********************************!*\
                  !*** ./src/polyfills/number.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{MAX_SAFE_INTEGER:()=>B,isFiniteNumber:()=>W});var W=Number.isFinite||function(z){return"number"==typeof z&&isFinite(z)},B=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
                  !*** ./src/remux/aac-helper.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>B});const B=function(){function z(){}return z.getSilentFrame=function(Y,U){if("mp4a.40.2"===Y){if(1===U)return new Uint8Array([0,200,0,128,35,128]);if(2===U)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===U)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===U)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===U)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===U)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},z}()},"./src/remux/mp4-generator.ts":
/*!************************************!*\
                  !*** ./src/remux/mp4-generator.ts ***!
                  \************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>z});var W=Math.pow(2,32)-1,B=function(){function V(){}return V.init=function(){var U;for(U in V.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})V.types.hasOwnProperty(U)&&(V.types[U]=[U.charCodeAt(0),U.charCodeAt(1),U.charCodeAt(2),U.charCodeAt(3)]);var N=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);V.HDLR_TYPES={video:N,audio:L};var R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]);V.STTS=V.STSC=V.STCO=P,V.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),V.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),V.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),V.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var D=new Uint8Array([105,115,111,109]),I=new Uint8Array([97,118,99,49]),M=new Uint8Array([0,0,0,1]);V.FTYP=V.box(V.types.ftyp,D,M,D,I),V.DINF=V.box(V.types.dinf,V.box(V.types.dref,R))},V.box=function(U){for(var N=8,L=arguments.length,R=new Array(L>1?L-1:0),P=1;P<L;P++)R[P-1]=arguments[P];for(var D=R.length,I=D;D--;)N+=R[D].byteLength;var M=new Uint8Array(N);for(M[0]=N>>24&255,M[1]=N>>16&255,M[2]=N>>8&255,M[3]=255&N,M.set(U,4),D=0,N=8;D<I;D++)M.set(R[D],N),N+=R[D].byteLength;return M},V.hdlr=function(U){return V.box(V.types.hdlr,V.HDLR_TYPES[U])},V.mdat=function(U){return V.box(V.types.mdat,U)},V.mdhd=function(U,N){N*=U;var L=Math.floor(N/(W+1)),R=Math.floor(N%(W+1));return V.box(V.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,255&U,L>>24,L>>16&255,L>>8&255,255&L,R>>24,R>>16&255,R>>8&255,255&R,85,196,0,0]))},V.mdia=function(U){return V.box(V.types.mdia,V.mdhd(U.timescale,U.duration),V.hdlr(U.type),V.minf(U))},V.mfhd=function(U){return V.box(V.types.mfhd,new Uint8Array([0,0,0,0,U>>24,U>>16&255,U>>8&255,255&U]))},V.minf=function(U){return V.box(V.types.minf,"audio"===U.type?V.box(V.types.smhd,V.SMHD):V.box(V.types.vmhd,V.VMHD),V.DINF,V.stbl(U))},V.moof=function(U,N,L){return V.box(V.types.moof,V.mfhd(U),V.traf(L,N))},V.moov=function(U){for(var N=U.length,L=[];N--;)L[N]=V.trak(U[N]);return V.box.apply(null,[V.types.moov,V.mvhd(U[0].timescale,U[0].duration)].concat(L).concat(V.mvex(U)))},V.mvex=function(U){for(var N=U.length,L=[];N--;)L[N]=V.trex(U[N]);return V.box.apply(null,[V.types.mvex].concat(L))},V.mvhd=function(U,N){N*=U;var L=Math.floor(N/(W+1)),R=Math.floor(N%(W+1)),P=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,255&U,L>>24,L>>16&255,L>>8&255,255&L,R>>24,R>>16&255,R>>8&255,255&R,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return V.box(V.types.mvhd,P)},V.sdtp=function(U){var R,P,N=U.samples||[],L=new Uint8Array(4+N.length);for(R=0;R<N.length;R++)L[R+4]=(P=N[R].flags).dependsOn<<4|P.isDependedOn<<2|P.hasRedundancy;return V.box(V.types.sdtp,L)},V.stbl=function(U){return V.box(V.types.stbl,V.stsd(U),V.box(V.types.stts,V.STTS),V.box(V.types.stsc,V.STSC),V.box(V.types.stsz,V.STSZ),V.box(V.types.stco,V.STCO))},V.avc1=function(U){var R,P,D,N=[],L=[];for(R=0;R<U.sps.length;R++)N.push((D=(P=U.sps[R]).byteLength)>>>8&255),N.push(255&D),N=N.concat(Array.prototype.slice.call(P));for(R=0;R<U.pps.length;R++)L.push((D=(P=U.pps[R]).byteLength)>>>8&255),L.push(255&D),L=L.concat(Array.prototype.slice.call(P));var I=V.box(V.types.avcC,new Uint8Array([1,N[3],N[4],N[5],255,224|U.sps.length].concat(N).concat([U.pps.length]).concat(L))),M=U.width,_=U.height,m=U.pixelRatio[0],v=U.pixelRatio[1];return V.box(V.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,M>>8&255,255&M,_>>8&255,255&_,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),I,V.box(V.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),V.box(V.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,255&m,v>>24,v>>16&255,v>>8&255,255&v])))},V.esds=function(U){var N=U.config.length;return new Uint8Array([0,0,0,0,3,23+N,0,1,0,4,15+N,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([N]).concat(U.config).concat([6,1,2]))},V.mp4a=function(U){var N=U.samplerate;return V.box(V.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,N>>8&255,255&N,0,0]),V.box(V.types.esds,V.esds(U)))},V.mp3=function(U){var N=U.samplerate;return V.box(V.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,N>>8&255,255&N,0,0]))},V.stsd=function(U){return V.box(V.types.stsd,V.STSD,"audio"===U.type?"mp3"===U.segmentCodec&&"mp3"===U.codec?V.mp3(U):V.mp4a(U):V.avc1(U))},V.tkhd=function(U){var N=U.id,L=U.duration*U.timescale,R=U.width,P=U.height,D=Math.floor(L/(W+1)),I=Math.floor(L%(W+1));return V.box(V.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,N>>24&255,N>>16&255,N>>8&255,255&N,0,0,0,0,D>>24,D>>16&255,D>>8&255,255&D,I>>24,I>>16&255,I>>8&255,255&I,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,R>>8&255,255&R,0,0,P>>8&255,255&P,0,0]))},V.traf=function(U,N){var L=V.sdtp(U),R=U.id,P=Math.floor(N/(W+1)),D=Math.floor(N%(W+1));return V.box(V.types.traf,V.box(V.types.tfhd,new Uint8Array([0,0,0,0,R>>24,R>>16&255,R>>8&255,255&R])),V.box(V.types.tfdt,new Uint8Array([1,0,0,0,P>>24,P>>16&255,P>>8&255,255&P,D>>24,D>>16&255,D>>8&255,255&D])),V.trun(U,L.length+16+20+8+16+8+8),L)},V.trak=function(U){return U.duration=U.duration||4294967295,V.box(V.types.trak,V.tkhd(U),V.mdia(U))},V.trex=function(U){var N=U.id;return V.box(V.types.trex,new Uint8Array([0,0,0,0,N>>24,N>>16&255,N>>8&255,255&N,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},V.trun=function(U,N){var I,M,_,m,v,f,L=U.samples||[],R=L.length,P=12+16*R,D=new Uint8Array(P);for(D.set(["video"===U.type?1:0,0,15,1,R>>>24&255,R>>>16&255,R>>>8&255,255&R,(N+=8+P)>>>24&255,N>>>16&255,N>>>8&255,255&N],0),I=0;I<R;I++)D.set([(_=(M=L[I]).duration)>>>24&255,_>>>16&255,_>>>8&255,255&_,(m=M.size)>>>24&255,m>>>16&255,m>>>8&255,255&m,(v=M.flags).isLeading<<2|v.dependsOn,v.isDependedOn<<6|v.hasRedundancy<<4|v.paddingValue<<1|v.isNonSync,61440&v.degradPrio,15&v.degradPrio,(f=M.cts)>>>24&255,f>>>16&255,f>>>8&255,255&f],12+16*I);return V.box(V.types.trun,D)},V.initSegment=function(U){V.types||V.init();var N=V.moov(U),L=new Uint8Array(V.FTYP.byteLength+N.byteLength);return L.set(V.FTYP),L.set(N,V.FTYP.byteLength),L},V}();B.types=void 0,B.HDLR_TYPES=void 0,B.STTS=void 0,B.STSC=void 0,B.STCO=void 0,B.STSZ=void 0,B.VMHD=void 0,B.SMHD=void 0,B.STSD=void 0,B.FTYP=void 0,B.DINF=void 0;const z=B},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
                  !*** ./src/remux/mp4-remuxer.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>m,flushTextTrackMetadataCueSamples:()=>b,flushTextTrackUserdataCueSamples:()=>C,normalizePts:()=>v});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ./aac-helper */
"./src/remux/aac-helper.ts"),z=O(
/*! ./mp4-generator */
"./src/remux/mp4-generator.ts"),V=O(
/*! ../events */
"./src/events.ts"),Y=O(
/*! ../errors */
"./src/errors.ts"),U=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),N=O(
/*! ../types/loader */
"./src/types/loader.ts"),L=O(
/*! ../utils/timescale-conversion */
"./src/utils/timescale-conversion.ts");function R(){return R=Object.assign?Object.assign.bind():function(w){for(var E=1;E<arguments.length;E++){var S=arguments[E];for(var u in S)Object.prototype.hasOwnProperty.call(S,u)&&(w[u]=S[u])}return w},R.apply(this,arguments)}var M=null,_=null,m=function(){function w(S,u,d,c){if(void 0===c&&(c=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=S,this.config=u,this.typeSupported=d,this.ISGenerated=!1,null===M){var x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);M=x?parseInt(x[1]):0}if(null===_){var T=navigator.userAgent.match(/Safari\/(\d+)/i);_=T?parseInt(T[1]):0}}var E=w.prototype;return E.destroy=function(){},E.resetTimeStamp=function(u){U.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=u},E.resetNextTimestamp=function(){U.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},E.resetInitSegment=function(){U.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},E.getVideoStartPts=function(u){var d=!1,c=u.reduce(function(p,x){var T=x.pts-p;return T<-4294967296?(d=!0,v(p,x.pts)):T>0?p:x.pts},u[0].pts);return d&&U.logger.debug("PTS rollover detected"),c},E.remux=function(u,d,c,p,x,T,k,H){var F,G,K,$,Z,te,Q=x,re=x,ce=d.pid>-1,ue=d.samples.length,he=u.samples.length>0,be=k&&ue>0||ue>1;if((!(u.pid>-1)||he)&&(!ce||be)||this.ISGenerated||k){this.ISGenerated||(K=this.generateIS(u,d,x));var Me,Se=this.isVideoContiguous,De=-1;if(be&&(De=function f(w){for(var E=0;E<w.length;E++)if(w[E].key)return E;return-1}(d.samples),!Se&&this.config.forceKeyFrameOnDiscontinuity))if(te=!0,De>0){U.logger.warn("[mp4-remuxer]: Dropped "+De+" out of "+ue+" video samples due to a missing keyframe");var it=this.getVideoStartPts(d.samples);d.samples=d.samples.slice(De),d.dropped+=De,Me=re+=(d.samples[0].pts-it)/d.inputTimeScale}else-1===De&&(U.logger.warn("[mp4-remuxer]: No keyframe found out of "+ue+" video samples"),te=!1);if(this.ISGenerated){if(he&&be){var ct=this.getVideoStartPts(d.samples),St=(v(u.samples[0].pts,ct)-ct)/d.inputTimeScale;Q+=Math.max(0,St),re+=Math.max(0,-St)}if(he){if(u.samplerate||(U.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),K=this.generateIS(u,d,x)),G=this.remuxAudio(u,Q,this.isAudioContiguous,T,ce||be||H===N.PlaylistLevelType.AUDIO?re:void 0),be){var Bt=G?G.endPTS-G.startPTS:0;d.inputTimeScale||(U.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),K=this.generateIS(u,d,x)),F=this.remuxVideo(d,re,Se,Bt)}}else be&&(F=this.remuxVideo(d,re,Se,0));F&&(F.firstKeyFrame=De,F.independent=-1!==De,F.firstKeyFramePTS=Me)}}return this.ISGenerated&&(c.samples.length&&(Z=b(c,x,this._initPTS,this._initDTS)),p.samples.length&&($=C(p,x,this._initPTS))),{audio:G,video:F,initSegment:K,independent:te,text:$,id3:Z}},E.generateIS=function(u,d,c){var G,K,$,p=u.samples,x=d.samples,T=this.typeSupported,k={},H=!(0,W.isFiniteNumber)(this._initPTS),F="audio/mp4";if(H&&(G=K=1/0),u.config&&p.length&&("mp3"===(u.timescale=u.samplerate,u.segmentCodec)&&(T.mpeg?(F="audio/mpeg",u.codec=""):T.mp3&&(u.codec="mp3")),k.audio={id:"audio",container:F,codec:u.codec,initSegment:"mp3"===u.segmentCodec&&T.mpeg?new Uint8Array(0):z.default.initSegment([u]),metadata:{channelCount:u.channelCount}},H&&($=u.inputTimeScale,G=K=p[0].pts-Math.round($*c))),d.sps&&d.pps&&x.length&&(d.timescale=d.inputTimeScale,k.video={id:"main",container:"video/mp4",codec:d.codec,initSegment:z.default.initSegment([d]),metadata:{width:d.width,height:d.height}},H)){$=d.inputTimeScale;var Z=this.getVideoStartPts(x),te=Math.round($*c);K=Math.min(K,v(x[0].dts,Z)-te),G=Math.min(G,Z-te)}if(Object.keys(k).length)return this.ISGenerated=!0,H&&(this._initPTS=G,this._initDTS=K),{tracks:k,initPTS:G,timescale:$}},E.remuxVideo=function(u,d,c,p){var Z,te,x=u.inputTimeScale,T=u.samples,k=[],H=T.length,F=this._initPTS,G=this.nextAvcDts,K=8,$=this.videoSampleDuration,Q=Number.POSITIVE_INFINITY,re=Number.NEGATIVE_INFINITY,se=!1;c&&null!==G||(G=d*x-(T[0].pts-v(T[0].dts,T[0].pts)));for(var he=0;he<H;he++){var be=T[he];be.pts=v(be.pts-F,G),be.dts=v(be.dts-F,G),be.dts<T[he>0?he-1:he].dts&&(se=!0)}se&&T.sort(function(Jn,hh){return Jn.dts-hh.dts||Jn.pts-hh.pts});var Re=T[T.length-1].dts-(Z=T[0].dts),Se=Re?Math.round(Re/(H-1)):$||u.inputTimeScale/30;if(c){var De=Z-G,Me=De>Se,it=De<-1;if((Me||it)&&(U.logger.warn(Me?"AVC: "+(0,L.toMsFromMpegTsClock)(De,!0)+" ms ("+De+"dts) hole between fragments detected, filling it":"AVC: "+(0,L.toMsFromMpegTsClock)(-De,!0)+" ms ("+De+"dts) overlapping between fragments detected"),!it||G>T[0].pts)){var ct=T[0].pts-De;T[0].dts=Z=G,T[0].pts=ct,U.logger.log("Video: First PTS/DTS adjusted: "+(0,L.toMsFromMpegTsClock)(ct,!0)+"/"+(0,L.toMsFromMpegTsClock)(Z,!0)+", delta: "+(0,L.toMsFromMpegTsClock)(De,!0)+" ms")}}Z=Math.max(0,Z);for(var Nt=0,St=0,Bt=0;Bt<H;Bt++){for(var gt=T[Bt],Rt=gt.units,mt=Rt.length,Xt=0,mn=0;mn<mt;mn++)Xt+=Rt[mn].data.length;St+=Xt,Nt+=mt,gt.length=Xt,gt.dts=Math.max(gt.dts,Z),Q=Math.min(gt.pts,Q),re=Math.max(gt.pts,re)}te=T[H-1].dts;var Tn,At=St+4*Nt+8;try{Tn=new Uint8Array(At)}catch{return void this.observer.emit(V.Events.ERROR,V.Events.ERROR,{type:Y.ErrorTypes.MUX_ERROR,details:Y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:At,reason:"fail allocating video mdat "+At})}var Fn=new DataView(Tn.buffer);Fn.setUint32(0,At),Tn.set(z.default.types.mdat,4);for(var ar=!1,Yn=Number.POSITIVE_INFINITY,lr=Number.POSITIVE_INFINITY,Tr=Number.NEGATIVE_INFINITY,Xn=Number.NEGATIVE_INFINITY,En=0;En<H;En++){for(var Mn=T[En],Qn=Mn.units,Zn=0,jt=0,wn=Qn.length;jt<wn;jt++){var qn=Qn[jt],bs=qn.data,Ti=qn.data.byteLength;Fn.setUint32(K,Ti),Tn.set(bs,K+=4),K+=Ti,Zn+=4+Ti}var Mi=void 0;if(En<H-1)$=T[En+1].dts-Mn.dts,Mi=T[En+1].pts-Mn.pts;else{var pa=this.config,Ds=En>0?Mn.dts-T[En-1].dts:Se;if(Mi=En>0?Mn.pts-T[En-1].pts:Se,pa.stretchShortVideoTrack&&null!==this.nextAudioPts){var Jl=Math.floor(pa.maxBufferHole*x),vn=(p?Q+p*x:this.nextAudioPts)-Mn.pts;vn>Jl?(($=vn-Ds)<0?$=Ds:ar=!0,U.logger.log("[mp4-remuxer]: It is approximately "+vn/90+" ms to the next segment; using duration "+$/90+" ms for the last video frame.")):$=Ds}else $=Ds}var ch=Math.round(Mn.pts-Mn.dts);Yn=Math.min(Yn,$),Tr=Math.max(Tr,$),lr=Math.min(lr,Mi),Xn=Math.max(Xn,Mi),k.push(new h(Mn.key,$,Zn,ch))}if(k.length)if(M){if(M<70){var ec=k[0].flags;ec.dependsOn=2,ec.isNonSync=0}}else if(_&&Xn-lr<Tr-Yn&&Se/Tr<.025&&0===k[0].cts){U.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ga=Z,cr=0,ma=k.length;cr<ma;cr++){var tc=ga+k[cr].duration;k[cr].duration=cr<ma-1?tc+k[cr+1].cts-(ga+k[cr].cts):cr?k[cr-1].duration:Se,k[cr].cts=0,ga=tc}}console.assert(null!==$,"mp4SampleDuration must be computed"),this.nextAvcDts=G=te+($=ar||!$?Se:$),this.videoSampleDuration=$,this.isVideoContiguous=!0;var es={data1:z.default.moof(u.sequenceNumber++,Z,R({},u,{samples:k})),data2:Tn,startPTS:Q/x,endPTS:(re+$)/x,startDTS:Z/x,endDTS:G/x,type:"video",hasAudio:!1,hasVideo:!0,nb:k.length,dropped:u.dropped};return u.samples=[],u.dropped=0,console.assert(Tn.length,"MDAT length must not be zero"),es},E.remuxAudio=function(u,d,c,p,x){var T=u.inputTimeScale,H=T/(u.samplerate?u.samplerate:T),F="aac"===u.segmentCodec?1024:1152,G=F*H,K=this._initPTS,$="mp3"===u.segmentCodec&&this.typeSupported.mpeg,Z=[],te=void 0!==x,Q=u.samples,re=$?0:8,se=this.nextAudioPts||-1,ce=d*T;if(this.isAudioContiguous=c=c||Q.length&&se>0&&(p&&Math.abs(ce-se)<9e3||Math.abs(v(Q[0].pts-K,ce)-se)<20*G),Q.forEach(function(qn){qn.pts=v(qn.pts-K,ce)}),!c||se<0){if(!(Q=Q.filter(function(qn){return qn.pts>=0})).length)return;se=0===x?0:p&&!te?Math.max(0,ce):Q[0].pts}if("aac"===u.segmentCodec)for(var ue=this.config.maxAudioFramesDrift,he=0,be=se;he<Q.length;he++){var Re=Q[he],Se=Re.pts,De=Se-be,Me=Math.abs(1e3*De/T);if(De<=-ue*G&&te)0===he&&(U.logger.warn("Audio frame @ "+(Se/T).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*De/T)+" ms."),this.nextAudioPts=se=be=Se);else if(De>=ue*G&&Me<1e4&&te){var it=Math.round(De/G);(be=Se-it*G)<0&&(it--,be+=G),0===he&&(this.nextAudioPts=se=be),U.logger.warn("[mp4-remuxer]: Injecting "+it+" audio frame @ "+(be/T).toFixed(3)+"s due to "+Math.round(1e3*De/T)+" ms gap.");for(var ct=0;ct<it;ct++){var Nt=Math.max(be,0),St=B.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);St||(U.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),St=Re.unit.subarray()),Q.splice(he,0,{unit:St,pts:Nt}),be+=G,he++}}Re.pts=be,be+=G}for(var Rt,Bt=null,gt=null,mt=0,Xt=Q.length;Xt--;)mt+=Q[Xt].unit.byteLength;for(var mn=0,At=Q.length;mn<At;mn++){var Tn=Q[mn],Fn=Tn.unit,ar=Tn.pts;if(null!==gt)Z[mn-1].duration=Math.round((ar-gt)/H);else{if(c&&"aac"===u.segmentCodec&&(ar=se),Bt=ar,!(mt>0))return;mt+=re;try{Rt=new Uint8Array(mt)}catch{return void this.observer.emit(V.Events.ERROR,V.Events.ERROR,{type:Y.ErrorTypes.MUX_ERROR,details:Y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:mt,reason:"fail allocating audio mdat "+mt})}$||(new DataView(Rt.buffer).setUint32(0,mt),Rt.set(z.default.types.mdat,4))}Rt.set(Fn,re);var Tr=Fn.byteLength;re+=Tr,Z.push(new h(!0,F,Tr,0)),gt=ar}var Xn=Z.length;if(Xn){this.nextAudioPts=se=gt+H*Z[Z.length-1].duration;var Mn=$?new Uint8Array(0):z.default.moof(u.sequenceNumber++,Bt/H,R({},u,{samples:Z}));u.samples=[];var Qn=Bt/T,Zn=se/T,wn={data1:Mn,data2:Rt,startPTS:Qn,endPTS:Zn,startDTS:Qn,endDTS:Zn,type:"audio",hasAudio:!0,hasVideo:!1,nb:Xn};return this.isAudioContiguous=!0,console.assert(Rt.length,"MDAT length must not be zero"),wn}},E.remuxEmptyAudio=function(u,d,c,p){var x=u.inputTimeScale,H=this.nextAudioPts,F=(null!==H?H:p.startDTS*x)+this._initDTS,K=x/(u.samplerate?u.samplerate:x)*1024,$=Math.ceil((p.endDTS*x+this._initDTS-F)/K),Z=B.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);if(U.logger.warn("[mp4-remuxer]: remux empty Audio"),Z){for(var te=[],Q=0;Q<$;Q++){var re=F+Q*K;te.push({unit:Z,pts:re,dts:re})}return u.samples=te,this.remuxAudio(u,d,c,!1)}U.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},w}();function v(w,E){var S;if(null===E)return w;for(S=E<w?-8589934592:8589934592;Math.abs(w-E)>4294967296;)w+=S;return w}function b(w,E,S,u){var d=w.samples.length;if(d){for(var c=w.inputTimeScale,p=0;p<d;p++){var x=w.samples[p];x.pts=v(x.pts-S,E*c)/c,x.dts=v(x.dts-u,E*c)/c}var T=w.samples;return w.samples=[],{samples:T}}}function C(w,E,S){var u=w.samples.length;if(u){for(var d=w.inputTimeScale,c=0;c<u;c++){var p=w.samples[c];p.pts=v(p.pts-S,E*d)/d}w.samples.sort(function(T,k){return T.pts-k.pts});var x=w.samples;return w.samples=[],{samples:x}}}var h=function(E,S,u,d){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=S,this.size=u,this.cts=d,this.flags=new y(E)},y=function(E){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=E?2:1,this.isNonSync=E?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
                  !*** ./src/remux/passthrough-remuxer.ts ***!
                  \******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>L});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ./mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),z=O(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),V=O(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),Y=O(
/*! ../utils/logger */
"./src/utils/logger.ts");function N(R,P){var D=R?.codec;return D&&D.length>4?D:"hvc1"===D||"hev1"===D?"hvc1.1.c.L120.90":"av01"===D?"av01.0.04M.08":"avc1"===D||P===V.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const L=function(){function R(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var P=R.prototype;return P.destroy=function(){},P.resetTimeStamp=function(I){this.initPTS=I,this.lastEndTime=null},P.resetNextTimestamp=function(){this.lastEndTime=null},P.resetInitSegment=function(I,M,_,m){this.audioCodec=M,this.videoCodec=_,this.generateInitSegment((0,z.patchEncyptionData)(I,m)),this.emitInitSegment=!0},P.generateInitSegment=function(I){var M=this.audioCodec,_=this.videoCodec;if(!I||!I.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var m=this.initData=(0,z.parseInitSegment)(I);M||(M=N(m.audio,V.ElementaryStreamTypes.AUDIO)),_||(_=N(m.video,V.ElementaryStreamTypes.VIDEO));var v={};m.audio&&m.video?v.audiovideo={container:"video/mp4",codec:M+","+_,initSegment:I,id:"main"}:m.audio?v.audio={container:"audio/mp4",codec:M,initSegment:I,id:"audio"}:m.video?v.video={container:"video/mp4",codec:_,initSegment:I,id:"main"}:Y.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=v},P.remux=function(I,M,_,m,v){var f,b=this.initPTS,C=this.lastEndTime,h={audio:void 0,video:void 0,text:m,id3:_,initSegment:void 0};(0,W.isFiniteNumber)(C)||(C=this.lastEndTime=v||0);var y=M.samples;if(!y||!y.length)return h;var w={initPTS:void 0,timescale:1},E=this.initData;if((!E||!E.length)&&(this.generateInitSegment(y),E=this.initData),!E||!E.length)return Y.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(w.tracks=this.initTracks,this.emitInitSegment=!1);var S=(0,z.getStartDTS)(E,y);(0,W.isFiniteNumber)(b)||(this.initPTS=w.initPTS=b=S-v);var u=(0,z.getDuration)(y,E),d=I?S-b:C,c=d+u;(0,z.offsetStartDTS)(E,y,b),u>0?this.lastEndTime=c:(Y.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var p=!!E.audio,x=!!E.video,T="";p&&(T+="audio"),x&&(T+="video");var k={data1:y,startPTS:d,startDTS:d,endPTS:c,endDTS:c,type:T,hasAudio:p,hasVideo:x,nb:1,dropped:0};h.audio="audio"===k.type?k:void 0,h.video="audio"!==k.type?k:void 0,h.initSegment=w;var H=null!=(f=this.initPTS)?f:0;return h.id3=(0,B.flushTextTrackMetadataCueSamples)(_,v,H,H),m.samples.length&&(h.text=(0,B.flushTextTrackUserdataCueSamples)(m,v,H)),h},R}()},"./src/task-loop.ts":
/*!**************************!*\
                  !*** ./src/task-loop.ts ***!
                  \**************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>W});var W=function(){function B(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var z=B.prototype;return z.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},z.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},z.onHandlerDestroyed=function(){},z.hasInterval=function(){return!!this._tickInterval},z.hasNextTick=function(){return!!this._tickTimer},z.setInterval=function(Y){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,Y),!0)},z.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},z.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},z.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},z.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},z.doTick=function(){},B}()},"./src/types/cmcd.ts":
/*!***************************!*\
                  !*** ./src/types/cmcd.ts ***!
                  \***************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{CMCDObjectType:()=>B,CMCDStreamType:()=>V,CMCDStreamingFormat:()=>z,CMCDVersion:()=>W});var W=1,B=(()=>{return(Y=B||(B={})).MANIFEST="m",Y.AUDIO="a",Y.VIDEO="v",Y.MUXED="av",Y.INIT="i",Y.CAPTION="c",Y.TIMED_TEXT="tt",Y.KEY="k",Y.OTHER="o",B;var Y})(),z=(()=>{return(Y=z||(z={})).DASH="d",Y.HLS="h",Y.SMOOTH="s",Y.OTHER="o",z;var Y})(),V=(()=>{return(Y=V||(V={})).VOD="v",Y.LIVE="l",V;var Y})()},"./src/types/demuxer.ts":
/*!******************************!*\
                  !*** ./src/types/demuxer.ts ***!
                  \******************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{MetadataSchema:()=>W});var W=(()=>{return(B=W||(W={})).audioId3="org.id3",B.dateRange="com.apple.quicktime.HLS",B.emsg="https://aomedia.org/emsg/ID3",W;var B})()},"./src/types/level.ts":
/*!****************************!*\
                  !*** ./src/types/level.ts ***!
                  \****************************/(pe,q,O)=>{"use strict";function W(P,D){for(var I=0;I<D.length;I++){var M=D[I];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(P,z(M.key),M)}}function z(P){var D=function V(P,D){if("object"!=typeof P||null===P)return P;var I=P[Symbol.toPrimitive];if(void 0!==I){var M=I.call(P,D||"default");if("object"!=typeof M)return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===D?String:Number)(P)}(P,"string");return"symbol"==typeof D?D:String(D)}O.r(q),O.d(q,{HdcpLevels:()=>Y,HlsSkip:()=>U,HlsUrlParameters:()=>L,Level:()=>R,getSkipValue:()=>N});var Y=["NONE","TYPE-0","TYPE-1","TYPE-2",null],U=(()=>{return(P=U||(U={})).No="",P.Yes="YES",P.v2="v2",U;var P})();function N(P,D){var I=P.canSkipUntil;return I&&(void 0!==D?D-P.endSN:0)<I?P.canSkipDateRanges?U.v2:U.Yes:U.No}var L=function(){function P(I,M,_){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=I,this.part=M,this.skip=_}return P.prototype.addDirectives=function(M){var _=new self.URL(M);return void 0!==this.msn&&_.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&_.searchParams.set("_HLS_part",this.part.toString()),this.skip&&_.searchParams.set("_HLS_skip",this.skip),_.href},P}(),R=function(){function P(D){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[D.url],this.attrs=D.attrs,this.bitrate=D.bitrate,D.details&&(this.details=D.details),this.id=D.id||0,this.name=D.name,this.width=D.width||0,this.height=D.height||0,this.audioCodec=D.audioCodec,this.videoCodec=D.videoCodec,this.unknownCodecs=D.unknownCodecs,this.codecSet=[D.videoCodec,D.audioCodec].filter(function(I){return I}).join(",").replace(/\.[^.,]+/g,"")}return function B(P,D,I){D&&W(P.prototype,D),I&&W(P,I),Object.defineProperty(P,"prototype",{writable:!1})}(P,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(I){var M=I%this.url.length;this._urlId!==M&&(this.details=void 0,this._urlId=M)}}]),P}()},"./src/types/loader.ts":
/*!*****************************!*\
                  !*** ./src/types/loader.ts ***!
                  \*****************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{PlaylistContextType:()=>W,PlaylistLevelType:()=>B});var W=(()=>{return(z=W||(W={})).MANIFEST="manifest",z.LEVEL="level",z.AUDIO_TRACK="audioTrack",z.SUBTITLE_TRACK="subtitleTrack",W;var z})(),B=(()=>{return(z=B||(B={})).MAIN="main",z.AUDIO="audio",z.SUBTITLE="subtitle",B;var z})()},"./src/types/transmuxer.ts":
/*!*********************************!*\
                  !*** ./src/types/transmuxer.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{ChunkMetadata:()=>W});var W=function(V,Y,U,N,L,R){void 0===N&&(N=0),void 0===L&&(L=-1),void 0===R&&(R=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=V,this.sn=Y,this.id=U,this.size=N,this.part=L,this.partial=R}},"./src/utils/attr-list.ts":
/*!********************************!*\
                  !*** ./src/utils/attr-list.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{AttrList:()=>z});var W=/^(\d+)x(\d+)$/,B=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,z=function(){function V(U){for(var N in"string"==typeof U&&(U=V.parseAttrList(U)),U)U.hasOwnProperty(N)&&(this[N]=U[N])}var Y=V.prototype;return Y.decimalInteger=function(N){var L=parseInt(this[N],10);return L>Number.MAX_SAFE_INTEGER?1/0:L},Y.hexadecimalInteger=function(N){if(this[N]){var L=(this[N]||"0x").slice(2);L=(1&L.length?"0":"")+L;for(var R=new Uint8Array(L.length/2),P=0;P<L.length/2;P++)R[P]=parseInt(L.slice(2*P,2*P+2),16);return R}return null},Y.hexadecimalIntegerAsNumber=function(N){var L=parseInt(this[N],16);return L>Number.MAX_SAFE_INTEGER?1/0:L},Y.decimalFloatingPoint=function(N){return parseFloat(this[N])},Y.optionalFloat=function(N,L){var R=this[N];return R?parseFloat(R):L},Y.enumeratedString=function(N){return this[N]},Y.bool=function(N){return"YES"===this[N]},Y.decimalResolution=function(N){var L=W.exec(this[N]);if(null!==L)return{width:parseInt(L[1],10),height:parseInt(L[2],10)}},V.parseAttrList=function(N){var L,R={};for(B.lastIndex=0;null!==(L=B.exec(N));){var D=L[2];0===D.indexOf('"')&&D.lastIndexOf('"')===D.length-1&&(D=D.slice(1,-1)),R[L[1]]=D}return R},V}()},"./src/utils/binary-search.ts":
/*!************************************!*\
                  !*** ./src/utils/binary-search.ts ***!
                  \************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>B});const B={search:function(V,Y){for(var U=0,N=V.length-1,L=null,R=null;U<=N;){var P=Y(R=V[L=(U+N)/2|0]);if(P>0)U=L+1;else{if(!(P<0))return R;N=L-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
                  !*** ./src/utils/buffer-helper.ts ***!
                  \************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{BufferHelper:()=>z});var W=O(
/*! ./logger */
"./src/utils/logger.ts"),B={length:0,start:function(){return 0},end:function(){return 0}},z=function(){function V(){}return V.isBuffered=function(U,N){try{if(U)for(var L=V.getBuffered(U),R=0;R<L.length;R++)if(N>=L.start(R)&&N<=L.end(R))return!0}catch{}return!1},V.bufferInfo=function(U,N,L){try{if(U){var D,R=V.getBuffered(U),P=[];for(D=0;D<R.length;D++)P.push({start:R.start(D),end:R.end(D)});return this.bufferedInfo(P,N,L)}}catch{}return{len:0,start:N,end:N,nextStart:void 0}},V.bufferedInfo=function(U,N,L){N=Math.max(0,N),U.sort(function(h,y){return h.start-y.start||y.end-h.end});var R=[];if(L)for(var P=0;P<U.length;P++){var D=R.length;if(D){var I=R[D-1].end;U[P].start-I<L?U[P].end>I&&(R[D-1].end=U[P].end):R.push(U[P])}else R.push(U[P])}else R=U;for(var _,M=0,m=N,v=N,f=0;f<R.length;f++){var b=R[f].start,C=R[f].end;if(N+L>=b&&N<C)m=b,M=(v=C)-N;else if(N+L<b){_=b;break}}return{len:M,start:m||0,end:v||0,nextStart:_}},V.getBuffered=function(U){try{return U.buffered}catch(N){return W.logger.log("failed to get media.buffered",N),B}},V}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
                  !*** ./src/utils/cea-608-parser.ts ***!
                  \*************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{CaptionScreen:()=>f,Row:()=>v,default:()=>E});var W=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),B={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},z=function(u){var d=u;return B.hasOwnProperty(u)&&(d=B[u]),String.fromCharCode(d)},V=15,Y=100,U={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},N={17:2,18:4,21:6,22:8,23:10,19:13,20:15},L={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},R={25:2,26:4,29:6,30:8,31:10,27:13,28:15},P=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],D=(()=>{return(S=D||(D={}))[S.ERROR=0]="ERROR",S[S.TEXT=1]="TEXT",S[S.WARNING=2]="WARNING",S[S.INFO=2]="INFO",S[S.DEBUG=3]="DEBUG",S[S.DATA=3]="DATA",D;var S})(),I=function(){function S(){this.time=null,this.verboseLevel=D.ERROR}return S.prototype.log=function(c,p){if(this.verboseLevel>=c){var x="function"==typeof p?p():p;W.logger.log(this.time+" ["+c+"] "+x)}},S}(),M=function(u){for(var d=[],c=0;c<u.length;c++)d.push(u[c].toString(16));return d},_=function(){function S(d,c,p,x,T){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=d||"white",this.underline=c||!1,this.italics=p||!1,this.background=x||"black",this.flash=T||!1}var u=S.prototype;return u.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},u.setStyles=function(c){for(var p=["foreground","underline","italics","background","flash"],x=0;x<p.length;x++){var T=p[x];c.hasOwnProperty(T)&&(this[T]=c[T])}},u.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},u.equals=function(c){return this.foreground===c.foreground&&this.underline===c.underline&&this.italics===c.italics&&this.background===c.background&&this.flash===c.flash},u.copy=function(c){this.foreground=c.foreground,this.underline=c.underline,this.italics=c.italics,this.background=c.background,this.flash=c.flash},u.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},S}(),m=function(){function S(d,c,p,x,T,k){this.uchar=void 0,this.penState=void 0,this.uchar=d||" ",this.penState=new _(c,p,x,T,k)}var u=S.prototype;return u.reset=function(){this.uchar=" ",this.penState.reset()},u.setChar=function(c,p){this.uchar=c,this.penState.copy(p)},u.setPenState=function(c){this.penState.copy(c)},u.equals=function(c){return this.uchar===c.uchar&&this.penState.equals(c.penState)},u.copy=function(c){this.uchar=c.uchar,this.penState.copy(c.penState)},u.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},S}(),v=function(){function S(d){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var c=0;c<Y;c++)this.chars.push(new m);this.logger=d,this.pos=0,this.currPenState=new _}var u=S.prototype;return u.equals=function(c){for(var p=!0,x=0;x<Y;x++)if(!this.chars[x].equals(c.chars[x])){p=!1;break}return p},u.copy=function(c){for(var p=0;p<Y;p++)this.chars[p].copy(c.chars[p])},u.isEmpty=function(){for(var c=!0,p=0;p<Y;p++)if(!this.chars[p].isEmpty()){c=!1;break}return c},u.setCursor=function(c){this.pos!==c&&(this.pos=c),this.pos<0?(this.logger.log(D.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Y&&(this.logger.log(D.DEBUG,"Too large cursor position "+this.pos),this.pos=Y)},u.moveCursor=function(c){var p=this.pos+c;if(c>1)for(var x=this.pos+1;x<p+1;x++)this.chars[x].setPenState(this.currPenState);this.setCursor(p)},u.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},u.insertChar=function(c){var p=this;c>=144&&this.backSpace();var x=z(c);this.pos>=Y?this.logger.log(D.ERROR,function(){return"Cannot insert "+c.toString(16)+" ("+x+") at position "+p.pos+". Skipping it!"}):(this.chars[this.pos].setChar(x,this.currPenState),this.moveCursor(1))},u.clearFromPos=function(c){var p;for(p=c;p<Y;p++)this.chars[p].reset()},u.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},u.clearToEndOfRow=function(){this.clearFromPos(this.pos)},u.getTextString=function(){for(var c=[],p=!0,x=0;x<Y;x++){var T=this.chars[x].uchar;" "!==T&&(p=!1),c.push(T)}return p?"":c.join("")},u.setPenStyles=function(c){this.currPenState.setStyles(c),this.chars[this.pos].setPenState(this.currPenState)},S}(),f=function(){function S(d){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var c=0;c<V;c++)this.rows.push(new v(d));this.logger=d,this.currRow=V-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var u=S.prototype;return u.reset=function(){for(var c=0;c<V;c++)this.rows[c].clear();this.currRow=V-1},u.equals=function(c){for(var p=!0,x=0;x<V;x++)if(!this.rows[x].equals(c.rows[x])){p=!1;break}return p},u.copy=function(c){for(var p=0;p<V;p++)this.rows[p].copy(c.rows[p])},u.isEmpty=function(){for(var c=!0,p=0;p<V;p++)if(!this.rows[p].isEmpty()){c=!1;break}return c},u.backSpace=function(){this.rows[this.currRow].backSpace()},u.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},u.insertChar=function(c){this.rows[this.currRow].insertChar(c)},u.setPen=function(c){this.rows[this.currRow].setPenStyles(c)},u.moveCursor=function(c){this.rows[this.currRow].moveCursor(c)},u.setCursor=function(c){this.logger.log(D.INFO,"setCursor: "+c),this.rows[this.currRow].setCursor(c)},u.setPAC=function(c){this.logger.log(D.INFO,function(){return"pacData = "+JSON.stringify(c)});var p=c.row-1;if(this.nrRollUpRows&&p<this.nrRollUpRows-1&&(p=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==p){for(var x=0;x<V;x++)this.rows[x].clear();var T=this.currRow+1-this.nrRollUpRows,k=this.lastOutputScreen;if(k){var H=k.rows[T].cueStartTime,F=this.logger.time;if(H&&null!==F&&H<F)for(var G=0;G<this.nrRollUpRows;G++)this.rows[p-this.nrRollUpRows+G+1].copy(k.rows[T+G])}}this.currRow=p;var K=this.rows[this.currRow];if(null!==c.indent){var Z=Math.max(c.indent-1,0);K.setCursor(c.indent),c.color=K.chars[Z].penState.foreground}this.setPen({foreground:c.color,underline:c.underline,italics:c.italics,background:"black",flash:!1})},u.setBkgData=function(c){this.logger.log(D.INFO,function(){return"bkgData = "+JSON.stringify(c)}),this.backSpace(),this.setPen(c),this.insertChar(32)},u.setRollUpRows=function(c){this.nrRollUpRows=c},u.rollUp=function(){var c=this;if(null!==this.nrRollUpRows){this.logger.log(D.TEXT,function(){return c.getDisplayText()});var x=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];x.clear(),this.rows.splice(this.currRow,0,x),this.logger.log(D.INFO,"Rolling up")}else this.logger.log(D.DEBUG,"roll_up but nrRollUpRows not set yet")},u.getDisplayText=function(c){c=c||!1;for(var p=[],x="",k=0;k<V;k++){var H=this.rows[k].getTextString();H&&p.push(c?"Row "+(k+1)+": '"+H+"'":H.trim())}return p.length>0&&(x=c?"["+p.join(" | ")+"]":p.join("\n")),x},u.getTextAndFormat=function(){return this.rows},S}(),b=function(){function S(d,c,p){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=d,this.outputFilter=c,this.mode=null,this.verbose=0,this.displayedMemory=new f(p),this.nonDisplayedMemory=new f(p),this.lastOutputScreen=new f(p),this.currRollUpRow=this.displayedMemory.rows[V-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=p}var u=S.prototype;return u.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[V-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},u.getHandler=function(){return this.outputFilter},u.setHandler=function(c){this.outputFilter=c},u.setPAC=function(c){this.writeScreen.setPAC(c)},u.setBkgData=function(c){this.writeScreen.setBkgData(c)},u.setMode=function(c){c!==this.mode&&(this.mode=c,this.logger.log(D.INFO,function(){return"MODE="+c}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=c)},u.insertChars=function(c){for(var p=this,x=0;x<c.length;x++)this.writeScreen.insertChar(c[x]);var T=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(D.INFO,function(){return T+": "+p.writeScreen.getDisplayText(!0)}),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(D.TEXT,function(){return"DISPLAYED: "+p.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},u.ccRCL=function(){this.logger.log(D.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},u.ccBS=function(){this.logger.log(D.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},u.ccAOF=function(){},u.ccAON=function(){},u.ccDER=function(){this.logger.log(D.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},u.ccRU=function(c){this.logger.log(D.INFO,"RU("+c+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(c)},u.ccFON=function(){this.logger.log(D.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},u.ccRDC=function(){this.logger.log(D.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},u.ccTR=function(){this.logger.log(D.INFO,"TR"),this.setMode("MODE_TEXT")},u.ccRTD=function(){this.logger.log(D.INFO,"RTD"),this.setMode("MODE_TEXT")},u.ccEDM=function(){this.logger.log(D.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},u.ccCR=function(){this.logger.log(D.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},u.ccENM=function(){this.logger.log(D.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},u.ccEOC=function(){var c=this;if(this.logger.log(D.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var p=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=p,this.writeScreen=this.nonDisplayedMemory,this.logger.log(D.TEXT,function(){return"DISP: "+c.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},u.ccTO=function(c){this.logger.log(D.INFO,"TO("+c+") - Tab Offset"),this.writeScreen.moveCursor(c)},u.ccMIDROW=function(c){var p={flash:!1};if(p.underline=c%2==1,p.italics=c>=46,p.italics)p.foreground="white";else{var x=Math.floor(c/2)-16;p.foreground=["white","green","blue","cyan","red","yellow","magenta"][x]}this.logger.log(D.INFO,"MIDROW: "+JSON.stringify(p)),this.writeScreen.setPen(p)},u.outputDataUpdate=function(c){void 0===c&&(c=!1);var p=this.logger.time;null!==p&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,p,this.lastOutputScreen),c&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:p):this.cueStartTime=p,this.lastOutputScreen.copy(this.displayedMemory))},u.cueSplitAtTime=function(c){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,c,this.displayedMemory),this.cueStartTime=c))},S}();function h(S,u,d){d.a=S,d.b=u}function y(S,u,d){return d.a===S&&d.b===u}const E=function(){function S(d,c,p){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var x=new I;this.channels=[null,new b(d,c,x),new b(d+1,p,x)],this.cmdHistory={a:null,b:null},this.logger=x}var u=S.prototype;return u.getHandler=function(c){return this.channels[c].getHandler()},u.setHandler=function(c,p){this.channels[c].setHandler(p)},u.addData=function(c,p){var x,T,k,H=!1;this.logger.time=c;for(var F=0;F<p.length;F+=2)if(k=127&p[F+1],0!=(T=127&p[F])||0!==k){if(this.logger.log(D.DATA,"["+M([p[F],p[F+1]])+"] -> ("+M([T,k])+")"),(x=this.parseCmd(T,k))||(x=this.parseMidrow(T,k)),x||(x=this.parsePAC(T,k)),x||(x=this.parseBackgroundAttributes(T,k)),!x&&(H=this.parseChars(T,k))){var G=this.currentChannel;G&&G>0?this.channels[G].insertChars(H):this.logger.log(D.WARNING,"No channel found yet. TEXT-MODE?")}!x&&!H&&this.logger.log(D.WARNING,"Couldn't parse cleaned data "+M([T,k])+" orig: "+M([p[F],p[F+1]]))}},u.parseCmd=function(c,p){var x=this.cmdHistory;if(!((20===c||28===c||21===c||29===c)&&p>=32&&p<=47||(23===c||31===c)&&p>=33&&p<=35))return!1;if(y(c,p,x))return h(null,null,x),this.logger.log(D.DEBUG,"Repeated command ("+M([c,p])+") is dropped"),!0;var H=20===c||21===c||23===c?1:2,F=this.channels[H];return 20===c||21===c||28===c||29===c?32===p?F.ccRCL():33===p?F.ccBS():34===p?F.ccAOF():35===p?F.ccAON():36===p?F.ccDER():37===p?F.ccRU(2):38===p?F.ccRU(3):39===p?F.ccRU(4):40===p?F.ccFON():41===p?F.ccRDC():42===p?F.ccTR():43===p?F.ccRTD():44===p?F.ccEDM():45===p?F.ccCR():46===p?F.ccENM():47===p&&F.ccEOC():F.ccTO(p-32),h(c,p,x),this.currentChannel=H,!0},u.parseMidrow=function(c,p){var x=0;if((17===c||25===c)&&p>=32&&p<=47){if((x=17===c?1:2)!==this.currentChannel)return this.logger.log(D.ERROR,"Mismatch channel in midrow parsing"),!1;var T=this.channels[x];return!!T&&(T.ccMIDROW(p),this.logger.log(D.DEBUG,"MIDROW ("+M([c,p])+")"),!0)}return!1},u.parsePAC=function(c,p){var T=this.cmdHistory;if(!((c>=17&&c<=23||c>=25&&c<=31)&&p>=64&&p<=127||(16===c||24===c)&&p>=64&&p<=95))return!1;if(y(c,p,T))return h(null,null,T),!0;var F=c<=23?1:2,G=this.channels[F];return!!G&&(G.setPAC(this.interpretPAC(p>=64&&p<=95?1===F?U[c]:L[c]:1===F?N[c]:R[c],p)),h(c,p,T),this.currentChannel=F,!0)},u.interpretPAC=function(c,p){var x,T={color:null,italics:!1,indent:null,underline:!1,row:c};return T.underline=1==(1&(x=p>95?p-96:p-64)),x<=13?T.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(x/2)]:x<=15?(T.italics=!0,T.color="white"):T.indent=4*Math.floor((x-16)/2),T},u.parseChars=function(c,p){var x,H,T=null,k=null;if(c>=25?(x=2,k=c-8):(x=1,k=c),k>=17&&k<=19?(this.logger.log(D.INFO,"Special char '"+z(H=17===k?p+80:18===k?p+112:p+144)+"' in channel "+x),T=[H]):c>=32&&c<=127&&(T=0===p?[c]:[c,p]),T){var F=M(T);this.logger.log(D.DEBUG,"Char codes =  "+F.join(",")),h(c,p,this.cmdHistory)}return T},u.parseBackgroundAttributes=function(c,p){if(!((16===c||24===c)&&p>=32&&p<=47||(23===c||31===c)&&p>=45&&p<=47))return!1;var k,H={};return 16===c||24===c?(k=Math.floor((p-32)/2),H.background=P[k],p%2==1&&(H.background=H.background+"_semi")):45===p?H.background="transparent":(H.foreground="black",47===p&&(H.underline=!0)),this.channels[c<=23?1:2].setBkgData(H),h(c,p,this.cmdHistory),!0},u.reset=function(){for(var c=0;c<Object.keys(this.channels).length;c++){var p=this.channels[c];p&&p.reset()}this.cmdHistory={a:null,b:null}},u.cueSplitAtTime=function(c){for(var p=0;p<this.channels.length;p++){var x=this.channels[p];x&&x.cueSplitAtTime(c)}},S}()},"./src/utils/codecs.ts":
/*!*****************************!*\
                  !*** ./src/utils/codecs.ts ***!
                  \*****************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{isCodecSupportedInMp4:()=>z,isCodecType:()=>B});var W={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function B(V,Y){var U=W[Y];return!!U&&!0===U[V.slice(0,4)]}function z(V,Y){return MediaSource.isTypeSupported((Y||"video")+'/mp4;codecs="'+V+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
                  !*** ./src/utils/cues.ts ***!
                  \***************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>U});var W=O(
/*! ./vttparser */
"./src/utils/vttparser.ts"),B=O(
/*! ./webvtt-parser */
"./src/utils/webvtt-parser.ts"),z=O(
/*! ./texttrack-utils */
"./src/utils/texttrack-utils.ts"),V=/\s/;const U={newCue:function(L,R,P,D){for(var M,_,m,v,f,I=[],b=self.VTTCue||self.TextTrackCue,C=0;C<D.rows.length;C++)if(m=!0,v=0,f="",!(M=D.rows[C]).isEmpty()){for(var h=0;h<M.chars.length;h++)V.test(M.chars[h].uchar)&&m?v++:(f+=M.chars[h].uchar,m=!1);M.cueStartTime=R,R===P&&(P+=1e-4),v>=16?v--:v++;var y=(0,W.fixLineBreaks)(f.trim()),w=(0,B.generateCueId)(R,P,y);(!L||!L.cues||!L.cues.getCueById(w))&&((_=new b(R,P,y)).id=w,_.line=C+1,_.align="left",_.position=10+Math.min(80,10*Math.floor(8*v/32)),I.push(_))}return L&&I.length&&(I.sort(function(E,S){return"auto"===E.line||"auto"===S.line?0:E.line>8&&S.line>8?S.line-E.line:E.line-S.line}),I.forEach(function(E){return(0,z.addCueToTrack)(L,E)})),I}}},"./src/utils/discontinuities.ts":
/*!**************************************!*\
                  !*** ./src/utils/discontinuities.ts ***!
                  \**************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{adjustSlidingStart:()=>L,alignMediaPlaylistByPDT:()=>I,alignPDT:()=>D,alignStream:()=>R,findDiscontinuousReferenceFrag:()=>U,findFirstFragWithCC:()=>V,shouldAlignOnDiscontinuities:()=>Y});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ./logger */
"./src/utils/logger.ts"),z=O(
/*! ../controller/level-helper */
"./src/controller/level-helper.ts");function V(M,_){for(var m=null,v=0,f=M.length;v<f;v++){var b=M[v];if(b&&b.cc===_){m=b;break}}return m}function Y(M,_,m){return!(!_.details||!(m.endCC>m.startCC||M&&M.cc<m.startCC))}function U(M,_,m){void 0===m&&(m=0);var v=M.fragments,f=_.fragments;if(f.length&&v.length){var b=V(v,f[0].cc);if(b&&(!b||b.startPTS))return b;B.logger.log("No frag in previous level to align on")}else B.logger.log("No fragments to align")}function N(M,_){if(M){var m=M.start+_;M.start=M.startPTS=m,M.endPTS=m+M.duration}}function L(M,_){for(var m=_.fragments,v=0,f=m.length;v<f;v++)N(m[v],M);_.fragmentHint&&N(_.fragmentHint,M),_.alignedSliding=!0}function R(M,_,m){_&&(function P(M,_,m){if(Y(M,m,_)){var v=U(m.details,_);v&&(0,W.isFiniteNumber)(v.start)&&(B.logger.log("Adjusting PTS using last level due to CC increase within current level "+_.url),L(v.start,_))}}(M,m,_),!m.alignedSliding&&_.details&&D(m,_.details),!m.alignedSliding&&_.details&&!m.skippedSegments&&(0,z.adjustSliding)(_.details,m))}function D(M,_){if(_.fragments.length&&M.hasProgramDateTime&&_.hasProgramDateTime){var m=_.fragments[0].programDateTime,v=M.fragments[0].programDateTime,f=(v-m)/1e3+_.fragments[0].start;f&&(0,W.isFiniteNumber)(f)&&(B.logger.log("Adjusting PTS using programDateTime delta "+(v-m)+"ms, sliding:"+f.toFixed(3)+" "+M.url+" "),L(f,M))}}function I(M,_){if(M.hasProgramDateTime&&_.hasProgramDateTime){var m=M.fragments,v=_.fragments;if(m.length&&v.length){var b=v[Math.round(v.length/2)-1],C=V(m,b.cc)||m[Math.round(m.length/2)-1],h=b.programDateTime,y=C.programDateTime;null!==h&&null!==y&&L((y-h)/1e3-(C.start-b.start),M)}}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
                  !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
                  \***********************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>z});var W=O(
/*! ../utils/ewma */
"./src/utils/ewma.ts");const z=function(){function V(U,N,L){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=L,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new W.default(U),this.fast_=new W.default(N)}var Y=V.prototype;return Y.update=function(N,L){var R=this.slow_,P=this.fast_;this.slow_.halfLife!==N&&(this.slow_=new W.default(N,R.getEstimate(),R.getTotalWeight())),this.fast_.halfLife!==L&&(this.fast_=new W.default(L,P.getEstimate(),P.getTotalWeight()))},Y.sample=function(N,L){var P=(N=Math.max(N,this.minDelayMs_))/1e3,D=8*L/P;this.fast_.sample(P,D),this.slow_.sample(P,D)},Y.canEstimate=function(){var N=this.fast_;return N&&N.getTotalWeight()>=this.minWeight_},Y.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Y.destroy=function(){},V}()},"./src/utils/ewma.ts":
/*!***************************!*\
                  !*** ./src/utils/ewma.ts ***!
                  \***************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>B});const B=function(){function z(Y,U,N){void 0===U&&(U=0),void 0===N&&(N=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=Y,this.alpha_=Y?Math.exp(Math.log(.5)/Y):0,this.estimate_=U,this.totalWeight_=N}var V=z.prototype;return V.sample=function(U,N){var L=Math.pow(this.alpha_,U);this.estimate_=N*(1-L)+L*this.estimate_,this.totalWeight_+=U},V.getTotalWeight=function(){return this.totalWeight_},V.getEstimate=function(){if(this.alpha_){var U=1-Math.pow(this.alpha_,this.totalWeight_);if(U)return this.estimate_/U}return this.estimate_},z}()},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
                  !*** ./src/utils/fetch-loader.ts ***!
                  \***********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>f,fetchSupported:()=>I});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ../loader/load-stats */
"./src/loader/load-stats.ts"),z=O(
/*! ../demux/chunk-cache */
"./src/demux/chunk-cache.ts");function Y(b){var C="function"==typeof Map?new Map:void 0;return Y=function(y){if(null===y||!function L(b){return-1!==Function.toString.call(b).indexOf("[native code]")}(y))return y;if("function"!=typeof y)throw new TypeError("Super expression must either be null or a function");if(typeof C<"u"){if(C.has(y))return C.get(y);C.set(y,w)}function w(){return U(y,arguments,P(this).constructor)}return w.prototype=Object.create(y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),R(w,y)},Y(b)}function U(b,C,h){return(U=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(w,E,S){var u=[null];u.push.apply(u,E);var c=new(Function.bind.apply(w,u));return S&&R(c,S.prototype),c}).apply(null,arguments)}function R(b,C){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,w){return y.__proto__=w,y})(b,C)}function P(b){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)})(b)}function D(){return D=Object.assign?Object.assign.bind():function(b){for(var C=1;C<arguments.length;C++){var h=arguments[C];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(b[y]=h[y])}return b},D.apply(this,arguments)}function I(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var M=function(){function b(h){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=h.fetchSetup||m,this.controller=new self.AbortController,this.stats=new B.LoadStats}var C=b.prototype;return C.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},C.abortInternal=function(){var y=this.response;(!y||!y.ok)&&(this.stats.aborted=!0,this.controller.abort())},C.abort=function(){var y;this.abortInternal(),null!==(y=this.callbacks)&&void 0!==y&&y.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},C.load=function(y,w,E){var S=this,u=this.stats;if(u.loading.start)throw new Error("Loader can only be used once.");u.loading.start=self.performance.now();var d=function _(b,C){var h={method:"GET",mode:"cors",credentials:"same-origin",signal:C,headers:new self.Headers(D({},b.headers))};return b.rangeEnd&&h.headers.set("Range","bytes="+b.rangeStart+"-"+String(b.rangeEnd-1)),h}(y,this.controller.signal),c=E.onProgress,p="arraybuffer"===y.responseType,x=p?"byteLength":"length";this.context=y,this.config=w,this.callbacks=E,this.request=this.fetchSetup(y,d),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){S.abortInternal(),E.onTimeout(u,y,S.response)},w.timeout),self.fetch(this.request).then(function(T){if(S.response=S.loader=T,!T.ok)throw new v(T.statusText||"fetch, bad network response",T.status,T);return u.loading.first=Math.max(self.performance.now(),u.loading.start),u.total=parseInt(T.headers.get("Content-Length")||"0"),c&&(0,W.isFiniteNumber)(w.highWaterMark)?S.loadProgressively(T,u,y,w.highWaterMark,c):p?T.arrayBuffer():T.text()}).then(function(T){var k=S.response;self.clearTimeout(S.requestTimeout),u.loading.end=Math.max(self.performance.now(),u.loading.first);var H=T[x];H&&(u.loaded=u.total=H);var F={url:k.url,data:T};c&&!(0,W.isFiniteNumber)(w.highWaterMark)&&c(u,y,T,k),E.onSuccess(F,u,y,k)}).catch(function(T){self.clearTimeout(S.requestTimeout),u.aborted||E.onError({code:T&&T.code||0,text:T?T.message:null},y,T?T.details:null)})},C.getCacheAge=function(){var y=null;if(this.response){var w=this.response.headers.get("age");y=w?parseFloat(w):null}return y},C.loadProgressively=function(y,w,E,S,u){void 0===S&&(S=0);var d=new z.default,c=y.body.getReader();return function x(){return c.read().then(function(T){if(T.done)return d.dataLength&&u(w,E,d.flush(),y),Promise.resolve(new ArrayBuffer(0));var k=T.value,H=k.length;return w.loaded+=H,H<S||d.dataLength?(d.push(k),d.dataLength>=S&&u(w,E,d.flush(),y)):u(w,E,k,y),x()}).catch(function(){return Promise.reject()})}()},b}();function m(b,C){return new self.Request(b.url,C)}var v=function(b){function C(h,y,w){var E;return(E=b.call(this,h)||this).code=void 0,E.details=void 0,E.code=y,E.details=w,E}return function V(b,C){b.prototype=Object.create(C.prototype),b.prototype.constructor=b,R(b,C)}(C,b),C}(Y(Error));const f=M},"./src/utils/hex.ts":
/*!**************************!*\
                  !*** ./src/utils/hex.ts ***!
                  \**************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>B});const B={hexDump:function(V){for(var Y="",U=0;U<V.length;U++){var N=V[U].toString(16);N.length<2&&(N="0"+N),Y+=N}return Y}}},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
                  !*** ./src/utils/imsc1-ttml-parser.ts ***!
                  \****************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{IMSC1_CODEC:()=>L,parseIMSC1:()=>I});var W=O(
/*! ./mp4-tools */
"./src/utils/mp4-tools.ts"),B=O(
/*! ./vttparser */
"./src/utils/vttparser.ts"),z=O(
/*! ./vttcue */
"./src/utils/vttcue.ts"),V=O(
/*! ../demux/id3 */
"./src/demux/id3.ts"),Y=O(
/*! ./timescale-conversion */
"./src/utils/timescale-conversion.ts"),U=O(
/*! ./webvtt-parser */
"./src/utils/webvtt-parser.ts");function N(){return N=Object.assign?Object.assign.bind():function(E){for(var S=1;S<arguments.length;S++){var u=arguments[S];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(E[d]=u[d])}return E},N.apply(this,arguments)}var L="stpp.ttml.im1t",R=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,P=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,D={left:"start",center:"center",right:"end",start:"start",end:"end"};function I(E,S,u,d,c){var p=(0,W.findBox)(new Uint8Array(E),["mdat"]);if(0!==p.length){var x=p.map(function(k){return(0,V.utf8ArrayToStr)(k)}),T=(0,Y.toTimescaleFromScale)(S,1,u);try{x.forEach(function(k){return d(function M(E,S){var c=(new DOMParser).parseFromString(E,"text/xml").getElementsByTagName("tt")[0];if(!c)throw new Error("Invalid ttml");var p={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},x=Object.keys(p).reduce(function(G,K){return G[K]=c.getAttribute("ttp:"+K)||p[K],G},{}),T="preserve"!==c.getAttribute("xml:space"),k=m(_(c,"styling","style")),H=m(_(c,"layout","region")),F=_(c,"body","[begin]");return[].map.call(F,function(G){var K=v(G,T);if(!K||!G.hasAttribute("begin"))return null;var $=h(G.getAttribute("begin"),x),Z=h(G.getAttribute("dur"),x),te=h(G.getAttribute("end"),x);if(null===$)throw C(G);if(null===te){if(null===Z)throw C(G);te=$+Z}var Q=new z.default($-S,te-S,K);Q.id=(0,U.generateCueId)(Q.startTime,Q.endTime,Q.text);var ce=function f(E,S,u){var d="http://www.w3.org/ns/ttml#styling",c=null,x=null!=E&&E.hasAttribute("style")?E.getAttribute("style"):null;return x&&u.hasOwnProperty(x)&&(c=u[x]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(T,k){var H=b(S,d,k)||b(E,d,k)||b(c,d,k);return H&&(T[k]=H),T},{})}(H[G.getAttribute("region")],k[G.getAttribute("style")],k),ue=ce.textAlign;if(ue){var he=D[ue];he&&(Q.lineAlign=he),Q.align=ue}return N(Q,ce),Q}).filter(function(G){return null!==G})}(k,T))})}catch(k){c(k)}}else c(new Error("Could not parse IMSC1 mdat"))}function _(E,S,u){var d=E.getElementsByTagName(S)[0];return d?[].slice.call(d.querySelectorAll(u)):[]}function m(E){return E.reduce(function(S,u){var d=u.getAttribute("xml:id");return d&&(S[d]=u),S},{})}function v(E,S){return[].slice.call(E.childNodes).reduce(function(u,d,c){var p;return"br"===d.nodeName&&c?u+"\n":null!==(p=d.childNodes)&&void 0!==p&&p.length?v(d,S):S?u+d.textContent.trim().replace(/\s+/g," "):u+d.textContent},"")}function b(E,S,u){return E&&E.hasAttributeNS(S,u)?E.getAttributeNS(S,u):null}function C(E){return new Error("Could not parse ttml timestamp "+E)}function h(E,S){if(!E)return null;var u=(0,B.parseTimeStamp)(E);return null===u&&(R.test(E)?u=function y(E,S){var u=R.exec(E);return 3600*(0|u[1])+60*(0|u[2])+(0|u[3])+((0|u[4])+(0|u[5])/S.subFrameRate)/S.frameRate}(E,S):P.test(E)&&(u=function w(E,S){var u=P.exec(E),d=Number(u[1]);switch(u[2]){case"h":return 3600*d;case"m":return 60*d;case"ms":return 1e3*d;case"f":return d/S.frameRate;case"t":return d/S.tickRate}return d}(E,S))),u}},"./src/utils/keysystem-util.ts":
/*!*************************************!*\
                  !*** ./src/utils/keysystem-util.ts ***!
                  \*************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{changeEndianness:()=>z,convertDataUriToArrayBytes:()=>V,strToUtf8array:()=>Y});var W=O(
/*! ./numeric-encoding-utils */
"./src/utils/numeric-encoding-utils.ts");function z(U){var N=function(R,P,D){var I=R[P];R[P]=R[D],R[D]=I};N(U,0,3),N(U,1,2),N(U,4,5),N(U,6,7)}function V(U){var N=U.split(":"),L=null;if("data"===N[0]&&2===N.length){var R=N[1].split(";"),P=R[R.length-1].split(",");if(2===P.length){var I=P[1];"base64"===P[0]?(R.splice(-1,1),L=(0,W.base64Decode)(I)):L=function B(U){var N=Y(U).subarray(0,16),L=new Uint8Array(16);return L.set(N,16-N.length),L}(I)}}return L}function Y(U){return Uint8Array.from(unescape(encodeURIComponent(U)),function(N){return N.charCodeAt(0)})}},"./src/utils/logger.ts":
/*!*****************************!*\
                  !*** ./src/utils/logger.ts ***!
                  \*****************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{enableLogs:()=>U,logger:()=>N});var W=function(){},B={trace:W,debug:W,log:W,warn:W,info:W,error:W},z=B;function U(L,R){if(self.console&&!0===L||"object"==typeof L){!function Y(L){for(var R=arguments.length,P=new Array(R>1?R-1:0),D=1;D<R;D++)P[D-1]=arguments[D];P.forEach(function(I){z[I]=L[I]?L[I].bind(L):function V(L){var R=self.console[L];return R?R.bind(self.console,"["+L+"] >"):W}(I)})}(L,"debug","log","info","warn","error");try{z.log('Debug logs enabled for "'+R+'"')}catch{z=B}}else z=B}var N=B},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
                  !*** ./src/utils/mediakeys-helper.ts ***!
                  \***************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{KeySystemFormats:()=>B,KeySystemIds:()=>V,KeySystems:()=>W,getKeySystemsForConfig:()=>N,getSupportedMediaKeySystemConfigurations:()=>R,keySystemDomainToKeySystemFormat:()=>U,keySystemFormatToKeySystemDomain:()=>z,keySystemIdToKeySystemDomain:()=>Y,requestMediaKeySystemAccess:()=>L});var W=(()=>{return(D=W||(W={})).CLEARKEY="org.w3.clearkey",D.FAIRPLAY="com.apple.fps",D.PLAYREADY="com.microsoft.playready",D.WIDEVINE="com.widevine.alpha",W;var D})(),B=(()=>{return(D=B||(B={})).CLEARKEY="org.w3.clearkey",D.FAIRPLAY="com.apple.streamingkeydelivery",D.PLAYREADY="com.microsoft.playready",D.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",B;var D})();function z(D){switch(D){case B.FAIRPLAY:return W.FAIRPLAY;case B.PLAYREADY:return W.PLAYREADY;case B.WIDEVINE:return W.WIDEVINE;case B.CLEARKEY:return W.CLEARKEY}}var V=(()=>((V||(V={})).WIDEVINE="edef8ba979d64acea3c827dcd51d21ed",V))();function Y(D){if(D===V.WIDEVINE)return W.WIDEVINE}function U(D){switch(D){case W.FAIRPLAY:return B.FAIRPLAY;case W.PLAYREADY:return B.PLAYREADY;case W.WIDEVINE:return B.WIDEVINE;case W.CLEARKEY:return B.CLEARKEY}}function N(D){var I=D.drmSystems,M=D.widevineLicenseUrl,_=I?[W.FAIRPLAY,W.WIDEVINE,W.PLAYREADY,W.CLEARKEY].filter(function(m){return!!I[m]}):[];return!_[W.WIDEVINE]&&M&&_.push(W.WIDEVINE),_}var L=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function R(D,I,M,_){var m;switch(D){case W.FAIRPLAY:m=["cenc","sinf"];break;case W.WIDEVINE:case W.PLAYREADY:m=["cenc"];break;case W.CLEARKEY:m=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+D)}return function P(D,I,M,_){return[{initDataTypes:D,persistentState:_.persistentState||"not-allowed",distinctiveIdentifier:_.distinctiveIdentifier||"not-allowed",sessionTypes:_.sessionTypes||[_.sessionType||"temporary"],audioCapabilities:I.map(function(v){return{contentType:'audio/mp4; codecs="'+v+'"',robustness:_.audioRobustness||"",encryptionScheme:_.audioEncryptionScheme||null}}),videoCapabilities:M.map(function(v){return{contentType:'video/mp4; codecs="'+v+'"',robustness:_.videoRobustness||"",encryptionScheme:_.videoEncryptionScheme||null}})}]}(m,I,M,_)}},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
                  !*** ./src/utils/mediasource-helper.ts ***!
                  \*****************************************/(pe,q,O)=>{"use strict";function W(){return self.MediaSource||self.WebKitMediaSource}O.r(q),O.d(q,{getMediaSource:()=>W})},"./src/utils/mp4-tools.ts":
/*!********************************!*\
                  !*** ./src/utils/mp4-tools.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{RemuxerTrackIdConfig:()=>L,appendUint8Array:()=>S,bin2str:()=>R,computeRawDurationFromSamples:()=>y,discardEPB:()=>x,findBox:()=>_,getDuration:()=>h,getStartDTS:()=>C,mp4Box:()=>k,mp4pssh:()=>H,offsetStartDTS:()=>w,parseEmsg:()=>T,parseInitSegment:()=>v,parsePssh:()=>F,parseSEIMessageFromNALu:()=>p,parseSamples:()=>u,parseSegmentIndex:()=>m,parseSinf:()=>b,patchEncyptionData:()=>f,readSint32:()=>I,readUint16:()=>P,readUint32:()=>D,segmentValidRange:()=>E,writeUint32:()=>M});var W=O(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),B=O(
/*! ./typed-array */
"./src/utils/typed-array.ts"),z=O(
/*! ../demux/id3 */
"./src/demux/id3.ts"),V=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=O(
/*! ./hex */
"./src/utils/hex.ts"),U=Math.pow(2,32)-1,N=[].push,L={video:1,audio:2,id3:3,text:4};function R(G){return String.fromCharCode.apply(null,G)}function P(G,K){var $=G[K]<<8|G[K+1];return $<0?65536+$:$}function D(G,K){var $=I(G,K);return $<0?4294967296+$:$}function I(G,K){return G[K]<<24|G[K+1]<<16|G[K+2]<<8|G[K+3]}function M(G,K,$){G[K]=$>>24,G[K+1]=$>>16&255,G[K+2]=$>>8&255,G[K+3]=255&$}function _(G,K){var $=[];if(!K.length)return $;for(var Z=G.byteLength,te=0;te<Z;){var Q=D(G,te),se=Q>1?te+Q:Z;if(R(G.subarray(te+4,te+8))===K[0])if(1===K.length)$.push(G.subarray(te+8,se));else{var ce=_(G.subarray(te+8,se),K.slice(1));ce.length&&N.apply($,ce)}te=se}return $}function m(G){var K=[],$=G[0],Z=8,te=D(G,Z);Z+=4,Z+=0===$?8:16;var se=G.length+0,ce=P(G,Z+=2);Z+=2;for(var ue=0;ue<ce;ue++){var he=Z,be=D(G,he);he+=4;var Re=2147483647&be;if(1==(2147483648&be)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var De=D(G,he);he+=4,K.push({referenceSize:Re,subsegmentDuration:De,info:{duration:De/te,start:se,end:se+Re-1}}),se+=Re,Z=he+=4}return{earliestPresentationTime:0,timescale:te,version:$,referencesCount:ce,references:K}}function v(G){for(var K=[],$=_(G,["moov","trak"]),Z=0;Z<$.length;Z++){var te=$[Z],Q=_(te,["tkhd"])[0];if(Q){var re=Q[0],se=0===re?12:20,ce=D(Q,se),ue=_(te,["mdia","mdhd"])[0];if(ue){var he=D(ue,se=0===(re=ue[0])?12:20),be=_(te,["mdia","hdlr"])[0];if(be){var Re=R(be.subarray(8,12)),Se={soun:W.ElementaryStreamTypes.AUDIO,vide:W.ElementaryStreamTypes.VIDEO}[Re];if(Se){var De=_(te,["mdia","minf","stbl","stsd"])[0],Me=void 0;De&&(Me=R(De.subarray(12,16))),K[ce]={timescale:he,type:Se},K[Se]={timescale:he,id:ce,codec:Me}}}}}}return _(G,["moov","mvex","trex"]).forEach(function(ct){var Nt=D(ct,4),St=K[Nt];St&&(St.default={duration:D(ct,12),flags:D(ct,20)})}),K}function f(G,K){if(!G||!K)return G;var $=K.keyId;return $&&K.isCommonEncryption&&_(G,["moov","trak"]).forEach(function(te){var re=_(te,["mdia","minf","stbl","stsd"])[0].subarray(8),se=_(re,["enca"]),ce=se.length>0;ce||(se=_(re,["encv"])),se.forEach(function(ue){_(ue.subarray(ce?28:78),["sinf"]).forEach(function(Re){var Se=b(Re);if(Se){var De=Se.subarray(8,24);De.some(function(Me){return 0!==Me})||(V.logger.log("[eme] Patching keyId in 'enc"+(ce?"a":"v")+">sinf>>tenc' box: "+Y.default.hexDump(De)+" -> "+Y.default.hexDump($)),Se.set($,8))}})})}),G}function b(G){var K=_(G,["schm"])[0];if(K){var $=R(K.subarray(4,8));if("cbcs"===$||"cenc"===$)return _(G,["schi","tenc"])[0]}return V.logger.error("[eme] missing 'schm' box"),null}function C(G,K){return _(K,["moof","traf"]).reduce(function($,Z){var te=_(Z,["tfdt"])[0],Q=te[0],re=_(Z,["tfhd"]).reduce(function(se,ce){var ue=D(ce,4),he=G[ue];if(he){var be=D(te,4);1===Q&&(be*=Math.pow(2,32),be+=D(te,8));var Se=be/(he.timescale||9e4);if(isFinite(Se)&&(null===se||Se<se))return Se}return se},null);return null!==re&&isFinite(re)&&(null===$||re<$)?re:$},null)||0}function h(G,K){for(var $=0,Z=0,te=0,Q=_(G,["moof","traf"]),re=0;re<Q.length;re++){var se=Q[re],ce=_(se,["tfhd"])[0],he=K[D(ce,4)];if(he){var be=he.default,Re=D(ce,0)|be?.flags,Se=be?.duration;8&Re&&(Se=D(ce,2&Re?12:8));for(var De=he.timescale||9e4,Me=_(se,["trun"]),it=0;it<Me.length;it++)!($=y(Me[it]))&&Se&&($=Se*D(Me[it],4)),he.type===W.ElementaryStreamTypes.VIDEO?Z+=$/De:he.type===W.ElementaryStreamTypes.AUDIO&&(te+=$/De)}}if(0===Z&&0===te){for(var Nt=0,St=_(G,["sidx"]),Bt=0;Bt<St.length;Bt++){var gt=m(St[Bt]);null!=gt&&gt.references&&(Nt+=gt.references.reduce(function(Rt,mt){return Rt+mt.info.duration||0},0))}return Nt}return Z||te}function y(G){var K=D(G,0),$=8;1&K&&($+=4),4&K&&($+=4);for(var Z=0,te=D(G,4),Q=0;Q<te;Q++)256&K&&(Z+=D(G,$),$+=4),512&K&&($+=4),1024&K&&($+=4),2048&K&&($+=4);return Z}function w(G,K,$){_(K,["moof","traf"]).forEach(function(Z){_(Z,["tfhd"]).forEach(function(te){var Q=D(te,4),re=G[Q];if(re){var se=re.timescale||9e4;_(Z,["tfdt"]).forEach(function(ce){var ue=ce[0],he=D(ce,4);if(0===ue)he-=$*se,M(ce,4,he=Math.max(he,0));else{he*=Math.pow(2,32),he+=D(ce,8),he-=$*se,he=Math.max(he,0);var be=Math.floor(he/(U+1)),Re=Math.floor(he%(U+1));M(ce,4,be),M(ce,8,Re)}})}})})}function E(G){var K={valid:null,remainder:null},$=_(G,["moof"]);if(!$)return K;if($.length<2)return K.remainder=G,K;var Z=$[$.length-1];return K.valid=(0,B.sliceUint8)(G,0,Z.byteOffset-8),K.remainder=(0,B.sliceUint8)(G,Z.byteOffset-8),K}function S(G,K){var $=new Uint8Array(G.length+K.length);return $.set(G),$.set(K,G.length),$}function u(G,K){var $=[],Z=K.samples,te=K.timescale,Q=K.id,re=!1;return _(Z,["moof"]).map(function(ce){var ue=ce.byteOffset-8;_(ce,["traf"]).map(function(be){var Re=_(be,["tfdt"]).map(function(Se){var De=Se[0],Me=D(Se,4);return 1===De&&(Me*=Math.pow(2,32),Me+=D(Se,8)),Me/te})[0];return void 0!==Re&&(G=Re),_(be,["tfhd"]).map(function(Se){var De=D(Se,4),Me=16777215&D(Se,0),St=0,Bt=0!=(16&Me),gt=0,Rt=0!=(32&Me),mt=8;De===Q&&(0!=(1&Me)&&(mt+=8),0!=(2&Me)&&(mt+=4),0!=(8&Me)&&(St=D(Se,mt),mt+=4),Bt&&(gt=D(Se,mt),mt+=4),Rt&&(mt+=4),"video"===K.type&&(re=function d(G){if(!G)return!1;var K=G.indexOf("."),$=K<0?G:G.substring(0,K);return"hvc1"===$||"hev1"===$||"dvh1"===$||"dvhe"===$}(K.codec)),_(be,["trun"]).map(function(Xt){var mn=Xt[0],At=16777215&D(Xt,0),Tn=0!=(1&At),Fn=0,ar=0!=(4&At),Yn=0!=(256&At),lr=0,Tr=0!=(512&At),Xn=0,En=0!=(1024&At),Mn=0!=(2048&At),Qn=0,Zn=D(Xt,4),jt=8;Tn&&(Fn=D(Xt,jt),jt+=4),ar&&(jt+=4);for(var wn=Fn+ue,qn=0;qn<Zn;qn++){if(Yn?(lr=D(Xt,jt),jt+=4):lr=St,Tr?(Xn=D(Xt,jt),jt+=4):Xn=gt,En&&(jt+=4),Mn&&(Qn=0===mn?D(Xt,jt):I(Xt,jt),jt+=4),K.type===W.ElementaryStreamTypes.VIDEO)for(var bs=0;bs<Xn;){var Ti=D(Z,wn);c(re,Z[wn+=4])&&p(Z.subarray(wn,wn+Ti),re?2:1,G+Qn/te,$),wn+=Ti,bs+=Ti+4}G+=lr/te}}))})})}),$}function c(G,K){if(G){var $=K>>1&63;return 39===$||40===$}return 6==(31&K)}function p(G,K,$,Z){var te=x(G),Q=0;Q+=K;for(var re=0,se=0,ce=!1,ue=0;Q<te.length;){re=0;do{if(Q>=te.length)break;re+=ue=te[Q++]}while(255===ue);se=0;do{if(Q>=te.length)break;se+=ue=te[Q++]}while(255===ue);var he=te.length-Q;if(!ce&&4===re&&Q<te.length){if(ce=!0,181===te[Q++]){var Re=P(te,Q);if(Q+=2,49===Re){var Se=D(te,Q);if(Q+=4,1195456820===Se){var De=te[Q++];if(3===De){var Me=te[Q++],ct=64&Me,Nt=ct?2+3*(31&Me):0,St=new Uint8Array(Nt);if(ct){St[0]=Me;for(var Bt=1;Bt<Nt;Bt++)St[Bt]=te[Q++]}Z.push({type:De,payloadType:re,pts:$,bytes:St})}}}}}else if(5===re&&se<he){if(ce=!0,se>16){for(var gt=[],Rt=0;Rt<16;Rt++){var mt=te[Q++].toString(16);gt.push(1==mt.length?"0"+mt:mt),(3===Rt||5===Rt||7===Rt||9===Rt)&&gt.push("-")}for(var Xt=se-16,mn=new Uint8Array(Xt),At=0;At<Xt;At++)mn[At]=te[Q++];Z.push({payloadType:re,pts:$,uuid:gt.join(""),userData:(0,z.utf8ArrayToStr)(mn),userDataBytes:mn})}}else if(se<he)Q+=se;else if(se>he)break}}function x(G){for(var K=G.byteLength,$=[],Z=1;Z<K-2;)0===G[Z]&&0===G[Z+1]&&3===G[Z+2]?($.push(Z+2),Z+=2):Z++;if(0===$.length)return G;var te=K-$.length,Q=new Uint8Array(te),re=0;for(Z=0;Z<te;re++,Z++)re===$[0]&&(re++,$.shift()),Q[Z]=G[re];return Q}function T(G){var K=G[0],$="",Z="",te=0,Q=0,re=0,se=0,ce=0,ue=0;if(0===K){for(;"\0"!==R(G.subarray(ue,ue+1));)$+=R(G.subarray(ue,ue+1)),ue+=1;for($+=R(G.subarray(ue,ue+1)),ue+=1;"\0"!==R(G.subarray(ue,ue+1));)Z+=R(G.subarray(ue,ue+1)),ue+=1;Z+=R(G.subarray(ue,ue+1)),ue+=1,te=D(G,12),Q=D(G,16),se=D(G,20),ce=D(G,24),ue=28}else if(1===K){te=D(G,ue+=4);var he=D(G,ue+=4),be=D(G,ue+=4);for(ue+=4,re=Math.pow(2,32)*he+be,Number.isSafeInteger(re)||(re=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),se=D(G,ue),ce=D(G,ue+=4),ue+=4;"\0"!==R(G.subarray(ue,ue+1));)$+=R(G.subarray(ue,ue+1)),ue+=1;for($+=R(G.subarray(ue,ue+1)),ue+=1;"\0"!==R(G.subarray(ue,ue+1));)Z+=R(G.subarray(ue,ue+1)),ue+=1;Z+=R(G.subarray(ue,ue+1)),ue+=1}return{schemeIdUri:$,value:Z,timeScale:te,presentationTime:re,presentationTimeDelta:Q,eventDuration:se,id:ce,payload:G.subarray(ue,G.byteLength)}}function k(G){for(var K=arguments.length,$=new Array(K>1?K-1:0),Z=1;Z<K;Z++)$[Z-1]=arguments[Z];for(var te=$.length,Q=8,re=te;re--;)Q+=$[re].byteLength;var se=new Uint8Array(Q);for(se[0]=Q>>24&255,se[1]=Q>>16&255,se[2]=Q>>8&255,se[3]=255&Q,se.set(G,4),re=0,Q=8;re<te;re++)se.set($[re],Q),Q+=$[re].byteLength;return se}function H(G,K,$){if(16!==G.byteLength)throw new RangeError("Invalid system id");var Z,te,se;if(K){Z=1,te=new Uint8Array(16*K.length);for(var Q=0;Q<K.length;Q++){var re=K[Q];if(16!==re.byteLength)throw new RangeError("Invalid key");te.set(re,16*Q)}}else Z=0,te=new Uint8Array;Z>0?(se=new Uint8Array(4),K.length>0&&new DataView(se.buffer).setUint32(0,K.length,!1)):se=new Uint8Array;var ce=new Uint8Array(4);return $&&$.byteLength>0&&new DataView(ce.buffer).setUint32(0,$.byteLength,!1),k([112,115,115,104],new Uint8Array([Z,0,0,0]),G,se,te,ce,$||new Uint8Array)}function F(G){if(!(G instanceof ArrayBuffer)||G.byteLength<32)return null;var K={version:0,systemId:"",kids:null,data:null},$=new DataView(G),Z=$.getUint32(0);if(G.byteLength!==Z&&Z>44)return null;if(1886614376!==$.getUint32(4)||(K.version=$.getUint32(8)>>>24,K.version>1))return null;K.systemId=Y.default.hexDump(new Uint8Array(G,12,16));var Q=$.getUint32(28);if(0===K.version){if(Z-32<Q)return null;K.data=new Uint8Array(G,32,Q)}else if(1===K.version){K.kids=[];for(var re=0;re<Q;re++)K.kids.push(new Uint8Array(G,32+16*re,16))}return K}},"./src/utils/numeric-encoding-utils.ts":
/*!*********************************************!*\
                  !*** ./src/utils/numeric-encoding-utils.ts ***!
                  \*********************************************/(pe,q,O)=>{"use strict";function W(N){return N.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function B(N){return btoa(N)}function z(N){return atob(N)}function V(N){return btoa(String.fromCharCode.apply(String,N))}function Y(N){return W(V(N))}function U(N){return Uint8Array.from(atob(N),function(L){return L.charCodeAt(0)})}O.r(q),O.d(q,{base64Decode:()=>U,base64DecodeToStr:()=>z,base64Encode:()=>V,base64ToBase64Url:()=>W,base64UrlEncode:()=>Y,strToBase64Encode:()=>B})},"./src/utils/output-filter.ts":
/*!************************************!*\
                  !*** ./src/utils/output-filter.ts ***!
                  \************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>W});var W=function(){function B(V,Y){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=V,this.trackName=Y}var z=B.prototype;return z.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},z.newCue=function(Y,U,N){(null===this.startTime||this.startTime>Y)&&(this.startTime=Y),this.endTime=U,this.screen=N,this.timelineController.createCaptionsTrack(this.trackName)},z.reset=function(){this.cueRanges=[],this.startTime=null},B}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
                  !*** ./src/utils/texttrack-utils.ts ***!
                  \**************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{addCueToTrack:()=>z,clearCurrentCues:()=>V,getCuesInRange:()=>N,removeCuesInRange:()=>Y,sendAddTrackEvent:()=>B});var W=O(
/*! ./logger */
"./src/utils/logger.ts");function B(L,R){var P;try{P=new Event("addtrack")}catch{(P=document.createEvent("Event")).initEvent("addtrack",!1,!1)}P.track=L,R.dispatchEvent(P)}function z(L,R){var P=L.mode;if("disabled"===P&&(L.mode="hidden"),L.cues&&!L.cues.getCueById(R.id))try{if(L.addCue(R),!L.cues.getCueById(R.id))throw new Error("addCue is failed for: "+R)}catch(I){W.logger.debug("[texttrack-utils]: "+I);var D=new self.TextTrackCue(R.startTime,R.endTime,R.text);D.id=R.id,L.addCue(D)}"disabled"===P&&(L.mode=P)}function V(L){var R=L.mode;if("disabled"===R&&(L.mode="hidden"),L.cues)for(var P=L.cues.length;P--;)L.removeCue(L.cues[P]);"disabled"===R&&(L.mode=R)}function Y(L,R,P,D){var I=L.mode;if("disabled"===I&&(L.mode="hidden"),L.cues&&L.cues.length>0)for(var M=N(L.cues,R,P),_=0;_<M.length;_++)(!D||D(M[_]))&&L.removeCue(M[_]);"disabled"===I&&(L.mode=I)}function N(L,R,P){var D=[],I=function U(L,R){if(R<L[0].startTime)return 0;var P=L.length-1;if(R>L[P].endTime)return-1;for(var D=0,I=P;D<=I;){var M=Math.floor((I+D)/2);if(R<L[M].startTime)I=M-1;else{if(!(R>L[M].startTime&&D<P))return M;D=M+1}}return L[D].startTime-R<R-L[I].startTime?D:I}(L,R);if(I>-1)for(var M=I,_=L.length;M<_;M++){var m=L[M];if(m.startTime>=R&&m.endTime<=P)D.push(m);else if(m.startTime>P)return D}return D}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
                  !*** ./src/utils/time-ranges.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>B});const B={toString:function(V){for(var Y="",U=V.length,N=0;N<U;N++)Y+="["+V.start(N).toFixed(3)+"-"+V.end(N).toFixed(3)+"]";return Y}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
                  !*** ./src/utils/timescale-conversion.ts ***!
                  \*******************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{toMpegTsClockFromTimescale:()=>Y,toMsFromMpegTsClock:()=>V,toTimescaleFromBase:()=>B,toTimescaleFromScale:()=>z});var W=9e4;function B(U,N,L,R){void 0===L&&(L=1),void 0===R&&(R=!1);var P=U*N*L;return R?Math.round(P):P}function z(U,N,L,R){return void 0===L&&(L=1),void 0===R&&(R=!1),B(U,N,1/L,R)}function V(U,N){return void 0===N&&(N=!1),B(U,1e3,1/W,N)}function Y(U,N){return void 0===N&&(N=1),B(U,W,1/N)}},"./src/utils/typed-array.ts":
/*!**********************************!*\
                  !*** ./src/utils/typed-array.ts ***!
                  \**********************************/(pe,q,O)=>{"use strict";function W(B,z,V){return Uint8Array.prototype.slice?B.slice(z,V):new Uint8Array(Array.prototype.slice.call(B,z,V))}O.r(q),O.d(q,{sliceUint8:()=>W})},"./src/utils/vttcue.ts":
/*!*****************************!*\
                  !*** ./src/utils/vttcue.ts ***!
                  \*****************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>W});const W=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var B=["","lr","rl"],z=["start","middle","end","left","right"];function V(R,P){if("string"!=typeof P||!Array.isArray(R))return!1;var D=P.toLowerCase();return!!~R.indexOf(D)&&D}function U(R){return V(z,R)}function N(R){for(var P=arguments.length,D=new Array(P>1?P-1:0),I=1;I<P;I++)D[I-1]=arguments[I];for(var M=1;M<arguments.length;M++){var _=arguments[M];for(var m in _)R[m]=_[m]}return R}function L(R,P,D){var I=this,M={enumerable:!0};I.hasBeenReset=!1;var _="",m=!1,v=R,f=P,b=D,C=null,h="",y=!0,w="auto",E="start",S=50,u="middle",d=50,c="middle";Object.defineProperty(I,"id",N({},M,{get:function(){return _},set:function(x){_=""+x}})),Object.defineProperty(I,"pauseOnExit",N({},M,{get:function(){return m},set:function(x){m=!!x}})),Object.defineProperty(I,"startTime",N({},M,{get:function(){return v},set:function(x){if("number"!=typeof x)throw new TypeError("Start time must be set to a number.");v=x,this.hasBeenReset=!0}})),Object.defineProperty(I,"endTime",N({},M,{get:function(){return f},set:function(x){if("number"!=typeof x)throw new TypeError("End time must be set to a number.");f=x,this.hasBeenReset=!0}})),Object.defineProperty(I,"text",N({},M,{get:function(){return b},set:function(x){b=""+x,this.hasBeenReset=!0}})),Object.defineProperty(I,"region",N({},M,{get:function(){return C},set:function(x){C=x,this.hasBeenReset=!0}})),Object.defineProperty(I,"vertical",N({},M,{get:function(){return h},set:function(x){var T=function Y(R){return V(B,R)}(x);if(!1===T)throw new SyntaxError("An invalid or illegal string was specified.");h=T,this.hasBeenReset=!0}})),Object.defineProperty(I,"snapToLines",N({},M,{get:function(){return y},set:function(x){y=!!x,this.hasBeenReset=!0}})),Object.defineProperty(I,"line",N({},M,{get:function(){return w},set:function(x){if("number"!=typeof x&&"auto"!==x)throw new SyntaxError("An invalid number or illegal string was specified.");w=x,this.hasBeenReset=!0}})),Object.defineProperty(I,"lineAlign",N({},M,{get:function(){return E},set:function(x){var T=U(x);if(!T)throw new SyntaxError("An invalid or illegal string was specified.");E=T,this.hasBeenReset=!0}})),Object.defineProperty(I,"position",N({},M,{get:function(){return S},set:function(x){if(x<0||x>100)throw new Error("Position must be between 0 and 100.");S=x,this.hasBeenReset=!0}})),Object.defineProperty(I,"positionAlign",N({},M,{get:function(){return u},set:function(x){var T=U(x);if(!T)throw new SyntaxError("An invalid or illegal string was specified.");u=T,this.hasBeenReset=!0}})),Object.defineProperty(I,"size",N({},M,{get:function(){return d},set:function(x){if(x<0||x>100)throw new Error("Size must be between 0 and 100.");d=x,this.hasBeenReset=!0}})),Object.defineProperty(I,"align",N({},M,{get:function(){return c},set:function(x){var T=U(x);if(!T)throw new SyntaxError("An invalid or illegal string was specified.");c=T,this.hasBeenReset=!0}})),I.displayState=void 0}return L.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},L}()},"./src/utils/vttparser.ts":
/*!********************************!*\
                  !*** ./src/utils/vttparser.ts ***!
                  \********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{VTTParser:()=>P,fixLineBreaks:()=>R,parseTimeStamp:()=>z});var W=O(
/*! ./vttcue */
"./src/utils/vttcue.ts"),B=function(){function D(){}return D.prototype.decode=function(_,m){if(!_)return"";if("string"!=typeof _)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(_))},D}();function z(D){function I(_,m,v,f){return 3600*(0|_)+60*(0|m)+(0|v)+parseFloat(f||0)}var M=D.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return M?parseFloat(M[2])>59?I(M[2],M[3],0,M[4]):I(M[1],M[2],M[3],M[4]):null}var V=function(){function D(){this.values=Object.create(null)}var I=D.prototype;return I.set=function(_,m){!this.get(_)&&""!==m&&(this.values[_]=m)},I.get=function(_,m,v){return v?this.has(_)?this.values[_]:m[v]:this.has(_)?this.values[_]:m},I.has=function(_){return _ in this.values},I.alt=function(_,m,v){for(var f=0;f<v.length;++f)if(m===v[f]){this.set(_,m);break}},I.integer=function(_,m){/^-?\d+$/.test(m)&&this.set(_,parseInt(m,10))},I.percent=function(_,m){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(m)){var v=parseFloat(m);if(v>=0&&v<=100)return this.set(_,v),!0}return!1},D}();function Y(D,I,M,_){var m=_?D.split(_):[D];for(var v in m)if("string"==typeof m[v]){var f=m[v].split(M);2===f.length&&I(f[0],f[1])}}var U=new W.default(0,0,""),N="middle"===U.align?"middle":"center";function L(D,I,M){var _=D;function m(){var b=z(D);if(null===b)throw new Error("Malformed timestamp: "+_);return D=D.replace(/^[^\sa-zA-Z-]+/,""),b}function f(){D=D.replace(/^\s+/,"")}if(f(),I.startTime=m(),f(),"--\x3e"!==D.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+_);D=D.slice(3),f(),I.endTime=m(),f(),function v(b,C){var h=new V;Y(b,function(E,S){var u;switch(E){case"region":for(var d=M.length-1;d>=0;d--)if(M[d].id===S){h.set(E,M[d].region);break}break;case"vertical":h.alt(E,S,["rl","lr"]);break;case"line":u=S.split(","),h.integer(E,u[0]),h.percent(E,u[0])&&h.set("snapToLines",!1),h.alt(E,u[0],["auto"]),2===u.length&&h.alt("lineAlign",u[1],["start",N,"end"]);break;case"position":u=S.split(","),h.percent(E,u[0]),2===u.length&&h.alt("positionAlign",u[1],["start",N,"end","line-left","line-right","auto"]);break;case"size":h.percent(E,S);break;case"align":h.alt(E,S,["start",N,"end","left","right"])}},/:/,/\s/),C.region=h.get("region",null),C.vertical=h.get("vertical","");var y=h.get("line","auto");"auto"===y&&-1===U.line&&(y=-1),C.line=y,C.lineAlign=h.get("lineAlign","start"),C.snapToLines=h.get("snapToLines",!0),C.size=h.get("size",100),C.align=h.get("align",N);var w=h.get("position","auto");"auto"===w&&50===U.position&&(w="start"===C.align||"left"===C.align?0:"end"===C.align||"right"===C.align?100:50),C.position=w}(D,I)}function R(D){return D.replace(/<br(?: \/)?>/gi,"\n")}var P=function(){function D(){this.state="INITIAL",this.buffer="",this.decoder=new B,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var I=D.prototype;return I.parse=function(_){var m=this;function v(){var w=m.buffer,E=0;for(w=R(w);E<w.length&&"\r"!==w[E]&&"\n"!==w[E];)++E;var S=w.slice(0,E);return"\r"===w[E]&&++E,"\n"===w[E]&&++E,m.buffer=w.slice(E),S}_&&(m.buffer+=m.decoder.decode(_,{stream:!0}));try{var b="";if("INITIAL"===m.state){if(!/\r\n|\n/.test(m.buffer))return this;var C=(b=v()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!C||!C[0])throw new Error("Malformed WebVTT signature.");m.state="HEADER"}for(var h=!1;m.buffer;){if(!/\r\n|\n/.test(m.buffer))return this;switch(h?h=!1:b=v(),m.state){case"HEADER":/:/.test(b)?Y(b,function(E,S){},/:/):b||(m.state="ID");continue;case"NOTE":b||(m.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(b)){m.state="NOTE";break}if(!b)continue;if(m.cue=new W.default(0,0,""),m.state="CUE",-1===b.indexOf("--\x3e")){m.cue.id=b;continue}case"CUE":if(!m.cue){m.state="BADCUE";continue}try{L(b,m.cue,m.regionList)}catch{m.cue=null,m.state="BADCUE";continue}m.state="CUETEXT";continue;case"CUETEXT":var y=-1!==b.indexOf("--\x3e");if(!b||y&&(h=!0)){m.oncue&&m.cue&&m.oncue(m.cue),m.cue=null,m.state="ID";continue}if(null===m.cue)continue;m.cue.text&&(m.cue.text+="\n"),m.cue.text+=b;continue;case"BADCUE":b||(m.state="ID")}}}catch{"CUETEXT"===m.state&&m.cue&&m.oncue&&m.oncue(m.cue),m.cue=null,m.state="INITIAL"===m.state?"BADWEBVTT":"BADCUE"}return this},I.flush=function(){var _=this;try{if((_.cue||"HEADER"===_.state)&&(_.buffer+="\n\n",_.parse()),"INITIAL"===_.state||"BADWEBVTT"===_.state)throw new Error("Malformed WebVTT signature.")}catch(m){_.onparsingerror&&_.onparsingerror(m)}return _.onflush&&_.onflush(),this},D}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
                  !*** ./src/utils/webvtt-parser.ts ***!
                  \************************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{generateCueId:()=>P,parseWebVTT:()=>I});var W=O(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),B=O(
/*! ./vttparser */
"./src/utils/vttparser.ts"),z=O(
/*! ../demux/id3 */
"./src/demux/id3.ts"),V=O(
/*! ./timescale-conversion */
"./src/utils/timescale-conversion.ts"),Y=O(
/*! ../remux/mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),U=/\r\n|\n\r|\n|\r/g,N=function(_,m,v){return void 0===v&&(v=0),_.slice(v,v+m.length)===m},L=function(_){var m=parseInt(_.slice(-3)),v=parseInt(_.slice(-6,-4)),f=parseInt(_.slice(-9,-7)),b=_.length>9?parseInt(_.substring(0,_.indexOf(":"))):0;if(!((0,W.isFiniteNumber)(m)&&(0,W.isFiniteNumber)(v)&&(0,W.isFiniteNumber)(f)&&(0,W.isFiniteNumber)(b)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+_);return m+=1e3*v,(m+=6e4*f)+36e5*b},R=function(_){for(var m=5381,v=_.length;v;)m=33*m^_.charCodeAt(--v);return(m>>>0).toString()};function P(M,_,m){return R(M.toString())+R(_.toString())+R(m)}var D=function(_,m,v){var f=_[m],b=_[f.prevCC];if(!b||!b.new&&f.new)return _.ccOffset=_.presentationOffset=f.start,void(f.new=!1);for(;null!==(C=b)&&void 0!==C&&C.new;){var C;_.ccOffset+=f.start-b.start,f.new=!1,b=_[(f=b).prevCC]}_.presentationOffset=v};function I(M,_,m,v,f,b,C,h){var p,y=new B.VTTParser,w=(0,z.utf8ArrayToStr)(new Uint8Array(M)).trim().replace(U,"\n").split("\n"),E=[],S=(0,V.toMpegTsClockFromTimescale)(_,m),u="00:00.000",d=0,c=0,x=!0;y.oncue=function(T){var k=v[f],H=v.ccOffset,F=(d-S)/9e4;null!=k&&k.new&&(void 0!==c?H=v.ccOffset=k.start:D(v,f,F)),F&&(H=F-v.presentationOffset);var G=T.endTime-T.startTime,K=(0,Y.normalizePts)(9e4*(T.startTime+H-c),9e4*b)/9e4;T.startTime=Math.max(K,0),T.endTime=Math.max(K+G,0);var $=T.text.trim();T.text=decodeURIComponent(encodeURIComponent($)),T.id||(T.id=P(T.startTime,T.endTime,$)),T.endTime>0&&E.push(T)},y.onparsingerror=function(T){p=T},y.onflush=function(){p?h(p):C(E)},w.forEach(function(T){if(x){if(N(T,"X-TIMESTAMP-MAP=")){x=!1,T.slice(16).split(",").forEach(function(k){N(k,"LOCAL:")?u=k.slice(6):N(k,"MPEGTS:")&&(d=parseInt(k.slice(7)))});try{c=L(u)/1e3}catch(k){p=k}return}""===T&&(x=!1)}y.parse(T+"\n")}),y.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
                  !*** ./src/utils/xhr-loader.ts ***!
                  \*********************************/(pe,q,O)=>{"use strict";O.r(q),O.d(q,{default:()=>Y});var W=O(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=O(
/*! ../loader/load-stats */
"./src/loader/load-stats.ts"),z=/^age:\s*[\d.]+\s*$/m;const Y=function(){function U(L){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=L?L.xhrSetup:null,this.stats=new B.LoadStats,this.retryDelay=0}var N=U.prototype;return N.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},N.abortInternal=function(){var R=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),R&&(R.onreadystatechange=null,R.onprogress=null,4!==R.readyState&&(this.stats.aborted=!0,R.abort()))},N.abort=function(){var R;this.abortInternal(),null!==(R=this.callbacks)&&void 0!==R&&R.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},N.load=function(R,P,D){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=R,this.config=P,this.callbacks=D,this.retryDelay=P.retryDelay,this.loadInternal()},N.loadInternal=function(){var R=this.config,P=this.context;if(R){var D=this.loader=new self.XMLHttpRequest,I=this.stats;I.loading.first=0,I.loaded=0;var M=this.xhrSetup;try{if(M)try{M(D,P.url)}catch{D.open("GET",P.url,!0),M(D,P.url)}D.readyState||D.open("GET",P.url,!0);var _=this.context.headers;if(_)for(var m in _)D.setRequestHeader(m,_[m])}catch(v){return void this.callbacks.onError({code:D.status,text:v.message},P,D)}P.rangeEnd&&D.setRequestHeader("Range","bytes="+P.rangeStart+"-"+(P.rangeEnd-1)),D.onreadystatechange=this.readystatechange.bind(this),D.onprogress=this.loadprogress.bind(this),D.responseType=P.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),R.timeout),D.send()}},N.readystatechange=function(){var R=this.context,P=this.loader,D=this.stats;if(R&&P){var I=P.readyState,M=this.config;if(!D.aborted&&I>=2)if(self.clearTimeout(this.requestTimeout),0===D.loading.first&&(D.loading.first=Math.max(self.performance.now(),D.loading.start)),4===I){P.onreadystatechange=null,P.onprogress=null;var _=P.status,m="arraybuffer"===P.responseType;if(_>=200&&_<300&&(m&&P.response||null!==P.responseText)){var v,f;if(D.loading.end=Math.max(self.performance.now(),D.loading.first),f=m?(v=P.response).byteLength:(v=P.responseText).length,D.loaded=D.total=f,!this.callbacks)return;var b=this.callbacks.onProgress;if(b&&b(D,R,v,P),!this.callbacks)return;this.callbacks.onSuccess({url:P.responseURL,data:v},D,R,P)}else D.retry>=M.maxRetry||_>=400&&_<499?(W.logger.error(_+" while loading "+R.url),this.callbacks.onError({code:_,text:P.statusText},R,P)):(W.logger.warn(_+" while loading "+R.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,M.maxRetryDelay),D.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),M.timeout)}},N.loadtimeout=function(){W.logger.warn("timeout while loading "+this.context.url);var R=this.callbacks;R&&(this.abortInternal(),R.onTimeout(this.stats,this.context,this.loader))},N.loadprogress=function(R){var P=this.stats;P.loaded=R.loaded,R.lengthComputable&&(P.total=R.total)},N.getCacheAge=function(){var R=null;if(this.loader&&z.test(this.loader.getAllResponseHeaders())){var P=this.loader.getResponseHeader("age");R=P?parseFloat(P):null}return R},U}()},"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
                  !*** ./node_modules/eventemitter3/index.js ***!
                  \*********************************************/pe=>{"use strict";var q=Object.prototype.hasOwnProperty,O="~";function W(){}function B(U,N,L){this.fn=U,this.context=N,this.once=L||!1}function z(U,N,L,R,P){if("function"!=typeof L)throw new TypeError("The listener must be a function");var D=new B(L,R||U,P),I=O?O+N:N;return U._events[I]?U._events[I].fn?U._events[I]=[U._events[I],D]:U._events[I].push(D):(U._events[I]=D,U._eventsCount++),U}function V(U,N){0==--U._eventsCount?U._events=new W:delete U._events[N]}function Y(){this._events=new W,this._eventsCount=0}Object.create&&(W.prototype=Object.create(null),(new W).__proto__||(O=!1)),Y.prototype.eventNames=function(){var L,R,N=[];if(0===this._eventsCount)return N;for(R in L=this._events)q.call(L,R)&&N.push(O?R.slice(1):R);return Object.getOwnPropertySymbols?N.concat(Object.getOwnPropertySymbols(L)):N},Y.prototype.listeners=function(N){var R=this._events[O?O+N:N];if(!R)return[];if(R.fn)return[R.fn];for(var P=0,D=R.length,I=new Array(D);P<D;P++)I[P]=R[P].fn;return I},Y.prototype.listenerCount=function(N){var R=this._events[O?O+N:N];return R?R.fn?1:R.length:0},Y.prototype.emit=function(N,L,R,P,D,I){var M=O?O+N:N;if(!this._events[M])return!1;var v,f,_=this._events[M],m=arguments.length;if(_.fn){switch(_.once&&this.removeListener(N,_.fn,void 0,!0),m){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,L),!0;case 3:return _.fn.call(_.context,L,R),!0;case 4:return _.fn.call(_.context,L,R,P),!0;case 5:return _.fn.call(_.context,L,R,P,D),!0;case 6:return _.fn.call(_.context,L,R,P,D,I),!0}for(f=1,v=new Array(m-1);f<m;f++)v[f-1]=arguments[f];_.fn.apply(_.context,v)}else{var C,b=_.length;for(f=0;f<b;f++)switch(_[f].once&&this.removeListener(N,_[f].fn,void 0,!0),m){case 1:_[f].fn.call(_[f].context);break;case 2:_[f].fn.call(_[f].context,L);break;case 3:_[f].fn.call(_[f].context,L,R);break;case 4:_[f].fn.call(_[f].context,L,R,P);break;default:if(!v)for(C=1,v=new Array(m-1);C<m;C++)v[C-1]=arguments[C];_[f].fn.apply(_[f].context,v)}}return!0},Y.prototype.on=function(N,L,R){return z(this,N,L,R,!1)},Y.prototype.once=function(N,L,R){return z(this,N,L,R,!0)},Y.prototype.removeListener=function(N,L,R,P){var D=O?O+N:N;if(!this._events[D])return this;if(!L)return V(this,D),this;var I=this._events[D];if(I.fn)I.fn===L&&(!P||I.once)&&(!R||I.context===R)&&V(this,D);else{for(var M=0,_=[],m=I.length;M<m;M++)(I[M].fn!==L||P&&!I[M].once||R&&I[M].context!==R)&&_.push(I[M]);_.length?this._events[D]=1===_.length?_[0]:_:V(this,D)}return this},Y.prototype.removeAllListeners=function(N){var L;return N?this._events[L=O?O+N:N]&&V(this,L):(this._events=new W,this._eventsCount=0),this},Y.prototype.off=Y.prototype.removeListener,Y.prototype.addListener=Y.prototype.on,Y.prefixed=O,Y.EventEmitter=Y,pe.exports=Y},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
                  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
                  \*****************************************************/function(pe){var O,W,B,z,V;O=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,W=/^(?=([^\/?#]*))\1([^]*)$/,B=/(?:\/|^)\.(?=\/)/g,z=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,pe.exports=V={buildAbsoluteURL:function(Y,U,N){if(N=N||{},Y=Y.trim(),!(U=U.trim())){if(!N.alwaysNormalize)return Y;var L=V.parseURL(Y);if(!L)throw new Error("Error trying to parse base URL.");return L.path=V.normalizePath(L.path),V.buildURLFromParts(L)}var R=V.parseURL(U);if(!R)throw new Error("Error trying to parse relative URL.");if(R.scheme)return N.alwaysNormalize?(R.path=V.normalizePath(R.path),V.buildURLFromParts(R)):U;var P=V.parseURL(Y);if(!P)throw new Error("Error trying to parse base URL.");if(!P.netLoc&&P.path&&"/"!==P.path[0]){var D=W.exec(P.path);P.netLoc=D[1],P.path=D[2]}P.netLoc&&!P.path&&(P.path="/");var I={scheme:P.scheme,netLoc:R.netLoc,path:null,params:R.params,query:R.query,fragment:R.fragment};if(!R.netLoc&&(I.netLoc=P.netLoc,"/"!==R.path[0]))if(R.path){var M=P.path,_=M.substring(0,M.lastIndexOf("/")+1)+R.path;I.path=V.normalizePath(_)}else I.path=P.path,R.params||(I.params=P.params,R.query||(I.query=P.query));return null===I.path&&(I.path=N.alwaysNormalize?V.normalizePath(R.path):R.path),V.buildURLFromParts(I)},parseURL:function(Y){var U=O.exec(Y);return U?{scheme:U[1]||"",netLoc:U[2]||"",path:U[3]||"",params:U[4]||"",query:U[5]||"",fragment:U[6]||""}:null},normalizePath:function(Y){for(Y=Y.split("").reverse().join("").replace(B,"");Y.length!==(Y=Y.replace(z,"")).length;);return Y.split("").reverse().join("")},buildURLFromParts:function(Y){return Y.scheme+Y.netLoc+Y.path+Y.params+Y.query+Y.fragment}}}},ys={};function He(pe){var q=ys[pe];if(void 0!==q)return q.exports;var O=ys[pe]={exports:{}};return io[pe].call(O.exports,O,O.exports,He),O.exports}He.m=io,He.n=pe=>{var q=pe&&pe.__esModule?()=>pe.default:()=>pe;return He.d(q,{a:q}),q},He.d=(pe,q)=>{for(var O in q)He.o(q,O)&&!He.o(pe,O)&&Object.defineProperty(pe,O,{enumerable:!0,get:q[O]})},He.o=(pe,q)=>Object.prototype.hasOwnProperty.call(pe,q),He.r=pe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(pe,"__esModule",{value:!0})};var Es=He("./src/hls.ts");return Es.default})(),fa.exports=He())}},fa=>{fa(fa.s=435)}]);